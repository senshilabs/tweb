import{c as s,d as l,H as o}from"./dashboard-CkKUY26q.js";import{C as c}from"./contractHandler-DfXDVtgL.js";import"./_commonjsHelpers-BosuxZz1.js";const d=new o("/claimable","GET"),m=new o("/claim","POST");class p{constructor(){this.isAirdropFallen=!1}async init(){this.airdropLayer=document.getElementById("airdrop-layer"),this.scheduleAirdropFetch();const e=await new c("EQBfMfM9a9j-ulMHZdtSkWFaAdyQU6Cjkyom9eGQAgCX8afW").isChannelBoosting(-0xe94ae4547a);console.log({isBoosting:e})}scheduleAirdropFetch(){setInterval(()=>{this.fetchClaimable()},15e3)}async fetchClaimable(){try{const t=await d.fetchData();this.createAirdropElement()}catch(t){console.error("Error claiming airdrop:",t)}}async onAirdropClick(){try{this.removeAirdropElement();const e={telegram_channel_id:window.location.href.split("#")[1].split("_")[0]},i=await m.fetchData(e);console.log("Airdrop successfully claimed!"),s.addConfetti(),await l.updateBalance()}catch(t){this.removeAirdropElement(),console.error("Error claiming airdrop:",t)}}createAirdropElement(){if(this.isAirdropFallen)return;this.airdropElement=document.createElement("div"),this.airdropElement.classList.add("chute");const t=document.createElement("div");t.classList.add("coin"),this.airdropElement.appendChild(t),this.airdropElement.addEventListener("click",this.onAirdropClick.bind(this)),this.animateAirdropElement(this.airdropElement),this.airdropLayer.appendChild(this.airdropElement),this.isAirdropFallen=!0}removeAirdropElement(){this.airdropElement.remove(),this.airdropElement=null,this.isAirdropFallen=!1}animateAirdropElement(t){function e(){return Math.floor(Math.random()*(document.documentElement.clientWidth*.8))}const i=e(),a=e();t.style.cssText=`
            width: 50px;
            height: 50px;
            position: absolute;
            top: 0;
            left: ${i}px;
        `;const r=1e4,n=t.animate([{top:"-100px"},{top:`${document.documentElement.clientHeight}px`}],{duration:r,easing:"linear",fill:"forwards"});t.animate([{left:`${i}px`},{left:`${a}px`}],{duration:r,easing:"ease-in-out",fill:"forwards"}),n.onfinish=()=>{this.removeAirdropElement()}}}const A=new p;export{p as AirdropManager,A as default};
//# sourceMappingURL=airdrop-Cm0gAraI.js.map
