function bufferConcats(...d){const e=d.reduce((s,a)=>s+(a.byteLength||a.length),0),t=new Uint8Array(e);let r=0;return d.forEach(s=>{t.set(s instanceof ArrayBuffer?new Uint8Array(s):s,r),r+=s.byteLength||s.length}),t}Uint8Array.prototype.concat=function(...d){return bufferConcats(this,...d)};Uint8Array.prototype.toJSON=function(){return[...this]};Promise.prototype.finally=Promise.prototype.finally||function(d){const e=t=>Promise.resolve(d()).then(t);return this.then(t=>e(()=>t),t=>e(()=>Promise.reject(t)))};function isAnyChat(d){return+d<0}function isUser(d){return+d>=0}String.prototype.toUserId=function(){return(+this).toUserId()};String.prototype.toChatId=function(){return(+this).toChatId()};String.prototype.toPeerId=function(d){return(+this).toPeerId(d)};String.prototype.isPeerId=function(){return/^[\d-]/.test(this.toString())};Number.prototype.toUserId=function(){return+this};Number.prototype.toChatId=function(){return Math.abs(this)};Number.prototype.toPeerId=function(d){return d===void 0?+this:d?-Math.abs(this):+this};Number.prototype.isPeerId=function(){return!0};[["isUser",isUser],["isAnyChat",isAnyChat]].forEach(d=>{const e=Array.isArray(d)?d[0]:d,t=Array.isArray(d)?d[1]:d;String.prototype[e]=function(){return t.call(null,this.toString())},Number.prototype[e]=function(){return t.call(null,+this)}});const Modes={test:location.search.indexOf("test=1")>0,debug:location.search.indexOf("debug=1")>0,http:!1,ssl:!0,asServiceWorker:!1,transport:"websocket",noSharedWorker:location.search.indexOf("noSharedWorker=1")>0,multipleTransports:!0};(Modes.http=location.search.indexOf("http=1")>0)&&(Modes.multipleTransports=!1);Modes.multipleTransports&&(Modes.http=!0);Modes.http&&(Modes.transport="https");const DEBUG=Modes.debug,ctx$1=typeof window<"u"?window:self,MOUNT_CLASS_TO=ctx$1,tabId=Date.now()%Math.random()*1e8|0,ctx=typeof window<"u"?window:self;function indexOfAndSplice(d,e){const t=d.indexOf(e);return(t===-1?void 0:d.splice(t,1))?.[0]}const IS_SERVICE_WORKER=typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope,IS_WEB_WORKER=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&!IS_SERVICE_WORKER,IS_WORKER=IS_WEB_WORKER||IS_SERVICE_WORKER,getWindowClients=()=>self.clients.matchAll({includeUncontrolled:!1,type:"window"}),postMessage=(d,...e)=>{try{d.postMessage(...e)}catch(t){console.error("[worker] postMessage error:",t,e)}},notifyServiceWorker=(d,...e)=>{getWindowClients().then(t=>{t.length&&t.slice(d?0:-1).forEach(r=>{postMessage(r,...e)})})},notifyWorker=(...d)=>{postMessage(self,...d)},noop$3=()=>{};IS_SERVICE_WORKER&&notifyServiceWorker.bind(null,!1);IS_SERVICE_WORKER&&notifyServiceWorker.bind(null,!0);class EventListenerBase{constructor(e){this._constructor(e)}_constructor(e){this.reuseResults=e,this.listeners={},this.listenerResults={}}addEventListener(e,t,r){var a;const s={callback:t,options:r};if(((a=this.listeners)[e]??(a[e]=new Set)).add(s),this.listenerResults.hasOwnProperty(e)&&(t(...this.listenerResults[e]),r?.once)){this.listeners[e].delete(s);return}}addMultipleEventsListeners(e){for(const t in e)this.addEventListener(t,e[t])}removeEventListener(e,t,r){if(this.listeners[e]){for(const s of this.listeners[e])if(s.callback===t){this.listeners[e].delete(s);break}}}invokeListenerCallback(e,t,...r){let s,a;try{s=t.callback(...r)}catch(n){a=n}if(t.options?.once&&this.removeEventListener(e,t.callback),a)throw a;return s}_dispatchEvent(e,t,...r){this.reuseResults&&(this.listenerResults[e]=r);const s=t&&[],a=this.listeners[e];if(a)for(const n of a){const o=this.invokeListenerCallback(e,n,...r);s&&s.push(o)}return s}dispatchResultableEvent(e,...t){return this._dispatchEvent(e,!0,...t)}dispatchEvent(e,...t){this._dispatchEvent(e,!1,...t)}cleanup(){this.listeners={},this.listenerResults={}}}const CACHED_ERRORS={};function makeError(d){return CACHED_ERRORS[d]??(CACHED_ERRORS[d]={type:d})}const USER_AGENT=navigator?navigator.userAgent:null;navigator.userAgent.search(/OS X|iPhone|iPad|iOS/i);navigator.userAgent.toLowerCase().indexOf("android");(()=>{try{return+navigator.userAgent.match(/Chrom(?:e|ium)\/(.+?)(?:\s|\.)/)[1]}catch{}})();const IS_SAFARI="safari"in ctx||!!(USER_AGENT&&(/\b(iPad|iPhone|iPod)\b/.test(USER_AGENT)||USER_AGENT.match("Safari")&&!USER_AGENT.match("Chrome"))),IS_FIREFOX=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;(navigator.maxTouchPoints===void 0||navigator.maxTouchPoints>0)&&navigator.userAgent.search(/iOS|iPhone OS|Android|BlackBerry|BB10|Series ?[64]0|J2ME|MIDP|opera mini|opera mobi|mobi.+Gecko|Windows Phone/i)!=-1;const _logTimer=Date.now();function dT(){return"["+((Date.now()-_logTimer)/1e3).toFixed(3)+"]"}var LogTypes=(d=>(d[d.None=0]="None",d[d.Error=1]="Error",d[d.Warn=2]="Warn",d[d.Log=4]="Log",d[d.Debug=8]="Debug",d))(LogTypes||{});const LOG_LEVELS=[0,1,2,4,8],IS_WEBKIT=IS_SAFARI||IS_FIREFOX,STYLES_SUPPORTED=!IS_WEBKIT,LOGGER_STYLES={reset:"\x1B[0m",bright:"\x1B[1m",dim:"\x1B[2m",underscore:"\x1B[4m",blink:"\x1B[5m",reverse:"\x1B[7m",hidden:"\x1B[8m",fg:{black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"},bg:{black:"\x1B[40m",red:"\x1B[41m",green:"\x1B[42m",yellow:"\x1B[43m",blue:"\x1B[44m",magenta:"\x1B[45m",cyan:"\x1B[46m",white:"\x1B[47m"}},methods=[["debug",8],["info",4],["warn",2],["error",1],["assert",1],["trace",4],["group",4],["groupCollapsed",4],["groupEnd",4]];function logger(d,e=7,t=!1,r=""){let s;!DEBUG&&!t&&(e=1),STYLES_SUPPORTED?r||(IS_SERVICE_WORKER?r=LOGGER_STYLES.fg.yellow:IS_WEB_WORKER&&(r=LOGGER_STYLES.fg.cyan)):r="";const a=r;r?r=`%s ${r}%s`:r="%s";const n=function(...p){return e&4&&console.log(r,dT(),d,...p)};methods.forEach(([p,c])=>{n[p]=function(...f){return e&c&&console[p](r,dT(),d,...f)}}),n.setPrefix=function(p){s=p,d="["+p+"]"},n.setPrefix(d),n.setLevel=function(p){e=LOG_LEVELS.slice(0,p+1).reduce((c,f)=>c|f,0)};const o={};return n.bindPrefix=function(p,c=e){return o[p]??(o[p]=logger(`${s}] ${STYLES_SUPPORTED&&a?LOGGER_STYLES.reset:""}[${p}`,c,t,a))},n}const USE_LOCKS=!0;class SuperMessagePort extends EventListenerBase{constructor(e){super(!1),this.logSuffix=e,this.onMessage=t=>{const r=t.data,s=t.source||t.currentTarget;this.processTaskMap[r.type](r,s,t)},this.processResultTask=t=>{const{taskId:r,result:s,error:a}=t.payload,n=this.awaiting[r];n&&(this.debug&&this.log.debug("done",n.taskType,s,a),"error"in t.payload?n.reject(a):n.resolve(s),delete this.awaiting[r])},this.processAckTask=t=>{const r=t.payload,s=this.awaiting[r.taskId];if(!s)return;const a=s.resolve,n={cached:r.cached,result:r.cached?"result"in r?Promise.resolve(r.result):Promise.reject(r.error):new Promise((o,p)=>{s.resolve=o,s.reject=p})};a(n),r.cached&&delete this.awaiting[r.taskId]},this.processPingTask=(t,r,s)=>{this.pushTask(this.createTask("pong",void 0),s.source)},this.processPongTask=(t,r,s)=>{const a=this.pingResolves.get(r);a&&(this.pingResolves.delete(r),a())},this.processCloseTask=(t,r,s)=>{this.detachPort(r)},this.processBatchTask=(t,r,s)=>{const a={data:s.data,source:s.source,currentTarget:s.currentTarget};t.payload.forEach(n=>{a.data=n,this.onMessage(a)})},this.processLockTask=(t,r,s)=>{const a=t.payload;this.requestedLocks.has(a)||(this.requestedLocks.set(a,r),navigator.locks.request(a,()=>{this.processCloseTask(void 0,r,void 0),this.requestedLocks.delete(a)}))},this.processInvokeTask=async(t,r,s)=>{const a=t.id,n=t.payload;let o,p,c;n.void||(o={taskId:a},p=this.createTask("result",o)),n.withAck&&(c=this.createTask("ack",{taskId:a,cached:!0}));let f;try{const l=this.listeners[n.type];if(!l?.size)throw new Error("no listener");const u=l.values().next().value;let g=this.invokeListenerCallback(n.type,u,n.payload,r,s);if(n.void)return;if(f=g instanceof Promise,c){const y=!f;if(c.payload.cached=y,y&&(c.payload.result=g),this.pushTask(c,r),y)return}f&&(g=await g),o.result=g}catch(l){if(this.log.error("worker task error:",l,t),n.void)return;if(c&&c.payload.cached){c.payload.error=l,this.pushTask(c,r);return}o.error=l}this.pushTask(p,r)},this.listenPorts=[],this.sendPorts=[],this.pingResolves=new Map,this.taskId=0,this.awaiting={},this.pending=new Map,this.log=logger("MP"+(e?"-"+e:"")),this.debug=DEBUG,this.heldLocks=new Map,this.requestedLocks=new Map,this.processTaskMap={result:this.processResultTask,ack:this.processAckTask,invoke:this.processInvokeTask,ping:this.processPingTask,pong:this.processPongTask,close:this.processCloseTask,lock:this.processLockTask,batch:this.processBatchTask}}setOnPortDisconnect(e){this.onPortDisconnect=e}attachPort(e){this.attachListenPort(e),this.attachSendPort(e)}attachListenPort(e){this.listenPorts.push(e),e.addEventListener("message",this.onMessage)}attachSendPort(e){if(this.log.warn("attaching send port"),e.start?.(),this.sendPorts.push(e),typeof window<"u"&&USE_LOCKS)if("locks"in navigator){const t=["lock",tabId,this.logSuffix||"",Math.random()*2147483647|0].join("-");this.log.warn("created lock",t);const r=new Promise(s=>this.heldLocks.set(e,{resolve:s,id:t})).then(()=>this.heldLocks.delete(e));navigator.locks.request(t,()=>(this.resendLockTask(e),r))}else window.addEventListener("beforeunload",()=>{const t=this.createTask("close",void 0);this.postMessage(void 0,t)});this.releasePending()}resendLockTask(e){const t=this.heldLocks.get(e);t&&this.pushTask(this.createTask("lock",t.id),e)}detachPort(e){this.log.warn("disconnecting port"),indexOfAndSplice(this.listenPorts,e),indexOfAndSplice(this.sendPorts,e),e.removeEventListener?.("message",this.onMessage),e.close?.(),this.onPortDisconnect?.(e),this.heldLocks.get(e)?.resolve();const r=makeError("PORT_DISCONNECTED");for(const s in this.awaiting){const a=this.awaiting[s];a.port===e&&(a.reject(r),delete this.awaiting[s])}}postMessage(e,t){(Array.isArray(e)?e:e?[e]:this.sendPorts).forEach(s=>{s.postMessage(t,t.transfer)})}async releasePending(){this.releasingPending||(this.releasingPending=!0,await Promise.resolve(),this.debug&&this.log.debug("releasing tasks, length:",this.pending.size),this.pending.forEach((e,t)=>{let r=e;{let a;r=[],e.forEach(n=>{n.transfer?(a=void 0,r.push(n)):(a||(a=this.createTask("batch",[]),r.push(a)),a.payload.push(n))})}const s=t?[t]:this.sendPorts;s.length&&(r.forEach(a=>{try{this.postMessage(s,a)}catch(n){this.log.error("postMessage error:",n,a,s)}}),this.pending.delete(t))}),this.debug&&this.log.debug("released tasks"),this.releasingPending=!1)}createTask(e,t,r){return{type:e,payload:t,id:this.taskId++,transfer:r}}createInvokeTask(e,t,r,s,a){return this.createTask("invoke",{type:e,payload:t,withAck:r,void:s},a)}pushTask(e,t){let r=this.pending.get(t);r||this.pending.set(t,r=[]),r.push(e),this.releasePending()}invokeVoid(e,t,r,s){const a=this.createInvokeTask(e,t,void 0,!0,s);this.pushTask(a,r)}invoke(e,t,r,s,a){this.debug&&this.log.debug("start",e,t);let n;const o=new Promise((p,c)=>{n=this.createInvokeTask(e,t,r,void 0,a),this.awaiting[n.id]={resolve:p,reject:c,taskType:e,port:s},this.pushTask(n,s)});if(IS_WORKER){o.finally(()=>{clearInterval(p)});const p=ctx.setInterval(()=>{this.log.error("task still has no result",n,s)},6e4)}return o}invokeExceptSource(e,t,r){const s=this.sendPorts.slice();indexOfAndSplice(s,r),s.forEach(a=>{this.invokeVoid(e,t,a)})}}class CryptoMessagePort extends SuperMessagePort{constructor(){super("CRYPTO"),this.lastIndex=-1}invokeCryptoNew({method:e,args:t,transfer:r}){const s={method:e,args:t},a=this.listeners.invoke;if(a?.size){let o=a.values().next().value.callback(s);return!IS_WORKER&&!(o instanceof Promise)&&(o=Promise.resolve(o)),o}const n=e==="aes-encrypt"||e==="aes-decrypt"?this.lastIndex=(this.lastIndex+1)%this.sendPorts.length:0;return this.invoke("invoke",s,void 0,this.sendPorts[n],r)}invokeCrypto(e,...t){return this.invokeCryptoNew({method:e,args:t})}}const cryptoMessagePort=new CryptoMessagePort;MOUNT_CLASS_TO&&(MOUNT_CLASS_TO.cryptoMessagePort=cryptoMessagePort);let environment;function getEnvironment(){return environment}function setEnvironment(d){return environment=d}const NULL_PEER_ID=0,REPLIES_PEER_ID=1271266957,REPLIES_HIDDEN_CHANNEL_ID=777,HIDDEN_PEER_ID=2666e3,SERVICE_PEER_ID=777e3,MUTE_UNTIL=2147483647,MAX_FILE_SAVE_SIZE=20*1024*1024,THUMB_TYPE_FULL="",ATTACH_MENU_BOT_ICON_NAME="default_static",MESSAGE_ID_OFFSET=4294967296,GENERAL_TOPIC_ID=MESSAGE_ID_OFFSET+1,CAN_HIDE_TOPIC=!1,T_ME_PREFIXES=new Set(["web","k","z","a"]),FOLDER_ID_ALL=0,FOLDER_ID_ARCHIVE=1,REAL_FOLDERS=new Set([FOLDER_ID_ALL,FOLDER_ID_ARCHIVE]),START_LOCAL_ID=Math.max(...Array.from(REAL_FOLDERS))+1;class MTProtoMessagePort extends SuperMessagePort{constructor(){super("MTPROTO"),MTProtoMessagePort.INSTANCE=this,MOUNT_CLASS_TO&&(MOUNT_CLASS_TO.mtprotoMessagePort=this)}static getInstance(){return this.INSTANCE}}class RootScope extends EventListenerBase{constructor(){super(),this.myId=NULL_PEER_ID,this.connectionStatus={},this.premium=!1,this.addEventListener("user_auth",({id:e})=>{this.myId=e.toPeerId()}),this.addEventListener("premium_toggle_private",({isNew:e,isPremium:t})=>{this.premium=t,e||this.dispatchEventSingle("premium_toggle",t)}),this.addEventListener("connection_status_change",e=>{this.connectionStatus[e.name]=e}),this.dispatchEvent=(e,...t)=>{super.dispatchEvent(e,...t),MTProtoMessagePort.getInstance().invokeVoid("event",{name:e,args:t})},IS_WORKER||this.addEventListener("settings_updated",({settings:e})=>{this.settings=e})}getConnectionStatus(){return this.connectionStatus}getPremium(){return this.premium}dispatchEventSingle(...e){super.dispatchEvent(...e)}}const rootScope$1=new RootScope;MOUNT_CLASS_TO.rootScope=rootScope$1;function noop$2(){}const deferredHelper={isFulfilled:!1,isRejected:!1,notify:()=>{},notifyAll:function(...d){this.lastNotify=d,this.listeners?.forEach(e=>e(...d))},addNotifyListener:function(d){this.lastNotify&&d(...this.lastNotify),(this.listeners??(this.listeners=[])).push(d)},resolve:function(d){this.isFulfilled||this.isRejected||(this.isFulfilled=!0,this._resolve(d),this.onFinish())},reject:function(...d){this.isRejected||this.isFulfilled||(this.isRejected=!0,this._reject(...d),this.onFinish())},onFinish:function(){this.notify=this.notifyAll=this.lastNotify=null,this.listeners&&(this.listeners.length=0),this.cancel&&(this.cancel=noop$2)}};function deferredPromise(){let d,e;const t=new Promise((r,s)=>{d=r,e=s});return Object.assign(t,deferredHelper),t._resolve=d,t._reject=e,t}self.deferredPromise=deferredPromise;function throttle(d,e,t=!0){let r=null,s,a;const n=()=>{clearInterval(r),r=null},o=(...p)=>{s=!0,a=p,r||(t&&(s=!1,d(...a)),r=setInterval(()=>{if(!s){n();return}s=!1,d(...a)},e))};return o.clear=n,o}function safeAssign(d,e){if(e)for(const t in e)e[t]!==void 0&&(d[t]=e[t]);return d}const lt=class lt{constructor(e){safeAssign(this,e),Modes.test&&(this.name+="_test"),this.storageIsAvailable=!0,this.log=logger(["IDB",e.name].join("-")),this.log("constructor"),this.openDatabase(!0),lt.INSTANCES.push(this)}isAvailable(){return this.storageIsAvailable}openDatabase(e=!1){if(this.openDbPromise&&!e)return this.openDbPromise;const t=(n,o)=>{const p=Array.from(n.indexNames);for(const c of p)n.deleteIndex(c);if(o.indexes?.length)for(const c of o.indexes)n.indexNames.contains(c.indexName)||n.createIndex(c.indexName,c.keyPath,c.objectParameters)},r=(n,o)=>{const p=n.createObjectStore(o.name);t(p,o)};try{var s=indexedDB.open(this.name,this.version);if(!s)return Promise.reject()}catch(n){return this.log.error("error opening db",n.message),this.storageIsAvailable=!1,Promise.reject(n)}let a=!1;return setTimeout(()=>{a||s.onerror(makeError("IDB_CREATE_TIMEOUT"))},3e3),this.openDbPromise=new Promise((n,o)=>{s.onsuccess=p=>{a=!0;const c=s.result;let f=!1;this.log("Opened"),c.onerror=l=>{this.storageIsAvailable=!1,this.log.error("Error creating/accessing IndexedDB database",l),o(l)},c.onclose=l=>{this.log.error("closed:",l),!f&&this.openDatabase()},c.onabort=l=>{this.log.error("abort:",l);const u=l.target;this.openDatabase(f=!0),u.onerror&&u.onerror(l),c.close()},c.onversionchange=l=>{this.log.error("onversionchange, lol?")},n(this.db=c)},s.onerror=p=>{a=!0,this.storageIsAvailable=!1,this.log.error("Error creating/accessing IndexedDB database",p),o(p)},s.onupgradeneeded=p=>{a=!0,this.log.warn("performing idb upgrade from",p.oldVersion,"to",p.newVersion);const c=p.target,f=c.result;this.stores.forEach(l=>{if(!f.objectStoreNames.contains(l.name))r(f,l);else{const g=c.transaction.objectStore(l.name);t(g,l)}})}})}static create(e){return this.INSTANCES.find(t=>t.name===e.name)??new lt(e)}static closeDatabases(e){this.INSTANCES.forEach(t=>{if(e&&e===t)return;const r=t.db;r&&(r.onclose=()=>{},r.close())})}};lt.INSTANCES=[];let IDB=lt;class IDBStorage{constructor(e,t){this.storeName=t,this.log=logger(["IDB",e.name,t].join("-")),this.idb=IDB.create(e)}delete(e,t){const r=Array.isArray(e);return r||(e=[].concat(e)),this.getObjectStore("readwrite",s=>{const a=e.map(n=>s.delete(n));return r?a:a[0]},"",t)}clear(e){return this.getObjectStore("readwrite",t=>t.clear(),"",e)}save(e,t,r){const s=Array.isArray(e);return s||(e=[].concat(e),t=[].concat(t)),this.getObjectStore("readwrite",a=>{const n=e.map((o,p)=>a.put(t[p],o));return s?n:n[0]},"",r)}get(e,t){const r=Array.isArray(e);if(r){if(!e.length)return Promise.resolve([])}else{if(!e)return;e=[].concat(e)}return this.getObjectStore("readonly",s=>{const a=e.map(n=>s.get(n));return r?a:a[0]},"",t)}getObjectStore(e,t,r,s=this.storeName){let a;return r&&(a=performance.now(),this.log(r+": start")),this.idb.openDatabase().then(n=>new Promise((o,p)=>{const c=n.transaction([s],e,{durability:"relaxed"}),f=()=>{clearTimeout(g),p(c.error)},l=()=>{clearTimeout(g),r&&this.log(r+": end",performance.now()-a);const T=I.map(O=>O.result);o(b?T:T[0])};c.onerror=f;const u=e==="readwrite";u&&(c.oncomplete=()=>l());const g=setTimeout(()=>{this.log.error("transaction not finished",c,r)},1e4),y=t(c.objectStore(s)),b=Array.isArray(y),I=b?y:[].concat(y);if(u)return;const S=I.length;let A=S;const k=()=>{c.error||--A||l()};for(let T=0;T<S;++T){const O=I[T];O.onerror=f,O.onsuccess=k}}))}getAll(e){return this.getObjectStore("readonly",t=>t.getAll(),"",e)}}function noop$1(){}const THROTTLE_TIME=16,dt=class dt{constructor(e,t){this.db=e,this.storeName=t,this.cache={},this.getPromises=new Map,this.keysToSet=new Set,this.saveDeferred=deferredPromise(),this.keysToDelete=new Set,this.deleteDeferred=deferredPromise(),this.storage=new IDBStorage(e,t),dt.STORAGES.length?this.useStorage=dt.STORAGES[0].useStorage:this.useStorage=!0,this.savingFreezed=!1,dt.STORAGES.push(this),this.saveThrottled=throttle(async()=>{const r=this.saveDeferred;this.saveDeferred=deferredPromise();const s=this.keysToSet;if(s.size){const a=Array.from(s.values());s.clear();const n=a.map(o=>this.cache[o]);try{await this.storage.save(a,n)}catch(o){console.error("[AS]: set error:",o,a,n)}}r.resolve(),s.size&&this.saveThrottled()},THROTTLE_TIME,!1),this.deleteThrottled=throttle(async()=>{const r=this.deleteDeferred;this.deleteDeferred=deferredPromise();const s=this.keysToDelete;if(s.size){const a=Array.from(s.values());s.clear();try{await this.storage.delete(a)}catch(n){console.error("[AS]: delete error:",n,a)}}r.resolve(),s.size&&this.deleteThrottled()},THROTTLE_TIME,!1),this.getThrottled=throttle(async()=>{const r=Array.from(this.getPromises.keys());this.storage.get(r).then(s=>{for(let a=0,n=r.length;a<n;++a){const o=r[a],p=this.getPromises.get(o);p&&(p.resolve(this.cache[o]=s[a]),this.getPromises.delete(o))}},s=>{new Set(["NO_ENTRY_FOUND","STORAGE_OFFLINE"]).has(s.type)||(this.useStorage=!1,console.error("[AS]: get error:",s,r,t));for(let n=0,o=r.length;n<o;++n){const p=r[n],c=this.getPromises.get(p);c&&(c.resolve(void 0),this.getPromises.delete(p))}}).finally(()=>{this.getPromises.size&&this.getThrottled()})},THROTTLE_TIME,!1)}isAvailable(){return this.useStorage}getCache(){return this.cache}getFromCache(e){return this.cache[e]}setToCache(e,t){return this.cache[e]=t}async get(e,t=!0){if(this.cache.hasOwnProperty(e)&&t)return this.getFromCache(e);if(this.useStorage){const r=this.getPromises.get(e);if(r)return r;const s=deferredPromise();return this.getPromises.set(e,s),this.getThrottled(),s}}getAll(){return this.storage.getAll().catch(()=>[])}set(e,t=!1){const r=this.useStorage&&!t&&!this.savingFreezed;for(const s in e)if(e.hasOwnProperty(s)){const a=e[s];this.setToCache(s,a),r&&(this.keysToSet.add(s),this.keysToDelete.delete(s),this.saveThrottled())}return r?this.saveDeferred:Promise.resolve()}delete(e,t=!1){return e=""+e,t||delete this.cache[e],this.useStorage&&(this.keysToSet.delete(e),this.keysToDelete.add(e),this.deleteThrottled()),this.useStorage?this.deleteDeferred:Promise.resolve()}clear(e=!1){if(!e)for(const t in this.cache)delete this.cache[t];return this.storage.clear().catch(noop$1)}static toggleStorage(e,t){return Promise.all(this.STORAGES.map(r=>{if(r.useStorage=e,!(!IS_WORKER||!t))return e?r.set(r.cache):(r.keysToSet.clear(),r.keysToDelete.clear(),r.getPromises.forEach(s=>s.resolve(void 0)),r.getPromises.clear(),r.clear(!0))})).catch(noop$1)}static freezeSaving(e,t){this.STORAGES.forEach(r=>r.savingFreezed=!0);try{e()}catch(r){console.error("freezeSaving callback error:",r)}this.STORAGES.forEach(r=>r.savingFreezed=!1)}};dt.STORAGES=[];let AppStorage=dt;MOUNT_CLASS_TO&&(MOUNT_CLASS_TO.AppStorage=AppStorage);const DATABASE_STATE={name:"tweb",version:7,stores:[{name:"session"},{name:"stickerSets"},{name:"users"},{name:"chats"},{name:"dialogs"},{name:"messages"}]};class StateStorage extends AppStorage{constructor(){super(DATABASE_STATE,"session")}}const stateStorage=new StateStorage;MOUNT_CLASS_TO.stateStorage=stateStorage;const DEEP_PATH_JOINER="";function joinDeepPath(...d){return d.join(DEEP_PATH_JOINER)}function setDeepProperty(d,e,t,r){const s=e.split(DEEP_PATH_JOINER),a=s.length;let n=d;for(let p=0;p<a-1;++p){const c=s[p];n=n[c]??(n[c]={})}const o=s[a-1];t===void 0&&r?delete n[o]:n[o]=t}class AppStateManager{constructor(){this.state={},this.storage=stateStorage}getState(){return Promise.resolve(this.state)}setByKey(e,t){setDeepProperty(this.state,e,t);const r=e.split(DEEP_PATH_JOINER)[0];return r==="settings"&&rootScope$1.dispatchEvent("settings_updated",{key:e,value:t,settings:this.state.settings}),this.pushToState(r,this.state[r])}pushToState(e,t,r=!0,s){return r&&(this.state[e]=t),this.setKeyValueToStorage(e,t,s)}setKeyValueToStorage(e,t=this.state[e],r){return MTProtoMessagePort.getInstance().invokeVoid("mirror",{name:"state",key:e,value:t}),this.storage.set({[e]:t},r)}}const appStateManager=new AppStateManager,MAIN_DOMAINS=["web.telegram.org","webk.telegram.org"],threads=Math.min(4,navigator.hardwareConcurrency??4),App={id:1025907,hash:"452b0359b988148995f22ff0f4229750",version:"2.1.0",versionFull:"2.1.0 (511)",build:511,langPackVersion:"5.1.9",langPack:"webk",langPackCode:"en",domains:MAIN_DOMAINS,baseDcId:2,isMainDomain:MAIN_DOMAINS.includes(location.hostname),suffix:"K",threads,cryptoWorkers:threads};App.isMainDomain&&(App.id=2496,App.hash="8da85b0d5bfe62527e5b244c209159c3");function pause(d){return new Promise(e=>{setTimeout(e,d)})}class HTTP{constructor(e,t,r){this.dcId=e,this.url=t,this.pending=[],this.debug=Modes.debug&&!1;let s=LogTypes.Error|LogTypes.Log;this.debug&&(s|=LogTypes.Debug),this.log=logger(`HTTP-${e}`+r,s),this.log("constructor"),this.connected=!1}_send(e,t){this.debug&&this.log.debug("-> body length to send:",e.length);const r=new AbortController,s=setTimeout(()=>r.abort(),3e4);return fetch(this.url,{method:"POST",body:e,mode:t,signal:r.signal}).then(async a=>{if(a.status!==200&&!t)throw a.arrayBuffer().then(o=>{this.log.error("not 200",new TextDecoder("utf-8").decode(new Uint8Array(o)))}),a;this.setConnected(!0);const n=await a.arrayBuffer();return new Uint8Array(n)}).catch(a=>{throw this.setConnected(!1),a}).finally(()=>{clearTimeout(s)})}setConnected(e){this.connected===e||this.destroyed||(this.connected=e,Modes.multipleTransports&&transportController$1.setTransportValue("https",e))}destroy(){this.setConnected(!1),this.destroyed=!0,this.pending.forEach(e=>e.reject()),this.pending.length=0}send(e){if(this.networker)return this._send(e);{const t=new Promise((r,s)=>{this.pending.push({resolve:r,reject:s,body:e})});return this.releasePending(),t}}async releasePending(){if(!this.releasing){this.releasing=!0;for(let e=0;e<this.pending.length;++e){const t=this.pending[e],{body:r,resolve:s}=t;try{const a=await this._send(r);s(a),this.pending.splice(e,1)}catch(a){this.log.error("Send plain request error:",a),await pause(5e3)}--e}this.releasing=!1}}}class Socket extends EventListenerBase{constructor(e,t,r){super(),this.dcId=e,this.url=t,this.debug=Modes.debug&&!1,this.handleOpen=()=>{this.log("opened"),this.debug&&this.log.debug("sending init packet"),this.dispatchEvent("open")},this.handleError=a=>{this.log.error("handleError",a),this.close()},this.handleClose=a=>{this.log("closed",a),this.removeListeners(),this.dispatchEvent("close")},this.handleMessage=a=>{this.debug&&this.log.debug("<-","handleMessage",a.data.byteLength),this.dispatchEvent("message",a.data)},this.send=a=>{this.debug&&this.log.debug("-> body length to send:",a.length),this.ws.send(a)};let s=LogTypes.Error|LogTypes.Log;return this.debug&&(s|=LogTypes.Debug),this.log=logger(`WS-${e}`+r,s),this.log("constructor"),this.connect(),this}removeListeners(){this.ws&&(this.ws.removeEventListener("open",this.handleOpen),this.ws.removeEventListener("close",this.handleClose),this.ws.removeEventListener("error",this.handleError),this.ws.removeEventListener("message",this.handleMessage),this.ws=void 0)}connect(){this.ws=new WebSocket(this.url,"binary"),this.ws.binaryType="arraybuffer",this.ws.addEventListener("open",this.handleOpen),this.ws.addEventListener("close",this.handleClose),this.ws.addEventListener("error",this.handleError),this.ws.addEventListener("message",this.handleMessage)}close(){if(this.ws){this.log("close execution");try{this.ws.close()}catch{}this.handleClose()}}}function randomize(d){if(crypto&&"getRandomValues"in crypto)crypto.getRandomValues(d);else throw new Error("NO_SECURE_RANDOM");return d}class Obfuscation{constructor(){this._process=(e,t)=>cryptoMessagePort.invokeCryptoNew({method:"aes-ctr-process",args:[{id:this.id,data:e,operation:t}],transfer:[e.buffer]})}async init(e){this.idPromise!==void 0&&this.release();const t=new Uint8Array(64);for(randomize(t);;){const f=t[3]<<24|t[2]<<16|t[1]<<8|t[0],l=t[7]<<24|t[6]<<16|t[5]<<8|t[4];if(t[0]!==239&&f!==1145128264&&f!==1414745936&&f!==542393671&&f!==1230262351&&f!==4008636142&&f!==3722304989&&l!==0)break;randomize(t)}const r=t.slice().reverse(),s=t.slice(8,40),a=t.slice(40,56),n=r.slice(8,40),o=r.slice(40,56),p=this.idPromise=cryptoMessagePort.invokeCrypto("aes-ctr-prepare",{encKey:s,encIv:a,decKey:n,decIv:o});this.process=async(f,l)=>(await p,this._process(f,l)),this.id=await p,this.process=this._process,t.set(e.obfuscateTag,56);const c=await this.encode(t.slice());return t.set(c.slice(56,64),56),t}encode(e){return this.process(e,"encrypt")}decode(e){return this.process(e,"decrypt")}async release(){const e=this.idPromise;if(e===void 0)return;this.id=void 0,this.idPromise=void 0;const t=await e;cryptoMessagePort.invokeCrypto("aes-ctr-destroy",t)}destroy(){this.release()}}class AbridgedPacketCodec{constructor(){this.tag=239,this.obfuscateTag=new Uint8Array([this.tag,this.tag,this.tag,this.tag])}encodePacket(e){const t=e.byteLength>>2;let r;return t<127?r=new Uint8Array([t]):r=new Uint8Array([127,t&255,t>>8&255,t>>16&255]),r.concat(e)}readPacket(e){let t=e[0];return t>=127?(t=e[1]|e[2]<<8|e[3]<<16,e.slice(4,t<<3)):e.slice(1,t<<3)}}var abridgedPacketCodec=new AbridgedPacketCodec,ConnectionStatus=(d=>(d[d.Connected=0]="Connected",d[d.Connecting=1]="Connecting",d[d.Closed=2]="Closed",d[d.TimedOut=3]="TimedOut",d))(ConnectionStatus||{});function bytesToHex(d){const e=d.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=(d[r]<16?"0":"")+(d[r]||0).toString(16);return t.join("")}class TcpObfuscated{constructor(e,t,r,s,a){this.Connection=e,this.dcId=t,this.url=r,this.logSuffix=s,this.retryTimeout=a,this.codec=abridgedPacketCodec,this.obfuscation=new Obfuscation,this.pending=[],this.debug=Modes.debug&&!1,this.connected=!1,this.autoReconnect=!0,this.onOpen=async()=>{this.connected=!0,Modes.multipleTransports&&transportController$1.setTransportOpened("websocket");const o=await this.obfuscation.init(this.codec);this.connected&&(this.connection.send(o),this.networker&&(this.pending.length=0,this.networker.onTransportOpen()),setTimeout(()=>{this.releasePending()},0))},this.onMessage=async o=>{const p=Date.now();let c=await this.obfuscation.decode(new Uint8Array(o));if(c=this.codec.readPacket(c),this.networker){this.networker.onTransportData(c,p);return}const f=this.pending.shift();if(!f){this.debug&&this.log.debug("no pending for res:",bytesToHex(c));return}f.resolve(c)},this.onClose=()=>{this.clear();let o,p;if(this.autoReconnect){const c=Date.now(),f=c-this.lastCloseTime;o=!isNaN(f)&&f<this.retryTimeout?this.retryTimeout-f:0,p=c+o}this.networker&&(this.networker.setConnectionStatus(ConnectionStatus.Closed,p),this.pending.length=0),this.autoReconnect?(this.log("will try to reconnect after timeout:",o/1e3),this.reconnectTimeout=ctx.setTimeout(this.reconnect,o)):this.log("reconnect isn't needed")},this.reconnect=()=>{if(this.reconnectTimeout!==void 0&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0),!this.connection){if(this.log("trying to reconnect..."),this.lastCloseTime=Date.now(),this.networker)this.networker.setConnectionStatus(ConnectionStatus.Connecting);else for(const o of this.pending)o.bodySent&&(o.bodySent=!1);this.connect()}};let n=LogTypes.Error|LogTypes.Log;this.debug&&(n|=LogTypes.Debug),this.log=logger(`TCP-${t}`+s,n),this.log("constructor"),this.connect()}clear(){Modes.multipleTransports&&this.connected&&transportController$1.setTransportClosed("websocket"),this.connected=!1,this.connection&&(this.connection.removeEventListener("open",this.onOpen),this.connection.removeEventListener("close",this.onClose),this.connection.removeEventListener("message",this.onMessage),this.connection=void 0)}forceReconnect(){this.close(),this.reconnect()}destroy(){this.setAutoReconnect(!1),this.close(),this.obfuscation&&this.obfuscation.destroy(),this.pending.forEach(e=>{e.reject&&e.reject()}),this.pending.length=0}close(){const e=this.connection;if(e){const t=this.connected;this.clear(),t&&(e.addEventListener("message",this.onMessage),e.addEventListener("close",()=>{e.removeEventListener("message",this.onMessage)},{once:!0}),e.close())}}setAutoReconnect(e){this.autoReconnect=e,e?!this.connection&&this.reconnectTimeout===void 0&&this.reconnect():this.reconnectTimeout!==void 0&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0)}connect(){this.connection&&this.close(),this.connection=new this.Connection(this.dcId,this.url,this.logSuffix),this.connection.addEventListener("open",this.onOpen),this.connection.addEventListener("close",this.onClose),this.connection.addEventListener("message",this.onMessage)}changeUrl(e){this.url!==e&&(this.url=e,this.forceReconnect())}encodeBody(e){const t=this.codec.encodePacket(e);return this.obfuscation.encode(t)}send(e){this.debug&&this.log.debug("-> body length to pending:",e.length);const t=void 0;if(this.networker)this.pending.push({body:e,encoded:t}),this.releasePending();else{const r=new Promise((s,a)=>{this.pending.push({resolve:s,reject:a,body:e,encoded:t})});return this.releasePending(),r}}async releasePending(){if(!this.connected||this.releasingPending)return;this.releasingPending=!0;let e=this.pending.length,t=!1;for(let r=0;r<e;++r){const s=this.pending[r];if(!s)break;const{body:a,bodySent:n}=s;if(a&&!n){this.debug&&this.log.debug("-> body length to send:",a.length);const o=s.encoded??(s.encoded=await this.encodeBody(a));if(!this.connected)break;this.connection.send(o),s.resolve?s.bodySent=!0:(this.pending.splice(r--,1),e--),t=!0}}this.releasingPending=void 0,this.pending.length&&t&&this.releasePending()}}const TEST_SUFFIX=Modes.test?"_test":"",PREMIUM_SUFFIX="_premium",RETRY_TIMEOUT_CLIENT=3e3,RETRY_TIMEOUT_DOWNLOAD=3e3;function getTelegramConnectionSuffix(d){return d==="client"?"":"-1"}function constructTelegramWebSocketUrl(d,e,t){const r=getTelegramConnectionSuffix(e),s=e!=="client"?"apiws"+TEST_SUFFIX+(t?PREMIUM_SUFFIX:""):"apiws"+TEST_SUFFIX;return`wss://${App.suffix.toLowerCase()}ws${d}${r}.web.telegram.org/${s}`}class DcConfigurator{constructor(){this.sslSubdomains=["pluto","venus","aurora","vesta","flora"],this.dcOptions=Modes.test?[{id:1,host:"149.154.175.10",port:80},{id:2,host:"149.154.167.40",port:80},{id:3,host:"149.154.175.117",port:80}]:[{id:1,host:"149.154.175.50",port:80},{id:2,host:"149.154.167.50",port:80},{id:3,host:"149.154.175.100",port:80},{id:4,host:"149.154.167.91",port:80},{id:5,host:"149.154.171.5",port:80}],this.chosenServers={},this.transportSocket=(e,t,r)=>{const s=constructTelegramWebSocketUrl(e,t,r),a=t==="upload"?"-U":t==="download"?"-D":"",n=t==="client"?RETRY_TIMEOUT_CLIENT:RETRY_TIMEOUT_DOWNLOAD;let o;return o=Socket,new TcpObfuscated(o,e,s,a,n)},this.transportHTTP=(e,t,r)=>{let s;{const n=getTelegramConnectionSuffix(t),o=this.sslSubdomains[e-1]+n,p=Modes.test?"apiw_test1":"apiw1";s="https://"+o+".web.telegram.org/"+p}const a=t==="upload"?"-U":t==="download"?"-D":"";return new HTTP(e,s,a)}}chooseServer(e,t="client",r=Modes.transport,s=!0,a){this.chosenServers.hasOwnProperty(r)||(this.chosenServers[r]={client:{},download:{},upload:{}});const n=this.chosenServers[r][t];e in n||(n[e]=[]);const o=n[e];if(!o.length||!s){let p;return p=(r==="websocket"?this.transportSocket:this.transportHTTP)(e,t,a),p?(s&&o.push(p),p):(console.error("No chosenServer!",e),null)}return o[0]}static removeTransport(e,t){for(const r in e)for(const s in e[r])for(const a in e[r][s]){const n=e[r][s][a];indexOfAndSplice(n,t)}}}class MTTransportController extends EventListenerBase{constructor(){super(!0),this.opened=new Map,this.addEventListener("change",e=>{e.get("websocket")||this.waitForWebSocket()})}async pingTransports(){const e=this.dcConfigurator??(this.dcConfigurator=new DcConfigurator),t=2e3,r=this.transports={https:e.chooseServer(App.baseDcId,"client","https",!1),websocket:e.chooseServer(App.baseDcId,"client","websocket",!1)},s=deferredPromise();this.transports.https._send(new Uint8Array,"no-cors").then(()=>s.resolve(!0),()=>s.resolve(!1)),setTimeout(()=>s.resolve(!1),t);const a=deferredPromise(),n=r.websocket;n.setAutoReconnect(!1),n.connection.addEventListener("close",()=>a.resolve(!1),{once:!0}),n.connection.addEventListener("open",()=>a.resolve(!0),{once:!0}),setTimeout(()=>{a.isFulfilled||a.isRejected||(n.connection&&n.connection.close(),a.resolve(!1))},t);const[o,p]=await Promise.all([s,a]);for(const f in r)r[f].destroy();return{https:o||this.opened.get("https")>0,websocket:p||this.opened.get("websocket")>0}}async waitForWebSocket(){if(!this.pinging){for(this.pinging=!0;;){const{https:e,websocket:t}=await this.pingTransports();if((e||t)&&this.dispatchEvent("transport",t||!e?"websocket":"https"),t)break;await pause(1e4)}this.pinging=!1}}setTransportValue(e,t){let r=this.opened.get(e)||0;r+=t?1:-1,this.opened.set(e,r),this.dispatchEvent("change",this.opened)}setTransportOpened(e){return this.setTransportValue(e,!0)}setTransportClosed(e){return this.setTransportValue(e,!1)}}const transportController=new MTTransportController;var transportController$1=transportController;const RESET_STORAGES_PROMISE=deferredPromise();class ServiceMessagePort extends SuperMessagePort{constructor(){super("SERVICE"),MOUNT_CLASS_TO&&(MOUNT_CLASS_TO.serviceMessagePort=this)}}function callbackify(d,e){return d instanceof Promise?d.then(e):e(d)}class AppManager{setManagers(e){Object.assign(this,e)}}function createStorages(){const d=["users","chats","dialogs"],e={};for(const t of d)e[t]=new AppStorage(DATABASE_STATE,t);return e}function recordPromise(d,e,t){const r=performance.now();return(t||console).warn(dT(),"start",e),d.then(()=>{(t||console).warn(dT(),"end",e,performance.now()-r)}),d}function recordPromiseBound(d){return(...e)=>recordPromise(...e,d)}async function loadStoragesInner(d){const e=recordPromiseBound(logger("STORAGES-LOADER")),t=Object.keys(d),r=t.map(p=>{const c=d[p].getAll();return e(c,"storage "+p)}),s={},a=await Promise.all(r);for(let p=0,c=t.length;p<c;++p)s[t[p]]=a[p];a.splice(0,t.length);const{storages:n,callback:o}=await RESET_STORAGES_PROMISE;if(n.size){const p=[];for(const c of n)s[c].length=0,p.push(d[c].clear());n.clear(),await Promise.all(p).catch(noop$2)}return o(),s}let promise;function loadStorages(d){return promise??(promise=loadStoragesInner(d))}class AppStoragesManager extends AppManager{constructor(){super(),this.log=logger("STORAGES"),this.storages=createStorages()}loadStorages(){return loadStorages(this.storages)}async loadStorage(e){return this.loadStorages().then(t=>({storage:this.storages[e],results:t[e]}))}}class PasswordManager extends AppManager{getState(){return this.apiManager.invokeApi("account.getPassword").then(e=>e)}updateSettings(e={}){return this.getState().then(t=>{let r,s;const a={password:null,new_settings:{_:"account.passwordInputSettings",hint:e.hint,email:e.email}};e.currentPassword?r=this.cryptoWorker.invokeCrypto("computeSRP",e.currentPassword,t,!1):r=Promise.resolve({_:"inputCheckPasswordEmpty"});const n=t.new_algo,o=new Uint8Array(n.salt1.length+32);return randomize(o),o.set(n.salt1,0),n.salt1=o,e.newPassword?s=this.cryptoWorker.invokeCrypto("computeSRP",e.newPassword,t,!0):s=Promise.resolve(new Uint8Array),Promise.all([r,s]).then(p=>{var c;return a.password=p[0],a.new_settings.new_algo=n,a.new_settings.new_password_hash=p[1],(c=a.new_settings).hint??(c.hint=""),this.apiManager.invokeApi("account.updatePasswordSettings",a)})})}getInputCheckPassword(e,t){return this.cryptoWorker.invokeCrypto("computeSRP",e,t,!1)}check(e,t,r={}){return this.getInputCheckPassword(e,t).then(s=>this.apiManager.invokeApi("auth.checkPassword",{password:s},r).then(a=>(a._==="auth.authorization"&&this.apiManager.setUser(a.user),a)))}confirmPasswordEmail(e){return this.apiManager.invokeApi("account.confirmPasswordEmail",{code:e})}resendPasswordEmail(){return this.apiManager.invokeApi("account.resendPasswordEmail")}cancelPasswordEmail(){return this.apiManager.invokeApi("account.cancelPasswordEmail")}}function deepEqual(d,e,t){const r=t&&new Set(t),s=p=>Object.keys(p).filter(c=>p[c]!==void 0),a=t?p=>s(p).filter(c=>!r.has(c)):s,n=typeof d;return d&&e&&n==="object"&&n===typeof e?a(d).length===a(e).length&&a(d).every(p=>deepEqual(d[p],e[p],t)):d===e}class ReferenceDatabase extends AppManager{constructor(){super(...arguments),this.contexts=new Map,this.links={},this.log=logger("RD",void 0,!0)}saveContext(e,t,r){[r,e]=this.getContexts(e),r||(r=new Set,this.contexts.set(e,r)),this.links[bytesToHex(e)]=e;for(const s of r)if(deepEqual(s,t))return;r.add(t)}getReferenceByLink(e){return this.links[bytesToHex(e)]}getContexts(e){return[this.contexts.get(e)||(e=this.getReferenceByLink(e)||e,this.contexts.get(e)),e]}getContext(e){const t=this.getContexts(e);return t[0]?[t[0].values().next().value,t[1]]:void 0}deleteContext(e,t,r){if([r,e]=this.getContexts(e),r){for(const s of r)if(deepEqual(s,t))return r.delete(s),r.size||(this.contexts.delete(e),delete this.links[bytesToHex(e)]),!0}return!1}refreshReference(e,t){if(this.log("refreshReference: start",e.slice(),t),!t){const a=this.getContext(e);if(!a)return this.log("refreshReference: got no context for reference:",e.slice()),Promise.reject("NO_CONTEXT");[t,e]=a}let r;switch(t?.type){case"message":{r=this.appMessagesManager.reloadMessages(t.peerId,t.messageId,!0);break}case"emojiesSounds":{r=this.refreshEmojiesSoundsPromise||this.appStickersManager.getAnimatedEmojiSounds(!0).then(()=>{this.refreshEmojiesSoundsPromise=void 0});break}case"userFull":{r=Promise.resolve(this.appProfileManager.getProfile(t.userId,!0));break}case"customEmoji":{r=this.appEmojiManager.getCustomEmojiDocuments([t.docId]);break}case"attachMenuBotIcon":{r=this.appAttachMenuBotsManager.getAttachMenuBot(t.botId,!0);break}case"wallPaper":{r=this.appThemesManager.getWallPaperById(t.wallPaperId);break}case"storyItem":{r=Promise.resolve(this.appStoriesManager.getStoryById(t.peerId,t.storyId,!0));break}case"premiumPromo":{r=Promise.resolve(this.appPaymentsManager.getPremiumPromo(!0));break}case"webPage":{r=Promise.resolve(this.appWebPagesManager.getWebPage(t.url));break}case"botApp":{r=Promise.resolve(this.appAttachMenuBotsManager.getBotApp(t.botId,t.appName));break}case"chatInvite":{r=Promise.resolve(this.appChatInvitesManager.checkChatInvite(t.hash));break}default:return this.log.warn("refreshReference: not implemented context",t),Promise.reject()}const s=bytesToHex(e);return this.log("refreshReference: refreshing reference:",s),r.then(()=>{const a=bytesToHex(e);if(this.log("refreshReference: refreshed, reference before:",s,"after:",a),s!==a)return e;this.deleteContext(e,t);const n=this.getContext(e);if(n)return this.refreshReference(e,n[0]);throw this.log.error("refreshReference: no new context, reference before:",s,"after:",a,t),makeError("NO_NEW_CONTEXT")})}}function tsNow(d){const e=Date.now();return d?e/1e3|0:e}const LatinizeMap={Á:"A",Ă:"A",Ắ:"A",Ặ:"A",Ằ:"A",Ẳ:"A",Ẵ:"A",Ǎ:"A",Â:"A",Ấ:"A",Ậ:"A",Ầ:"A",Ẩ:"A",Ẫ:"A",Ä:"A",Ǟ:"A",Ȧ:"A",Ǡ:"A",Ạ:"A",Ȁ:"A",À:"A",Ả:"A",Ȃ:"A",Ā:"A",Ą:"A",Å:"A",Ǻ:"A",Ḁ:"A","Ⱥ":"A",Ã:"A","Ꜳ":"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY",Ḃ:"B",Ḅ:"B",Ɓ:"B",Ḇ:"B","Ƀ":"B",Ƃ:"B",Ć:"C",Č:"C",Ç:"C",Ḉ:"C",Ĉ:"C",Ċ:"C",Ƈ:"C","Ȼ":"C",Ď:"D",Ḑ:"D",Ḓ:"D",Ḋ:"D",Ḍ:"D",Ɗ:"D",Ḏ:"D",ǲ:"D",ǅ:"D",Đ:"D",Ƌ:"D",Ǳ:"DZ",Ǆ:"DZ",É:"E",Ĕ:"E",Ě:"E",Ȩ:"E",Ḝ:"E",Ê:"E",Ế:"E",Ệ:"E",Ề:"E",Ể:"E",Ễ:"E",Ḙ:"E",Ë:"E",Ė:"E",Ẹ:"E",Ȅ:"E",È:"E",Ẻ:"E",Ȇ:"E",Ē:"E",Ḗ:"E",Ḕ:"E",Ę:"E","Ɇ":"E",Ẽ:"E",Ḛ:"E","Ꝫ":"ET",Ḟ:"F",Ƒ:"F",Ǵ:"G",Ğ:"G",Ǧ:"G",Ģ:"G",Ĝ:"G",Ġ:"G",Ɠ:"G",Ḡ:"G",Ǥ:"G",Ḫ:"H",Ȟ:"H",Ḩ:"H",Ĥ:"H","Ⱨ":"H",Ḧ:"H",Ḣ:"H",Ḥ:"H",Ħ:"H",Í:"I",Ĭ:"I",Ǐ:"I",Î:"I",Ï:"I",Ḯ:"I",İ:"I",Ị:"I",Ȉ:"I",Ì:"I",Ỉ:"I",Ȋ:"I",Ī:"I",Į:"I",Ɨ:"I",Ĩ:"I",Ḭ:"I","Ꝺ":"D","Ꝼ":"F","Ᵹ":"G","Ꞃ":"R","Ꞅ":"S","Ꞇ":"T","Ꝭ":"IS",Ĵ:"J","Ɉ":"J",Ḱ:"K",Ǩ:"K",Ķ:"K","Ⱪ":"K","Ꝃ":"K",Ḳ:"K",Ƙ:"K",Ḵ:"K","Ꝁ":"K","Ꝅ":"K",Ĺ:"L","Ƚ":"L",Ľ:"L",Ļ:"L",Ḽ:"L",Ḷ:"L",Ḹ:"L","Ⱡ":"L","Ꝉ":"L",Ḻ:"L",Ŀ:"L","Ɫ":"L",ǈ:"L",Ł:"L",Ǉ:"LJ",Ḿ:"M",Ṁ:"M",Ṃ:"M","Ɱ":"M",Ń:"N",Ň:"N",Ņ:"N",Ṋ:"N",Ṅ:"N",Ṇ:"N",Ǹ:"N",Ɲ:"N",Ṉ:"N","Ƞ":"N",ǋ:"N",Ñ:"N",Ǌ:"NJ",Ó:"O",Ŏ:"O",Ǒ:"O",Ô:"O",Ố:"O",Ộ:"O",Ồ:"O",Ổ:"O",Ỗ:"O",Ö:"O",Ȫ:"O",Ȯ:"O",Ȱ:"O",Ọ:"O",Ő:"O",Ȍ:"O",Ò:"O",Ỏ:"O",Ơ:"O",Ớ:"O",Ợ:"O",Ờ:"O",Ở:"O",Ỡ:"O",Ȏ:"O","Ꝋ":"O","Ꝍ":"O",Ō:"O",Ṓ:"O",Ṑ:"O",Ɵ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Õ:"O",Ṍ:"O",Ṏ:"O",Ȭ:"O",Ƣ:"OI","Ꝏ":"OO",Ɛ:"E",Ɔ:"O",Ȣ:"OU",Ṕ:"P",Ṗ:"P","Ꝓ":"P",Ƥ:"P","Ꝕ":"P","Ᵽ":"P","Ꝑ":"P","Ꝙ":"Q","Ꝗ":"Q",Ŕ:"R",Ř:"R",Ŗ:"R",Ṙ:"R",Ṛ:"R",Ṝ:"R",Ȑ:"R",Ȓ:"R",Ṟ:"R","Ɍ":"R","Ɽ":"R","Ꜿ":"C",Ǝ:"E",Ś:"S",Ṥ:"S",Š:"S",Ṧ:"S",Ş:"S",Ŝ:"S",Ș:"S",Ṡ:"S",Ṣ:"S",Ṩ:"S","ẞ":"SS",Ť:"T",Ţ:"T",Ṱ:"T",Ț:"T","Ⱦ":"T",Ṫ:"T",Ṭ:"T",Ƭ:"T",Ṯ:"T",Ʈ:"T",Ŧ:"T","Ɐ":"A","Ꞁ":"L",Ɯ:"M","Ʌ":"V","Ꜩ":"TZ",Ú:"U",Ŭ:"U",Ǔ:"U",Û:"U",Ṷ:"U",Ü:"U",Ǘ:"U",Ǚ:"U",Ǜ:"U",Ǖ:"U",Ṳ:"U",Ụ:"U",Ű:"U",Ȕ:"U",Ù:"U",Ủ:"U",Ư:"U",Ứ:"U",Ự:"U",Ừ:"U",Ử:"U",Ữ:"U",Ȗ:"U",Ū:"U",Ṻ:"U",Ų:"U",Ů:"U",Ũ:"U",Ṹ:"U",Ṵ:"U","Ꝟ":"V",Ṿ:"V",Ʋ:"V",Ṽ:"V","Ꝡ":"VY",Ẃ:"W",Ŵ:"W",Ẅ:"W",Ẇ:"W",Ẉ:"W",Ẁ:"W","Ⱳ":"W",Ẍ:"X",Ẋ:"X",Ý:"Y",Ŷ:"Y",Ÿ:"Y",Ẏ:"Y",Ỵ:"Y",Ỳ:"Y",Ƴ:"Y",Ỷ:"Y","Ỿ":"Y",Ȳ:"Y","Ɏ":"Y",Ỹ:"Y",Ź:"Z",Ž:"Z",Ẑ:"Z","Ⱬ":"Z",Ż:"Z",Ẓ:"Z",Ȥ:"Z",Ẕ:"Z",Ƶ:"Z",Ĳ:"IJ",Œ:"OE","ᴀ":"A","ᴁ":"AE",ʙ:"B","ᴃ":"B","ᴄ":"C","ᴅ":"D","ᴇ":"E","ꜰ":"F",ɢ:"G",ʛ:"G",ʜ:"H",ɪ:"I",ʁ:"R","ᴊ":"J","ᴋ":"K",ʟ:"L","ᴌ":"L","ᴍ":"M",ɴ:"N","ᴏ":"O",ɶ:"OE","ᴐ":"O","ᴕ":"OU","ᴘ":"P",ʀ:"R","ᴎ":"N","ᴙ":"R","ꜱ":"S","ᴛ":"T","ⱻ":"E","ᴚ":"R","ᴜ":"U","ᴠ":"V","ᴡ":"W",ʏ:"Y","ᴢ":"Z",á:"a",ă:"a",ắ:"a",ặ:"a",ằ:"a",ẳ:"a",ẵ:"a",ǎ:"a",â:"a",ấ:"a",ậ:"a",ầ:"a",ẩ:"a",ẫ:"a",ä:"a",ǟ:"a",ȧ:"a",ǡ:"a",ạ:"a",ȁ:"a",à:"a",ả:"a",ȃ:"a",ā:"a",ą:"a","ᶏ":"a",ẚ:"a",å:"a",ǻ:"a",ḁ:"a","ⱥ":"a",ã:"a","ꜳ":"aa",æ:"ae",ǽ:"ae",ǣ:"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay",ḃ:"b",ḅ:"b",ɓ:"b",ḇ:"b","ᵬ":"b","ᶀ":"b",ƀ:"b",ƃ:"b",ɵ:"o",ć:"c",č:"c",ç:"c",ḉ:"c",ĉ:"c",ɕ:"c",ċ:"c",ƈ:"c","ȼ":"c",ď:"d",ḑ:"d",ḓ:"d","ȡ":"d",ḋ:"d",ḍ:"d",ɗ:"d","ᶑ":"d",ḏ:"d","ᵭ":"d","ᶁ":"d",đ:"d",ɖ:"d",ƌ:"d",ı:"i","ȷ":"j",ɟ:"j",ʄ:"j",ǳ:"dz",ǆ:"dz",é:"e",ĕ:"e",ě:"e",ȩ:"e",ḝ:"e",ê:"e",ế:"e",ệ:"e",ề:"e",ể:"e",ễ:"e",ḙ:"e",ë:"e",ė:"e",ẹ:"e",ȅ:"e",è:"e",ẻ:"e",ȇ:"e",ē:"e",ḗ:"e",ḕ:"e","ⱸ":"e",ę:"e","ᶒ":"e","ɇ":"e",ẽ:"e",ḛ:"e","ꝫ":"et",ḟ:"f",ƒ:"f","ᵮ":"f","ᶂ":"f",ǵ:"g",ğ:"g",ǧ:"g",ģ:"g",ĝ:"g",ġ:"g",ɠ:"g",ḡ:"g","ᶃ":"g",ǥ:"g",ḫ:"h",ȟ:"h",ḩ:"h",ĥ:"h","ⱨ":"h",ḧ:"h",ḣ:"h",ḥ:"h",ɦ:"h",ẖ:"h",ħ:"h",ƕ:"hv",í:"i",ĭ:"i",ǐ:"i",î:"i",ï:"i",ḯ:"i",ị:"i",ȉ:"i",ì:"i",ỉ:"i",ȋ:"i",ī:"i",į:"i","ᶖ":"i",ɨ:"i",ĩ:"i",ḭ:"i","ꝺ":"d","ꝼ":"f","ᵹ":"g","ꞃ":"r","ꞅ":"s","ꞇ":"t","ꝭ":"is",ǰ:"j",ĵ:"j",ʝ:"j","ɉ":"j",ḱ:"k",ǩ:"k",ķ:"k","ⱪ":"k","ꝃ":"k",ḳ:"k",ƙ:"k",ḵ:"k","ᶄ":"k","ꝁ":"k","ꝅ":"k",ĺ:"l",ƚ:"l",ɬ:"l",ľ:"l",ļ:"l",ḽ:"l","ȴ":"l",ḷ:"l",ḹ:"l","ⱡ":"l","ꝉ":"l",ḻ:"l",ŀ:"l",ɫ:"l","ᶅ":"l",ɭ:"l",ł:"l",ǉ:"lj",ſ:"s","ẜ":"s",ẛ:"s","ẝ":"s",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m","ᵯ":"m","ᶆ":"m",ń:"n",ň:"n",ņ:"n",ṋ:"n","ȵ":"n",ṅ:"n",ṇ:"n",ǹ:"n",ɲ:"n",ṉ:"n",ƞ:"n","ᵰ":"n","ᶇ":"n",ɳ:"n",ñ:"n",ǌ:"nj",ó:"o",ŏ:"o",ǒ:"o",ô:"o",ố:"o",ộ:"o",ồ:"o",ổ:"o",ỗ:"o",ö:"o",ȫ:"o",ȯ:"o",ȱ:"o",ọ:"o",ő:"o",ȍ:"o",ò:"o",ỏ:"o",ơ:"o",ớ:"o",ợ:"o",ờ:"o",ở:"o",ỡ:"o",ȏ:"o","ꝋ":"o","ꝍ":"o","ⱺ":"o",ō:"o",ṓ:"o",ṑ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",õ:"o",ṍ:"o",ṏ:"o",ȭ:"o",ƣ:"oi","ꝏ":"oo",ɛ:"e","ᶓ":"e",ɔ:"o","ᶗ":"o",ȣ:"ou",ṕ:"p",ṗ:"p","ꝓ":"p",ƥ:"p","ᵱ":"p","ᶈ":"p","ꝕ":"p","ᵽ":"p","ꝑ":"p","ꝙ":"q",ʠ:"q","ɋ":"q","ꝗ":"q",ŕ:"r",ř:"r",ŗ:"r",ṙ:"r",ṛ:"r",ṝ:"r",ȑ:"r",ɾ:"r","ᵳ":"r",ȓ:"r",ṟ:"r",ɼ:"r","ᵲ":"r","ᶉ":"r","ɍ":"r",ɽ:"r","ↄ":"c","ꜿ":"c",ɘ:"e",ɿ:"r",ś:"s",ṥ:"s",š:"s",ṧ:"s",ş:"s",ŝ:"s",ș:"s",ṡ:"s",ṣ:"s",ṩ:"s",ʂ:"s","ᵴ":"s","ᶊ":"s","ȿ":"s",ɡ:"g",ß:"ss","ᴑ":"o","ᴓ":"o","ᴝ":"u",ť:"t",ţ:"t",ṱ:"t",ț:"t","ȶ":"t",ẗ:"t","ⱦ":"t",ṫ:"t",ṭ:"t",ƭ:"t",ṯ:"t","ᵵ":"t",ƫ:"t",ʈ:"t",ŧ:"t","ᵺ":"th",ɐ:"a","ᴂ":"ae",ǝ:"e","ᵷ":"g",ɥ:"h","ʮ":"h","ʯ":"h","ᴉ":"i",ʞ:"k","ꞁ":"l",ɯ:"m",ɰ:"m","ᴔ":"oe",ɹ:"r",ɻ:"r",ɺ:"r","ⱹ":"r",ʇ:"t",ʌ:"v",ʍ:"w",ʎ:"y","ꜩ":"tz",ú:"u",ŭ:"u",ǔ:"u",û:"u",ṷ:"u",ü:"u",ǘ:"u",ǚ:"u",ǜ:"u",ǖ:"u",ṳ:"u",ụ:"u",ű:"u",ȕ:"u",ù:"u",ủ:"u",ư:"u",ứ:"u",ự:"u",ừ:"u",ử:"u",ữ:"u",ȗ:"u",ū:"u",ṻ:"u",ų:"u","ᶙ":"u",ů:"u",ũ:"u",ṹ:"u",ṵ:"u","ᵫ":"ue","ꝸ":"um","ⱴ":"v","ꝟ":"v",ṿ:"v",ʋ:"v","ᶌ":"v","ⱱ":"v",ṽ:"v","ꝡ":"vy",ẃ:"w",ŵ:"w",ẅ:"w",ẇ:"w",ẉ:"w",ẁ:"w","ⱳ":"w",ẘ:"w",ẍ:"x",ẋ:"x","ᶍ":"x",ý:"y",ŷ:"y",ÿ:"y",ẏ:"y",ỵ:"y",ỳ:"y",ƴ:"y",ỷ:"y","ỿ":"y",ȳ:"y",ẙ:"y","ɏ":"y",ỹ:"y",ź:"z",ž:"z",ẑ:"z",ʑ:"z","ⱬ":"z",ż:"z",ẓ:"z",ȥ:"z",ẕ:"z","ᵶ":"z","ᶎ":"z",ʐ:"z",ƶ:"z","ɀ":"z",ﬀ:"ff",ﬃ:"ffi",ﬄ:"ffl",ﬁ:"fi",ﬂ:"fl",ĳ:"ij",œ:"oe",ﬆ:"st","ₐ":"a","ₑ":"e","ᵢ":"i","ⱼ":"j","ₒ":"o","ᵣ":"r","ᵤ":"u","ᵥ":"v","ₓ":"x",Ё:"YO",Й:"I",Ц:"TS",У:"U",К:"K",Е:"E",Н:"N",Г:"G",Ш:"SH",Щ:"SCH",З:"Z",Х:"H",Ъ:"",ё:"yo",й:"i",ц:"ts",у:"u",к:"k",е:"e",н:"n",г:"g",ш:"sh",щ:"sch",з:"z",х:"h",ъ:"",Ф:"F",Ы:"I",В:"V",А:"A",П:"P",Р:"R",О:"O",Л:"L",Д:"D",Ж:"ZH",Э:"E",ф:"f",ы:"i",в:"v",а:"a",п:"p",р:"r",о:"o",л:"l",д:"d",ж:"zh",э:"e",Я:"Ya",Ч:"CH",С:"S",М:"M",И:"I",Т:"T",Ь:"",Б:"B",Ю:"YU",я:"ya",ч:"ch",с:"s",м:"m",и:"i",т:"t",ь:"",б:"b",ю:"yu"},badCharsRe=/[`~!@#$%^&*()\-_=+\[\]\\|{}'";:\/?.>,<]+/g,trimRe=/^\s+|\s$/g,C2L={й:"q",ц:"w",у:"e",к:"r",е:"t",н:"y",г:"u",ш:"i",щ:"o",з:"p",х:"[",ъ:"]",ф:"a",ы:"s",в:"d",а:"f",п:"g",р:"h",о:"j",л:"k",д:"l",ж:";",э:"'",я:"z",ч:"x",с:"c",м:"v",и:"b",т:"n",ь:"m",б:",",ю:".",".":"/"};function clearBadCharsAndTrim(d){return d.replace(badCharsRe,"").replace(trimRe,"")}function fixCyrillic(d){return d.toLowerCase().replace(/[\wа-я]/g,e=>C2L[e]??e)}function latinizeString(d){return d.replace(/[^A-Za-z0-9]/g,e=>LatinizeMap[e]??e)}function cleanSearchText(d,e=!0){return processSearchText(d,{clearBadChars:!0,latinize:e,ignoreCase:!0})}function processSearchText(d="",e={}){const t=e.includeTag&&d.charAt(0)==="%",r=d;return e.clearBadChars&&(d=clearBadCharsAndTrim(d)),e.latinize&&(d=latinizeString(d)),e.ignoreCase&&(d=d.toLowerCase()),t&&(d="%"+d),e.latinize&&(d+=""+fixCyrillic(r)),d}function flatten(d){return d.reduce((e,t)=>(e.push(...t),e),[])}class SearchIndex{constructor(e={}){this.options=e,this.fullTexts=new Map,e.minChars??(e.minChars=0)}indexObject(e,t){if(t.trim()&&(t=this.processSearchText(t)),!t)return this.fullTexts.delete(e),!1;this.fullTexts.set(e,t)}indexObjectArray(e,t){return this.indexObject(e,t.join(" "))}_search(e,t=e.split(" ").filter(s=>s.trim()),r=this.options.minChars){const s=[],a=this.fullTexts,n=t.length;return a.forEach((o,p)=>{let c=!0,f=0;for(let l=0;l<n;++l){const u=t[l],g=o.indexOf(u),y=l===n-1;if(g===-1||this.options.fullWords&&!y&&o[g+u.length]!==" "||g!==0&&o[g-1]!==" "){c=!1;break}f+=u.length}if(c){f+=n-1;const l=o.length;(r<=f||l<=f)&&s.push({fullText:o,fullTextLength:l,what:p,foundChars:f})}}),s}search(e,t){e=this.processSearchText(e);const s=e.split("").map(o=>this._search(o,void 0,t)),a=flatten(s);return a.sort((o,p)=>{const c=o.fullTextLength-o.foundChars,f=p.fullTextLength-p.foundChars;return c-f||o.fullTextLength-p.fullTextLength}),new Set(a.map(o=>o.what))}processSearchText(e){return this.options?processSearchText(e,this.options):e}}function compareLong(d,e){const t=d.length;if(t!==e.length){const s=t-e.length;return s<0?-1:s>0?1:0}const r=15;for(let s=0;s<t;s+=r){const a=+d.slice(s,s+r),n=+e.slice(s,s+r),o=a-n;if(o)return o}return 0}function compareValue(d,e){if(d.toExponential){const t=d-e;return t<0?-1:t>0?1:0}return compareLong(d,e)}var SliceEnd=(d=>(d[d.None=0]="None",d[d.Top=1]="Top",d[d.Bottom=2]="Bottom",d[d.Both=3]="Both",d))(SliceEnd||{});class SlicedArray{constructor(){this.sliceConstructor=SlicedArray.getSliceConstructor(this);const e=this.constructSlice();this.slices=[e]}static getSliceConstructor(e){return class extends Array{constructor(){super(...arguments),this.end=0}isEnd(r){if((this.end&r)===r)return!0;let s=!1;if(r===1){const a=e.last;s=a.end&r?this.includes(a[a.length-1]):!1}else if(r===2){const a=e.first;s=a.end&r?this.includes(a[0]):!1}else if(r===3)return this.isEnd(1)&&this.isEnd(2);return s&&this.setEnd(r),s}getEnds(){return{top:this.isEnd(1),bottom:this.isEnd(2),both:this.isEnd(3)}}setEnd(r){this.end|=r}unsetEnd(r){this.end&=~r}splice(r,s,...a){const n=super.splice(r,s,...a);if(!this.length){const o=e.slices,p=o.indexOf(this);p!==-1&&(o.length===1?this.unsetEnd(3):o.splice(p,1))}return n}}}constructSlice(...e){const t=new this.sliceConstructor(e.length);for(let r=0,s=e.length;r<s;++r)t[r]=e[r];return t}insertSlice(e,t=!0){if(!e.length)return;const r=this.slices[0];if(!r.length)return r.push(...e),r;const s=e[e.length-1],a=e[0];let n,o=-1,p=-1,c=0;for(;c<this.slices.length&&(n=this.slices[c],o=n.indexOf(s),p=n.indexOf(a),!(p!==-1&&o!==-1));++c)if(p!==-1||o!==-1)break;if(!(p!==-1&&o!==-1))if(p!==-1){const f=e.slice(n.length-p);n.push(...f)}else if(o!==-1){const f=e.slice(0,e.length-o-1);n.unshift(...f)}else{let f=0;for(const l=this.slices.length;f<l;++f){const u=this.slices[f];if(compareValue(e[0],u[0])===1)break}this.slices.splice(f,0,this.constructSlice(...e)),c=f}if(t)return this.flatten(c)}flatten(e){if(this.slices.length>=2)for(let t=0,r=this.slices.length;t<r-1;++t){const s=this.slices[t],a=this.slices[t+1];s.indexOf(a[0])!==-1&&(s.setEnd(a.end),this.slices.splice(t+1,1),t<e&&--e,--r,--t,this.insertSlice(a,!1))}return this.slices[e]}get first(){return this.slices[0]}get last(){return this.slices[this.slices.length-1]}get slice(){return this.first}get length(){return this.slice.length}findSlice(e){for(let t=0,r=this.slices.length;t<r;++t){const s=this.slices[t],a=s.indexOf(e);if(a!==-1)return{slice:s,index:a}}}findOffsetInSlice(e,t){for(let r=0;r<t.length;++r)if(compareValue(e,t[r])>=0)return{slice:t,offset:e===t[r]?r+1:r}}findSliceOffset(e){let t;for(let r=0;r<this.slices.length;++r){t=this.slices[r];const s=this.findOffsetInSlice(e,t);if(s)return s}if(t?.isEnd(1))return{slice:t,offset:t.length}}sliceMe(e,t,r){let s=this.slice,a=0,n=0;if(e){const y=this.findSliceOffset(e);if(!y)return;s=y.slice,a=n=y.offset}else if(!s.isEnd(2))return;const o=Math.max(n+t,0),p=n+t+r,c=s.slice(o,p),f=t<0?r+t:r,l=Math.abs(t),u=s.length-n>=f||(s.isEnd(1)?(c.setEnd(1),!0):!1),g=n-l>=0||(s.isEnd(2)?(c.setEnd(2),!0):!1);return{slice:c,offsetIdOffset:a,fulfilled:0|(u&&g?3:(u?1:0)|(g?2:0))}}unshift(...e){let t=this.first;t.length?t.isEnd(2)||(t=this.constructSlice(),t.setEnd(2),this.slices.unshift(t)):t.setEnd(2),t.unshift(...e)}push(...e){let t=this.last;t.length?t.isEnd(1)||(t=this.constructSlice(),t.setEnd(1),this.slices.push(t)):t.setEnd(1),t.push(...e)}delete(e){const t=this.findSlice(e);return t?(t.slice.splice(t.index,1),!0):!1}deleteSlice(e){indexOfAndSplice(this.slices,e)}toJSON(){const t={slices:this.slices.map(r=>({values:r.slice(),isEnd:r.getEnds()}))};return JSON.stringify(t)}static fromJSON(e){const t=JSON.parse(e),r=new SlicedArray;return t.slices.forEach(s=>{const a=r.insertSlice(s.values)||r.first;s.isEnd.top&&a.setEnd(1),s.isEnd.bottom&&a.setEnd(2)}),r}}MOUNT_CLASS_TO&&(MOUNT_CLASS_TO.SlicedArray=SlicedArray);function forEachReverse(d,e){for(let t=d.length,r=t-1;r>=0;--r)e(d[r],r,d)}function insertInDescendSortedArray(d,e,t,r,s){if(!t)t=o=>o;else if(typeof t!="function"){const o=t;t=p=>p[o]}s||(s=(o,p)=>o-p);const a=t(e);if(r??(r=d.indexOf(e)),r!==-1){const o=d[r-1],p=d[r+1];if((!o||s(t(o),a)>=0)&&(!p||s(t(p),a)<=0))return r;d.splice(r,1)}const n=d.length;if(!n||s(a,t(d[n-1]))<=0)return d.push(e)-1;if(s(a,t(d[0]))>=0)return d.unshift(e),0;for(let o=0;o<n;o++)if(s(a,t(d[o]))>0)return d.splice(o,0,e),o;return console.error("wtf",d,e),d.indexOf(e)}function safeReplaceObject(d,e){if(!d)return e;for(var t in d)e.hasOwnProperty(t)||delete d[t];for(var t in e)d[t]=e[t];return d}function clearMessageId(d,e){if(d!==void 0)return d=+d.toFixed(0),d<MESSAGE_ID_OFFSET?d:d%MESSAGE_ID_OFFSET}function getServerMessageId(d){return clearMessageId(d)}function getDialogIndexKey(d=0){return`index_${d}`}function isObject(d){return typeof d=="object"&&d!==null}function getDialogIndex(d,e=getDialogIndexKey(d.folder_id)){return d?.[e]}function getPeerId(d){if(d!==void 0&&(d.isPeerId&&d.isPeerId()))return d;if(isObject(d)){const r=d.user_id;if(r!==void 0)return r.toPeerId(!1);const s=d.channel_id||d.chat_id;return s!==void 0?s.toPeerId(!0):NULL_PEER_ID}else if(!d)return NULL_PEER_ID;const e=d.charAt(0)==="u",t=d.substr(1).split("_");return e?t[0].toPeerId():(t[0]||"").toPeerId(!0)}function getPeerIdsFromMessage(d){const e=[d.fromId,d.viaBotId,d.fwdFromId],t=d.media;if(t){const p=[t.user_id,...t.winners||[]];e.push(...p.filter(Boolean).map(u=>u.toPeerId()));const c=[...t.channels||[],t.channel_id];e.push(...c.filter(Boolean).map(u=>u.toPeerId(!0)));const f=[...t.results?.recent_voters||[],t.peer],l=t?.webpage;if(l){const u=l.attributes?.find(g=>g._==="webPageAttributeStory");f.push(u?.peer)}e.push(...f.filter(Boolean).map(u=>getPeerId(u)))}const r=d.reactions?.recent_reactions;r?.length&&e.push(...r.map(p=>getPeerId(p.peer_id)));const s=d.action;if(s){const p=[...s.users||[],s.user_id,s.inviter_id];e.push(...p.filter(Boolean).map(l=>l.toPeerId()));const c=[s.channel_id,s.chat_id];e.push(...c.filter(Boolean).map(l=>l.toPeerId(!0)));const f=[s.boost_peer,...s.peers||[],s.from_id,s.to_id];e.push(...f.filter(Boolean).map(l=>getPeerId(l)))}const a=d.replies?.recent_repliers;a?.length&&e.push(...a.map(p=>getPeerId(p)));const n=d.saved_peer_id;n&&e.push(getPeerId(n));const o=d.fwd_from;return o&&e.push(...[o.from_id,o.saved_from_id,o.saved_from_peer].filter(Boolean).map(p=>getPeerId(p))),new Set(e.filter(Boolean))}function defineNotNumerableProperties(d,e){const t={writable:!0,configurable:!0},r={};e.forEach(s=>{d.hasOwnProperty(s)||(r[s]=t)}),Object.defineProperties(d,r)}function setDialogIndex(d,e,t){return d[e]=t}function isForumTopic(d){return d?._==="forumTopic"}function isSavedDialog(d){return d?._==="savedDialog"}function isDialog(d){return d?._==="dialog"}function getDialogKey(d){let e;return isDialog(d)?e=d.peerId:isForumTopic(d)?e=d.id:isSavedDialog(d)&&(e=d.savedPeerId),e}function getDialogThreadId(d){if(!isDialog(d))return getDialogKey(d)}var FilterType=(d=>(d[d.Folder=0]="Folder",d[d.Forum=1]="Forum",d[d.Saved=2]="Saved",d))(FilterType||{});const GLOBAL_FOLDER_ID=void 0;class DialogsStorage extends AppManager{constructor(){super(...arguments),this.log=logger("DIALOGS"),this.clear=(e=!1)=>{if(e){this.allDialogsLoaded={},this.pinnedOrders={};for(const t of REAL_FOLDERS)this.pinnedOrders[t]=[]}else{this.storage.clear(),this.allDialogsLoaded={},this.saveAllDialogsLoaded(),this.pinnedOrders=Object.assign({},this.pinnedOrders);for(const t of REAL_FOLDERS)this.resetPinnedOrder(t);this.savePinnedOrders()}this.forumTopics=new Map,this.savedDialogsPromises=new Map,this.folders={},this.dialogsOffsetDate={},this.dialogsNum=0,this.dialogsIndex=this.createSearchIndex(),this.cachedResults={query:"",count:0,dialogs:[],folderId:0},this.savedDialogs={}},this.onUpdateFolderPeers=e=>{e.folder_peers.forEach(r=>{const{folder_id:s,peer:a}=r,n=this.appPeersManager.getPeerId(a),o=this.dropDialog(n)[0];o&&(o.pFlags?.pinned&&this.handleDialogUnpinning(o,s),o.folder_id=s,this.generateIndexForDialog(o),this.pushDialog({dialog:o})),this.appMessagesManager.scheduleHandleNewDialogs(n,o)})},this.onUpdateDialogPinned=e=>{const t=this.appPeersManager.getPeerId(e.peer.peer);let r,s;e._==="updateDialogPinned"?(s=e.folder_id??FOLDER_ID_ALL,r=this.getDialogOnly(t)):(s=this.appPeersManager.peerId,r=this.getAnyDialog(this.appPeersManager.peerId,t)),this.handleDialogTogglePinned(r,e.pFlags.pinned,s)},this.onUpdateChannelPinnedTopic=e=>{const t=e.channel_id,r=t.toPeerId(!0),s=this.appMessagesIdsManager.generateMessageId(e.topic_id,t),a=this.getForumTopic(r,s);a&&this.handleDialogTogglePinned(a,e.pFlags.pinned,this.getFilterIdForForum(a))},this.onUpdatePinnedDialogs=e=>{const t=e._==="updatePinnedSavedDialogs";let r;if(t?r=this.appPeersManager.peerId:r=e.folder_id??FOLDER_ID_ALL,e.order)this.handleDialogsPinned(r,e.order.map(s=>this.appPeersManager.getPeerId(s.peer)));else{let s;t?s=this.apiManager.invokeApi("messages.getPinnedSavedDialogs"):s=this.apiManager.invokeApi("messages.getPinnedDialogs",{folder_id:r}),s.then(a=>{this.applyDialogs(a),this.handleDialogsPinned(r,a.dialogs.map(n=>n.peerId))})}},this.onUpdateChannelPinnedTopics=async e=>{const t=e.channel_id,r=t.toPeerId(!0);if(!this.forumTopics.get(r))return;const a=r;if(e.order){const n=e.order.map(o=>this.appMessagesIdsManager.generateMessageId(o,t));this.handleDialogsPinned(a,n)}else{const n=await this.apiManager.getLimit("topicPin",!0),o=this.apiManager.invokeApi("channels.getForumTopics",{channel:this.appChatsManager.getChannelInput(t),limit:n,offset_date:0,offset_id:0,offset_topic:0}),f=(await this.processTopics(r,o)).topics.filter(l=>l.pFlags.pinned);this.handleDialogsPinned(a,f.map(l=>l.id))}},this.onUpdateChannelViewForumAsMessages=e=>{const t=e.channel_id.toPeerId(!0),r=this.getDialogOnly(t);r&&(e.enabled?r.pFlags.view_forum_as_messages=!0:delete r.pFlags.view_forum_as_messages,this.setDialogToState(r))}}after(){this.clear(!0);const e=t=>{const r=this.getCachedDialogs(!1);for(let s=0;s<r.length;++s)this.processDialogForFilter(r[s],t)};return this.rootScope.addEventListener("filter_order",()=>{const t=this.getCachedDialogs(!1);for(const r in this.folders)this.isVirtualFilter(+r)||delete this.folders[r];for(let r=0;r<t.length;++r){const s=t[r];this.processDialogForFilters(s)}}),this.rootScope.addEventListener("filter_update",e),this.rootScope.addEventListener("filter_new",e),this.rootScope.addEventListener("filter_delete",t=>{const r=this.getCachedDialogs(!1),s=this.getDialogIndexKeyByFilterId(t.id);for(let a=0;a<r.length;++a){const n=r[a];delete n[s]}delete this.folders[t.id]}),this.rootScope.addEventListener("dialog_notify_settings",t=>{this.processChangedUnreadOrUnmuted(t.peerId)}),this.rootScope.addEventListener("chat_update",t=>{const r=t.toPeerId(!0),s=this.getDialogOnly(r);s&&!this.canSaveDialog(r,s)&&this.dropDialogOnDeletion(r)}),this.rootScope.addEventListener("chat_toggle_forum",({chatId:t,enabled:r})=>{const s=t.toPeerId(!0);r||this.flushForumTopicsCache(s),this.processChangedUnreadOrUnmuted(s)}),this.rootScope.addEventListener("user_auth",()=>{this.rootScope.addEventListener("premium_toggle",()=>{[FOLDER_ID_ALL,FOLDER_ID_ARCHIVE].forEach(t=>{this.apiUpdatesManager.processLocalUpdate({_:"updatePinnedDialogs",folder_id:t})})})}),this.apiUpdatesManager.addMultipleEventsListeners({updateFolderPeers:this.onUpdateFolderPeers,updateDialogPinned:this.onUpdateDialogPinned,updateSavedDialogPinned:this.onUpdateDialogPinned,updateChannelPinnedTopic:this.onUpdateChannelPinnedTopic,updatePinnedDialogs:this.onUpdatePinnedDialogs,updatePinnedSavedDialogs:this.onUpdatePinnedDialogs,updateChannelPinnedTopics:this.onUpdateChannelPinnedTopics,updateChannelViewForumAsMessages:this.onUpdateChannelViewForumAsMessages}),Promise.all([this.appStateManager.getState(),this.appStoragesManager.loadStorage("dialogs")]).then(([t,{results:r,storage:s}])=>{this.storage=s,this.dialogs=this.storage.getCache();for(const a of REAL_FOLDERS){const n=t.pinnedOrders[a];if(!n)continue;const o=this.getPinnedOrders(a);o.splice(0,o.length,...n)}r.length&&AppStorage.freezeSaving(this.setDialogsFromState.bind(this,r),["chats","dialogs","messages","users"]),this.allDialogsLoaded=t.allDialogsLoaded||{},r.length&&this.appDraftsManager.addMissedDialogs()})}indexMyDialog(){const e=this.appUsersManager.getSelf().id.toPeerId(!1);if(this.getDialogOnly(e)){const r=this.appPeersManager.getPeerSearchText(e);this.dialogsIndex.indexObject(e,r)}}setDialogsFromState(e){for(let t=0,r=e.length;t<r;++t){const s=e[t];if(!s)continue;s.top_message=getServerMessageId(s.top_message),s.topMessage&&this.appMessagesManager.saveMessages([s.topMessage]);for(let n=0;n<=21;++n){const o=`index_${n}`;delete s[o]}this.saveDialog({dialog:s,ignoreOffsetDate:!0}),this.appMessagesManager.getMessageByPeer(s.peerId,s.top_message)||this.appMessagesManager.reloadConversation(s.peerId)}}isDialogsLoaded(e){return!!this.allDialogsLoaded[e]}setDialogsLoaded(e,t){const r=this.isVirtualFilter(e);e===GLOBAL_FOLDER_ID&&t?(this.allDialogsLoaded[FOLDER_ID_ALL]=t,this.allDialogsLoaded[FOLDER_ID_ARCHIVE]=t):(r&&defineNotNumerableProperties(this.allDialogsLoaded,[e]),this.allDialogsLoaded[e]=t),!r&&(Array.from(REAL_FOLDERS).every(s=>this.allDialogsLoaded[s])&&(this.allDialogsLoaded[GLOBAL_FOLDER_ID]=!0),this.saveAllDialogsLoaded())}saveAllDialogsLoaded(){this.appStateManager.pushToState("allDialogsLoaded",this.allDialogsLoaded)}createSearchIndex(){return new SearchIndex({clearBadChars:!0,ignoreCase:!0,latinize:!0,includeTag:!0})}handleDialogUnpinning(e,t){delete e.pFlags.pinned,indexOfAndSplice(this.getPinnedOrders(t),getDialogKey(e)),this.savePinnedOrders()}savePinnedOrders(){this.appStateManager.pushToState("pinnedOrders",this.pinnedOrders)}resetPinnedOrder(e){this.getPinnedOrders(e).length=0}getPinnedOrders(e){let t=this.pinnedOrders[e];return!t&&this.isVirtualFilter(e)&&(defineNotNumerableProperties(this.pinnedOrders,[e]),t=this.pinnedOrders[e]=[]),t}isDialogPinned(e,t){const r=this.filtersStorage.getFilter(t);let s;return r?s=r.pinnedPeerIds.indexOf(e)!==-1:s=!!this.getDialogOnly(e).pFlags.pinned,s}getOffsetDate(e){const t=this.dialogsOffsetDate[e]||0;return e===GLOBAL_FOLDER_ID&&!t?Math.min(...Array.from(REAL_FOLDERS).sort((r,s)=>r-s)):t}generateFolder(e){const t={dialogs:[],id:e,count:null,unreadMessagesCount:0,unreadPeerIds:new Set,unreadUnmutedPeerIds:new Set};return defineNotNumerableProperties(t,["dispatchUnreadTimeout"]),t}getFolder(e){var t;return(t=this.folders)[e]??(t[e]=this.generateFolder(e))}isVirtualFilter(e){return this.getFilterType(e)!==0}getFilterType(e){return e&&e<0?1:e===this.appPeersManager.peerId?2:0}isFilterIdForForum(e){return e&&e<0}getFilterIdForForum(e){return e.peerId}getFolderDialogs(e,t=!0){if(e===GLOBAL_FOLDER_ID)return this.getCachedDialogs(t);const r=this.getFolder(e),s=this.getFilterType(e);return s===1?t?r.dialogs.filter(a=>!a.pFlags.hidden):r.dialogs:s===2?r.dialogs:t?r.dialogs.filter(a=>a.migratedTo===void 0):r.dialogs}getNextDialog(e,t,r){const s=this.getFolderDialogs(r,!0);let a;if(!e)t&&(a=s[0]);else{const n=s.findIndex(o=>o.peerId===e);if(n!==-1){const o=t?n+1:n-1;a=s[o]}}return a}getDialogIndexKeyByFilterId(e){if(this.isVirtualFilter(e))return getDialogIndexKey();if(REAL_FOLDERS.has(e))return getDialogIndexKey(e);const t=this.filtersStorage.getFilter(e);return getDialogIndexKey(t.localId)}isDialogUnmuted(e){return!this.appNotificationsManager.isPeerLocalMuted({peerId:e.peerId,respectType:!0,threadId:isForumTopic(e)?e.id:void 0})}getFolderUnreadCount(e){const t=this.getFolder(e);return{unreadUnmutedCount:t.unreadUnmutedPeerIds.size,unreadCount:t.unreadPeerIds.size}}getCachedDialogs(e){const t=Array.from(REAL_FOLDERS).map(r=>this.getFolderDialogs(r,e));return[].concat(...t)}setDialogIndexInFilter(e,t,r){let s;const a=this.isVirtualFilter(this.getDialogFilterId(e)),n=a||REAL_FOLDERS.has(r.id);if(this.filtersStorage.testDialogForFilter(e,r)){const o=a?this.getPinnedOrdersByDialog(e):r.pinnedPeerIds,p=getDialogKey(e),c=o.indexOf(p);c!==-1?s=this.generateDialogIndex(this.generateDialogPinnedDateByIndex(o.length-1-c),!0):e.pFlags?.pinned||n?s=this.generateIndexForDialog(e,!0,void 0,!n):s=getDialogIndex(e)??this.generateIndexForDialog(e,!0)}return setDialogIndex(e,t,s)}getDialog(e,t,r,s=!0){const a=[];r&&(t=e),t===void 0?a.push(...Array.from(REAL_FOLDERS).map(o=>this.getFolder(o).dialogs)):a.push(this.getFolderDialogs(t,!1));let n;r?this.isFilterIdForForum(t)?n=o=>o.id===r:n=o=>o.savedPeerId===r:n=o=>o.peerId===e;for(const o of a){let p=0,c=0;for(let f=o.length;p<f;++p){const l=o[p];if(n(l))return[l,p-c];s&&(l.pFlags.hidden||l.migratedTo!==void 0)&&++c}}return[]}getDialogOnly(e){return this.dialogs[e]}getAnyDialog(e,t){return t?e.isUser()?this.savedDialogs[t]:this.getForumTopic(e,t):this.dialogs[e]}getDialogIndex(e,t,r){const s=isObject(e)?e:this.getAnyDialog(e,r);return getDialogIndex(s,t)}generateDialogIndex(e,t){return e??(e=tsNow(!0)+this.timeManager.getServerTimeOffset()),e*65536+(t?0:++this.dialogsNum&65535)}getDialogFilterId(e){let t;return isForumTopic(e)?t=this.getFilterIdForForum(e):isSavedDialog(e)?t=e.peerId:t=e.folder_id,t}getPinnedOrdersByDialog(e){return this.getPinnedOrders(this.getDialogFilterId(e))}processDialogForFilters(e,t){if(!isDialog(e)){this.processDialogForFilter(e,void 0,t);return}const r=this.filtersStorage.getFilters();for(const s in r){const a=r[s];this.processDialogForFilter(e,a,t)}}processDialogForFilter(e,t,r){const s=t?.id??this.getDialogFilterId(e),a=this.getDialogIndexKeyByFilterId(s),n=this.getFolder(s),o=n.dialogs,c={dialog:y=>y.peerId===e.peerId,forumTopic:y=>y.id===e.id,savedDialog:y=>y.savedPeerId===e.savedPeerId}[e._],f=o.findIndex(c),l=o[f],u=this.getDialogIndex(l,a);r&&!this.isVirtualFilter(s)&&s>FOLDER_ID_ARCHIVE&&(r=void 0);const g=r?void 0:this.setDialogIndexInFilter(e,a,t);return u===g?!1:(!!u!=!!g&&this.prepareFolderUnreadCountModifyingByDialog(s,e,!!g),f!==-1&&(o.splice(f,1),n.count!==null&&--n.count),g&&(insertInDescendSortedArray(o,e,y=>this.getDialogIndex(y,a),-1),f===-1&&n.count!==null&&++n.count),!0)}prepareDialogUnreadCountModifying(e,t){if(isSavedDialog(e))return()=>{};const r=isForumTopic(e),s=[],a=r?this.getFilterIdForForum(e):e.folder_id;if(s.push(this.prepareFolderUnreadCountModifyingByDialog(a,e,t)),!r){const n=this.filtersStorage.getFilters();for(const o in n){const p=n[o];this.filtersStorage.testDialogForFilter(e,p)&&s.push(this.prepareFolderUnreadCountModifyingByDialog(p.id,e,t))}}return()=>!t&&s.forEach(n=>n())}prepareFolderUnreadCountModifyingByDialog(e,t,r){if(isSavedDialog(t))return r!==void 0?void 0:()=>{};const s=this.appMessagesManager.getDialogUnreadCount(t),a=this.isDialogUnmuted(t);if(r!==void 0){const n=r?s:-s;this.modifyFolderUnreadCount(e,n,r&&!!s,r&&!!s&&a,t);return}return()=>{const n=this.appMessagesManager.getDialogUnreadCount(t),o=this.isDialogUnmuted(t),p=n-s;this.modifyFolderUnreadCount(e,p,!!n,n&&o,t)}}modifyFolderUnreadCount(e,t,r,s,a){const{peerId:n}=a,o=this.appPeersManager.isForum(n),p=isForumTopic(a);if(o&&!p&&!a.pFlags.view_forum_as_messages){const l=this.getForumUnreadCount(n);if(l instanceof Promise){l.then(({count:u,hasUnmuted:g})=>{a=this.getDialogOnly(n);const y=this.getFolder(e);!a||!this.appPeersManager.isForum(n)||!y||!y.dialogs.some(b=>b.peerId===n)||this.modifyFolderUnreadCount(e,0,!1,!1,a)});return}else t=0,r=l.count>0,s=l.hasUnmuted}const c=this.getFolder(e);t&&(c.unreadMessagesCount=Math.max(0,c.unreadMessagesCount+t));const f=getDialogKey(a);r?c.unreadPeerIds.add(f):c.unreadPeerIds.delete(f),s?c.unreadUnmutedPeerIds.add(f):c.unreadUnmutedPeerIds.delete(f),c.dispatchUnreadTimeout??(c.dispatchUnreadTimeout=ctx.setTimeout(()=>{c.dispatchUnreadTimeout=void 0;const l={...c};delete l.dialogs,this.rootScope.dispatchEvent("folder_unread",l),p&&this.processChangedUnreadOrUnmuted(n)},0))}processChangedUnreadOrUnmuted(e){const t=this.getDialogOnly(e);t&&(this.processDialogForFilters(t),this.prepareDialogUnreadCountModifying(t)(),this.rootScope.dispatchEvent("dialog_unread",{peerId:e,dialog:t}))}generateIndexForDialog(e,t,r,s){if(!t)return;const a=isForumTopic(e),n=isDialog(e);let o=0,p;if(a&&e.pFlags.hidden&&CAN_HIDE_TOPIC)o=this.generateDialogPinnedDateByIndex(4095),p=!0;else if(e.pFlags.pinned&&!s)o=this.generateDialogPinnedDate(e),p=!0;else{const{peerId:l}=e;if(r||(r=this.appMessagesManager.getMessageByPeer(l,e.top_message)),o=r?.date||o,n){const u=this.appPeersManager.isChannel(l)&&l.toChatId();if(u){const g=this.appChatsManager.getChat(u);(!o||g.date&&g.date>o)&&(o=g.date)}}(a||n)&&e.draft?._==="draftMessage"&&e.draft.date>o&&(o=e.draft.date)}o||(o=tsNow(!0));const c=this.generateDialogIndex(o,p);if(t)return c;const f=getDialogIndexKey(e.folder_id);setDialogIndex(e,f,c)}generateDialogPinnedDateByIndex(e){return 2147418112+(e&65535)}generateDialogPinnedDate(e){const t=this.getPinnedOrdersByDialog(e),r=getDialogKey(e);let s=t.indexOf(r);return s===-1&&(t.unshift(r),s=0,isDialog(e)&&this.savePinnedOrders()),this.generateDialogPinnedDateByIndex(t.length-1-s)}getDialogMessageForState(e){const{peerId:t}=e,r=isSavedDialog(e)?e.savedPeerId:void 0,s=this.appMessagesManager.getHistoryStorage(t,r),a=this.appMessagesManager.getHistoryMessagesStorage(t),n=s.history.slice;let o;for(let p=0,c=n.length;p<c;++p){const f=n[p],l=this.appMessagesManager.getMessageFromStorage(a,f);if(l&&!l.pFlags.is_outgoing){o=l;break}}return o}setDialogToState(e){if(!isDialog(e))return;const{peerId:t,pts:r}=e,s=this.getDialogMessageForState(e);if(s){const a=getPeerIdsFromMessage(s);this.peersStorage.requestPeersForKey(a,`topMessage_${t}`)}if(e.topMessage=s,t.isAnyChat()&&r){const a=this.apiUpdatesManager.getChannelState(t.toChatId(),r).pts;e.pts=a}this.storage.set({[t]:e}),this.peersStorage.requestPeer(t,"dialog")}pushDialog({dialog:e,offsetDate:t,ignoreOffsetDate:r,saveGlobalOffset:s}){const a=isDialog(e),{peerId:n}=e,o=getDialogKey(e);if(a?this.dialogs[o]=e:isForumTopic(e)?this.getForumTopicsCache(n).topics.set(o,e):isSavedDialog(e)&&(this.savedDialogs[o]=e),t??(t=this.getDialogOffsetDate(e)),this.processDialogForFilters(e),t&&!e.pFlags.pinned){if(a&&s){const f=this.dialogsOffsetDate[GLOBAL_FOLDER_ID];(!f||t<f)&&this.setDialogOffsetDate(GLOBAL_FOLDER_ID,t)}const p=this.getDialogFilterId(e),c=this.dialogsOffsetDate[p];if(!c||t<c){if(!r&&!this.isDialogsLoaded(p)){this.dropDialog(n,getDialogThreadId(e),!0);return}this.setDialogOffsetDate(p,t)}}this.setDialogToState(e)}dropDialogFromFolders(e,t,r){const s=this.getDialog(e,void 0,t,!1),[a,n]=s;if(a){const o=this.getDialogFilterId(a),p=indexOfAndSplice(this.getPinnedOrders(o),getDialogKey(a))!==void 0;this.processDialogForFilters(a,!0),r||(isForumTopic(a)?this.getForumTopicsCache(e).index.indexObject(t,""):isSavedDialog(a)||this.dialogsIndex.indexObject(e,"")),p&&this.savePinnedOrders()}return s}dropDialog(e,t,r){const s=this.getAnyDialog(e,t),a=this.dropDialogFromFolders(e,t,r);return s&&(r||(isForumTopic(s)?this.getForumTopicsCache(e).topics.delete(t):isSavedDialog(s)?delete this.savedDialogs[t]:delete this.dialogs[e]),this.clearDialogFromState(s,r)),a}clearDialogFromState(e,t){if(!isDialog(e))return;const{peerId:r}=e;this.peersStorage.requestPeersForKey([],`topMessage_${r}`),this.peersStorage.releasePeer(r,"dialog"),this.storage.delete(r,t)}dropDialogWithEvent(e,t){const r=this.dropDialog(e,t);return r.length&&this.rootScope.dispatchEvent("dialog_drop",r[0]),r}dropDialogOnDeletion(e,t){if(this.dropDialogWithEvent(e,t),this.appPeersManager.isBroadcast(e)){const r=this.appMessagesManager.getHistoryStorage(e),s=r?.channelJoinedMid;s&&(r.channelJoinedMid=void 0,this.apiUpdatesManager.processLocalUpdate({_:"updateDeleteChannelMessages",channel_id:e.toChatId(),messages:[s],pts:void 0,pts_count:void 0}))}this.rootScope.dispatchEvent("peer_deleted",e)}applyDialogs(e,t){const r=e._==="messages.forumTopics",s=e._==="messages.savedDialogs",a=!r&&!s,n=r?e.topics:e.dialogs;r?this.processTopics(t,e):a&&forEachReverse(e.dialogs,(c,f,l)=>{c._==="dialogFolder"&&l.splice(f,1)}),this.appMessagesManager.saveApiResult(e);const o=new Map,p=c=>{let f=o.get(c);return f||o.set(c,f={}),f};n.forEach(c=>{const f=this.getDialogPeerId(c);let l=c.top_message;const{pendingTopMsgs:u}=this.appMessagesManager;let g,y;a?g=f:r?(y=this.appMessagesIdsManager.generateMessageId(c.id,this.getDialogPeerId(c).toChatId()),g=`${f}_${y}`):(y=getPeerId(c.peer),g=`${f}_${y}`);const b=u[g];if(b){const A=this.appMessagesManager.getMessageByPeer(f,b),k=this.appMessagesManager.getMessageByPeer(f,l);(!l||A&&(!k||A?.date>k?.date))&&(c.top_message=l=b,this.appMessagesManager.getHistoryStorage(f,y).maxId=b)}if(l||c.draft?._==="draftMessage"){if(this.saveDialog({dialog:c})){const A=p(f);r?(A.topics??(A.topics=new Map)).set(c.id,c):s?(A.saved??(A.saved=new Map)).set(c.savedPeerId,c):A.dialog=c}}else this.dropDialogWithEvent(f,y);const I=this.appMessagesManager.getUpdateAfterReloadKey(f,y),S=this.appMessagesManager.newUpdatesAfterReloadToHandle[I];if(S!==void 0){const A=[...S];for(const k of A)S.delete(k),this.apiUpdatesManager.saveUpdate(k);S.size||delete this.appMessagesManager.newUpdatesAfterReloadToHandle[I]}}),o.size&&this.rootScope.dispatchEvent("dialogs_multiupdate",o)}getDialogOffsetDate(e){return this.getDialogMessageForState(e)?.date||0}setDialogOffsetDate(e,t){return this.log("setting offset date",e,t),this.dialogsOffsetDate[e]=t}canSaveDialog(e,t){if(e.isAnyChat()){const r=this.appChatsManager.getChat(e.toChatId());if(r._==="channelForbidden"||r.pFlags.left)return!1}else if(this.appUsersManager.isDeleted(e.toUserId())&&!getServerMessageId(t.top_message))return!1;return!0}getDialogPeerId(e){const{peerId:t}=e;return t||(isSavedDialog(e)?this.appPeersManager.peerId:this.appPeersManager.getPeerId(e.peer))}saveDialog({dialog:e,folderId:t,ignoreOffsetDate:r,saveGlobalOffset:s}){const a=isForumTopic(e),n=isSavedDialog(e),o=isDialog(e),p=this.getDialogPeerId(e),c=this.appPeersManager.isChannel(p)?p.toChatId():void 0,f=n?getPeerId(e.peer):void 0,l=a?e.id=this.appMessagesIdsManager.generateMessageId(e.id,c):n?f:void 0;if(o&&(t??(t=e.folder_id??FOLDER_ID_ALL)),!p)return this.log.error("saveConversation no peerId???",e,t),!1;if(o&&e._!=="dialog"&&this.log.error("saveConversation not regular dialog",e,Object.assign({},e)),o&&!c&&p.isAnyChat()){const S=this.appChatsManager.getChat(p.toChatId());if(S&&S.migrated_to&&S.pFlags.deactivated){const A=this.appPeersManager.getPeerId(S.migrated_to);this.appMessagesManager.migratedFromTo[p]=A,this.appMessagesManager.migratedToFrom[A]=p,e.migratedTo=A}}if(o&&!this.canSaveDialog(p,e))return!1;if(a)this.getForumTopicsCache(p).index.indexObject(l,e.title);else if(o&&!e.migratedTo){const S=this.appPeersManager.getPeerSearchText(p);this.dialogsIndex.indexObject(p,S)}const u=this.getAnyDialog(p,l);let g,y;if(e.top_message,g=this.appMessagesIdsManager.generateMessageId(e.top_message,c),(u?.top_message&&this.appMessagesManager.getMessageByPeer(p,u.top_message))?.pFlags?.is_outgoing&&u.top_message>=g&&(g=u.top_message),y=this.appMessagesManager.getMessageByPeer(p,g),e.top_message=g,n||(e.read_inbox_max_id=this.appMessagesIdsManager.generateMessageId(u&&!e.read_inbox_max_id?u.read_inbox_max_id:e.read_inbox_max_id,c),e.read_outbox_max_id=this.appMessagesIdsManager.generateMessageId(u&&!e.read_outbox_max_id?u.read_outbox_max_id:e.read_outbox_max_id,c)),o&&e.folder_id===void 0&&e._==="dialog"&&(e.folder_id=u?u.folder_id:t),n?e.savedPeerId=f:e.draft=this.appDraftsManager.saveDraft({peerId:p,threadId:l,draft:e.draft}),e.peerId=p,!n&&y&&y.pFlags.is_outgoing){const S=y.pFlags.out,A=e[S?"read_outbox_max_id":"read_inbox_max_id"];g>A?(y.pFlags.unread=!0,!e.unread_count&&!S&&++e.unread_count):delete y.pFlags.unread}const b=this.appMessagesManager.getHistoryStorage(p,l),I=b.history.slice;if(g&&(!I.length||!I.isEnd(SliceEnd.Bottom)?(b.history.unshift(g),b.count||(b.count=b.history.length),this.appMessagesManager.mergeReplyKeyboard(b,y)&&this.rootScope.dispatchEvent("history_reply_markup",{peerId:p}),b.originalInsertSlice&&this.appMessagesManager.insertChannelJoinedService(p,b,b.history.slice)):o&&!u&&this.appMessagesManager.insertChannelJoinedService(p,b)),o&&e.top_message<b.history.first[0]&&(g=e.top_message=b.history.first[0],e.topMessage=this.appMessagesManager.getMessageByPeer(p,e.top_message)),b.maxId=g,n||(b.readMaxId=e.read_inbox_max_id,b.readOutboxMaxId=e.read_outbox_max_id,this.appNotificationsManager.savePeerSettings({peerId:p,threadId:a?e.id:void 0,settings:e.notify_settings})),o&&c&&e.pts&&this.apiUpdatesManager.addChannelState(c,e.pts),this.generateIndexForDialog(e),u){const S=this.dialogsStorage.prepareDialogUnreadCountModifying(u);safeReplaceObject(u,e),S()}return this.pushDialog({dialog:e,ignoreOffsetDate:r,saveGlobalOffset:s}),a&&this.processTopicUpdate(e,u),!0}processTopicUpdate(e,t){if(!t)return;const{peerId:r,id:s}=e,a=e.icon_emoji_id!==t.icon_emoji_id,n=e.title!==t.title,o=a||n;a&&this.rootScope.dispatchEvent("avatar_update",{peerId:r,threadId:s}),o&&this.rootScope.dispatchEvent("peer_title_edit",{peerId:r,threadId:s})}getDialogs(e){const{query:t="",offsetIndex:r,limit:s=20,filterId:a=FOLDER_ID_ALL,filterType:n=this.getFilterType(a),skipMigrated:o=n===1,forceLocal:p,recursion:c}=e,f=this.isFilterIdForForum(a),l=this.isVirtualFilter(a);if(!l&&!REAL_FOLDERS.has(a)){const T=[],O=this.appUsersManager.fillContacts();O.cached||T.push(O.promise);const $=this.filtersStorage.reloadMissingPeerIds(a);if($&&T.push($),T.length)return Promise.all(T).then(()=>this.getDialogs(e))}const u=(!REAL_FOLDERS.has(a)||this.getOffsetDate(a))&&!l?GLOBAL_FOLDER_ID:a;let g=this.getFolderDialogs(a,o);const y=this.getDialogIndexKeyByFilterId(a),b=n!==2,I=n===1;if(t&&b){if(!s||this.cachedResults.query!==t||this.cachedResults.folderId!==a||c){this.cachedResults.query=t,this.cachedResults.folderId=a;const O=(f?this.getForumTopicsCache(a).index:this.dialogsIndex).search(t),$=[];if(f)for(const K of O){const ee=this.getForumTopic(a,K);ee&&$.push(ee)}else for(const K of O){const ee=this.dialogs[K];ee&&ee.folder_id===a&&$.push(ee)}$.sort((K,ee)=>this.getDialogIndex(ee,y)-this.getDialogIndex(K,y)),this.cachedResults.dialogs=$,this.cachedResults.count=$.length}g=this.cachedResults.dialogs}else this.cachedResults.query="";let S=0;if(r>0)for(let T=g.length;S<T&&!(r>this.getDialogIndex(g[S],y));++S);const A=this.isDialogsLoaded(u),k=g.length>=S+s;if(!I&&t||A||k||p){const T=g.slice(S,S+s);return{dialogs:T,count:A?g.length:this.getFolder(a).count,isTopEnd:g.length&&(T[0]&&T[0]===g[0]||this.getDialogIndex(g[0],y)<r),isEnd:((I?!1:t)||A)&&S+s>=g.length}}return this.appMessagesManager.getTopMessages({limit:s,folderId:u,query:t,offsetTopicId:f&&t?g[g.length-1]?.id:void 0}).then(T=>{if(t)return this.getDialogs({...e,forceLocal:!0,recursion:!0});const O=this.getFolder(a);if(O.count=T.count,o&&(g=this.getFolderDialogs(a,o)),S=0,r>0)for(let K=g.length;S<K&&!(r>this.getDialogIndex(g[S],y));++S);const $=g.slice(S,S+s);return{dialogs:$,count:T.count??g.length,isTopEnd:g.length&&($[0]&&$[0]===g[0]||this.getDialogIndex(g[0],y)<r),isEnd:T.isEnd&&g[g.length-1]===$[$.length-1]}})}async markFolderAsRead(e){const r=[...this.getFolder(e).unreadPeerIds];for(const s of r)await this.appMessagesManager.markDialogUnread(s,!0)}flushForumTopicsCache(e){const t=this.forumTopics.get(e);if(!t)return;const r=this.folders[e];r&&(r.dispatchUnreadTimeout&&clearTimeout(r.dispatchUnreadTimeout),delete this.allDialogsLoaded[e],delete this.pinnedOrders[e],delete this.dialogsOffsetDate[e],delete this.folders[e]),t.topics.clear()}getForumTopicsCache(e){let t=this.forumTopics.get(e);return t||(t={topics:new Map,deletedTopics:new Set,getTopicPromises:new Map,index:this.createSearchIndex()},this.forumTopics.set(e,t)),t}getForumTopicById(e,t){if(!this.appPeersManager.isForum(e))return Promise.reject(makeError("CHANNEL_FORUM_MISSING"));const r=this.getForumTopicsCache(e);let s;if(t){if(s=r.getTopicPromises.get(t),s)return s;if(r.deletedTopics.has(t))return Promise.resolve(void 0);r.getTopicPromises.set(t,s=deferredPromise())}return r.getTopicsPromise??(r.getTopicsPromise=pause(0).then(()=>{const a={},n=[];for(const[p,c]of r.getTopicPromises)a[p]=c,n.push(getServerMessageId(p));r.getTopicPromises.clear();const o=()=>{for(const p in a)a[p].resolve(void 0),r.deletedTopics.add(+p)};if(this.getForumTopicsCache(e)!==r){o();return}return this.apiManager.invokeApi("channels.getForumTopicsByID",{channel:this.appChatsManager.getChannelInput(e.toChatId()),topics:n}).then(p=>{if(this.getForumTopicsCache(e)===r)return this.applyDialogs(p,e),p.topics.forEach(c=>{isForumTopic(c)&&(a[c.id].resolve(c),delete a[c.id])}),p},()=>{}).then(()=>{o(),r.getTopicsPromise=void 0,r.getTopicPromises.size&&this.getForumTopicById(e)})})),s||r.getTopicsPromise}getForumTopic(e,t){return this.forumTopics.get(e)?.topics?.get(t)}getForumTopicOrReload(e,t){const r=this.getForumTopic(e,t);return r||(this.getForumTopicsCache(e)?.deletedTopics?.has(t)?void 0:this.getForumTopicById(e,t))}processTopics(e,t){return callbackify(t,r=>{"pts"in r&&this.apiUpdatesManager.addChannelState(e.toChatId(),r.pts);const s=this.appPeersManager.getOutputPeer(e);return r.topics=r.topics.map(a=>{if(isForumTopic(a))return a.peer=s,a.id=this.appMessagesIdsManager.generateMessageId(a.id,s.channel_id),a}).filter(Boolean),r})}processTopicsPromise(e,t){return t.then(r=>(this.processTopics(e,r),r))}getForumUnreadCount(e,t){if(!this.appPeersManager.isForum(e))return;if(t){const a=this.getDialogOnly(e);if(a&&a.pFlags.view_forum_as_messages)return}const r=this.getFolder(e),s=r.dialogs.length>=20||this.isDialogsLoaded(e)?r.dialogs.slice(0,20):callbackify(this.getDialogs({filterId:e,limit:20}),a=>a.dialogs);return callbackify(s,a=>({count:a.reduce((n,o)=>n+ +!!o.unread_count,0),hasUnmuted:a.some(n=>n.unread_count&&this.isDialogUnmuted(n))}))}canManageTopic(e){if(e.pFlags.my)return!0;const t=e.peerId.toChatId();return this.appChatsManager.getChat(t).admin_rights?this.appChatsManager.hasRights(e.peerId.toChatId(),"manage_topics"):!1}getSavedDialogById(e){let t=this.savedDialogsPromises.get(e);if(t)return t;const r=this.appPeersManager.peerId;t=this.apiManager.invokeApi("messages.getSavedHistory",{peer:this.appPeersManager.getInputPeerById(e),add_offset:0,hash:0,limit:1,max_id:0,min_id:0,offset_date:0,offset_id:0}).then(s=>{this.savedDialogsPromises.get(e)===t&&this.savedDialogsPromises.delete(e),this.appMessagesManager.saveApiResult(s);const n=s.messages[0];if(!n){this.log("reloaded saved dialog is empty",e),this.dropDialogOnDeletion(r,e);return}const o=this.getPinnedOrders(r),p={_:"savedDialog",peer:this.appPeersManager.getOutputPeer(e),pFlags:{pinned:o.includes(e)||void 0},top_message:n.id||0};return this.log("saving reloaded saved dialog",e),this.applyDialogs({_:"messages.savedDialogs",dialogs:[p]}),p.peerId?p:void 0})}handleDialogTogglePinned(e,t,r){e&&(t?e.pFlags.pinned=!0:this.handleDialogUnpinning(e,r),this.generateIndexForDialog(e)),this.appMessagesManager.scheduleHandleNewDialogs(e.peerId,e)}handleDialogsPinned(e,t){const r=this.isFilterIdForForum(e),s=e===this.appPeersManager.peerId,a=r||s;this.resetPinnedOrder(e),this.getPinnedOrders(e).push(...t),this.savePinnedOrders(),t.reverse();const n={};t.forEach(p=>{n[p]=!0;const c=a?e:p,f=a?p:void 0,l=this.getAnyDialog(c,f);this.appMessagesManager.scheduleHandleNewDialogs(c,l),l&&(l.pFlags.pinned=!0,this.generateIndexForDialog(l))});const o=this.getFolderDialogs(e,!1);for(const p of o){if(!p.pFlags.pinned)break;n[getDialogKey(p)]||(delete p.pFlags.pinned,this.generateIndexForDialog(p),this.appMessagesManager.scheduleHandleNewDialogs(p.peerId,p))}}}function copy(d){if(d===null||typeof d!="object")return d;if(d instanceof Date)return new Date(d.getTime());if(Array.isArray(d))return d.map(s=>copy(s));if(ArrayBuffer.isView(d))return d.slice();const e=new d.constructor;for(var t in d)d.hasOwnProperty(t)&&(e[t]=copy(d[t]));return e}function findAndSplice(d,e){const t=d.findIndex(e);return t!==-1?d.splice(t,1)[0]:void 0}const convertment=[["pinned_peers","pinnedPeerIds"],["exclude_peers","excludePeerIds"],["include_peers","includePeerIds"]],PREPENDED_FILTERS=REAL_FOLDERS.size,LOCAL_FILTER={_:"dialogFilter",pFlags:{},id:0,title:"",exclude_peers:[],include_peers:[],pinned_peers:[],excludePeerIds:[],includePeerIds:[],pinnedPeerIds:[]};class FiltersStorage extends AppManager{constructor(){super(...arguments),this.clear=e=>{if(!e)this.reloadedPeerIds.clear(),this.clearFilters();else{this.filters={},this.filtersArr=[],this.reloadedPeerIds=new Set,this.localFilters={};for(const t of REAL_FOLDERS)this.localFilters[t]=this.generateLocalFilter(t)}this.localId=START_LOCAL_ID},this.onUpdateDialogFilter=e=>{e.filter?this.saveDialogFilter(e.filter):this.filters[e.id]&&(this.rootScope.dispatchEvent("filter_delete",this.filters[e.id]),delete this.filters[e.id],findAndSplice(this.filtersArr,t=>t.id===e.id)),this.pushToState()},this.onUpdateDialogFilters=e=>{const t=copy(this.filters);this.getDialogFilters(!0).then(r=>{for(const s in t){const a=+s;r.find(n=>n.id===a)||this.onUpdateDialogFilter({_:"updateDialogFilter",id:a})}this.onUpdateDialogFilterOrder({_:"updateDialogFilterOrder",order:r.map(s=>s.id)})})},this.onUpdateDialogFilterOrder=e=>{const t=e.order.slice();t.includes(FOLDER_ID_ARCHIVE)||t.splice(t[0]===FOLDER_ID_ALL?1:0,0,FOLDER_ID_ARCHIVE),this.localId=START_LOCAL_ID,t.forEach(r=>{const s=this.filters[r];delete s.localId,this.setLocalId(s)}),this.rootScope.dispatchEvent("filter_order",t),this.pushToState()}}after(){return this.clear(!0),this.apiUpdatesManager.addMultipleEventsListeners({updateDialogFilter:this.onUpdateDialogFilter,updateDialogFilters:this.onUpdateDialogFilters,updateDialogFilterOrder:this.onUpdateDialogFilterOrder}),this.rootScope.addEventListener("premium_toggle",()=>{this.onUpdateDialogFilters({_:"updateDialogFilters"})}),this.appStateManager.getState().then(e=>{this.prependFilters(e.filtersArr).map(r=>{this.saveDialogFilter(r,!1,!0)})})}prependFilters(e){e=e.slice();const t=this.localFilters[FOLDER_ID_ALL],r=this.localFilters[FOLDER_ID_ARCHIVE],s=e.findIndex(a=>a._==="dialogFilterDefault"||a.id===FOLDER_ID_ALL);return s!==-1?e[s]=t:e.unshift(t),findAndSplice(e,a=>a.id===FOLDER_ID_ARCHIVE),e.splice(e[0]===t?1:0,0,r),this.localId=START_LOCAL_ID,e.forEach(a=>{delete a.localId}),e}generateLocalFilter(e){const t={...copy(LOCAL_FILTER),id:e};return e===FOLDER_ID_ALL?t.pFlags.exclude_archived=!0:e===FOLDER_ID_ARCHIVE&&(t.pFlags.exclude_unarchived=!0),REAL_FOLDERS.has(e)&&(t.pinnedPeerIds=this.dialogsStorage.getPinnedOrders(e)),t}pushToState(){this.appStateManager.pushToState("filtersArr",this.filtersArr)}testDialogForFilter(e,t){if(!t||!isDialog(e))return!0;const{peerId:r}=e;if(REAL_FOLDERS.has(t.id))return e.folder_id===t.id&&this.dialogsStorage.canSaveDialog(r,e);if(!this.appMessagesManager.getDialogOnly(r)||t.excludePeerIds?.includes(r))return!1;if(t.includePeerIds?.includes(r))return!0;const s=t.pFlags;if(!s)return!0;if(s.exclude_archived&&e.folder_id===FOLDER_ID_ARCHIVE||s.exclude_read&&!this.appMessagesManager.isDialogUnread(e)||s.exclude_muted&&this.appNotificationsManager.isPeerLocalMuted({peerId:r})&&!(e.unread_mentions_count&&e.unread_count))return!1;if(this.appPeersManager.isAnyChat(r)){if(s.broadcasts&&this.appPeersManager.isBroadcast(r)||s.groups&&this.appPeersManager.isAnyGroup(r))return!0}else{const a=r.toUserId();if(this.appUsersManager.isBot(a))return!!s.bots;if(s.non_contacts&&!this.appUsersManager.isContact(a)||s.contacts&&this.appUsersManager.isContact(a))return!0}return!1}testDialogForFilterId(e,t){return this.testDialogForFilter(e,this.filters[t])}getFilter(e){return this.filters[e]}getFilters(){return this.filters}clearFilters(){const e=this.getFilters();for(const t in e)REAL_FOLDERS.has(+t)||this.onUpdateDialogFilter({_:"updateDialogFilter",id:+t})}async toggleDialogPin(e,t){const r=this.filters[t],s=r.pinnedPeerIds.indexOf(e),a=s!==-1;if(a&&(r.pinned_peers.splice(s,1),r.pinnedPeerIds.splice(s,1)),!a){if(r.pinned_peers.length>=await this.apiManager.getLimit("folderPin"))return Promise.reject(makeError("PINNED_DIALOGS_TOO_MUCH"));r.pinned_peers.unshift(this.appPeersManager.getInputPeerById(e)),r.pinnedPeerIds.unshift(e)}return this.updateDialogFilter(r)}createDialogFilter(e,t){const r=Math.max(1,...Object.keys(this.filters).map(s=>+s));return e=copy(e),e.id=r+1,this.updateDialogFilter(e,void 0,t)}updateDialogFilter(e,t=!1,r=!1){return this.apiManager.invokeApi("messages.updateDialogFilter",{id:e.id,filter:t?void 0:this.getOutputDialogFilter(e)}).then(()=>{if(this.onUpdateDialogFilter({_:"updateDialogFilter",id:e.id,filter:t?void 0:e}),r){const a=Object.values(this.filters).sort((n,o)=>n.localId-o.localId).map(n=>n.id);indexOfAndSplice(a,e.id),indexOfAndSplice(a,FOLDER_ID_ARCHIVE),a.splice(a[0]===FOLDER_ID_ALL?1:0,0,e.id),this.onUpdateDialogFilterOrder({_:"updateDialogFilterOrder",order:a})}return e})}updateDialogFiltersOrder(e){return this.apiManager.invokeApi("messages.updateDialogFiltersOrder",{order:e}).then(()=>{this.onUpdateDialogFilterOrder({_:"updateDialogFilterOrder",order:e})})}getOutputDialogFilter(e){const t=copy(e);return this.filterIncludedPinnedPeers(e),t}filterIncludedPinnedPeers(e){forEachReverse(e.includePeerIds,(t,r)=>{e.pinnedPeerIds.includes(t)&&(e.include_peers.splice(r,1),e.includePeerIds.splice(r,1))})}reloadMissingPeerIds(e,t="pinned_peers"){const s=this.getFilter(e)?.[t];if(!s?.length)return;const a=s.filter(p=>{const c=this.appPeersManager.getPeerId(p),f=this.reloadedPeerIds.has(c),l=this.appMessagesManager.getDialogOnly(c);return!f&&!l});if(!a.length)return;const n=a.map(p=>{const c=this.appPeersManager.getPeerId(p);return this.appMessagesManager.reloadConversation(p).then(l=>(this.reloadedPeerIds.add(c),l?void 0:c))});return Promise.all(n).then(p=>{p=p.filter(Boolean),p.length})}async getDialogFilters(e=!1){const t=Object.keys(this.filters);if(t.length>PREPENDED_FILTERS&&!e)return t.map(a=>this.filters[a]).sort((a,n)=>a.localId-n.localId);const r=await this.apiManager.invokeApiSingle("messages.getDialogFilters");return this.prependFilters(r.filters).map(a=>this.saveDialogFilter(a,e)).filter(Boolean)}getSuggestedDialogsFilters(){return this.apiManager.invokeApi("messages.getSuggestedDialogFilters")}saveDialogFilter(e,t=!0,r){e._==="dialogFilterDefault"&&(e=this.localFilters[FOLDER_ID_ALL]),REAL_FOLDERS.has(e.id)||(convertment.forEach(([a,n])=>{const o=e[a];o&&(e[n]=o.map(p=>this.appPeersManager.getPeerId(p)))}),this.filterIncludedPinnedPeers(e),e.include_peers=e.pinned_peers.concat(e.include_peers),e.includePeerIds=e.pinnedPeerIds.concat(e.includePeerIds));const s=this.filters[e.id];return s?e=Object.assign(s,e):this.filters[e.id]=e,this.setLocalId(e),r||(t?this.rootScope.dispatchEvent("filter_update",e):s||this.rootScope.dispatchEvent("filter_new",e)),e}setLocalId(e){e.localId!==void 0?e.localId>=this.localId&&(this.localId=e.localId+1):(e.localId=this.localId++,findAndSplice(this.filtersArr,t=>t.id===e.id),this.filtersArr.push(e),this.pushToState())}async isFilterIdAvailable(e){if(REAL_FOLDERS.has(e))return!0;const t=await this.apiManager.getLimit("folders");return this.filtersArr.filter(s=>!REAL_FOLDERS.has(s.id)).slice(0,t).some(s=>s.id===e)}getChatlistInput(e){return{_:"inputChatlistDialogFilter",filter_id:e}}exportChatlistInvite(e){return this.apiManager.invokeApiSingleProcess({method:"chatlists.exportChatlistInvite",params:{chatlist:this.getChatlistInput(e.id),title:e.title,peers:e.include_peers},processResult:t=>(this.saveDialogFilter(t.filter),t)})}deleteExportedInvite(e,t){return this.apiManager.invokeApiSingleProcess({method:"chatlists.deleteExportedInvite",params:{chatlist:this.getChatlistInput(e),slug:t}})}editExportedInvite(e,t,r,s){return this.apiManager.invokeApi("chatlists.editExportedInvite",{chatlist:this.getChatlistInput(e),slug:t,title:s,peers:r.map(a=>this.appPeersManager.getInputPeerById(a))})}getExportedInvites(e){return this.getFilter(e)?._==="dialogFilter"?Promise.reject(makeError("FILTER_NOT_SUPPORTED")):this.apiManager.invokeApiSingleProcess({method:"chatlists.getExportedInvites",params:{chatlist:this.getChatlistInput(e)},processResult:r=>(this.appUsersManager.saveApiUsers(r.users),this.appChatsManager.saveApiChats(r.chats),r.invites)})}checkChatlistInvite(e){return this.apiManager.invokeApiSingleProcess({method:"chatlists.checkChatlistInvite",params:{slug:e},processResult:t=>(this.appUsersManager.saveApiUsers(t.users),this.appChatsManager.saveApiChats(t.chats),t)})}joinChatlistInvite(e,t){return this.apiManager.invokeApiSingleProcess({method:"chatlists.joinChatlistInvite",params:{slug:e,peers:t.map(r=>this.appPeersManager.getInputPeerById(r))},processResult:r=>{this.apiUpdatesManager.processUpdateMessage(r);const a=r.updates.find(n=>n._==="updateDialogFilter").id;return this.rootScope.dispatchEvent("filter_joined",this.getFilter(a)),a}})}getChatlistUpdates(e){if(this.getFilter(e)?._!=="dialogFilterChatlist")return Promise.reject(makeError("FILTER_NOT_SUPPORTED"));const r=Date.now();return this.apiManager.invokeApiSingleProcess({method:"chatlists.getChatlistUpdates",params:{chatlist:this.getChatlistInput(e)},processResult:s=>{this.appUsersManager.saveApiUsers(s.users),this.appChatsManager.saveApiChats(s.chats);const a=this.getFilter(e);return a?._==="dialogFilterChatlist"&&(a.updatedTime=r,this.pushToState()),s}})}joinChatlistUpdates(e,t){return this.apiManager.invokeApiSingleProcess({method:"chatlists.joinChatlistUpdates",params:{chatlist:this.getChatlistInput(e),peers:t.map(r=>this.appPeersManager.getInputPeerById(r))},processResult:r=>{this.apiUpdatesManager.processUpdateMessage(r)}})}hideChatlistUpdates(e){return this.apiManager.invokeApiSingle("chatlists.hideChatlistUpdates",{chatlist:this.getChatlistInput(e)})}getLeaveChatlistSuggestions(e){return this.apiManager.invokeApiSingle("chatlists.getLeaveChatlistSuggestions",{chatlist:this.getChatlistInput(e)})}leaveChatlist(e,t){return this.apiManager.invokeApiSingleProcess({method:"chatlists.leaveChatlist",params:{chatlist:this.getChatlistInput(e),peers:t.map(r=>this.appPeersManager.getInputPeerById(r))},processResult:r=>{this.apiUpdatesManager.processUpdateMessage(r)}})}}function filterUnique(d){return[...new Set(d)]}const originalString="((?:👨🏻‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👨🏼‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👨🏽‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👨🏾‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👨🏿‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👩🏻‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👩🏻‍❤️?‍💋‍👩\uD83C[\uDFFB-\uDFFF]|👩🏼‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👩🏼‍❤️?‍💋‍👩\uD83C[\uDFFB-\uDFFF]|👩🏽‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👩🏽‍❤️?‍💋‍👩\uD83C[\uDFFB-\uDFFF]|👩🏾‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👩🏾‍❤️?‍💋‍👩\uD83C[\uDFFB-\uDFFF]|👩🏿‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👩🏿‍❤️?‍💋‍👩\uD83C[\uDFFB-\uDFFF]|🧑🏻‍❤️?‍💋‍🧑\uD83C[\uDFFC-\uDFFF]|🧑🏼‍❤️?‍💋‍🧑\uD83C[\uDFFB\uDFFD-\uDFFF]|🧑🏽‍❤️?‍💋‍🧑\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|🧑🏾‍❤️?‍💋‍🧑\uD83C[\uDFFB-\uDFFD\uDFFF]|🧑🏿‍❤️?‍💋‍🧑\uD83C[\uDFFB-\uDFFE]|👨🏻‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👨🏻‍🤝‍👨\uD83C[\uDFFC-\uDFFF]|👨🏼‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👨🏼‍🤝‍👨\uD83C[\uDFFB\uDFFD-\uDFFF]|👨🏽‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👨🏽‍🤝‍👨\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|👨🏾‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👨🏾‍🤝‍👨\uD83C[\uDFFB-\uDFFD\uDFFF]|👨🏿‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👨🏿‍🤝‍👨\uD83C[\uDFFB-\uDFFE]|👩🏻‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👩🏻‍❤️?‍👩\uD83C[\uDFFB-\uDFFF]|👩🏻‍🤝‍👨\uD83C[\uDFFC-\uDFFF]|👩🏻‍🤝‍👩\uD83C[\uDFFC-\uDFFF]|👩🏼‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👩🏼‍❤️?‍👩\uD83C[\uDFFB-\uDFFF]|👩🏼‍🤝‍👨\uD83C[\uDFFB\uDFFD-\uDFFF]|👩🏼‍🤝‍👩\uD83C[\uDFFB\uDFFD-\uDFFF]|👩🏽‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👩🏽‍❤️?‍👩\uD83C[\uDFFB-\uDFFF]|👩🏽‍🤝‍👨\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|👩🏽‍🤝‍👩\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|👩🏾‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👩🏾‍❤️?‍👩\uD83C[\uDFFB-\uDFFF]|👩🏾‍🤝‍👨\uD83C[\uDFFB-\uDFFD\uDFFF]|👩🏾‍🤝‍👩\uD83C[\uDFFB-\uDFFD\uDFFF]|👩🏿‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👩🏿‍❤️?‍👩\uD83C[\uDFFB-\uDFFF]|👩🏿‍🤝‍👨\uD83C[\uDFFB-\uDFFE]|👩🏿‍🤝‍👩\uD83C[\uDFFB-\uDFFE]|🧑🏻‍❤️?‍🧑\uD83C[\uDFFC-\uDFFF]|🧑🏻‍🤝‍🧑\uD83C[\uDFFB-\uDFFF]|🧑🏼‍❤️?‍🧑\uD83C[\uDFFB\uDFFD-\uDFFF]|🧑🏼‍🤝‍🧑\uD83C[\uDFFB-\uDFFF]|🧑🏽‍❤️?‍🧑\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|🧑🏽‍🤝‍🧑\uD83C[\uDFFB-\uDFFF]|🧑🏾‍❤️?‍🧑\uD83C[\uDFFB-\uDFFD\uDFFF]|🧑🏾‍🤝‍🧑\uD83C[\uDFFB-\uDFFF]|🧑🏿‍❤️?‍🧑\uD83C[\uDFFB-\uDFFE]|🧑🏿‍🤝‍🧑\uD83C[\uDFFB-\uDFFF]|👨‍❤️?‍💋‍👨|👩‍❤️?‍💋‍\uD83D[\uDC68\uDC69]|🫱🏻‍🫲\uD83C[\uDFFC-\uDFFF]|🫱🏼‍🫲\uD83C[\uDFFB\uDFFD-\uDFFF]|🫱🏽‍🫲\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|🫱🏾‍🫲\uD83C[\uDFFB-\uDFFD\uDFFF]|🫱🏿‍🫲\uD83C[\uDFFB-\uDFFE]|👨‍❤️?‍👨|👩‍❤️?‍\uD83D[\uDC68\uDC69]|🧑‍🤝‍🧑|👫\uD83C[\uDFFB-\uDFFF]|👬\uD83C[\uDFFB-\uDFFF]|👭\uD83C[\uDFFB-\uDFFF]|💏\uD83C[\uDFFB-\uDFFF]|💑\uD83C[\uDFFB-\uDFFF]|🤝\uD83C[\uDFFB-\uDFFF]|\uD83D[\uDC6B-\uDC6D\uDC8F\uDC91]|🤝)|(?:\uD83D[\uDC68\uDC69]|🧑)(?:\uD83C[\uDFFB-\uDFFF])?‍(?:⚕️?|⚖️?|✈️?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C[\uDFCB\uDFCC]|\uD83D[\uDD74\uDD75]|⛹)(?:(?:\uD83C[\uDFFB-\uDFFF]|️?)‍[♀♂]️?)|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?‍[♀♂]️?|(?:👨‍👨‍👦‍👦|👨‍👨‍👧‍\uD83D[\uDC66\uDC67]|👨‍👩‍👦‍👦|👨‍👩‍👧‍\uD83D[\uDC66\uDC67]|👩‍👩‍👦‍👦|👩‍👩‍👧‍\uD83D[\uDC66\uDC67]|👨‍👦‍👦|👨‍👧‍\uD83D[\uDC66\uDC67]|👨‍👨‍\uD83D[\uDC66\uDC67]|👨‍👩‍\uD83D[\uDC66\uDC67]|👩‍👦‍👦|👩‍👧‍\uD83D[\uDC66\uDC67]|👩‍👩‍\uD83D[\uDC66\uDC67]|🏳️?‍⚧️?|🏳️?‍🌈|😶‍🌫️?|❤️?‍🔥|❤️?‍🩹|🏴‍☠️?|🐕‍🦺|🐻‍❄️?|👁‍🗨|👨‍\uD83D[\uDC66\uDC67]|👩‍\uD83D[\uDC66\uDC67]|👯‍♀️?|👯‍♂️?|😮‍💨|😵‍💫|🤼‍♀️?|🤼‍♂️?|🧞‍♀️?|🧞‍♂️?|🧟‍♀️?|🧟‍♂️?|🐈‍⬛)|[#*0-9]️??⃣|(?:[©®™♟]️?)|(?:\uD83C[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE1A\uDE2F\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF3\uDFF5\uDFF7]|\uD83D[\uDC3F\uDC41\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]|[‼⁉ℹ↔-↙↩↪⌚⌛⌨⏏⏭-⏯⏱⏲⏸-⏺Ⓜ▪▫▶◀◻-◾☀-☄☎☑☔☕☘☠☢☣☦☪☮☯☸-☺♀♂♈-♓♠♣♥♦♨♻♿⚒-⚗⚙⚛⚜⚠⚡⚧⚪⚫⚰⚱⚽⚾⛄⛅⛈⛏⛑⛓⛔⛩⛪⛰-⛵⛸⛺⛽✂✈✉✏✒✔✖✝✡✳✴❄❇❗❣❤➡⤴⤵⬅-⬇⬛⬜⭐⭕〰〽㊗㊙])(?:️?|(?!︎))|(?:(?:\uD83C[\uDFCB\uDFCC]|\uD83D[\uDD74\uDD75\uDD90]|[☝⛷⛹✌✍])(?:️?|(?!︎))|(?:\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD7A\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD\uDEC3-\uDEC5\uDEF0-\uDEF6]|[✊✋]))(?:\uD83C[\uDFFB-\uDFFF])?|(?:🏴󠁧󠁢󠁥󠁮󠁧󠁿|🏴󠁧󠁢󠁳󠁣󠁴󠁿|🏴󠁧󠁢󠁷󠁬󠁳󠁿|🇦\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|🇧\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|🇨\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|🇩\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|🇪\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|🇫\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|🇬\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|🇭\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|🇮\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|🇯\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|🇰\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|🇱\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|🇲\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|🇳\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|🇴🇲|🇵\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|🇶🇦|🇷\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|🇸\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|🇹\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|🇺\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|🇻\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|🇼\uD83C[\uDDEB\uDDF8]|🇽🇰|🇾\uD83C[\uDDEA\uDDF9]|🇿\uD83C[\uDDE6\uDDF2\uDDFC]|\uD83C[\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC6F\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDD-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3C\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDDE-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC2\uDED0-\uDED9\uDEE0-\uDEE7]|[⏩-⏬⏰⏳♾⛎✅✨❌❎❓-❕➕-➗➰➿])|️)",ALPHA_CHARS_REG_EXP="a-z\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0100-\\u024f\\u0253\\u0254\\u0256\\u0257\\u0259\\u025b\\u0263\\u0268\\u026f\\u0272\\u0289\\u028b\\u02bb\\u0300-\\u036f\\u1e00-\\u1eff\\u0400-\\u04ff\\u0500-\\u0527\\u2de0-\\u2dff\\ua640-\\ua69f\\u0591-\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u05d0-\\u05ea\\u05f0-\\u05f4\\ufb1d-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufb4f\\u0610-\\u061a\\u0620-\\u065f\\u066e-\\u06d3\\u06d5-\\u06dc\\u06de-\\u06e8\\u06ea-\\u06ef\\u06fa-\\u06fc\\u06ff\\u0750-\\u077f\\u08a0\\u08a2-\\u08ac\\u08e4-\\u08fe\\ufb50-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\u200c\\u0e01-\\u0e3a\\u0e40-\\u0e4e\\u1100-\\u11ff\\u3130-\\u3185\\uA960-\\uA97F\\uAC00-\\uD7AF\\uD7B0-\\uD7FF\\u3003\\u3005\\u303b\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uff9f\\uffa1-\\uffdc",ALPHA_NUMERIC_REG_EXP="0-9_"+ALPHA_CHARS_REG_EXP,DOMAIN_ADD_CHARS="·",URL_ALPHANUMERIC_REG_EXP_PART="["+ALPHA_CHARS_REG_EXP+"0-9]",URL_PROTOCOL_REG_EXP_PART="((?:https?|ftp)://|mailto:)?",URL_REG_EXP=URL_PROTOCOL_REG_EXP_PART+"(?:"+URL_ALPHANUMERIC_REG_EXP_PART+"{1,64}(?::"+URL_ALPHANUMERIC_REG_EXP_PART+"{0,64})?@)?(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}|"+URL_ALPHANUMERIC_REG_EXP_PART+"["+ALPHA_CHARS_REG_EXP+DOMAIN_ADD_CHARS+"0-9-]{0,64}(?:\\."+URL_ALPHANUMERIC_REG_EXP_PART+"["+ALPHA_CHARS_REG_EXP+DOMAIN_ADD_CHARS+"0-9-]{0,64}){0,10}(?:\\.(xn--[0-9a-z]{2,16}|["+ALPHA_CHARS_REG_EXP+`]{2,24})))(?::\\d{2,5})?(?:/(?:\\S{0,255}[^\\s.;,(\\[\\]{}<>"'])?)?`,USERNAME_REG_EXP="[a-zA-Z\\d_]{5,32}",TIMESTAMP_REG_EXP="(?:\\s|^)((?:(\\d{1,2}):(?:[0-5]?[0-9])|(?:\\d{1,2}|\\d{3,})):(?:[0-5][0-9]))(?:\\s|$)",BOT_COMMAND_REG_EXP="\\/([a-zA-Z\\d_]{1,32})(?:@("+USERNAME_REG_EXP+"))?(\\b|$)",FULL_REG_EXP=new RegExp("(^| )(@)("+USERNAME_REG_EXP+")|("+URL_REG_EXP+")|(\\n)|("+originalString+")|(^|[\\s\\(\\]])(#["+ALPHA_NUMERIC_REG_EXP+"]{2,64})|(^|\\s)"+BOT_COMMAND_REG_EXP+"|"+TIMESTAMP_REG_EXP,"i"),EMAIL_REG_EXP=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,MARKDOWN_REG_EXP=/(^|\s|\n)(````?)([\s\S]+?)(````?)([\s\n\.,:?!;]|$)|(^|\s|\x01)(`|~~|\*\*|__|_-_|\|\|)([^\n]+?)\7([\x01\s\.,:?!;]|$)|@(\d+)\s*\((.+?)\)|(\[(.+?)\]\((.+?)\))/m,MARKDOWN_ENTITIES={"`":"messageEntityCode","``":"messageEntityPre","**":"messageEntityBold",__:"messageEntityItalic","~~":"messageEntityStrike","_-_":"messageEntityUnderline","||":"messageEntitySpoiler"};new Set(Object.values(MARKDOWN_ENTITIES));const PASS_CONFLICTING_ENTITIES=new Set(["messageEntityEmoji","messageEntityLinebreak","messageEntityCaret"]),PASS_SINGLE_CONFLICTING_ENTITIES=new Set(PASS_CONFLICTING_ENTITIES);for(const d in MARKDOWN_ENTITIES)PASS_CONFLICTING_ENTITIES.add(MARKDOWN_ENTITIES[d]);const PHONE_NUMBER_REG_EXP=/^\+\d+$/,LOCAL_ENTITIES=new Set(["messageEntityLinebreak","messageEntityCaret","messageEntityHighlight","messageEntityBotCommand","messageEntityTimestamp"]),CAN_COMBINE_ENTITIES=new Set(["messageEntityBold","messageEntityItalic","messageEntityCode","messageEntityPre","messageEntityUnderline","messageEntityStrike","messageEntityBlockquote","messageEntitySpoiler"]);function combineSameEntities(d){for(let e=0;e<d.length;++e){const t=d[e];let r=-1;do if(r=d.findIndex((s,a)=>CAN_COMBINE_ENTITIES.has(s._)&&a!==e&&s._===t._&&s.offset-t.length===t.offset),r!==-1){const s=d[r];t.length+=s.length,d.splice(r,1)}while(r!==-1)}}const SINGLE_ENTITIES=new Set(["messageEntityPre","messageEntityCode"]);function findConflictingEntity(d,e){let t=-1,r=-1;return d.find(s=>{const{offset:a,length:n}=s;return SINGLE_ENTITIES.has(s._)&&(t=a,r=t+n),t!==-1&&e.offset>=t&&e.offset<r&&!PASS_SINGLE_CONFLICTING_ENTITIES.has(e._)?!0:e._===s._||!PASS_CONFLICTING_ENTITIES.has(e._)&&!PASS_CONFLICTING_ENTITIES.has(s._)?e.offset>=a&&e.length+e.offset<=n+a:!1})}function sortEntities(d){d.sort((e,t)=>e.offset-t.offset||t.length-e.length)}function mergeEntities(d,e){const t=e.filter(r=>!findConflictingEntity(d,r));d.push(...t),sortEntities(d);for(let r=0;r<d.length;++r){const s=d[r];if(s._==="messageEntityEmoji"){const a=d[r+1];a&&a.offset<s.offset+s.length&&(s.length=a.offset-s.offset)}}return d}function parseMarkdown(d,e,t){const r=[];let s=!1;const a=l=>findConflictingEntity(e,l)?s=!1:(r.push(l),s=!0),n=[];let o=0,p;for(;p=d.match(MARKDOWN_REG_EXP);){const l=o+p.index,u=p.index+p[0].length,g=p.index>0&&d.slice(0,p.index);g&&n.push(g);const y=p[3]||p[8]||p[11]||p[13];let b;if(s=!1,y.match(/^`*$/))n.push(p[0]);else if(p[3]){let S=p[3].match(/(.*?)\n/);S?.[1]||(S=void 0);let A=S?p[3].slice(S[1].length):p[3];const k=A[0]===`
`?1:0,T=A[A.length-1]===`
`?-1:void 0;if(A=A.slice(k,T),b={_:"messageEntityPre",language:S?.[1]||"",offset:l+p[1].length,length:A.length},a(b)){T&&(o-=1),S&&(o-=S[0].length);let O="";if(p[1])O=p[1];else{const $=n[n.length-1];$&&!/\s/.test($[$.length-1])&&(O=`
`)}n.push(O,A,p[5]),o-=p[2].length+p[4].length}}else if(p[7]){const S=p[6]==="";b={_:MARKDOWN_ENTITIES[p[7]],offset:l+(S?0:p[6].length),length:y.length},a(b)&&(S?n.push(y):n.push(p[6]+y+p[9]),o-=p[7].length*2+(S?2:0))}else p[11]?(b={_:"messageEntityMentionName",user_id:p[10].toUserId(),offset:l,length:y.length},a(b)&&(n.push(y),o-=p[0].length-y.length)):p[12]&&(b={_:"messageEntityTextUrl",url:p[14],offset:l,length:y.length},a(b)&&(n.push(y),o-=p[12].length-y.length));s||n.push(p[0]),d=d.substr(p.index+p[0].length),o+=p.index+p[0].length;const I=o-u;I&&e.forEach(S=>{S.offset>=l&&(S.offset+=I)})}d&&n.push(d);let c=n.join("");c.replace(/\s+/g,"").length||(c=d,r.splice(0,r.length)),mergeEntities(e,r),combineSameEntities(e);let f=c.length;{c=c.replace(/^\s*/,"");let l=f-c.length;l&&e.forEach(u=>{u.offset=Math.max(0,u.offset-l)}),c=c.replace(/\s*$/,""),l=f-c.length,f=c.length,l&&e.forEach(u=>{u.offset+u.length>f&&(u.length=f-u.offset)})}return c}function applyMixins(d,e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{const s=Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null);r!=="constructor"&&Object.defineProperty(d.prototype,r,s)})})}const SYNC_DELAY=6;class ApiUpdatesManager{constructor(){this.updatesState={pendingPtsUpdates:[],pendingSeqUpdates:{},syncPending:null,syncLoading:null},this.channelStates={},this.attached=!1,this.log=logger("UPDATES",LogTypes.Error|LogTypes.Warn|LogTypes.Log),this.debug=DEBUG,this.subscriptions={},this.processUpdateMessage=(e,t={})=>{const r=this.log.bindPrefix("processUpdateMessage"),s={date:e.date,seq:e.seq,seqStart:e.seq_start,ignoreSyncLoading:t.ignoreSyncLoading,local:t.local};switch(r.debug("processUpdateMessage",e,t),e._){case"updatesTooLong":case"new_session_created":this.forceGetDifference();break;case"updateShort":this.processUpdate(e.update,s);break;case"updateShortMessage":case"updateShortChatMessage":{r.debug("updateShortMessage | updateShortChatMessage",{...e});const a=e.pFlags.out,n=e.from_id||(a?this.appPeersManager.peerId:e.user_id),o=e.chat_id?e.chat_id.toPeerId(!0):e.user_id.toPeerId(!1)||this.appPeersManager.peerId;this.processUpdate({_:"updateNewMessage",message:{_:"message",pFlags:e.pFlags,id:e.id,from_id:this.appPeersManager.getOutputPeer(n.toPeerId()),peer_id:this.appPeersManager.getOutputPeer(o),date:e.date,message:e.message,fwd_from:e.fwd_from,reply_to:e.reply_to,entities:e.entities,ttl_period:e.ttl_period},pts:e.pts,pts_count:e.pts_count},s);break}case"updatesCombined":case"updates":this.appUsersManager.saveApiUsers(e.users,t.override),this.appChatsManager.saveApiChats(e.chats,t.override),e.updates.forEach(a=>{this.processUpdate(a,s)});break;default:r.warn("unknown update message",e)}},this._constructor(!1)}setProxy(){const e=this;this.updatesState=new Proxy(this.updatesState,{set:function(t,r,s){return t[r]=s,e.saveUpdatesState(),!0}})}saveUpdatesState(){const e=this.updatesState;this.appStateManager.pushToState("updates",{seq:e.seq,pts:e.pts,date:e.date})}popPendingSeqUpdate(){const e=this.updatesState,t=e.seq+1,r=e.pendingSeqUpdates[t];if(!r)return!1;const s=r.updates;for(let a=0,n=s.length;a<n;++a)this.saveUpdate(s[a]);return e.seq=r.seq,r.date&&e.date<r.date&&(e.date=r.date),delete e.pendingSeqUpdates[t],!this.popPendingSeqUpdate()&&e.syncPending?.seqAwaiting&&e.seq>=e.syncPending.seqAwaiting&&(e.syncPending.ptsAwaiting?delete e.syncPending.seqAwaiting:this.clearStatePendingSync(e)),!0}popPendingPtsUpdate(e){const t=e?this.getChannelState(e):this.updatesState;if(!t.pendingPtsUpdates.length)return!1;t.pendingPtsUpdates.sort((n,o)=>n.pts-o.pts);let r=t.pts,s=0,a=0;for(let n=0,o=t.pendingPtsUpdates.length;n<o;++n){const p=t.pendingPtsUpdates[n];r+=p.pts_count,r>=p.pts&&(s=p.pts,a=n)}if(!s)return!1;this.log.debug("pop pending pts updates",s,t.pendingPtsUpdates.slice(0,a+1)),t.pts=s;for(let n=0;n<=a;++n){const o=t.pendingPtsUpdates[n];this.saveUpdate(o)}return t.pendingPtsUpdates.splice(0,a+1),!t.pendingPtsUpdates.length&&t.syncPending&&(t.syncPending.seqAwaiting?delete t.syncPending.ptsAwaiting:this.clearStatePendingSync(t)),!0}forceGetDifference(){this.updatesState.syncLoading||this.getDifference()}processLocalUpdate(e){this.processUpdateMessage({_:"updateShort",update:e},{local:!0,ignoreSyncLoading:!0})}getDifference(e=!1){const t=this.log.bindPrefix("getDifference");t("get",e);const r=this.updatesState,s=r.syncLoading;s||(r.pendingSeqUpdates={},r.pendingPtsUpdates=[]),this.clearStatePendingSync(r);const a=this.apiManager.invokeApi("updates.getDifference",{pts:r.pts,pts_total_limit:e?1200:void 0,date:r.date,qts:-1},{timeout:2147483647}).then(n=>{if(t("result",n),n._==="updates.differenceEmpty"){t("apply empty diff",n.seq),r.date=n.date,r.seq=n.seq;return}if(e&&this.rootScope.dispatchEvent("state_synchronizing"),n._!=="updates.differenceTooLong"){this.appUsersManager.saveApiUsers(n.users),this.appChatsManager.saveApiChats(n.chats),t("applying",n.other_updates.length,"other updates"),n.other_updates.forEach(p=>{switch(p._){case"updateChannelTooLong":case"updateNewChannelMessage":case"updateEditChannelMessage":this.processUpdate(p);return}this.saveUpdate(p)}),t("applying",n.new_messages.length,"new messages"),n.new_messages.forEach(p=>{this.saveUpdate({_:"updateNewMessage",message:p,pts:r.pts,pts_count:0})});const o=n._==="updates.difference"?n.state:n.intermediate_state;r.seq=o.seq,r.pts=o.pts,r.date=o.date}else r.pts=n.pts,r.date=tsNow(!0)+this.timeManager.getServerTimeOffset(),delete r.seq,this.channelStates={},t.warn("result type",n._),this.onDifferenceTooLong();if(t("apply diff",r.seq,r.pts),n._==="updates.differenceSlice")return this.getDifference();t("finish")});return s||this.setDifferencePromise(r,a),a}clearStatePendingSync(e){e.syncPending&&(clearTimeout(e.syncPending.timeout),e.syncPending=null)}getChannelDifference(e){const t=this.getChannelState(e),r=t.syncLoading;r||(t.pendingPtsUpdates=[]);const s=this.log.bindPrefix("getChannelDifference-"+e);this.clearStatePendingSync(t),s("get",t.pts);const a=this.apiManager.invokeApi("updates.getChannelDifference",{channel:this.appChatsManager.getChannelInput(e),filter:{_:"channelMessagesFilterEmpty"},pts:t.pts,limit:1e3},{timeout:2147483647}).then(n=>{if(s("diff result",n),t.pts="pts"in n?n.pts:void 0,t.lastDifferenceTime=Date.now(),n._==="updates.channelDifferenceEmpty"){s("apply channel empty diff",n);return}if(n._==="updates.channelDifferenceTooLong"){s("channel diff too long",n),delete this.channelStates[e],this.saveUpdate({_:"updateChannelReload",channel_id:e});return}if(this.appUsersManager.saveApiUsers(n.users),this.appChatsManager.saveApiChats(n.chats),s("applying",n.other_updates.length,"channel other updates"),n.other_updates.forEach(o=>{this.saveUpdate(o)}),s("applying",n.new_messages.length,"channel new messages"),n.new_messages.forEach(o=>{this.saveUpdate({_:"updateNewChannelMessage",message:o,pts:t.pts,pts_count:0})}),s("apply channel diff",t.pts),n._==="updates.channelDifference"&&!n.pFlags.final)return this.getChannelDifference(e);s("finished channel get diff")});return r||this.setDifferencePromise(t,a,e),a}onDifferenceTooLong(){for(const e in this){const t=this[e];t instanceof AppManager&&t.clear?.()}this.rootScope.dispatchEvent("state_cleared")}setDifferencePromise(e,t,r){e.syncLoading=t,!r&&this.rootScope.dispatchEvent("state_synchronizing"),t.then(()=>{e.syncLoading=null,!r&&this.rootScope.dispatchEvent("state_synchronized")},()=>{e.syncLoading=null})}addChannelState(e,t){var r;if(!t)throw new Error("Add channel state without pts "+e);return(r=this.channelStates)[e]??(r[e]={pts:t,pendingPtsUpdates:[],syncPending:null,syncLoading:null})}getChannelState(e,t){return this.channelStates[e]===void 0&&this.addChannelState(e,t),this.channelStates[e]}processUpdate(e,t={}){var f;let r;switch(e._){case"updateNewChannelMessage":case"updateEditChannelMessage":r=this.appPeersManager.getPeerId(e.message.peer_id).toChatId();break;case"updateChannelTooLong":if(r=e.channel_id,!(r in this.channelStates))return!1;break;default:"channel_id"in e&&"pts"in e&&(r=e.channel_id);break}const{pts:s,pts_count:a}=e,n=r?this.getChannelState(r,s):this.updatesState,o=this.log.bindPrefix(`processUpdate${r?`-${r}`:""}`);if(o("process",n.pts,e),n.syncLoading&&!t.ignoreSyncLoading)return o("ignoring update, sync loading"),!1;if(n.syncLoading&&o("ignoring syncLoading"),e._==="updateChannelTooLong")return(!n.lastPtsUpdateTime||n.lastPtsUpdateTime<Date.now()-SYNC_DELAY)&&(o.warn("channel too long, get diff"),this.getChannelDifference(r)),!1;if(e._==="updateNewMessage"||e._==="updateEditMessage"||e._==="updateNewChannelMessage"||e._==="updateEditChannelMessage"){const l=e.message,u=this.appPeersManager.getPeerId(l.peer_id),g=l.fwd_from||{};let y;if(l.from_id&&!this.appUsersManager.hasUser(this.appPeersManager.getPeerId(l.from_id),l.pFlags.post)&&(y="author")||g.from_id&&!this.appUsersManager.hasUser(this.appPeersManager.getPeerId(g.from_id),!!g.from_id.channel_id)&&(y="fwdAuthor")||g.from_id?.channel_id&&!this.appChatsManager.hasChat(g.from_id.channel_id,!0)&&(y="fwdChannel")||u.isUser()&&!this.appUsersManager.hasUser(u)&&(y="toPeer User")||u.isAnyChat()&&!this.appChatsManager.hasChat(u.toChatId())&&(y="toPeer Chat"))return o.warn("not enough data for message update",u,y,l),r&&this.appChatsManager.hasChat(r)?this.getChannelDifference(r):this.forceGetDifference(),!1}else if(r&&!this.appChatsManager.hasChat(r))return o("skipping update, missing channel"),!1;let p,c;if(s){if(n.pts+(a||0)<s)return o.warn("pts hole",n,e,r&&this.appChatsManager.getChat(r)),n.pendingPtsUpdates.push(e),!n.syncPending&&!n.syncLoading&&(n.syncPending={timeout:ctx.setTimeout(()=>{n.syncPending=null,!n.syncLoading&&(r?this.getChannelDifference(r):this.getDifference())},SYNC_DELAY)}),n.syncPending.ptsAwaiting=!0,!1;if(s>n.pts)n.pts=s,p=!0,n.lastPtsUpdateTime=Date.now();else if(a)return o.warn("duplicate update"),!1;r&&t.date&&this.updatesState.date<t.date&&(this.updatesState.date=t.date)}else if(!r&&t.seq>0){const l=t.seq,u=t.seqStart||l;if(u!==n.seq+1&&u>n.seq)return o.warn("seq hole",n,n.syncPending?.seqAwaiting),(f=n.pendingSeqUpdates)[u]??(f[u]={seq:l,date:t.date,updates:[]}),n.pendingSeqUpdates[u].updates.push(e),n.syncPending||(n.syncPending={timeout:ctx.setTimeout(()=>{n.syncPending=null,!n.syncLoading&&this.getDifference()},SYNC_DELAY)}),(!n.syncPending.seqAwaiting||n.syncPending.seqAwaiting<u)&&(n.syncPending.seqAwaiting=u),!1;n.seq!==l&&(n.seq=l,t.date&&n.date<t.date&&(n.date=t.date),c=!0)}this.saveUpdate(e),p?this.popPendingPtsUpdate(r):c&&this.popPendingSeqUpdate()}saveUpdate(e){this.log.debug("update",e),this.dispatchEvent(e._,e)}subscribeToChannelUpdates(e){var s;const t=(s=this.subscriptions)[e]??(s[e]={count:0});++t.count;const r=()=>{const a=this.getChannelState(e);!a.syncLoading&&(!a.lastDifferenceTime||Date.now()-a.lastDifferenceTime>2500)&&this.getChannelDifference(e)};t.interval??(t.interval=ctx.setInterval(r,3e3)),r()}unsubscribeFromChannelUpdates(e,t){const r=this.subscriptions[e];!r?.interval||--r.count&&!t||(clearInterval(r.interval),r.interval=void 0,delete this.subscriptions[e])}attach(e){this.attached||(this.log("attach"),this.attached=!0,this.appStateManager.getState().then(({updates:t})=>{const r=this.appStateManager.newVersion;!t||!t.pts||!t.date?(this.log("will get new state"),this.updatesState.syncLoading=new Promise(s=>{this.apiManager.invokeApi("updates.getState",{},{noErrorBox:!0}).then(a=>{this.updatesState.seq=a.seq,this.updatesState.pts=a.pts,this.updatesState.date=a.date,this.saveUpdatesState(),this.updatesState.syncLoading=null,s()})})):(Object.assign(this.updatesState,t),this.log("will get difference",Object.assign({},t)),this.getDifference(!0)),this.apiManager.setUpdatesProcessor(this.processUpdateMessage),this.setProxy(),r&&this.updatesState.syncLoading.then(async()=>{const s={en:"was updated to version",ru:"обновлён до версии"},a=o=>fetch(`changelogs/${o}_${r.split(" ")[0]}.md`).then(p=>p.status===200&&p.ok&&p.text()||Promise.reject()).then(p=>{const c=s[o]||s.en;p=`**Telegram Web${App.suffix} ${c} ${r}**

`+p;const l=[],u=parseMarkdown(p,l),g={_:"updateServiceNotification",entities:l,message:u,type:"local",pFlags:{},inbox_date:tsNow(!0),media:void 0};this.processLocalUpdate(g)}),n=filterUnique([e,"en"]);for(const o of n)try{await a(o);break}catch{}})}))}}applyMixins(ApiUpdatesManager,[EventListenerBase,AppManager]);class AppAvatarsManager extends AppManager{constructor(){super(...arguments),this.savedAvatarURLs={}}after(){this.rootScope.addEventListener("avatar_update",({peerId:e,threadId:t})=>{t||this.removeFromAvatarsCache(e)})}isAvatarCached(e,t){const r=this.savedAvatarURLs[e];return t===void 0?!!r:!!(r&&r[t]&&!(r[t]instanceof Promise))}removeFromAvatarsCache(e){this.savedAvatarURLs[e]&&(delete this.savedAvatarURLs[e],MTProtoMessagePort.getInstance().invokeVoid("mirror",{name:"avatars",key:""+e}))}loadAvatar(e,t,r){var p;const s=(p=this.savedAvatarURLs)[e]??(p[e]={});if(s[r])return s[r];const a={_:"inputPeerPhotoFileLocation",pFlags:{},peer:this.appPeersManager.getInputPeerById(e),photo_id:t.photo_id},n={dcId:t.dc_id,location:a};r==="photo_big"&&(a.pFlags.big=!0,n.limitPart=512*1024);const o=this.apiFileManager.download(n);return s[r]=o.then(c=>{const f=s[r]=URL.createObjectURL(c);return MTProtoMessagePort.getInstance().invokeVoid("mirror",{name:"avatars",key:joinDeepPath(e,r),value:f}),f})}}const arrays={8:new Uint8Array(1),16:new Uint16Array(1),32:new Uint32Array(1)};function nextRandomUint(d){const e=arrays[d];return crypto.getRandomValues(e),e[0]}function randomLong(){return""+nextRandomUint(32)+nextRandomUint(32)%16777215}class AppCallsManager extends AppManager{after(){this.calls=new Map,getEnvironment().IS_CALL_SUPPORTED&&this.apiUpdatesManager.addMultipleEventsListeners({updatePhoneCall:e=>{this.saveCall(e.phone_call)},updatePhoneCallSignalingData:e=>{this.rootScope.dispatchEvent("call_signaling",{callId:e.phone_call_id,data:e.data})}})}computeKey(e,t,r){return this.cryptoWorker.invokeCrypto("compute-dh-key",e,t,r)}saveCall(e){const t=e._==="phoneCallDiscarded",r=this.calls.get(e.id);return r?(safeReplaceObject(r,e),t&&this.calls.delete(e.id),e=r):t||this.calls.set(e.id,e),this.rootScope.dispatchEvent("call_update",e),e}getCall(e){return this.calls.get(e)}getCallInput(e){const t=this.getCall(e);return{_:"inputPhoneCall",id:t.id,access_hash:t.access_hash}}savePhonePhoneCall(e){return this.appUsersManager.saveApiUsers(e.users),this.saveCall(e.phone_call)}generateDh(){return this.apiManager.invokeApi("messages.getDhConfig",{version:0,random_length:256}).then(e=>this.cryptoWorker.invokeCrypto("generate-dh",e))}async requestCall(e,t,r,s){const a=await this.apiManager.invokeApi("phone.requestCall",{user_id:this.appUsersManager.getUserInput(e),protocol:t,video:s,random_id:nextRandomUint(32),g_a_hash:r});return this.savePhonePhoneCall(a)}async discardCall(e,t,r,s){if(!this.getCall(e))return;const a=await this.apiManager.invokeApi("phone.discardCall",{video:s,peer:this.getCallInput(e),duration:t,reason:{_:r},connection_id:"0"});this.apiUpdatesManager.processUpdateMessage(a)}}function hasRights(d,e,t,r){if(!d||d.pFlags.deactivated&&e!=="view_messages")return!1;const s=t===void 0;if(d.pFlags.creator&&s)return!0;if(d._==="chatForbidden"||d._==="channelForbidden"||d.pFlags.left&&!d.pFlags.megagroup||!t&&(t=d.admin_rights||d.banned_rights||d.default_banned_rights,!t))return!1;let a={};t&&(a=t.pFlags);const n=t._==="chatAdminRights";switch(e){case"embed_links":case"send_games":case"send_gifs":case"send_inline":case"send_media":case"send_messages":case"send_polls":case"send_stickers":case"send_photos":case"send_videos":case"send_roundvideos":case"send_audios":case"send_voices":case"send_docs":case"send_plain":{if(!n&&a[e]||d._==="channel"&&!d.pFlags.megagroup&&!a.post_messages)return!1;break}case"delete_messages":case"manage_call":return!!a[e];case"pin_messages":return n?!!(a[e]||!d.pFlags.megagroup&&a.post_messages):!a[e];case"invite_links":return d._==="chat"?!1:n&&!!a.invite_users;case"change_type":case"delete_chat":return!1;case"change_info":case"invite_users":return n||d.pFlags.broadcast?!!a[e]:!a[e];case"delete_stories":case"edit_stories":case"post_stories":case"add_admins":case"anonymous":case"post_messages":case"edit_messages":return n&&!!a[e];case"ban_users":case"change_permissions":return n&&!!a.ban_users;case"view_participants":return!!(d._==="chat"||!d.pFlags.broadcast||d.pFlags.creator||d.admin_rights);case"create_giveaway":return n&&!!a.post_messages;case"manage_topics":return n?!!a[e]:!a[e]}return!0}function getParticipantPeerId(d){return typeof d!="object"?d:d.peer?getPeerId(d.peer):d.user_id.toPeerId()}function getPeerActiveUsernames(d){if(!d)return[];const e=d.usernames;return e?e.filter(t=>t.pFlags.active).map(t=>t.username):d.username?[d.username]:[]}class AppChatsManager extends AppManager{constructor(){super(...arguments),this.clear=(e=!1)=>{if(e)this.chats={};else for(const t in this.chats)if(t&&!this.peersStorage.isPeerNeeded(t.toPeerId(!0))){const r=this.chats[t];this.appUsersManager.modifyUsernamesCache(r,!1),this.storage.delete(t),delete this.chats[t]}this.recommendations={}},this.onChatUpdated=(e,t,r)=>{this.apiUpdatesManager.processUpdateMessage(t),(r||t?.updates?.length)&&this.isChannel(e)&&this.rootScope.dispatchEvent("invalidate_participants",e)},this.onChatUpdatedForce=(e,t)=>this.onChatUpdated(e,t,!0),this.onUpdateChannelParticipant=e=>{this.appProfileManager.invalidateChannelParticipants(e.channel_id),this.rootScope.dispatchEvent("chat_participant",e)},this.onUpdateChatDefaultBannedRights=e=>{const t=this.appPeersManager.getPeerId(e.peer).toChatId(),r=this.chats[t];r&&(r.default_banned_rights=e.default_banned_rights,this.rootScope.dispatchEvent("chat_update",t))}}after(){return this.clear(!0),this.apiUpdatesManager.addMultipleEventsListeners({updateChannelParticipant:this.onUpdateChannelParticipant,updateChatDefaultBannedRights:this.onUpdateChatDefaultBannedRights}),Promise.all([this.appStateManager.getState(),this.appStoragesManager.loadStorage("chats")]).then(([e,{results:t,storage:r}])=>{this.storage=r,this.saveApiChats(t),this.peersStorage.addEventListener("peerNeeded",s=>{s.isUser()||this.storage.getFromCache(s.toChatId())||this.storage.set({[s.toChatId()]:this.getChat(s.toChatId())})}),this.peersStorage.addEventListener("peerUnneeded",s=>{s.isUser()||!this.storage.getFromCache(s.toChatId())||this.storage.delete(s.toChatId())}),this.rootScope.addEventListener("premium_toggle",()=>{this.recommendations={}})})}saveApiChats(e,t){!e||e.saved||(e.saved=!0,e.forEach(r=>this.saveApiChat(r,t)))}saveApiChat(e,t){if(!e||e._==="chatEmpty")return;const r=this.chats[e.id];if(e.pFlags??(e.pFlags={}),e.pFlags.min&&r!==void 0)return;e._==="channel"&&e.participants_count===void 0&&r!==void 0&&r.participants_count&&(e.participants_count=r.participants_count),e.photo?._==="chatPhotoEmpty"&&delete e.photo;const s=this.appUsersManager.setUsernameToCache(e,r);e.emoji_status?._==="emojiStatusEmpty"&&delete e.emoji_status;const a=e.id.toPeerId(!0);if(r===void 0)this.chats[e.id]=e,this.mirrorChat(e);else{const n=r.photo?.photo_id,o=e.photo?.photo_id,p=r.pFlags.forum!==e.pFlags.forum,c=n!==o||p,f=r.emoji_status?.document_id!==e.emoji_status?.document_id,l=r.title!==e.title||s,u=f||r.pFlags.verified!==e.pFlags.verified||r.pFlags.scam!==e.pFlags.scam||r.pFlags.fake!==e.pFlags.fake,g=r.pFlags.left!==e.pFlags.left,y=this.appStoriesManager.saveApiPeerStories(e,r);safeReplaceObject(r,e),this.mirrorChat(r),this.rootScope.dispatchEvent("chat_update",e.id),y?.(),g&&this.rootScope.dispatchEvent("chat_participation",{chatId:e.id,left:!!e.pFlags.left}),c&&this.rootScope.dispatchEvent("avatar_update",{peerId:a}),(l||u)&&this.rootScope.dispatchEvent("peer_title_edit",{peerId:a}),p&&this.rootScope.dispatchEvent("chat_toggle_forum",{chatId:e.id,enabled:!!e.pFlags.forum})}this.peersStorage.isPeerNeeded(a)&&this.storage.set({[e.id]:e})}mirrorChat(e){MTProtoMessagePort.getInstance().invokeVoid("mirror",{name:"peers",key:""+e.id.toPeerId(!0),value:e})}getChat(e){return this.chats[e]}getChats(){return this.chats}hasRights(e,t,r,s){return hasRights(this.getChat(e),t,r)}editChatDefaultBannedRights(e,t){const r=this.getChat(e);return r.default_banned_rights&&r.default_banned_rights.until_date===t.until_date&&deepEqual(r.default_banned_rights.pFlags,t.pFlags)?Promise.resolve():this.apiManager.invokeApi("messages.editChatDefaultBannedRights",{peer:this.appPeersManager.getInputPeerById(e.toPeerId(!0)),banned_rights:t}).then(this.onChatUpdated.bind(this,e))}isChannel(e){const t=this.chats[e];return!!(t&&(t._==="channel"||t._==="channelForbidden"))}isMegagroup(e){return!!this.chats[e]?.pFlags?.megagroup}isForum(e){return!!this.chats[e]?.pFlags?.forum}isBroadcast(e){return this.isChannel(e)&&!this.isMegagroup(e)}isInChat(e){let t=!0;const r=this.getChat(e);return(!r||r._==="channelForbidden"||r._==="chatForbidden"||r._==="chatEmpty"||r.pFlags.left||r.pFlags.deactivated)&&(t=!1),t}isPublic(e){const t=this.getChat(e);return!!getPeerActiveUsernames(t)[0]}getChannelInput(e){const t=this.getChat(e);return!t||!t.access_hash?{_:"inputChannelEmpty"}:{_:"inputChannel",channel_id:e,access_hash:t.access_hash||"0"}}getInputPeer(e){return this.isChannel(e)?this.getChannelInputPeer(e):this.getChatInputPeer(e)}getChatInputPeer(e){return{_:"inputPeerChat",chat_id:e}}getChannelInputPeer(e){return{_:"inputPeerChannel",channel_id:e,access_hash:this.getChat(e).access_hash||0}}hasChat(e,t){const r=this.chats[e];return isObject(r)&&(t||!r.pFlags.min)}getChatString(e){const t=this.getChat(e);return this.isChannel(e)?(this.isMegagroup(e)?"s":"c")+e+"_"+t.access_hash:"g"+e}getChatSearchText(e){const t=this.chats[e];return t?[t.title,...getPeerActiveUsernames(t)].filter(Boolean).join(" "):""}createChannel(e){return this.apiManager.invokeApi("channels.createChannel",e).then(t=>(this.apiUpdatesManager.processUpdateMessage(t),t.chats[0].id))}inviteToChannel(e,t){const r=this.getChannelInput(e),s=t.map(a=>this.appUsersManager.getUserInput(a));return this.apiManager.invokeApi("channels.inviteToChannel",{channel:r,users:s}).then(a=>{const n=tsNow(!0);return t.map(p=>this.generateUpdateChannelParticipant({chatId:e,newParticipant:{_:"channelParticipant",date:n,user_id:p}})).forEach(p=>{this.apiUpdatesManager.processLocalUpdate(p)}),this.onChatUpdatedForce(e,a.updates),a.missing_invitees})}createChat(e,t){return this.apiManager.invokeApi("messages.createChat",{users:t.map(r=>this.appUsersManager.getUserInput(r)),title:e}).then(r=>(this.apiUpdatesManager.processUpdateMessage(r),r.chats[0].id))}leaveChannel(e){return this.apiManager.invokeApi("channels.leaveChannel",{channel:this.getChannelInput(e)}).then(this.onChatUpdated.bind(this,e))}joinChannel(e){return this.apiManager.invokeApi("channels.joinChannel",{channel:this.getChannelInput(e)}).then(this.onChatUpdated.bind(this,e))}addToChat(e,t){return this.isChannel(e)?this.inviteToChannel(e,[t]):this.addChatUser(e,t)}addChatUser(e,t,r=100){return this.apiManager.invokeApi("messages.addChatUser",{chat_id:e,user_id:this.appUsersManager.getUserInput(t),fwd_limit:r}).then(s=>(this.onChatUpdated(e,s.updates),s.missing_invitees))}deleteChatUser(e,t){return this.apiManager.invokeApi("messages.deleteChatUser",{chat_id:e,user_id:this.appUsersManager.getUserInput(t)}).then(this.onChatUpdated.bind(this,e))}leaveChat(e){return this.deleteChatUser(e,this.appUsersManager.getSelf().id)}leave(e){return this.isChannel(e)?this.leaveChannel(e):this.leaveChat(e)}delete(e){return this.isChannel(e)?this.deleteChannel(e):this.deleteChat(e)}deleteChannel(e){return this.apiManager.invokeApi("channels.deleteChannel",{channel:this.getChannelInput(e)}).then(this.onChatUpdated.bind(this,e))}deleteChat(e){return this.apiManager.invokeApi("messages.deleteChat",{chat_id:e})}migrateChat(e){const t=this.getChat(e);return t._==="channel"?Promise.resolve(t.id):this.apiManager.invokeApi("messages.migrateChat",{chat_id:e}).then(r=>(this.onChatUpdated(e,r),r.updates.find(a=>a._==="updateChannel").channel_id))}updateUsername(e,t,r){const s=this.apiManager.invokeApi("channels.updateUsername",{channel:this.getChannelInput(e),username:t});return this.refreshChatAfterRequest(e,s,r)}editAdmin(e,t,r,s=""){const a=this.isChannel(e),o=getParticipantPeerId(t).toUserId();return this.migrateChat(e).then(p=>this.apiManager.invokeApi("channels.editAdmin",{channel:this.getChannelInput(p),user_id:this.appUsersManager.getUserInput(o),admin_rights:r,rank:s}).then(c=>{const f=tsNow(!0),l=this.generateUpdateChannelParticipant({chatId:p,newParticipant:Object.keys(r.pFlags).length?{_:"channelParticipantAdmin",date:f,admin_rights:r,promoted_by:this.appUsersManager.getSelf().id,user_id:o,rank:s,pFlags:{}}:{_:"channelParticipant",date:f,user_id:o},prevParticipant:t,wasChannel:a});this.apiUpdatesManager.processLocalUpdate(l),this.onChatUpdatedForce(p,c)}))}editPhoto(e,t){const r={_:"inputChatUploadedPhoto",file:t};let s;return this.isChannel(e)?s=this.apiManager.invokeApi("channels.editPhoto",{channel:this.getChannelInput(e),photo:r}):s=this.apiManager.invokeApi("messages.editChatPhoto",{chat_id:e,photo:r}),s.then(this.onChatUpdated.bind(this,e))}editTitle(e,t){let r;return this.isChannel(e)?r=this.apiManager.invokeApi("channels.editTitle",{channel:this.getChannelInput(e),title:t}):r=this.apiManager.invokeApi("messages.editChatTitle",{chat_id:e,title:t}),r.then(this.onChatUpdated.bind(this,e))}editAbout(e,t){const r=e.toPeerId(!0);return this.apiManager.invokeApi("messages.editChatAbout",{peer:this.appPeersManager.getInputPeerById(r),about:t}).then(s=>(s&&this.rootScope.dispatchEvent("peer_bio_edit",r),s))}generateUpdateChannelParticipant({chatId:e,prevParticipant:t,newParticipant:r,wasChannel:s}){const a=tsNow(!0),n=getParticipantPeerId(t||r);return{_:"updateChannelParticipant",channel_id:e,date:a,actor_id:void 0,qts:void 0,user_id:n,prev_participant:s?t:void 0,new_participant:r,pFlags:{}}}async editBanned(e,t,r){const s=getParticipantPeerId(t),a=this.isChannel(e);return a||(e=await this.migrateChat(e)),this.apiManager.invokeApi("channels.editBanned",{channel:this.getChannelInput(e),participant:this.appPeersManager.getInputPeerById(s),banned_rights:r}).then(n=>{const o=tsNow(!0),p=this.generateUpdateChannelParticipant({chatId:e,wasChannel:a,prevParticipant:t,newParticipant:Object.keys(r.pFlags).length?{_:"channelParticipantBanned",date:o,banned_rights:r,kicked_by:this.appUsersManager.getSelf().id,peer:this.appPeersManager.getOutputPeer(s),pFlags:r.pFlags.view_messages?{left:!0}:{}}:void 0});this.apiUpdatesManager.processLocalUpdate(p),this.onChatUpdated(e,n)})}clearChannelParticipantBannedRights(e,t){return this.editBanned(e,t,{_:"chatBannedRights",until_date:0,pFlags:{}})}kickFromChannel(e,t){return this.editBanned(e,t,{_:"chatBannedRights",until_date:0,pFlags:{view_messages:!0}})}kickFromChat(e,t){return this.isChannel(e)?this.kickFromChannel(e,t):this.deleteChatUser(e,isObject(t)?getParticipantPeerId(t):t.toUserId())}resolveChannel(e){return this.apiManager.invokeApiSingle("channels.getChannels",{id:[{_:"inputChannel",channel_id:e,access_hash:"0"}]}).then(t=>{this.saveApiChats(t.chats)})}setChatAvailableReactions(e,t){return this.appProfileManager.modifyCachedFullChat(e,r=>{r.available_reactions=t}),this.apiManager.invokeApi("messages.setChatAvailableReactions",{peer:this.getInputPeer(e),available_reactions:t}).then(this.onChatUpdated.bind(this,e))}getSendAs(e){const t=a=>(this.appUsersManager.saveApiUsers(a.users),this.saveApiChats(a.chats),a.peers),r=this.getChannelInputPeer(e),s=this.apiManager.invokeApiCacheable("channels.getSendAs",{peer:r},{cacheSeconds:60,syncIfHasResult:!0});return callbackify(s,t)}checkUsername(e,t){return this.apiManager.invokeApi("channels.checkUsername",{channel:this.getChannelInput(e),username:t})}getSponsoredMessage(e){let t;return t||(t=this.apiManager.invokeApiCacheable("channels.getSponsoredMessages",{channel:this.getChannelInput(e)},{cacheSeconds:300})),t.then(r=>{if(r._!=="messages.sponsoredMessages")return r;this.appPeersManager.saveApiPeers(r);const s=r.messages.shift();return r.messages.push(s),r.messages.forEach(a=>{const n=getPeerId(a.from_id);a.channel_post&&(a.channel_post=this.appMessagesIdsManager.generateMessageId(a.channel_post,n.toChatId())),a.webpage&&(a.webpage.photo=this.appPhotosManager.savePhoto(a.webpage.photo)),a.app&&(a.app=this.appAttachMenuBotsManager.saveBotApp(n.toUserId(),a.app)),a.chat_invite&&(a.chat_invite=this.appChatInvitesManager.saveChatInvite(a.chat_invite_hash,a.chat_invite))}),r})}viewSponsoredMessage(e,t){return this.apiManager.invokeApiSingle("channels.viewSponsoredMessage",{channel:this.getChannelInput(e),random_id:t})}clickSponsoredMessage(e,t){return this.apiManager.invokeApiSingle("channels.clickSponsoredMessage",{channel:this.getChannelInput(e),random_id:t})}deactivateAllUsernames(e,t){const r=this.apiManager.invokeApi("channels.deactivateAllUsernames",{channel:this.getChannelInput(e)});return this.refreshChatAfterRequest(e,r,t)}makeChannelPrivate(e){const t=[this.updateUsername(e,"",!0),this.deactivateAllUsernames(e,!0)],r=Promise.all(t).then(()=>!0);return this.refreshChatAfterRequest(e,r)}refreshChatAfterRequest(e,t,r){return r?t:t.then(s=>this.getChannels([e]).then(()=>s))}getChannels(e){return this.apiManager.invokeApi("channels.getChannels",{id:e.map(t=>this.getChannelInput(t))}).then(t=>{this.saveApiChats(t.chats)})}toggleSomething(e,t,r,s){return this.migrateChat(e).then(a=>this.apiManager.invokeApi(`channels.${t}`,{channel:this.getChannelInput(a),enabled:r}).then((s?this.onChatUpdatedForce:this.onChatUpdated).bind(this,a)))}toggleParticipantsHidden(e,t){return this.toggleSomething(e,"toggleParticipantsHidden",t,!0)}togglePreHistoryHidden(e,t){return this.toggleSomething(e,"togglePreHistoryHidden",t)}toggleSignatures(e,t){return this.toggleSomething(e,"toggleSignatures",t)}toggleNoForwards(e,t){return this.apiManager.invokeApi("messages.toggleNoForwards",{peer:this.getInputPeer(e),enabled:t}).then(this.onChatUpdated.bind(this,e))}toggleJoinToSend(e,t){return this.toggleSomething(e,"toggleJoinToSend",t)}toggleJoinRequest(e,t){return this.toggleSomething(e,"toggleJoinRequest",t)}toggleForum(e,t){return this.toggleSomething(e,"toggleForum",t)}toggleAntiSpam(e,t){return this.toggleSomething(e,"toggleAntiSpam",t)}toggleViewForumAsMessages(e,t){return this.apiUpdatesManager.processLocalUpdate({_:"updateChannelViewForumAsMessages",channel_id:e,enabled:t}),this.toggleSomething(e,"toggleViewForumAsMessages",t)}editForumTopic(e){const{chatId:t,topicId:r,title:s,iconEmojiId:a,closed:n,hidden:o}=e;return this.apiManager.invokeApi("channels.editForumTopic",{channel:this.getChannelInput(t),topic_id:getServerMessageId(r),title:s,icon_emoji_id:a,closed:n,hidden:o}).then(this.onChatUpdated.bind(this,t))}async createForumTopic(e){const{chatId:t,title:r,iconColor:s,iconEmojiId:a}=e,n=await this.appProfileManager.getChannelFull(t),o=n.default_send_as&&this.appPeersManager.getInputPeerById(this.appPeersManager.getPeerId(n.default_send_as));return this.apiManager.invokeApi("channels.createForumTopic",{channel:this.getChannelInput(t),title:r,icon_color:s,icon_emoji_id:a,random_id:randomLong(),send_as:o}).then(p=>{this.onChatUpdated(t,p);const c=p.updates.find(f=>f._==="updateNewChannelMessage");return this.appMessagesIdsManager.generateMessageId(c.message.id,t)})}updatePinnedForumTopic(e,t,r){return this.apiManager.invokeApi("channels.updatePinnedForumTopic",{channel:this.getChannelInput(e),topic_id:getServerMessageId(t),pinned:r}).then(this.onChatUpdated.bind(this,e))}getGroupsForDiscussion(){return this.apiManager.invokeApi("channels.getGroupsForDiscussion").then(e=>(this.saveApiChats(e.chats),e.chats))}async setDiscussionGroup(e,t){return this.getChat(t)&&!this.isChannel(t)&&(t=await this.migrateChat(t)),t&&(await this.appProfileManager.getChannelFull(t)).pFlags.hidden_prehistory&&await this.togglePreHistoryHidden(t,!1),this.apiManager.invokeApi("channels.setDiscussionGroup",{broadcast:this.getChannelInput(e),group:this.getChannelInput(t)}).then(()=>{const r=this.appProfileManager.getCachedFullChat(e),s=t||r.linked_chat_id,a=this.appProfileManager.getCachedFullChat(s);r&&(r.linked_chat_id=t),a&&(a.linked_chat_id=e),r&&this.rootScope.dispatchEvent("chat_full_update",e),a&&this.rootScope.dispatchEvent("chat_full_update",s)})}async toggleSlowMode(e,t){return e=await this.migrateChat(e),this.apiManager.invokeApi("channels.toggleSlowMode",{channel:this.getChannelInput(e),seconds:t}).then(this.onChatUpdated.bind(this,e))}hideChatJoinRequest(e,t,r){return this.apiManager.invokeApi("messages.hideChatJoinRequest",{peer:this.appChatsManager.getInputPeer(e),user_id:this.appUsersManager.getUserInput(t),approved:r}).then(s=>this.onChatUpdated(e,s,!0))}getChannelRecommendations(e){const t=this.recommendations[e];if(t)return t;const r=this.recommendations[e]=this.apiManager.invokeApiSingleProcess({method:"channels.getChannelRecommendations",params:{channel:this.getChannelInput(e)},processResult:s=>(this.saveApiChats(s.chats),this.recommendations[e]===r&&(this.recommendations[e]=s),s)});return r}reportSponsoredMessage(e,t,r){return this.apiManager.invokeApi("channels.reportSponsoredMessage",{channel:this.getChannelInput(e),random_id:t,option:r})}}function capitalizeFirstLetter(d){return d.charAt(0).toUpperCase()+d.slice(1)}const SKIP_PROTOCOLS=new Set(["javascript:"]);function matchUrlProtocol(d){if(!d)return null;try{const e=new URL(d).protocol;return SKIP_PROTOCOLS.has(e)?null:e}catch{return null}}function wrapUrl(d,e){matchUrlProtocol(d)||(d="https://"+d);const t={url:d};let r,s,a;if(r=d.match(/^(?:https?:\/\/)?(?:(.+?)\.)?(?:(?:web|k|z|a)\.)?t(?:elegram)?\.me(?:\/(.+))?/)){const n=new URL(d);let o=r[1];o&&T_ME_PREFIXES.has(r[1])&&(o=void 0),o&&(n.pathname=o+(n.pathname==="/"?"":n.pathname));const p=n.pathname.slice(1),c=p.split("/");if(c[0]&&c[0][0]==="$"&&c[0].length>1)a="invoice";else if(/^\+/.test(p)&&!PHONE_NUMBER_REG_EXP.test(p))a="joinchat";else if(c[0])switch(c[0]){case"m":case"addlist":case"joinchat":case"addstickers":case"addemoji":case"voicechat":case"invoice":case"boost":case"giftcode":if(c.length!==1&&!o){a=c[0];break}default:if(c.length<=2||c[1]?.match(/^\d+(?:\?(?:comment|thread)=\d+)?$/)||c[1]==="s"){a="im";break}break}}else d.match(/^(?:https?:\/\/)?telesco\.pe\/([^/?]+)\/(\d+)/)?a="im":(s=d.match(/tg:(?:\/\/)?(.+?)(?:\?|$)/))&&(a="tg_"+s[1]);return window[a]||(a=void 0),t.onclick=a,t}MOUNT_CLASS_TO&&(MOUNT_CLASS_TO.wrapUrl=wrapUrl);function setDirection(d){d.setAttribute("dir","auto")}function setBlankToAnchor(d){return d.target="_blank",d.rel="noopener noreferrer",d}const equalFn=(d,e)=>d===e,signalOptions={equals:equalFn};let runEffects=runQueue;const STALE=1,PENDING=2;var Owner=null;let Transition=null,ExternalSourceConfig=null,Listener=null,Updates=null,Effects=null,ExecCount=0;function createSignal(d,e){e=e?Object.assign({},signalOptions,e):signalOptions;const t={value:d,observers:null,observerSlots:null,comparator:e.equals||void 0},r=s=>(typeof s=="function"&&(s=s(t.value)),writeSignal(t,s));return[readSignal.bind(t),r]}function untrack(d){if(Listener===null)return d();const e=Listener;Listener=null;try{return d()}finally{Listener=e}}function readSignal(){if(this.sources&&this.state)if(this.state===STALE)updateComputation(this);else{const d=Updates;Updates=null,runUpdates(()=>lookUpstream(this)),Updates=d}if(Listener){const d=this.observers?this.observers.length:0;Listener.sources?(Listener.sources.push(this),Listener.sourceSlots.push(d)):(Listener.sources=[this],Listener.sourceSlots=[d]),this.observers?(this.observers.push(Listener),this.observerSlots.push(Listener.sources.length-1)):(this.observers=[Listener],this.observerSlots=[Listener.sources.length-1])}return this.value}function writeSignal(d,e,t){let r=d.value;return(!d.comparator||!d.comparator(r,e))&&(d.value=e,d.observers&&d.observers.length&&runUpdates(()=>{for(let s=0;s<d.observers.length;s+=1){const a=d.observers[s],n=Transition&&Transition.running;n&&Transition.disposed.has(a),(n?!a.tState:!a.state)&&(a.pure?Updates.push(a):Effects.push(a),a.observers&&markDownstream(a)),n||(a.state=STALE)}if(Updates.length>1e6)throw Updates=[],new Error})),e}function updateComputation(d){if(!d.fn)return;cleanNode(d);const e=ExecCount;runComputation(d,d.value,e)}function runComputation(d,e,t){let r;const s=Owner,a=Listener;Listener=Owner=d;try{r=d.fn(e)}catch(n){return d.pure&&(d.state=STALE,d.owned&&d.owned.forEach(cleanNode),d.owned=null),d.updatedAt=t+1,handleError(n)}finally{Listener=a,Owner=s}(!d.updatedAt||d.updatedAt<=t)&&(d.updatedAt!=null&&"observers"in d?writeSignal(d,r):d.value=r,d.updatedAt=t)}function runTop(d){if(d.state===0)return;if(d.state===PENDING)return lookUpstream(d);if(d.suspense&&untrack(d.suspense.inFallback))return d.suspense.effects.push(d);const e=[d];for(;(d=d.owner)&&(!d.updatedAt||d.updatedAt<ExecCount);)d.state&&e.push(d);for(let t=e.length-1;t>=0;t--)if(d=e[t],d.state===STALE)updateComputation(d);else if(d.state===PENDING){const r=Updates;Updates=null,runUpdates(()=>lookUpstream(d,e[0])),Updates=r}}function runUpdates(d,e){if(Updates)return d();let t=!1;Updates=[],Effects?t=!0:Effects=[],ExecCount++;try{const r=d();return completeUpdates(t),r}catch(r){t||(Effects=null),Updates=null,handleError(r)}}function completeUpdates(d){if(Updates&&(runQueue(Updates),Updates=null),d)return;const e=Effects;Effects=null,e.length&&runUpdates(()=>runEffects(e))}function runQueue(d){for(let e=0;e<d.length;e++)runTop(d[e])}function lookUpstream(d,e){d.state=0;for(let t=0;t<d.sources.length;t+=1){const r=d.sources[t];if(r.sources){const s=r.state;s===STALE?r!==e&&(!r.updatedAt||r.updatedAt<ExecCount)&&runTop(r):s===PENDING&&lookUpstream(r,e)}}}function markDownstream(d){for(let e=0;e<d.observers.length;e+=1){const t=d.observers[e];t.state||(t.state=PENDING,t.pure?Updates.push(t):Effects.push(t),t.observers&&markDownstream(t))}}function cleanNode(d){let e;if(d.sources)for(;d.sources.length;){const t=d.sources.pop(),r=d.sourceSlots.pop(),s=t.observers;if(s&&s.length){const a=s.pop(),n=t.observerSlots.pop();r<s.length&&(a.sourceSlots[n]=r,s[r]=a,t.observerSlots[r]=n)}}if(d.owned){for(e=d.owned.length-1;e>=0;e--)cleanNode(d.owned[e]);d.owned=null}if(d.cleanups){for(e=d.cleanups.length-1;e>=0;e--)d.cleanups[e]();d.cleanups=null}d.state=0}function castError(d){return d instanceof Error?d:new Error(typeof d=="string"?d:"Unknown error",{cause:d})}function handleError(d,e=Owner){const t=castError(d);{console.error("solid error",t);return}}var I18n;(d=>{d.strings=new Map,d.countriesList=[];let e,t;d.requestedServerLanguage=!1,d.isRTL=!1,[d.langCodeNormalized,d.setLangCodeNormalized]=createSignal();function r(te){d.isRTL=te}d.setRTL=r;function s(te){d.lastRequestedLangCode=te,d.lastRequestedNormalizedLangCode=te.split("-")[0],(0,d.setLangCodeNormalized)(d.lastRequestedNormalizedLangCode.split("-")[0])}function a(){return t||(t=Promise.all([stateStorage.get("langPack"),d.polyfillPromise]).then(([te])=>te?(d.lastRequestedLangCode||s(te.lang_code),y(te),te):p()).finally(()=>{t=void 0}))}d.getCacheLangPack=a;function n(){if(d.timeFormat==="h12")try{const te=O({hour:"numeric",minute:"numeric",hour12:!0}),N=new Date;N.setHours(0);const m=te.format(N);d.amPmCache.am=m.split(/\s/)[1],N.setHours(12);const _=te.format(N);d.amPmCache.pm=_.split(/\s/)[1]}catch(te){console.error("cannot get am/pm",te),d.amPmCache={am:"AM",pm:"PM"}}}function o(te,N=!!d.timeFormat&&d.timeFormat!==te){d.timeFormat=te,n(),N&&(T.clear(),Array.from(document.querySelectorAll(".i18n")).forEach(_=>{const h=d.weakMap.get(_);h instanceof $&&h.update()}))}d.setTimeFormat=o;function p(){const te=App.langPackCode;return s(te),Promise.all([import("./lang-BSGk-k5X.js"),import("./langSign-CN-ja8rh.js"),import("./countries-CzeCvYH8.js")]).then(([N,m,_])=>{const h=[];l(N.default,h),l(m.default,h);const v={_:"langPackDifference",from_version:0,lang_code:te,strings:h,version:0,local:!0,countries:_.default};return g(v)})}d.loadLocalLangPack=p;function c(te,N){N=!0,d.requestedServerLanguage=!0;const m=rootScope$1.managers;return Promise.all([m.apiManager.invokeApiCacheable("langpack.getLangPack",{lang_code:te,lang_pack:N?"web":App.langPack}),!N&&m.apiManager.invokeApiCacheable("langpack.getLangPack",{lang_code:te,lang_pack:"android"}),import("./lang-BSGk-k5X.js"),import("./langSign-CN-ja8rh.js"),m.apiManager.invokeApiCacheable("help.getCountriesList",{lang_code:te,hash:0}),d.polyfillPromise])}d.loadLangPack=c;function f(te,N){return rootScope$1.managers.apiManager.invokeApi("langpack.getStrings",{lang_pack:App.langPack,lang_code:te,keys:N})}d.getStrings=f;function l(te,N=[]){for(const m in te){const _=te[m];typeof _=="string"?N.push({_:"langPackString",key:m,value:_}):N.push({_:"langPackStringPluralized",key:m,..._})}return N}d.formatLocalStrings=l;function u(te,N){return s(te),c(te,N).then(([m,_,h,v,E,M])=>{let P=[];return[h,v].forEach(D=>{l(D.default,P)}),P=P.concat(...[m.strings,_.strings].filter(Boolean)),m.strings=P,m.countries=E,g(m)})}d.getLangPack=u;function g(te){return te.appVersion=App.langPackVersion,stateStorage.set({langPack:te}).then(()=>(y(te),te))}d.saveLangPack=g,d.polyfillPromise=function(){return typeof Intl<"u"&&typeof Intl.PluralRules<"u"?Promise.resolve():import("./pluralPolyfill-B0qpVVRH.js").then(N=>{window.Intl=Object.assign(typeof Intl<"u"?Intl:{},N.default)})}();function y(te){const N=d.lastRequestedLangCode;if(te.lang_code!==N)return;try{e=new Intl.PluralRules(d.lastRequestedNormalizedLangCode)}catch(_){console.error("pluralRules error",_),e=new Intl.PluralRules(d.lastRequestedNormalizedLangCode.split("-",1)[0])}try{e=new Intl.PluralRules(te.lang_code)}catch(_){console.error("pluralRules error",_),e=new Intl.PluralRules(te.lang_code.split("-",1)[0])}d.strings.clear();for(const _ of te.strings)d.strings.set(_.key,_);te.countries&&(d.countriesList.length=0,d.countriesList.push(...te.countries.countries),te.countries.countries.forEach(_=>{if(_.name){const h=_.default_name;d.strings.set(h,{_:"langPackString",key:h,value:_.name})}})),d.lastAppliedLangCode!==N&&(d.lastAppliedLangCode&&rootScope$1.myId&&(rootScope$1.managers.appReactionsManager.resetAvailableReactions(),rootScope$1.managers.appUsersManager.indexMyself(),rootScope$1.managers.dialogsStorage.indexMyDialog()),d.lastAppliedLangCode=N,T.clear(),n(),rootScope$1.dispatchEvent("language_change",N)),Array.from(document.querySelectorAll(".i18n")).forEach(_=>{const h=d.weakMap.get(_);h&&h.update()})}d.applyLangPack=y;function b(te,N,m,_){const h=N[_===void 0?m.i++:_];Array.isArray(h)?te.push(...h):te.push(h)}function I(te,N,m){if(!m){m={i:0};const E=te.match(/(%|un)\d+/g);E?.length&&(m.i=Math.max(...E.map(M=>+M.replace(/\D/g,""))))}const _=[],h=/(\*\*|__)(.+?)\1|(\n)|(\[.+?\]\(.*?\))|un\d|%\d\$.|%\S/g;let v=0;return te.replace(h,(E,M,P,D,w,B,x)=>{if(B>v&&_.push(x.slice(v,B)),M){let U;switch(M){case"**":{U=document.createElement("b");break}case"__":{U=document.createElement("i");break}}U.append(...I(P,N,m)),_.push(U)}else if(D)_.push(document.createElement("br"));else if(w){const U=w.lastIndexOf("]"),X=w.slice(1,U),se=w.slice(U+2,w.length-1);let J;if(se&&matchUrlProtocol(se)){J=document.createElement("a");const G=wrapUrl(se);J.href=G.url,G.onclick&&J.setAttribute("onclick",G.onclick+"(this)"),setBlankToAnchor(J)}else J=N[m.i++],J instanceof DocumentFragment&&(J=J.firstChild),typeof J!="string"&&(J.textContent="");const L=I(X,N,m);typeof J=="string"?_.push(...L):(J.append(...L),_.push(J))}else if(N){const U=E.replace(/\D/g,"");b(_,N,m,!U||Number.isNaN(+U)?void 0:Math.min(N.length-1,+U-1))}return v=B+E.length,""}),v!==te.length&&_.push(te.slice(v)),_}d.superFormatter=I;function S(te,N=!1,m){const _=d.strings.get(te);let h;if(_)if(_._==="langPackStringPluralized"&&m?.length){let E=m[0];typeof E=="string"&&(E=+E.replace(/\D/g,""));const M=e.select(E);h=_[M+"_value"]||_.other_value}else _._==="langPackString"?h=_.value:h=te;else h=te;const v=I(h,m);return N?v.map(E=>E instanceof Node?E.textContent:E).join(""):v}d.format=S,d.weakMap=new WeakMap;class A{constructor(N){this.element=N?.element||document.createElement("span"),this.element.classList.add("i18n"),this.property=N?.property,d.weakMap.set(this.element,this)}}class k extends A{constructor(N={}){super({...N,property:N.property??"innerHTML"}),N?.key&&this.update(N)}update(N){if(safeAssign(this,N),this.property==="innerHTML")this.element.replaceChildren(...S(this.key,!1,this.args)),this.args?.length&&this.element.normalize();else{const m=this.element[this.property],_=S(this.key,!0,this.args);m===void 0?this.element.dataset[this.property]=_:this.element[this.property]=_}}compareAndUpdate(N){if(!(this.key===N.key&&deepEqual(this.args,N.args)))return this.update(N)}}d.IntlElement=k;const T=new Map;function O(te={}){const N=JSON.stringify(te);let m=T.get(N);return m||(m=new Intl.DateTimeFormat(d.lastRequestedNormalizedLangCode+"-u-hc-"+d.timeFormat,te),T.set(N,m)),m}d.getDateTimeFormat=O,d.amPmCache={am:"AM",pm:"PM"};class $ extends A{constructor(N){super({...N,property:N.property??"textContent"}),setDirection(this.element),N?.date&&this.update(N)}update(N){safeAssign(this,N);let m;if(this.options.hour&&this.options.minute&&Object.keys(this.options).length===2){const _=this.date.getHours();m=("0"+(d.timeFormat==="h12"?_%12||12:_)).slice(-2)+":"+("0"+this.date.getMinutes()).slice(-2),d.timeFormat==="h12"&&(m+=" "+(_<12?d.amPmCache.am:d.amPmCache.pm))}else{const _=O(this.options);m=capitalizeFirstLetter(_.format(this.date))}this.element[this.property]=m}}d.IntlDateElement=$;function K(te,N){return new k({key:te,args:N}).element}d.i18n=K;function ee(te){return new k(te).element}d.i18n_=ee;function Q(te,N,m,_){return new k({element:te,key:N,args:m,property:_}).element}d._i18n=Q})(I18n||(I18n={}));var I18n$1=I18n;I18n.i18n;I18n.i18n_;I18n._i18n;MOUNT_CLASS_TO&&(MOUNT_CLASS_TO.I18n=I18n);const months=["January","February","March","April","May","June","July","August","September","October","November","December"],days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthsLocalized=months.slice(),daysLocalized=days.slice(),ONE_DAY=86400,getWeekNumber=d=>{const e=new Date(Date.UTC(d.getFullYear(),d.getMonth(),d.getDate())),t=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-t);const r=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-r.getTime())/ONE_DAY+1)/7)};function formatDateAccordingToTodayNew(d){const e=new Date,t=e.getTime()/1e3|0,r=d.getTime()/1e3|0,s={};return t-r<ONE_DAY&&e.getDate()===d.getDate()?s.hour=s.minute="2-digit":e.getFullYear()!==d.getFullYear()?(s.year=s.day="numeric",s.month="2-digit"):t-r<ONE_DAY*7&&getWeekNumber(e)===getWeekNumber(d)?s.weekday="short":(s.month="short",s.day="numeric"),new I18n$1.IntlDateElement({date:d,options:s}).element}MOUNT_CLASS_TO&&(MOUNT_CLASS_TO.formatDateAccordingToTodayNew=formatDateAccordingToTodayNew);const getFullDate=(d,e={})=>{const t=e.monthAsNumber?".":" ",r=("0"+d.getHours()).slice(-2)+":"+("0"+d.getMinutes()).slice(-2)+(e.noSeconds?"":":"+("0"+d.getSeconds()).slice(-2)),s=d.getFullYear();return(e.leadingZero?("0"+d.getDate()).slice(-2):d.getDate())+t+(e.monthAsNumber?("0"+(d.getMonth()+1)).slice(-2):months[d.getMonth()])+t+(""+s).slice(e.shortYear?2:0)+(e.noTime?"":", "+r)},minYear=2013,yearPattern=new RegExp("20[0-9]{1,2}"),anyLetterRegExp="\\p{L}",monthPattern=new RegExp(`(${anyLetterRegExp}{3,})`,"iu"),monthYearOrDayPattern=new RegExp(`(${anyLetterRegExp}{3,}) ([0-9]{0,4})`,"iu"),yearOrDayAndMonthPattern=new RegExp(`([0-9]{0,4}) (${anyLetterRegExp}{2,})`,"iu"),shortDate=new RegExp("^([0-9]{1,4})(\\.| |/|\\-)([0-9]{1,4})$","i"),longDate=new RegExp("^([0-9]{1,2})(\\.| |/|\\-)([0-9]{1,2})(\\.| |/|\\-)([0-9]{1,4})$","i"),numberOfDaysEachMonth=[31,29,31,30,31,30,31,31,30,31,30,31];function fillTipDates(d,e){const t=d.trim().toLowerCase();if(t.length<3)return;if(["today",I18n$1.format("Peer.Status.Today",!0)].some(a=>a.indexOf(t)===0)){const a=new Date,n=a.getFullYear(),o=a.getMonth(),p=a.getDate();a.setFullYear(n,o,p),a.setHours(0,0,0);const c=a.getTime();a.setFullYear(n,o,p+1),a.setHours(0,0,0);const f=a.getTime()-1;e.push({title:I18n$1.format("Date.Today",!0),minDate:c,maxDate:f});return}if(["yesterday",I18n$1.format("Peer.Status.Yesterday",!0)].some(a=>a.indexOf(t)===0)){const a=new Date,n=a.getFullYear(),o=a.getMonth(),p=a.getDate();a.setFullYear(n,o,p),a.setHours(0,0,0);const c=a.getTime()-864e5;a.setFullYear(n,o,p+1),a.setHours(0,0,0);const f=a.getTime()-86400001;e.push({title:capitalizeFirstLetter(I18n$1.format("Yesterday",!0)),minDate:c,maxDate:f});return}const r=getDayOfWeek(t);if(r>=0){const a=new Date,n=a.getTime(),o=a.getDay(),p=r-o;a.setDate(a.getDate()+p),a.getTime()>n&&a.setTime(a.getTime()-6048e5);const c=a.getFullYear(),f=a.getMonth(),l=a.getDate();a.setFullYear(c,f,l),a.setHours(0,0,0);const u=a.getTime();a.setFullYear(c,f,l+1),a.setHours(0,0,0);const g=a.getTime()-1;e.push({title:formatWeekLong(u),minDate:u,maxDate:g});return}let s;if((s=shortDate.exec(t))!==null){const a=s[1],n=s[3],o=parseInt(a),p=parseInt(n);if(o>0&&o<=31){if(p>=minYear&&o<=12){const c=p,f=o-1;createForMonthYear(e,f,c);return}else if(p<=12){const c=o-1,f=p-1;createForDayMonth(e,c,f)}}else if(o>=minYear&&p<=12){const c=o,f=p-1;createForMonthYear(e,f,c)}return}if((s=longDate.exec(t))!==null){const a=s[1],n=s[3],o=s[5];if(!s[2]===s[4])return;const p=parseInt(a),c=parseInt(n)-1;let f=parseInt(o);f>=10&&f<=99&&(f+=2e3);const l=new Date().getFullYear();if(validDateForMonth(p-1,c)&&f>=minYear&&f<=l){const u=new Date;u.setFullYear(f,c,p),u.setHours(0,0,0);const g=u.getTime();u.setFullYear(f,c,p+1),u.setHours(0,0,0);const y=u.getTime()-1;e.push({title:formatterYearMax(g),minDate:g,maxDate:y});return}return}if((s=monthYearOrDayPattern.exec(t))!==null){const a=s[1],n=s[2],o=getMonth(a);if(o>=0){const p=+n||new Date().getUTCFullYear();if(p>0&&p<=31){const c=p-1;createForDayMonth(e,c,o);return}else if(p>=minYear){createForMonthYear(e,o,p);return}}}if((s=yearOrDayAndMonthPattern.exec(t))!==null){const a=s[1],n=s[2],o=getMonth(n);if(o>=0){const p=+a;if(p>0&&p<=31){const c=p-1;createForDayMonth(e,c,o);return}else p>=minYear&&createForMonthYear(e,o,p)}}if((s=monthPattern.exec(t))!==null){const a=s[1],n=getMonth(a);if(n>=0){const o=new Date().getFullYear();for(let p=o;p>=minYear;--p)createForMonthYear(e,n,p)}}if((s=yearPattern.exec(t))!==null){let a=+s[0];const n=new Date().getFullYear();if(a<minYear){a=minYear;for(let o=n;o>=a;o--){const p=new Date;p.setFullYear(o,0,1),p.setHours(0,0,0);const c=p.getTime();p.setFullYear(o+1,0,1),p.setHours(0,0,0);const f=p.getTime()-1;e.push({title:""+o,minDate:c,maxDate:f})}}else if(a<=n){const o=new Date;o.setFullYear(a,0,1),o.setHours(0,0,0);const p=o.getTime();o.setFullYear(a+1,0,1),o.setHours(0,0,0);const c=o.getTime()-1;e.push({title:""+a,minDate:p,maxDate:c})}return}}function createForMonthYear(d,e,t){const r=new Date().getFullYear(),s=Date.now();if(t>=minYear&&t<=r){const a=new Date;a.setFullYear(t,e,1),a.setHours(0,0,0);const n=a.getTime();if(n>s)return;a.setMonth(a.getMonth()+1);const o=a.getTime()-1;d.push({title:formatterMonthYear(n),minDate:n,maxDate:o})}}function createForDayMonth(d,e,t){if(validDateForMonth(e,t)){const r=new Date().getFullYear(),s=Date.now();for(let a=r;a>=minYear;a--){if(t===1&&e===28&&!isLeapYear(a))continue;const n=new Date;n.setFullYear(a,t,e+1),n.setHours(0,0,0);const o=n.getTime();if(o>s)continue;n.setFullYear(a,t,e+2),n.setHours(0,0,0);const p=n.getTime()-1;a===r?d.push({title:formatterDayMonth(o),minDate:o,maxDate:p}):d.push({title:formatterYearMax(o),minDate:o,maxDate:p})}}}function formatterMonthYear(d){const e=new Date(d);return monthsLocalized[e.getMonth()]+" "+e.getFullYear()}function formatterDayMonth(d){const e=new Date(d);return monthsLocalized[e.getMonth()]+" "+e.getDate()}function formatterYearMax(d){const e=new Date(d);return("0"+e.getDate()).slice(-2)+"."+("0"+(e.getMonth()+1)).slice(-2)+"."+e.getFullYear()}function formatWeekLong(d){const e=new Date(d);return daysLocalized[e.getDay()]}function validDateForMonth(d,e){return e>=0&&e<12&&d>=0&&d<numberOfDaysEachMonth[e]}function isLeapYear(d){return d%4===0&&d%100!==0||d%400===0}function getMonth(d){d=d.toLowerCase();for(let e=0;e<12;e++)if([months[e],monthsLocalized[e]].some(t=>t.toLowerCase().indexOf(d)===0))return e;return-1}function getDayOfWeek(d){const e=new Date;if(d.length<=3)return-1;for(let t=0;t<7;t++)if(e.setDate(e.getDate()+1),formatWeekLong(e.getTime()).toLowerCase().indexOf(d)===0)return e.getDay();return-1}MOUNT_CLASS_TO.fillTipDates=fillTipDates;function safeReplaceArrayInObject(d,e,t){"byteLength"in t[d]&&(t[d]=[...t[d]]),e&&e[d]!==t[d]&&(e[d].length=t[d].length,t[d].forEach((r,s)=>{e[d][s]=r}),t[d]=e[d])}function spoiler(d){const e="⠁⠂⠄⠈⠐⠠⡀⢀⠃⠅⠆⠉⠊⠌⠑⠒⠔⠘⠡⠢⠤⠨⠰⡁⡂⡄⡈⡐⡠⢁⢂⢄⢈⢐⢠⣀⠇⠋⠍⠎⠓⠕⠖⠙⠚⠜⠣⠥⠦⠩⠪⠬⠱⠲⠴⠸⡃⡅⡆⡉⡊⡌⡑⡒⡔⡘⡡⡢⡤⡨⡰⢃⢅⢆⢉⢊⢌⢑⢒⢔⢘⢡⢢⢤⢨⢰⣁⣂⣄⣈⣐⣠⠏⠗⠛⠝⠞⠧⠫⠭⠮⠳⠵⠶⠹⠺⠼⡇⡋⡍⡎⡓⡕⡖⡙⡚⡜⡣⡥⡦⡩⡪⡬⡱⡲⡴⡸⢇⢋⢍⢎⢓⢕⢖⢙⢚⢜⢣⢥⢦⢩⢪⢬⢱⢲⢴⢸⣃⣅⣆⣉⣊⣌⣑⣒⣔⣘⣡⣢⣤⣨⣰⠟⠯⠷⠻⠽⠾⡏⡗⡛⡝⡞⡧⡫⡭⡮⡳⡵⡶⡹⡺⡼⢏⢗⢛⢝⢞⢧⢫⢭⢮⢳⢵⢶⢹⢺⢼⣇⣋⣍⣎⣓⣕⣖⣙⣚⣜⣣⣥⣦⣩⣪⣬⣱⣲⣴⣸⠿⡟⡯⡷⡻⡽⡾⢟⢯⢷⢻⢽⢾⣏⣗⣛⣝⣞⣧⣫⣭⣮⣳⣵⣶⣹⣺⣼⡿⢿⣟⣯⣷⣻⣽⣾⣿",t=e.length,r=[];for(let s=0;s<d.length;++s){const a=d.charCodeAt(s);r.push(e[a%t])}return r.join("")}function encodeSpoiler(d,e){const t=d.slice(0,e.offset),r=d.slice(e.offset,e.offset+e.length),s=spoiler(r),a=d.slice(e.offset+e.length);return d=t+s+a,{text:d,entityText:s}}function wrapPlainText(d,e=[]){return e.forEach(t=>{t._==="messageEntitySpoiler"&&(d=encodeSpoiler(d,t).text)}),d}function getDocumentInputFileLocation(d,e){return{_:"inputDocumentFileLocation",id:d.id,access_hash:d.access_hash,file_reference:d.file_reference,thumb_size:e}}const FILENAME_JOINER="_";function getFileNameByLocation(d,e){const t="",r=t[t.length-1]||"";let s;switch(d._){case"inputPhotoFileLocation":{s=["photo",t[0],d.id,d.thumb_size].filter(Boolean).join(FILENAME_JOINER);break}case"inputDocumentFileLocation":{s=["document",t[0],d.id,d.thumb_size].filter(Boolean).join(FILENAME_JOINER);break}case"inputPeerPhotoFileLocation":s=["peerPhoto",d.photo_id,d.pFlags.big?"big":"small"].join(FILENAME_JOINER);break;case"inputStickerSetThumb":{s=["stickerSetThumb",d.stickerset.id||d.stickerset.short_name||d.stickerset.emoticon||d.stickerset._,d.thumb_version].join(FILENAME_JOINER);break}case"inputFileLocation":{s=[d.volume_id,d.local_id].join(FILENAME_JOINER);break}case"inputWebFileLocation":{s=["webFile",d.url].join(FILENAME_JOINER);break}case"inputWebFileGeoPointLocation":{const a=d.geo_point;s=["geoPoint",a.lat,a.long,d.w,d.h,d.zoom,d.scale].join(FILENAME_JOINER);break}default:{console.error("Unrecognized location:",d),s="";break}}return s+(e?.downloadId?"_download":"")+(r&&"."+r)}function getFileURL(d,e){const t=encodeURIComponent(JSON.stringify(e));return d+"/"+t}function getDocumentDownloadOptions(d,e,t,r){const s=getDocumentInputFileLocation(d,e?.type);let a;return e?._==="photoSize"?a=d.sticker?"image/webp":d.mime_type.startsWith("image/")?d.mime_type:"image/jpeg":a=d.mime_type||"application/octet-stream",{dcId:d.dc_id,location:s,size:e?e.size:d.size,mimeType:a,fileName:d.file_name,queueId:t,onlyCache:r}}function getDocumentURL(d,e=!1,t){let r;return e?r="download":d.supportsStreaming?r="stream":r="document",getFileURL(r,getDocumentDownloadOptions(d,t))}const EXTENSION_MIME_TYPE_MAP={pdf:"application/pdf",tgv:"application/x-tgwallpattern",tgs:"application/x-tgsticker",json:"application/json",wav:"audio/wav",mp3:"audio/mpeg",ogg:"audio/ogg",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp",mp4:"video/mp4",webm:"video/webm",mov:"video/quicktime",svg:"image/svg+xml",avif:"image/avif",jxl:"image/jxl",bmp:"image/bmp"},MIME_TYPE_EXTENSION_MAP={};for(const d in EXTENSION_MIME_TYPE_MAP)MIME_TYPE_EXTENSION_MAP[EXTENSION_MIME_TYPE_MAP[d]]=d;function bytesFromHex(d){const e=d.length,t=new Uint8Array(Math.ceil(e/2));let r=0;e%2&&(t[r++]=parseInt(d.charAt(0),16));for(let s=r;s<e;s+=2)t[r++]=parseInt(d.substr(s,2),16);return t}function bytesCmp(d,e){const t=d.length;if(t!==e.length)return!1;for(let r=0;r<t;++r)if(d[r]!==e[r])return!1;return!0}function readLengthField(d,e){let t=0,r=0;for(let s=0;s<4;s++){const a=d[e+s];if(t=(t<<7)+(a&127),r++,!(a&128))break}return[r,t]}function parseDecoderSpecificInfo(d){if(d[0]!==5)throw new Error("Invalid DecoderSpecificInfo tag");const[e,t]=readLengthField(d,1),r=1+e;return d.subarray(r,r+t)}function parseDecoderConfigDescriptor(d){if(d[0]!==4)throw new Error("Invalid DecoderConfigDescriptor tag");const[e,t]=readLengthField(d,1);let r=1+e;return r+=13,parseDecoderSpecificInfo(d.subarray(r))}function parseES_Descriptor(d){if(d[0]!==3)throw new Error("Invalid ES_Descriptor tag");const e=new DataView(d.buffer,d.byteOffset,d.byteLength),[t,r]=readLengthField(d,1);let s=1+t;s+=2;const a=e.getUint8(s);s+=1;const n=a&128,o=a&64;if(n&&(s+=2),o){const c=readLengthField(d,s);s+=1+c[0]+c[1]}return{decoderConfigDescriptor:parseDecoderConfigDescriptor(d.subarray(s))}}const BROKEN_DSCI=[19,136],FIXED_ESDS=bytesFromHex("0327000100041940150000000001f4000000bb750507138856e5a5"),ESDS=new TextEncoder().encode("esds"),MP4A=new TextEncoder().encode("mp4a");function findUint8ArrayBack(d,e,t=d.length){for(let r=t-e.length;r>=0;r--){let s=!0;for(let a=0;a<e.length;a++)if(d[r+a]!==e[a]){s=!1;break}if(s)return r}return-1}function fixMp4ForChromium(d){const e=new DataView(d.buffer,d.byteOffset,d.byteLength);let t=d.length,r=null;for(;;){const n=findUint8ArrayBack(d,ESDS,t);if(n===-1)break;t=n;const o=e.getUint32(n-4);if(o<0||n+o>d.length)continue;const p=findUint8ArrayBack(d,MP4A,n);p===-1||n-p>100||(r={offset:n+8,size:o-12})}if(!r)throw new Error("No ESDS found");const s=d.subarray(r.offset,r.offset+r.size),a=parseES_Descriptor(s);if(!a)throw new Error("Invalid ESDS");if(!bytesCmp(a.decoderConfigDescriptor,BROKEN_DSCI))throw new Error("Not a broken DSCI");if(r.size<FIXED_ESDS.length)throw new Error(`ESDS Size not enough (expected at least ${FIXED_ESDS.length}, got ${r.size})`);d.set(FIXED_ESDS,r.offset)}function tryPatchMp4(d){try{return fixMp4ForChromium(d),!0}catch{return!1}}let uploadWallPaperTempId=0;class AppDocsManager extends AppManager{constructor(){super(...arguments),this.onServiceWorkerFail=()=>{for(const e in this.docs){const t=this.docs[e];t.supportsStreaming&&(delete t.supportsStreaming,this.thumbsStorage.deleteCacheContext(t))}}}after(){this.docs={},this.uploadingWallPapers={},this.fixingChromiumMp4={},this.requestingDocParts={},MTProtoMessagePort.getInstance().addEventListener("serviceWorkerOnline",e=>{e||this.onServiceWorkerFail()})}saveDoc(e,t){if(!e||e._==="documentEmpty")return;const r=this.docs[e.id];e.file_reference&&(safeReplaceArrayInObject("file_reference",r,e),this.referenceDatabase.saveContext(e.file_reference,t)),r||(this.docs[e.id]=e);for(let s=0,a=e.attributes.length;s<a;++s){const n=e.attributes[s];switch(n._){case"documentAttributeFilename":{e.file_name=wrapPlainText(n.file_name);break}case"documentAttributeAudio":{if(e.type==="round")break;e.duration=n.duration,e.type=n.pFlags.voice&&e.mime_type===EXTENSION_MIME_TYPE_MAP.ogg?"voice":"audio";break}case"documentAttributeVideo":{e.duration=n.duration,e.w=n.w,e.h=n.h,n.pFlags.round_message?e.type="round":e.type="video";break}case"documentAttributeCustomEmoji":case"documentAttributeSticker":{n.alt!==void 0&&(e.stickerEmojiRaw=n.alt),n.stickerset&&(n.stickerset._==="inputStickerSetEmpty"?delete n.stickerset:n.stickerset._==="inputStickerSetID"&&(e.stickerSetInput=n.stickerset)),e.mime_type===EXTENSION_MIME_TYPE_MAP.webp&&(e.thumbs||getEnvironment().IS_WEBP_SUPPORTED)?(e.type="sticker",e.sticker=1):e.mime_type===EXTENSION_MIME_TYPE_MAP.webm&&(e.type="sticker",e.sticker=3,e.animated=!0);break}case"documentAttributeImageSize":{e.type="photo",e.w=n.w,e.h=n.h;break}case"documentAttributeAnimated":{(e.mime_type===EXTENSION_MIME_TYPE_MAP.gif||e.mime_type===EXTENSION_MIME_TYPE_MAP.mp4)&&(e.type="gif"),e.animated=!0;break}}}if(e.mime_type)e.mime_type===EXTENSION_MIME_TYPE_MAP.pdf?e.type="pdf":e.mime_type===EXTENSION_MIME_TYPE_MAP.gif?e.type="gif":e.mime_type===EXTENSION_MIME_TYPE_MAP.tgs&&e.file_name==="AnimatedSticker.tgs"&&(e.type="sticker",e.animated=!0,e.sticker=2);else{const s=(e.file_name||"").split(".").pop(),a=s&&EXTENSION_MIME_TYPE_MAP[s.toLowerCase()];if(a)e.mime_type=a;else switch(e.type){case"gif":case"video":case"round":e.mime_type=EXTENSION_MIME_TYPE_MAP.mp4;break;case"sticker":e.mime_type=EXTENSION_MIME_TYPE_MAP.webp;break;case"audio":e.mime_type=EXTENSION_MIME_TYPE_MAP.mp3;break;case"voice":e.mime_type=EXTENSION_MIME_TYPE_MAP.ogg;break;default:e.mime_type="application/octet-stream";break}}if(e.type==="voice"||e.type==="round"){const s=e.attributes.find(o=>o._==="documentAttributeFilename"),a=s&&s.file_name.split(".").pop(),n=getFullDate(new Date(e.date*1e3),{monthAsNumber:!0,leadingZero:!0}).replace(/[:\.]/g,"-").replace(", ","_");e.file_name=`${e.type}_${n}${a?"."+a:""}`}return appManagersManager$1.isServiceWorkerOnline&&(e.type==="gif"&&e.size>8e6||e.type==="audio"||e.type==="video")?(e.supportsStreaming=!0,this.thumbsStorage.getCacheContext(e).url||this.thumbsStorage.setCacheContextURL(e,void 0,getDocumentURL(e),0)):e.supportsStreaming=!1,e.file_name||(e.file_name=""),r?Object.assign(r,e):e}getDoc(e){return isObject(e)?e:this.docs[e]}downloadDoc(e,t,r){return this.apiFileManager.downloadMedia({media:e,queueId:t,onlyCache:r})}saveWebPConvertedStrippedThumb(e,t){const r=this.getDoc(e);if(!r)return;const s=r.thumbs&&r.thumbs.find(a=>a._==="photoStrippedSize");s&&(r.pFlags.stickerThumbConverted=!0,s.bytes=t)}prepareWallPaperUpload(e){const t="wallpaper-upload-"+ ++uploadWallPaperTempId,r={_:"photoSize",h:0,w:0,location:{},size:e.size,type:THUMB_TYPE_FULL};let s={_:"document",access_hash:"",attributes:[],dc_id:0,file_reference:[],id:t,mime_type:e.type,size:e.size,date:tsNow(!0),pFlags:{},thumbs:[r],file_name:e.name};s=this.saveDoc(s);const a=this.thumbsStorage.setCacheContextURL(s,void 0,URL.createObjectURL(e),e.size),n={_:"wallPaper",access_hash:"",document:s,id:t,slug:t,pFlags:{}};return this.uploadingWallPapers[t]={cacheContext:a,file:e},n}uploadWallPaper(e){const{cacheContext:t,file:r}=this.uploadingWallPapers[e];return delete this.uploadingWallPapers[e],this.apiFileManager.upload({file:r,fileName:r.name}).then(a=>this.apiManager.invokeApi("account.uploadWallPaper",{file:a,mime_type:r.type,settings:{_:"wallPaperSettings",pFlags:{}}}).then(n=>(n.document=this.saveDoc(n.document),this.thumbsStorage.setCacheContextURL(n.document,void 0,t.url,t.downloaded),n)))}requestDocPart(e,t,r,s){var l;const a=this.getDoc(e);if(!a)return Promise.reject(makeError("NO_DOC"));const n=(l=this.requestingDocParts)[e]??(l[e]=new Set),o=()=>{n.delete(c)&&!n.size&&this.requestingDocParts[e]===n&&delete this.requestingDocParts[e]};let p=!1;const c=()=>{p=!0,o()};n.add(c);const f=this.apiFileManager.requestFilePart({dcId:t,location:getDocumentInputFileLocation(a),offset:r,limit:s,checkCancel:()=>{if(p)throw makeError("DOWNLOAD_CANCELED")}});return f.finally(o),f}cancelDocPartsRequests(e){const t=this.requestingDocParts[e];if(t)for(const r of t)r()}fixChromiumMp4(e){var t;return(t=this.fixingChromiumMp4)[e]??(t[e]=fetch(e).then(r=>r.arrayBuffer()).then(r=>{const s=new Uint8Array(r);return tryPatchMp4(s),this.fixingChromiumMp4[e]=URL.createObjectURL(new Blob([s]))}))}}function repliesAreEqual(d,e){return deepEqual(d,e)}function draftsAreEqual(d,e){return deepEqual(d,e,["date","reply_to"])&&repliesAreEqual(d?.reply_to,e?.reply_to)}class AppDraftsManager extends AppManager{constructor(){super(...arguments),this.clear=e=>{e||(this.getAllDraftPromise=void 0),this.drafts={}}}after(){this.clear(!0),this.apiUpdatesManager.addMultipleEventsListeners({updateDraftMessage:e=>{const t=this.appPeersManager.getPeerId(e.peer);this.saveDraft({peerId:t,threadId:e.threadId,draft:e.draft,notify:!0,force:!0})}}),stateStorage.get("drafts").then(e=>{this.drafts=e||{}})}getKey(e,t){return""+e+(t?"_"+t:"")}getDraft(e,t){return this.drafts[this.getKey(e,t)]}addMissedDialogs(){return this.getAllDrafts().then(()=>{for(const e in this.drafts){if(e.indexOf("_")!==-1)continue;const t=e.toPeerId();this.appMessagesManager.getDialogOnly(t)||this.appMessagesManager.reloadConversation(t)}})}getAllDrafts(){return this.getAllDraftPromise??(this.getAllDraftPromise=this.apiManager.invokeApi("messages.getAllDrafts").then(e=>(this.apiUpdatesManager.updatesState.syncLoading||Promise.resolve()).then(()=>{this.apiUpdatesManager.processUpdateMessage(e)})))}saveDraft({peerId:e,threadId:t,draft:r,notify:s,force:a}){const n=this.processApiDraft(r,e),o=this.getKey(e,t);return n?this.drafts[o]=n:delete this.drafts[o],stateStorage.set({drafts:this.drafts}),s&&this.rootScope.dispatchEvent("draft_updated",{peerId:e,threadId:t,draft:n,force:a}),n}isEmptyDraft(e){return e?._!=="draftMessage"?!0:e.reply_to!==void 0&&e.reply_to.reply_to_msg_id>0?!1:!e.message.length}processApiDraft(e,t){if(e?._!=="draftMessage")return;const r=e.reply_to;if(r?.reply_to_msg_id){const s=this.appPeersManager.isChannel(t)?t.toChatId():void 0;r.reply_to_msg_id=this.appMessagesIdsManager.generateMessageId(r.reply_to_msg_id,s),r.top_msg_id&&(r.top_msg_id=this.appMessagesIdsManager.generateMessageId(r.top_msg_id,s)),r.reply_to_peer_id&&(r.reply_to_peer_id=this.appPeersManager.getPeerId(r.reply_to_peer_id))}return e}syncDraft(e,t,r,s=!0,a=!1){const n=this.getDraft(e,t);if(draftsAreEqual(n,r))return!0;const o={peer:this.appPeersManager.getInputPeerById(e),message:""};let p;if(this.isEmptyDraft(r))p={_:"draftMessageEmpty"};else{const f=r.message,l=r.entities,u=r.reply_to;u&&(o.reply_to={_:"inputReplyToMessage",reply_to_msg_id:getServerMessageId(u.reply_to_msg_id)},u.reply_to_peer_id&&!isObject(u.reply_to_peer_id)&&(o.reply_to.reply_to_peer_id=this.appPeersManager.getInputPeerById(u.reply_to_peer_id))),l?.length&&(o.entities=this.appMessagesManager.getInputEntities(l)),r.pFlags.no_webpage&&(o.no_webpage=r.pFlags.no_webpage),r.pFlags.invert_media&&(o.invert_media=r.pFlags.invert_media),r.media&&(o.media=r.media),o.message=f}if(t){const f=o.reply_to??(o.reply_to={_:"inputReplyToMessage"});f.reply_to_msg_id?f.top_msg_id=getServerMessageId(t):f.reply_to_msg_id=getServerMessageId(t)}const c=p||r;if(c.date=tsNow(!0)+this.timeManager.getServerTimeOffset(),this.saveDraft({peerId:e,threadId:t,draft:c,notify:!0,force:a}),s){const f=this.apiManager.invokeApi("messages.saveDraft",o),l=this.dialogsStorage.getDialogOnly(e);return!l||!getServerMessageId(l.top_message)?f.then(()=>this.appMessagesManager.reloadConversation(e)):f}return!0}clearAllDrafts(){return this.apiManager.invokeApi("messages.clearAllDrafts").then(e=>{if(e)for(const t in this.drafts){const[r,s]=t.split("_");this.rootScope.dispatchEvent("draft_updated",{peerId:r.toPeerId(),threadId:s?+s:void 0,draft:void 0})}})}clearDraft(e,t){const r={_:"draftMessageEmpty"};t?this.syncDraft(e,t,r,!1,!0):this.saveDraft({peerId:e,threadId:t,draft:r,notify:!0,force:!0})}setDraft(e,t,r,s){const a={_:"draftMessage",date:tsNow(!0),message:r,pFlags:{},entities:s};t?this.syncDraft(e,t,a,!1,!0):this.saveDraft({peerId:e,threadId:t,draft:a,notify:!0,force:!0})}}function validateInitObject(d,e,t,r,s,a){for(const n in d)typeof e[n]!=typeof d[n]?e[n]=copy(d[n]):isObject(d[n])&&validateInitObject(d[n],e[n])}function fixEmoji(d,e){return d=d.replace(/[\u2640\u2642\u2764](?!\ufe0f)/g,(t,r,s)=>{if(e){const a=t.length;r+=a,e.forEach(n=>{const o=n.offset+n.length;o===r?n.length+=a:o>r&&(n.offset+=a)})}return t+"️"}),d}const EMOJI_LANG_PACK={keywords:{},version:0,langCode:App.langPackCode},RECENT_MAX_LENGTH=32,ut=class ut extends AppManager{constructor(){super(...arguments),this.keywordLangPacks={},this.indexedLangPacks={},this.getKeywordsPromises={},this.recent={},this.getRecentEmojisPromises={},this.getCustomEmojiDocumentPromises=new Map,this.emojiGroups={}}getEmojiKeywords(e=App.langPackCode){const t=this.getKeywordsPromises[e];if(t)return t;const r="emojiKeywords_"+e;return this.getKeywordsPromises[e]=stateStorage.get(r).then(s=>(isObject(s)||(s={}),validateInitObject(EMOJI_LANG_PACK,s),s.langCode=e,this.keywordLangPacks[e]=s,this.apiManager.invokeApi("messages.getEmojiKeywordsDifference",{lang_code:s.langCode,from_version:s.version}).then(a=>{s.version=a.version;const n=s.keywords,o=a.keywords;for(let p=0,c=o.length;p<c;++p){const{keyword:f,emoticons:l}=o[p];n[f]=l}return stateStorage.set({[r]:s}),s},()=>s)))}getBothEmojiKeywords(){const e=[this.getEmojiKeywords()];return this.networkerFactory.language!==App.langPackCode&&e.push(this.getEmojiKeywords(this.networkerFactory.language)),this.recent.native||e.push(this.getRecentEmojis("native")),this.rootScope.premium&&e.push(this.appStickersManager.preloadEmojiSets()),Promise.all(e)}indexEmojis(){this.index||(this.index=new SearchIndex({minChars:2,fullWords:!0}));for(const e in this.keywordLangPacks){if(this.indexedLangPacks[e])continue;const r=this.keywordLangPacks[e].keywords;for(const s in r){const a=r[s];this.index.indexObject(a,s)}this.indexedLangPacks[e]=!0}}searchEmojis({q:e,limit:t=40,minChars:r=2,addCustom:s}){this.indexEmojis(),e=e.toLowerCase().replace(/_/g," ");let a;if(e.trim()){const p=this.index.search(e,r);a=Array.from(p).reduce((c,f)=>(c.push(...f),c),[]),a.length=Math.min(40,a.length)}else a=this.recent.native.concat(ut.POPULAR_EMOJI).slice(0,RECENT_MAX_LENGTH),a=filterUnique(a);const n=[],o=s&&this.appStickersManager.getEmojisSearchIndex();return a.forEach(p=>{o&&n.push(...Array.from(o.search(p,r)).map(c=>({docId:c,emoji:p}))),n.push({emoji:p})}),n.length=Math.min(t,n.length),n}async prepareAndSearchEmojis(e){return await Promise.all([this.getBothEmojiKeywords(),this.appStickersManager.preloadEmojiSets()]),this.searchEmojis(e)}getRecentEmojis(e){const t=this.getRecentEmojisPromises;return t[e]??(t[e]=this.appStateManager.getState().then(r=>{let s=[];if(e==="native"){const{recentEmoji:a}=r;s=Array.isArray(a)&&a.length?a:ut.POPULAR_EMOJI}else{const{recentCustomEmoji:a}=r;s=Array.isArray(a)&&a.length?a:[]}return this.recent[e]=s}))}modifyRecentEmoji(e,t){const r=e.docId?"custom":"native";e.emoji=fixEmoji(e.emoji),this.getRecentEmojis(r).then(s=>{const a=e.docId||e.emoji;indexOfAndSplice(s,a),t&&s.unshift(a),s.splice(RECENT_MAX_LENGTH,s.length-RECENT_MAX_LENGTH),this.appStateManager.pushToState(r==="custom"?"recentCustomEmoji":"recentEmoji",s),this.rootScope.dispatchEvent("emoji_recent",{emoji:e,deleted:!t})})}pushRecentEmoji(e){return this.modifyRecentEmoji(e,!0)}deleteRecentEmoji(e){return this.modifyRecentEmoji(e,!1)}getCustomEmojiDocuments(e){return e.length?this.apiManager.invokeApi("messages.getCustomEmojiDocuments",{document_id:e}).then(t=>t.map(r=>this.appDocsManager.saveDoc(r,{type:"customEmoji",docId:r.id})),()=>new Array(e.length).fill(void 0)):Promise.resolve([])}getCachedCustomEmojiDocuments(e){return e.map(t=>this.appDocsManager.getDoc(t))}setDebouncedGetCustomEmojiDocuments(){this.getCustomEmojiDocumentsPromise||!this.getCustomEmojiDocumentPromises.size||(this.getCustomEmojiDocumentsPromise=pause(0).then(()=>{const e=[...this.getCustomEmojiDocumentPromises.keys()],t=[];do{const r=e.splice(0,100),s=this.getCustomEmojiDocuments(r).then(a=>{a.forEach((n,o)=>{const p=r[o],c=this.getCustomEmojiDocumentPromises.get(p);this.getCustomEmojiDocumentPromises.delete(p),c.resolve(n)})});t.push(s)}while(e.length);return Promise.all(t)}).finally(()=>{this.getCustomEmojiDocumentsPromise=void 0,this.setDebouncedGetCustomEmojiDocuments()}))}getCustomEmojiDocument(e){let t=this.getCustomEmojiDocumentPromises.get(e);if(t)return t;const r=this.appDocsManager.getDoc(e);return r||(t=deferredPromise(),this.getCustomEmojiDocumentPromises.set(e,t),this.setDebouncedGetCustomEmojiDocuments(),t)}getCustomEmojis(){return this.appStickersManager.getEmojiStickers()}getEmojiGroups(e){var r;const t=s=>{s.some(a=>a._==="emojiGroupPremium")||s.push({_:"emojiGroupPremium",title:"Premium",icon_emoji_id:"5269590556232664327"})};return(r=this.emojiGroups)[e]??(r[e]=this.apiManager.invokeApiSingleProcess({method:e==="esg"||e==="stickers"?"messages.getEmojiGroups":e==="status"?"messages.getEmojiStatusGroups":"messages.getEmojiProfilePhotoGroups",params:{hash:0},processResult:async s=>{(e==="esg"||e==="stickers")&&t(s.groups);const a=await Promise.all(s.groups.map(n=>this.getCustomEmojiDocument(n.icon_emoji_id)));return this.emojiGroups[e]=s.groups.map((n,o)=>({group:n,document:a[o]}))}}))}searchCustomEmoji(e){return this.apiManager.invokeApiCacheable("messages.searchCustomEmoji",{hash:0,emoticon:e},{cacheSeconds:3600,syncIfHasResult:!0})}};ut.POPULAR_EMOJI=["😂","😘","❤️","😍","😊","😁","👍","☺️","😔","😄","😭","💋","😒","😳","😜","🙈","😉","😃","😢","😝","😱","😡","😏","😞","😅","😚","🙊","😌","😀","😋","😆","👌","😐","😕"];let AppEmojiManager=ut;const GET_PARTICIPANTS_LIMIT=100;class AppGroupCallsManager extends AppManager{after(){this.log=logger("GROUP-CALLS"),this.groupCalls=new Map,this.participants=new Map,this.nextOffsets=new Map,this.cachedStreamChannels=new Map,this.apiUpdatesManager.addMultipleEventsListeners({updateGroupCall:e=>{this.saveGroupCall(e.call,e.chat_id)},updateGroupCallParticipants:e=>{this.saveGroupCall(e.call);const t=e.call.id;this.saveApiParticipants(t,e.participants)}}),this.rootScope.addEventListener("group_call_update",e=>{e._==="groupCallDiscarded"&&this.participants.delete(e.id)})}getCachedParticipants(e){let t=this.participants.get(e);return t||this.participants.set(e,t=new Map),t}prepareToSavingNextOffset(e){const t=this.nextOffsets,r=a=>{t.get(e)===s&&t.set(e,a)},s=t.get(e);return{nextOffset:s,setNextOffset:r}}saveApiParticipant(e,t,r){const s=this.getCachedParticipants(e),a=getPeerId(t.peer),n=s.get(a),o=t.pFlags.left;if(!n&&o)return;!t.pFlags.muted&&!t.pFlags.can_self_unmute&&(t.pFlags.can_self_unmute=!0),n?(safeReplaceObject(n,t),t=n):s.set(a,t);const p=this.getGroupCall(e);if(p?._==="groupCall"){let c=!1;o?(--p.participants_count,c=!0):t.pFlags.just_joined&&!n&&!t.pFlags.self&&(++p.participants_count,c=!0),c&&this.rootScope.dispatchEvent("group_call_update",p)}o&&s.delete(a),this.rootScope.dispatchEvent("group_call_participant",{groupCallId:e,participant:t})}saveApiParticipants(e,t,r){t.saved||(t.saved=!0,t.forEach(s=>this.saveApiParticipant(e,s,r)))}async editParticipant(e,t,r){this.saveApiParticipant(e,t);const s=t.pFlags.self?NULL_PEER_ID:getPeerId(t.peer),a=await this.apiManager.invokeApiSingle("phone.editGroupCallParticipant",{call:this.getGroupCallInput(e),participant:s===NULL_PEER_ID?this.appPeersManager.getInputPeerSelf():this.appPeersManager.getInputPeerById(s),muted:r.muted,volume:r.volume,raise_hand:r.raiseHand,video_paused:r.videoPaused,video_stopped:r.videoStopped,presentation_paused:r.presentationPaused});this.apiUpdatesManager.processUpdateMessage(a)}getGroupCall(e){return this.groupCalls.get(e)}async getGroupCallFull(e,t){const r=this.getGroupCall(e);if(r&&r._!=="inputGroupCall"&&!t)return r;const s=this.getCachedParticipants(e).size?0:GET_PARTICIPANTS_LIMIT;return this.apiManager.invokeApiSingleProcess({method:"phone.getGroupCall",params:{call:this.getGroupCallInput(e),limit:s},processResult:a=>{this.appUsersManager.saveApiUsers(a.users),this.appChatsManager.saveApiChats(a.chats),this.saveApiParticipants(e,a.participants,!0);const n=this.saveGroupCall(a.call);return s&&this.nextOffsets.get(e)===void 0&&this.nextOffsets.set(e,a.participants_next_offset),n}})}saveGroupCall(e,t){const r=this.groupCalls.get(e.id),s=e._!=="inputGroupCall"&&(!r||r._!=="groupCallDiscarded");return r?(s&&safeReplaceObject(r,e),e=r):this.groupCalls.set(e.id,e),s&&this.rootScope.dispatchEvent("group_call_update",e),e}async createGroupCall(e,t,r,s=!1){const a=await this.apiManager.invokeApi("phone.createGroupCall",{peer:this.appPeersManager.getInputPeerById(e.toPeerId(!0)),random_id:nextRandomUint(32),schedule_date:t,title:r,rtmp_stream:s});return this.apiUpdatesManager.processUpdateMessage(a),a.updates.find(o=>o._==="updateGroupCall").call}getGroupCallInput(e){const t=this.getGroupCall(e);if(!t)throw new Error(`Group call ${e} not found`);return{_:"inputGroupCall",id:t.id,access_hash:t.access_hash}}async getGroupCallParticipants(e){const{nextOffset:t,setNextOffset:r}=this.prepareToSavingNextOffset(e);return t!==""&&await this.apiManager.invokeApiSingleProcess({method:"phone.getGroupParticipants",params:{call:this.getGroupCallInput(e),ids:[],sources:[],offset:t||"",limit:GET_PARTICIPANTS_LIMIT},processResult:s=>{const a=s.count===s.participants.length?"":s.next_offset;this.appChatsManager.saveApiChats(s.chats),this.appUsersManager.saveApiUsers(s.users),this.saveApiParticipants(e,s.participants),r(a)}}),{participants:this.getCachedParticipants(e),isEnd:this.nextOffsets.get(e)===""}}hangUp(e,t){const r=this.getGroupCallInput(e);let s;return typeof t=="boolean"&&t?s=this.apiManager.invokeApi("phone.discardGroupCall",{call:r}):typeof t=="number"?s=this.apiManager.invokeApi("phone.leaveGroupCall",{call:r,source:t}):s=this.apiManager.invokeApi("phone.joinGroupCall",{call:r,join_as:this.appPeersManager.getInputPeerSelf(),muted:!0,video_stopped:!0,params:{_:"dataJSON",data:""}}),s.then(a=>{this.apiUpdatesManager.processUpdateMessage(a)})}async joinGroupCall(e,t,r){const s=this.getGroupCallInput(e);let a;if(r.type==="main"){const p={call:s,join_as:this.appPeersManager.getInputPeerSelf(),params:t,muted:r.isMuted,video_stopped:!r.joinVideo};a=this.apiManager.invokeApi("phone.joinGroupCall",p),this.log(`[api] joinGroupCall id=${e}`,p)}else{const p={call:s,params:t};a=this.apiManager.invokeApi("phone.joinGroupCallPresentation",p),this.log(`[api] joinGroupCallPresentation id=${e}`,p)}const n=await a;return this.apiUpdatesManager.processUpdateMessage(n),n.updates.find(p=>p._==="updateGroupCallConnection")}leaveGroupCallPresentation(e){return this.apiManager.invokeApi("phone.leaveGroupCallPresentation",{call:this.getGroupCallInput(e)}).then(t=>{this.apiUpdatesManager.processUpdateMessage(t)})}async _fetchRtmpState(e,t=0,r){const s=await this.getGroupCallFull(e.id);if(s._==="groupCallDiscarded")throw new Error("Group call discarded");r??(r=s.stream_dc_id||await this.apiManager.getBaseDcId());try{return{channels:(await this.apiManager.invokeApi("phone.getGroupCallStreamChannels",{call:e},{dcId:r})).channels,dcId:r,time:Date.now()}}catch(a){if(a.code===400&&a.type.indexOf("CALL_MIGRATE")===0){const n=+a.type.match(/^(CALL_MIGRATE_)(\d+)/)[2];return this._fetchRtmpState(e,t,n)}if(a.type==="GROUPCALL_INVALID"&&t<3)return this._fetchRtmpState(e,t+1);throw a}}fetchRtmpState(e,t){const r=this.cachedStreamChannels.get(e.id);if(r&&!t)return r;const s=this._fetchRtmpState(e);return s.finally(()=>{setTimeout(()=>{this.cachedStreamChannels.get(e.id)===s&&this.cachedStreamChannels.delete(e.id)},1e3)}),this.cachedStreamChannels.set(e.id,s),s}fetchRtmpPart(e,t){return this.apiFileManager.requestFilePart({dcId:t,location:e,offset:0,limit:512*1024,priority:32,floodMaxTimeout:0})}fetchRtmpUrl(e,t=!1){return this.apiManager.invokeApi("phone.getGroupCallStreamRtmpUrl",{peer:this.appPeersManager.getInputPeerById(e),revoke:t})}async startRecording(e,t){const r=await this.apiManager.invokeApi("phone.toggleGroupCallRecord",{start:!0,call:e,video:t.recordVideo,video_portrait:t.videoHorizontal,title:t.name||void 0});this.apiUpdatesManager.processUpdateMessage(r)}async stopRecording(e){const t=await this.apiManager.invokeApi("phone.toggleGroupCallRecord",{start:!1,call:e});this.apiUpdatesManager.processUpdateMessage(t)}}function getPhotoInput(d){return{_:"inputPhoto",id:d.id,access_hash:d.access_hash,file_reference:d.file_reference}}function getPhotoMediaInput(d){return{_:"inputMediaPhoto",id:getPhotoInput(d),ttl_seconds:0,pFlags:{}}}function generateQId(d,e){return d+"_"+e}function getMediaInput(d){return{_:"inputMediaDocument",id:{_:"inputDocument",id:d.id,access_hash:d.access_hash,file_reference:d.file_reference},ttl_seconds:0,pFlags:{}}}class AppInlineBotsManager extends AppManager{constructor(){super(...arguments),this.inlineResults={},this.setHash={}}getGeoInput(e){return e._==="geoPoint"?{_:"inputGeoPoint",lat:e.lat,long:e.long,accuracy_radius:e.accuracy_radius}:{_:"inputGeoPointEmpty"}}getInlineResults(e,t,r="",s="",a){return this.apiManager.invokeApi("messages.getInlineBotResults",{bot:this.appUsersManager.getUserInput(t),peer:this.appPeersManager.getInputPeerById(e),query:r,geo_point:a?this.getGeoInput(a):void 0,offset:s},{stopTime:-1,noErrorBox:!0}).then(n=>{const o=n.query_id;return n.results.forEach(p=>{p._==="botInlineMediaResult"?(p.document=this.appDocsManager.saveDoc(p.document),p.photo=this.appPhotosManager.savePhoto(p.photo)):(p.content=this.appWebDocsManager.saveWebDocument(p.content),p.thumb=this.appWebDocsManager.saveWebDocument(p.thumb)),this.inlineResults[generateQId(o,p.id)]=p}),n})}pushPopularBot(e){this.appUsersManager.getTopPeers("bots_inline").then(t=>{const r=e.toPeerId(),s=t.findIndex(n=>n.id===r);let a;s!==-1?a=t[s]:a={id:r,rating:0},++a.rating,insertInDescendSortedArray(t,a,"rating"),this.appStateManager.setKeyValueToStorage("topPeersCache")})}switchToPM(e,t,r){return this.setHash[t]={peerId:e,time:Date.now()},this.appMessagesManager.startBot(t,void 0,r)}async checkSwitchReturn(e){const t=this.appUsersManager.getUser(e);if(!t||!t.pFlags.bot||!t.bot_inline_placeholder)return;const r=this.setHash[e];if(r&&(delete this.setHash[e],Date.now()-r.time<36e5))return r.peerId}switchInlineQuery(e,t,r,s){const a="@"+this.appPeersManager.getPeerUsername(r.toPeerId())+" "+s;this.appDraftsManager.setDraft(e,t,a)}callbackButtonClick(e,t,r){return this.apiManager.invokeApi("messages.getBotCallbackAnswer",{peer:this.appPeersManager.getInputPeerById(e),msg_id:getServerMessageId(t),data:r.data},{stopTime:-1,noErrorBox:!0})}sendInlineResult(e,t,r,s={}){const a=this.inlineResults[r];if(!a)return;this.pushPopularBot(t);const n=r.split("_"),o=n.shift(),p=n.join("_");if(s.viaBotId=t,s.queryId=o,s.resultId=p,a.send_message.reply_markup&&(s.replyMarkup=a.send_message.reply_markup),a.send_message._==="botInlineMessageText")this.appMessagesManager.sendText({...s,peerId:e,text:a.send_message.message,entities:a.send_message.entities});else{let c,f;const l=a.send_message;switch(l._){case"botInlineMessageMediaAuto":{if(l.message,a._==="botInlineMediaResult"){const{document:u,photo:g}=a;u?c=getMediaInput(u):c=getPhotoMediaInput(g)}else{const u=a.content||a.thumb;u&&(a.type==="photo"?c={_:"inputMediaPhotoExternal",pFlags:{},url:u.url}:c={_:"inputMediaDocumentExternal",pFlags:{},url:u.url},s.webDocument=u)}break}case"botInlineMessageMediaGeo":{c={_:"inputMediaGeoPoint",geo_point:this.getGeoInput(l.geo)},s.geoPoint=l.geo;break}case"botInlineMessageMediaVenue":{c={_:"inputMediaVenue",geo_point:this.getGeoInput(l.geo),title:l.title,address:l.address,provider:l.provider,venue_id:l.venue_id,venue_type:l.venue_type},s.geoPoint=l.geo;break}case"botInlineMessageMediaContact":{c={_:"inputMediaContact",phone_number:l.phone_number,first_name:l.first_name,last_name:l.last_name,vcard:l.vcard};break}case"botInlineMessageMediaInvoice":{f={_:"messageMediaInvoice",title:l.title,description:l.description,photo:l.photo,currency:l.currency,total_amount:l.total_amount,pFlags:{shipping_address_requested:l.pFlags.shipping_address_requested,test:l.pFlags.test},start_param:void 0};break}}!c&&f&&(c={_:"messageMediaPending",messageMedia:f}),this.appMessagesManager.sendOther({...s,peerId:e,inputMedia:c})}}}function isLegacyMessageId(d){return typeof d=="number"&&d<MESSAGE_ID_OFFSET}class AppMessagesIdsManager{generateTempMessageId(e,t){return+(this.generateMessageId(e,t)+1e-4).toFixed(4)}generateMessageId(e,t){return!t||!Number.isInteger(e)||e<=0?e:(e=getServerMessageId(e),MESSAGE_ID_OFFSET+e)}incrementMessageId(e,t){return this.generateMessageId(getServerMessageId(e)+t,isLegacyMessageId(e)?1:0)}getMessageIdInfo(e,t){const r=getServerMessageId(e);return{messageId:r,channelId:e===r?void 0:t}}splitMessageIdsByChannels(e,t){const r=[];let s;for(let a=0,n=e.length;a<n;++a){const o=e[a],{messageId:p,channelId:c}=this.getMessageIdInfo(o,t);(!s||s[0]!==c)&&(s=[c,{mids:[],messageIds:[]}],r.push(s)),s[1].mids.push(o),s[1].messageIds.push(p)}return r}}const PARALLEL_LIMIT=8,IGNORE_ERRORS$1=new Set(["NO_ENTRY_FOUND","STORAGE_OFFLINE","MIDDLEWARE","NO_AUTO_DOWNLOAD"]);class LazyLoadQueueBase{constructor(e=PARALLEL_LIMIT){this.parallelLimit=e,this.queueId=0,this.queue=[],this.inProcess=new Set,this.lockPromise=null,this.unlockResolve=null,this.log=logger("LL",LogTypes.Error),this.processQueue=throttle(()=>this._processQueue(),8,!1)}clear(){this.inProcess.clear(),this.queue.length=0}lock(){this.lockPromise||(this.lockPromise=new Promise((e,t)=>{this.unlockResolve=e}))}unlock(){this.unlockResolve&&(this.unlockResolve(),this.unlockResolve=this.lockPromise=null,this.processQueue())}async processItem(e){if(!this.lockPromise){this.inProcess.add(e);try{await this.loadItem(e)}catch(t){IGNORE_ERRORS$1.has(t?.type)||this.log.error("loadMediaQueue error:",t)}this.inProcess.delete(e),this.processQueue()}}loadItem(e){return e.load()}getItem(){return this.queue.shift()}addElement(e,t){this.queue[e](t),this.processQueue()}_processQueue(e){if(!(!this.queue.length||this.lockPromise||this.parallelLimit>0&&this.inProcess.size>=this.parallelLimit))do{if(e?indexOfAndSplice(this.queue,e):e=this.getItem(),e)this.processItem(e);else break;e=null}while(this.inProcess.size<this.parallelLimit&&this.queue.length)}push(e){this.addElement("push",e)}unshift(e){this.addElement("unshift",e)}}const createDetails=()=>({cleaned:!1,inner:[],onCleanCallbacks:[]}),MIDDLEWARE_ERROR=makeError("MIDDLEWARE");class MiddlewareHelper{constructor(){this.details=createDetails(),this.onDestroyCallbacks=[],this.onDestroy=e=>{if(this.destroyed)return e();this.onDestroyCallbacks.push(e)}}clean(){const e=this.details;e.cleaned=!0,e.inner.splice(0,e.inner.length).forEach(t=>t.destroy()),e.onCleanCallbacks.splice(0,e.onCleanCallbacks.length).forEach(t=>t()),e.middleware=void 0,this.details=createDetails()}destroy(){this.destroyed=!0,this.clean(),this.onDestroyCallbacks.splice(0,this.onDestroyCallbacks.length).forEach(e=>e()),this.parent&&(indexOfAndSplice(this.parent.details.inner,this),this.parent=void 0)}createMiddlewareForDetails(e,t){const r=()=>!e.cleaned&&(!t||t());return r.create=()=>{if(!r())throw MIDDLEWARE_ERROR;const s=getMiddleware();return s.parent=this,e.inner.push(s),s},r.onClean=s=>{if(!r())return s();e.onCleanCallbacks.push(s)},r.onDestroy=this.onDestroy,r}get(e){const t=this.details;return t.cleaned?this.createMiddlewareForDetails(t):e?this.createMiddlewareForDetails(t,e):t.middleware??(t.middleware=this.createMiddlewareForDetails(t))}}function getMiddleware(){return new MiddlewareHelper}function getObjectKeysAndSort(d,e="asc"){if(!d)return[];const t=d instanceof Map?[...d.keys()]:Object.keys(d).map(r=>+r);return e==="asc"?t.sort((r,s)=>r-s):t.sort((r,s)=>s-r)}function splitStringByLength(d,e){if(d.length<e)return[d];let t=0,r=0,s=0;const a=" ",n=[],o=c=>{let f=d.slice(r,c);const l=s++;if(f.length>e){const u=f.slice(e);splitStringByLength(u,e).forEach(y=>{n[s++]=y}),f=f.slice(0,e)}r=c,t=0,n[l]=(n[l]||"")+f};let p=0;do{let c=d.indexOf(a,p);if(c===-1){p!==d.length-1&&o();break}c+=a.length;const f=c-p;t+f>e&&o(t),p=c,t+=f}while(!0);return n}function debounce(d,e,t=!0,r=!0){let s,a,n,o,p=!1;const c=l=>{const u=n,g=o;try{const y=d.apply(null,l);u(y)}catch(y){console.error("debounce error",y),g(y)}},f=(...l)=>{a||(a=new Promise((g,y)=>(n=g,o=y))),s?(clearTimeout(s),p=!0,o(),a=new Promise((g,y)=>(n=g,o=y))):t&&(c(l),p=!1);const u=ctx.setTimeout(()=>{r&&(!t||p)&&c(l),s===u&&(s=a=n=o=void 0,p=!1)},e);return s=u,a.catch(noop$2),a};return f.clearTimeout=()=>{s&&(ctx.clearTimeout(s),o(),s=a=n=o=void 0,p=!1)},f.isDebounced=()=>!!s,f}function matchUrl(d){return d?d.match(URL_REG_EXP):null}function availableReactionToReaction(d){return{_:"reactionEmoji",emoticon:d.reaction}}function reactionsEqual(d,e){return typeof d!=typeof e?!1:([d,e]=[d,e].map(t=>t._==="availableReaction"?availableReactionToReaction(t):t),deepEqual(d,e))}function filterMessagesByInputFilter({inputFilter:d,messages:e,limit:t,savedReaction:r}){if(d==="inputMessagesFilterEmpty"&&!r)return e.slice(0,t);const s=[];if(!e.length)return s;let a=!0;const n={},o=[],p=[];switch(d){case"inputMessagesFilterPhotos":n.messageMediaPhoto=!0;break;case"inputMessagesFilterPhotoVideo":n.messageMediaPhoto=!0,n.messageMediaDocument=!0,o.push("video");break;case"inputMessagesFilterVideo":n.messageMediaDocument=!0,o.push("video");break;case"inputMessagesFilterDocument":n.messageMediaDocument=!0,o.push(void 0,"photo","pdf");break;case"inputMessagesFilterVoice":n.messageMediaDocument=!0,o.push("voice");break;case"inputMessagesFilterRoundVoice":n.messageMediaDocument=!0,o.push("round","voice");break;case"inputMessagesFilterRoundVideo":n.messageMediaDocument=!0,o.push("round");break;case"inputMessagesFilterMusic":n.messageMediaDocument=!0,o.push("audio");break;case"inputMessagesFilterUrl":n.url=!0;break;case"inputMessagesFilterChatPhotos":n.avatar=!0;break;case"inputMessagesFilterPinned":p.push("pinned");break;default:a=!1;break}if(!a&&!r?.length)return s;for(let c=0,f=e.length;c<f;++c){const l=e[c];if(!l)continue;let u=!a;if(p?.some(g=>l.pFlags[g]))u=!0;else if(l._==="message"){if(l.media&&n[l.media._]){const g=l.media.document;if(g&&o.length&&!o.includes(g.type))continue;u=!0}else if(n.url&&l.message){const g=["messageEntityTextUrl","messageEntityUrl"];(l.totalEntities.find(y=>g.includes(y._))||matchUrl(l.message))&&(u=!0)}if(u&&r){const g=l.reactions?.results;u=g?r.every(y=>g.some(b=>reactionsEqual(b.reaction,y))):!1}}else n.avatar&&l.action&&["messageActionChannelEditPhoto","messageActionChatEditPhoto","messageActionChannelEditVideo","messageActionChatEditVideo"].includes(l.action._)&&(u=!0);if(u&&s.push(l)>=t)break}return s}let uploadId=0;function getFileNameForUpload(d){let e;const t=d?.type;if(t){const r=`${tabId}_${uploadId++}.${t.split("/")[1]}`;["image/jpeg","image/png","image/bmp"].indexOf(t)>=0?e="photo"+r:t.indexOf("audio/")===0||["video/ogg"].indexOf(t)>=0?e="audio"+r:t.indexOf("video/")===0?e="video"+r:e="document"+r}else e=`upload-${tabId}_${uploadId++}`;return e}class AppTabsManager{constructor(){this.tabs=new Map}start(){MTProtoMessagePort.getInstance().addEventListener("tabState",(t,r)=>{const s=this.tabs.get(r);s.state=t})}getTabs(){return[...this.tabs.values()].filter(e=>!!e.state)}addTab(e){const t={source:e,state:void 0};this.tabs.set(e,t)}deleteTab(e){this.tabs.delete(e)}}const appTabsManager=new AppTabsManager;MOUNT_CLASS_TO&&(MOUNT_CLASS_TO.appTabsManager=appTabsManager);function getGroupedText(d){let e=0,t;for(const r of d)if(r.message){if(++e>1)break;t=r}return e>1&&(t=void 0),t}function getStickerEffectThumb(d){return d.video_thumbs?.[0]}function getDocumentInput(d){return{_:"inputDocument",id:d.id,access_hash:d.access_hash,file_reference:d.file_reference}}function setBooleanFlag(d,e,t){t?d[e]=!0:delete d[e]}function getMessageThreadId(d,e){let t;const r=d.reply_to,s=d.saved_peer_id&&getPeerId(d.saved_peer_id);return s?t=s:r?._==="messageReplyHeader"&&(!e||r.pFlags.forum_topic)?t=r.reply_to_top_id||r.reply_to_msg_id:e&&(d._==="messageService"&&d.action?._==="messageActionTopicCreate"?t=d.mid:t=GENERAL_TOPIC_ID),t}const TLD=["abogado","ac","academy","accountants","active","actor","ad","adult","ae","aero","af","ag","agency","ai","airforce","al","allfinanz","alsace","am","amsterdam","an","android","ao","apartments","aq","aquarelle","ar","archi","army","arpa","as","asia","associates","at","attorney","au","auction","audio","autos","aw","ax","axa","az","ba","band","bank","bar","barclaycard","barclays","bargains","bayern","bb","bd","be","beer","berlin","best","bf","bg","bh","bi","bid","bike","bingo","bio","biz","bj","black","blackfriday","bloomberg","blue","bm","bmw","bn","bnpparibas","bo","boo","boutique","br","brussels","bs","bt","budapest","build","builders","business","buzz","bv","bw","by","bz","bzh","ca","cab","cal","camera","camp","cancerresearch","canon","capetown","capital","caravan","cards","care","career","careers","cartier","casa","cash","cat","catering","cc","cd","center","ceo","cern","cf","cg","ch","channel","chat","cheap","christmas","chrome","church","ci","citic","city","ck","cl","claims","cleaning","click","clinic","clothing","club","cm","cn","co","coach","codes","coffee","college","cologne","com","community","company","computer","condos","construction","consulting","contractors","cooking","cool","coop","country","cr","credit","creditcard","cricket","crs","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cz","dabur","dad","dance","dating","day","dclk","de","deals","degree","delivery","democrat","dental","dentist","desi","design","dev","diamonds","diet","digital","direct","directory","discount","dj","dk","dm","dnp","do","docs","domains","doosan","durban","dvag","dz","eat","ec","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","equipment","er","es","esq","estate","et","eu","eurovision","eus","events","everbank","exchange","expert","exposed","fail","farm","fashion","feedback","fi","finance","financial","firmdale","fish","fishing","fit","fitness","fj","fk","flights","florist","flowers","flsmidth","fly","fm","fo","foo","forsale","foundation","fr","frl","frogans","fund","furniture","futbol","ga","gal","gallery","garden","gb","gbiz","gd","ge","gent","gf","gg","ggee","gh","gi","gift","gifts","gives","gl","glass","gle","global","globo","gm","gmail","gmo","gmx","gn","goog","google","gop","gov","gp","gq","gr","graphics","gratis","green","gripe","gs","gt","gu","guide","guitars","guru","gw","gy","hamburg","hangout","haus","healthcare","help","here","hermes","hiphop","hiv","hk","hm","hn","holdings","holiday","homes","horse","host","hosting","house","how","hr","ht","hu","ibm","id","ie","ifm","il","im","immo","immobilien","in","industries","info","ing","ink","institute","insure","int","international","investments","io","iq","ir","irish","is","it","iwc","jcb","je","jetzt","jm","jo","jobs","joburg","jp","juegos","kaufen","kddi","ke","kg","kh","ki","kim","kitchen","kiwi","km","kn","koeln","kp","kr","krd","kred","kw","ky","kyoto","kz","la","lacaixa","land","lat","latrobe","lawyer","lb","lc","lds","lease","legal","lgbt","li","lidl","life","lighting","limited","limo","link","lk","loans","london","lotte","lotto","lr","ls","lt","ltda","lu","luxe","luxury","lv","ly","ma","madrid","maison","management","mango","market","marketing","marriott","mc","md","me","media","meet","melbourne","meme","memorial","menu","mg","mh","miami","mil","mini","mk","ml","mm","mn","mo","mobi","moda","moe","monash","money","mormon","mortgage","moscow","motorcycles","mov","mp","mq","mr","ms","mt","mu","museum","mv","mw","mx","my","mz","na","nagoya","name","navy","nc","ne","net","network","neustar","new","nexus","nf","ng","ngo","nhk","ni","nico","ninja","nl","no","np","nr","nra","nrw","ntt","nu","nyc","nz","okinawa","om","one","ong","onl","ooo","org","organic","osaka","otsuka","ovh","pa","paris","partners","parts","party","pe","pf","pg","ph","pharmacy","photo","photography","photos","physio","pics","pictures","pink","pizza","pk","pl","place","plumbing","pm","pn","pohl","poker","porn","post","pr","praxi","press","pro","prod","productions","prof","properties","property","ps","pt","pub","pw","py","qa","qpon","quebec","re","realtor","recipes","red","rehab","reise","reisen","reit","ren","rentals","repair","report","republican","rest","restaurant","reviews","rich","rio","rip","ro","rocks","rodeo","rs","rsvp","ru","ruhr","rw","ryukyu","sa","saarland","sale","samsung","sarl","saxo","sb","sc","sca","scb","schmidt","schule","schwarz","science","scot","sd","se","services","sew","sexy","sg","sh","shiksha","shoes","shriram","si","singles","sj","sk","sky","sl","sm","sn","so","social","software","sohu","solar","solutions","soy","space","spiegel","sr","st","style","su","supplies","supply","support","surf","surgery","suzuki","sv","sx","sy","sydney","systems","sz","taipei","tatar","tattoo","tax","tc","td","technology","tel","temasek","tennis","tf","tg","th","tienda","tips","tires","tirol","tj","tk","tl","tm","tn","to","today","tokyo","tools","top","toshiba","town","toys","tp","tr","trade","training","travel","trust","tt","tui","tv","tw","tz","ua","ug","uk","university","uno","uol","us","uy","uz","va","vacations","vc","ve","vegas","ventures","versicherung","vet","vg","vi","viajes","video","villas","vision","vlaanderen","vn","vodka","vote","voting","voto","voyage","vu","wales","wang","watch","webcam","website","wed","wedding","wf","whoswho","wien","wiki","williamhill","wme","work","works","world","ws","wtc","wtf","佛山","集团","在线","한국","ভারত","八卦","موقع","公益","公司","移动","我爱你","москва","қаз","онлайн","сайт","срб","淡马锡","орг","삼성","சிங்கப்பூர்","商标","商店","商城","дети","мкд","中文网","中信","中国","中國","谷歌","భారత్","ලංකා","ભારત","भारत","网店","संगठन","网络","укр","香港","台湾","台灣","手机","мон","الجزائر","عمان","ایران","امارات","بازار","الاردن","بھارت","المغرب","السعودية","مليسيا","شبكة","გე","机构","组织机构","ไทย","سورية","рус","рф","تونس","みんな","グーグル","世界","ਭਾਰਤ","网址","游戏","vermögensberater","vermögensberatung","企业","مصر","قطر","广东","இலங்கை","இந்தியா","新加坡","فلسطين","政务","xxx","xyz","yachts","yandex","ye","yoga","yokohama","youtube","yt","za","zip","zm","zone","zuerich","zw"];function checkBrackets(d){for(var e=d.length,t=d.split("(").length-1,r=d.split(")").length-1;r>t&&d.charAt(e-1)===")";)d=d.substr(0,e-1),r--,e--;return t>r&&(d=d.replace(/\)+$/,"")),d}const EmojiVersions={14:{"1f6dd":4867,"1f6de":4916,"1f6df":4923,"1f7f0":62832,"1f979":183,"1f9cc":1557,"1fa7b":61332,"1fa7c":61330,"1faa9":51093,"1faaa":61364,"1faab":61189,"1faac":51085,"1fab7":2651,"1fab8":2631,"1fab9":2672,"1faba":2673,"1fac3":1520,"1fac4":1521,"1fac5":1505,"1fad7":3793,"1fad8":3707,"1fad9":3804,"1fae0":111,"1fae1":136,"1fae2":132,"1fae3":133,"1fae4":174,"1fae5":142,"1fae6":1385,"1fae7":61353,"1faf0":1341,"1faf1":1332,"1faf2":1333,"1faf3":1334,"1faf4":1335,"1faf5":1351,"1faf6":1360,"1faf1-1f3fb-200d-1faf2-1f3fc":0,"1faf1-1f3fb-200d-1faf2-1f3fd":0,"1faf1-1f3fb-200d-1faf2-1f3fe":0,"1faf1-1f3fb-200d-1faf2-1f3ff":0,"1faf1-1f3fc-200d-1faf2-1f3fb":0,"1faf1-1f3fc-200d-1faf2-1f3fd":0,"1faf1-1f3fc-200d-1faf2-1f3fe":0,"1faf1-1f3fc-200d-1faf2-1f3ff":0,"1faf1-1f3fd-200d-1faf2-1f3fb":0,"1faf1-1f3fd-200d-1faf2-1f3fc":0,"1faf1-1f3fd-200d-1faf2-1f3fe":0,"1faf1-1f3fd-200d-1faf2-1f3ff":0,"1faf1-1f3fe-200d-1faf2-1f3fb":0,"1faf1-1f3fe-200d-1faf2-1f3fc":0,"1faf1-1f3fe-200d-1faf2-1f3fd":0,"1faf1-1f3fe-200d-1faf2-1f3ff":0,"1faf1-1f3ff-200d-1faf2-1f3fb":0,"1faf1-1f3ff-200d-1faf2-1f3fc":0,"1faf1-1f3ff-200d-1faf2-1f3fd":0,"1faf1-1f3ff-200d-1faf2-1f3fe":0,"1fac3-1f3fb":0,"1fac3-1f3fc":0,"1fac3-1f3fd":0,"1fac3-1f3fe":0,"1fac3-1f3ff":0,"1fac4-1f3fb":0,"1fac4-1f3fc":0,"1fac4-1f3fd":0,"1fac4-1f3fe":0,"1fac4-1f3ff":0,"1fac5-1f3fb":0,"1fac5-1f3fc":0,"1fac5-1f3fd":0,"1fac5-1f3fe":0,"1fac5-1f3ff":0,"1faf0-1f3fb":0,"1faf0-1f3fc":0,"1faf0-1f3fd":0,"1faf0-1f3fe":0,"1faf0-1f3ff":0,"1faf1-1f3fb":0,"1faf1-1f3fc":0,"1faf1-1f3fd":0,"1faf1-1f3fe":0,"1faf1-1f3ff":0,"1faf2-1f3fb":0,"1faf2-1f3fc":0,"1faf2-1f3fd":0,"1faf2-1f3fe":0,"1faf2-1f3ff":0,"1faf3-1f3fb":0,"1faf3-1f3fc":0,"1faf3-1f3fd":0,"1faf3-1f3fe":0,"1faf3-1f3ff":0,"1faf4-1f3fb":0,"1faf4-1f3fc":0,"1faf4-1f3fd":0,"1faf4-1f3fe":0,"1faf4-1f3ff":0,"1faf5-1f3fb":0,"1faf5-1f3fc":0,"1faf5-1f3fd":0,"1faf5-1f3fe":0,"1faf5-1f3ff":0,"1faf6-1f3fb":0,"1faf6-1f3fc":0,"1faf6-1f3fd":0,"1faf6-1f3fe":0,"1faf6-1f3ff":0},"":{2049:62835,2122:62863,2139:62888,2194:62764,2195:62763,2196:62762,2197:62756,2198:62758,2199:62760,2328:61194,2600:4990,2601:4998,2602:41013,2603:41018,2604:41020,2611:62851,2614:41014,2615:3781,2618:2667,2620:1106,2622:62753,2623:62754,2626:62783,2638:62780,2639:177,2648:62788,2649:62789,2650:62796,2651:62797,2652:62798,2653:62799,2660:51095,2663:51098,2665:51096,2666:51097,2668:4865,2692:61297,2693:4922,2694:61300,2696:61311,2697:61319,2699:61309,2702:61284,2705:62850,2708:4931,2709:61245,2712:61259,2714:62852,2716:62828,2721:62779,2728:51029,2733:62858,2734:62859,2744:41017,2747:62860,2753:62836,2754:62837,2755:62838,2757:62839,2763:1137,2764:1141,2795:62829,2796:62830,2797:62831,2934:62767,2935:62768,3030:62840,3297:62912,3299:62913,"0023-20e3":62864,"002a-20e3":62865,"0030-20e3":62866,"0031-20e3":62867,"0032-20e3":62868,"0033-20e3":62869,"0034-20e3":62870,"0035-20e3":62871,"0036-20e3":62872,"0037-20e3":62873,"0038-20e3":62874,"0039-20e3":62875,"00a9":62861,"00ae":62862,"1f004":51101,"1f0cf":51100,"1f170":62882,"1f171":62884,"1f17e":62893,"1f17f":62895,"1f18e":62883,"1f191":62885,"1f192":62886,"1f193":62887,"1f194":62889,"1f195":62891,"1f196":62892,"1f197":62894,"1f198":62896,"1f199":62897,"1f19a":62898,"1f1e6-1f1e8":71594,"1f1e6-1f1e9":71595,"1f1e6-1f1ea":71596,"1f1e6-1f1eb":71597,"1f1e6-1f1ec":71598,"1f1e6-1f1ee":71599,"1f1e6-1f1f1":71600,"1f1e6-1f1f2":71601,"1f1e6-1f1f4":71602,"1f1e6-1f1f6":71603,"1f1e6-1f1f7":71604,"1f1e6-1f1f8":71605,"1f1e6-1f1f9":71606,"1f1e6-1f1fa":71607,"1f1e6-1f1fc":71608,"1f1e6-1f1fd":71609,"1f1e6-1f1ff":71610,"1f1e7-1f1e6":71611,"1f1e7-1f1e7":71612,"1f1e7-1f1e9":71613,"1f1e7-1f1ea":71614,"1f1e7-1f1eb":71615,"1f1e7-1f1ec":71616,"1f1e7-1f1ed":71617,"1f1e7-1f1ee":71618,"1f1e7-1f1ef":71619,"1f1e7-1f1f1":71620,"1f1e7-1f1f2":71621,"1f1e7-1f1f3":71622,"1f1e7-1f1f4":71623,"1f1e7-1f1f6":71624,"1f1e7-1f1f7":71625,"1f1e7-1f1f8":71626,"1f1e7-1f1f9":71627,"1f1e7-1f1fb":71628,"1f1e7-1f1fc":71629,"1f1e7-1f1fe":71630,"1f1e7-1f1ff":71631,"1f1e8-1f1e6":71632,"1f1e8-1f1e8":71633,"1f1e8-1f1e9":71634,"1f1e8-1f1eb":71635,"1f1e8-1f1ec":71636,"1f1e8-1f1ed":71637,"1f1e8-1f1ee":71638,"1f1e8-1f1f0":71639,"1f1e8-1f1f1":71640,"1f1e8-1f1f2":71641,"1f1e8-1f1f3":71642,"1f1e8-1f1f4":71643,"1f1e8-1f1f5":71644,"1f1e8-1f1f7":71645,"1f1e8-1f1fa":71646,"1f1e8-1f1fb":71647,"1f1e8-1f1fc":71648,"1f1e8-1f1fd":71649,"1f1e8-1f1fe":71650,"1f1e8-1f1ff":71651,"1f1e9-1f1ea":71652,"1f1e9-1f1ec":71653,"1f1e9-1f1ef":71654,"1f1e9-1f1f0":71655,"1f1e9-1f1f2":71656,"1f1e9-1f1f4":71657,"1f1e9-1f1ff":71658,"1f1ea-1f1e6":71659,"1f1ea-1f1e8":71660,"1f1ea-1f1ea":71661,"1f1ea-1f1ec":71662,"1f1ea-1f1ed":71663,"1f1ea-1f1f7":71664,"1f1ea-1f1f8":71665,"1f1ea-1f1f9":71666,"1f1ea-1f1fa":71667,"1f1eb-1f1ee":71668,"1f1eb-1f1ef":71669,"1f1eb-1f1f0":71670,"1f1eb-1f1f2":71671,"1f1eb-1f1f4":71672,"1f1eb-1f1f7":71673,"1f1ec-1f1e6":71674,"1f1ec-1f1e7":71675,"1f1ec-1f1e9":71676,"1f1ec-1f1ea":71677,"1f1ec-1f1eb":71678,"1f1ec-1f1ec":71679,"1f1ec-1f1ed":71680,"1f1ec-1f1ee":71681,"1f1ec-1f1f1":71682,"1f1ec-1f1f2":71683,"1f1ec-1f1f3":71684,"1f1ec-1f1f5":71685,"1f1ec-1f1f6":71686,"1f1ec-1f1f7":71687,"1f1ec-1f1f8":71688,"1f1ec-1f1f9":71689,"1f1ec-1f1fa":71690,"1f1ec-1f1fc":71691,"1f1ec-1f1fe":71692,"1f1ed-1f1f0":71693,"1f1ed-1f1f2":71694,"1f1ed-1f1f3":71695,"1f1ed-1f1f7":71696,"1f1ed-1f1f9":71697,"1f1ed-1f1fa":71698,"1f1ee-1f1e8":71699,"1f1ee-1f1e9":71700,"1f1ee-1f1ea":71701,"1f1ee-1f1f1":71702,"1f1ee-1f1f2":71703,"1f1ee-1f1f3":71704,"1f1ee-1f1f4":71705,"1f1ee-1f1f6":71706,"1f1ee-1f1f7":71707,"1f1ee-1f1f8":71708,"1f1ee-1f1f9":71709,"1f1ef-1f1ea":71710,"1f1ef-1f1f2":71711,"1f1ef-1f1f4":71712,"1f1ef-1f1f5":71713,"1f1f0-1f1ea":71714,"1f1f0-1f1ec":71715,"1f1f0-1f1ed":71716,"1f1f0-1f1ee":71717,"1f1f0-1f1f2":71718,"1f1f0-1f1f3":71719,"1f1f0-1f1f5":71720,"1f1f0-1f1f7":71721,"1f1f0-1f1fc":71722,"1f1f0-1f1fe":71723,"1f1f0-1f1ff":71724,"1f1f1-1f1e6":71725,"1f1f1-1f1e7":71726,"1f1f1-1f1e8":71727,"1f1f1-1f1ee":71728,"1f1f1-1f1f0":71729,"1f1f1-1f1f7":71730,"1f1f1-1f1f8":71731,"1f1f1-1f1f9":71732,"1f1f1-1f1fa":71733,"1f1f1-1f1fb":71734,"1f1f1-1f1fe":71735,"1f1f2-1f1e6":71736,"1f1f2-1f1e8":71737,"1f1f2-1f1e9":71738,"1f1f2-1f1ea":71739,"1f1f2-1f1eb":71740,"1f1f2-1f1ec":71741,"1f1f2-1f1ed":71742,"1f1f2-1f1f0":71743,"1f1f2-1f1f1":71744,"1f1f2-1f1f2":71745,"1f1f2-1f1f3":71746,"1f1f2-1f1f4":71747,"1f1f2-1f1f5":71748,"1f1f2-1f1f6":71749,"1f1f2-1f1f7":71750,"1f1f2-1f1f8":71751,"1f1f2-1f1f9":71752,"1f1f2-1f1fa":71753,"1f1f2-1f1fb":71754,"1f1f2-1f1fc":71755,"1f1f2-1f1fd":71756,"1f1f2-1f1fe":71757,"1f1f2-1f1ff":71758,"1f1f3-1f1e6":71759,"1f1f3-1f1e8":71760,"1f1f3-1f1ea":71761,"1f1f3-1f1eb":71762,"1f1f3-1f1ec":71763,"1f1f3-1f1ee":71764,"1f1f3-1f1f1":71765,"1f1f3-1f1f4":71766,"1f1f3-1f1f5":71767,"1f1f3-1f1f7":71768,"1f1f3-1f1fa":71769,"1f1f3-1f1ff":71770,"1f1f4-1f1f2":71771,"1f1f5-1f1e6":71772,"1f1f5-1f1ea":71773,"1f1f5-1f1eb":71774,"1f1f5-1f1ec":71775,"1f1f5-1f1ed":71776,"1f1f5-1f1f0":71777,"1f1f5-1f1f1":71778,"1f1f5-1f1f2":71779,"1f1f5-1f1f3":71780,"1f1f5-1f1f7":71781,"1f1f5-1f1f8":71782,"1f1f5-1f1f9":71783,"1f1f5-1f1fc":71784,"1f1f5-1f1fe":71785,"1f1f6-1f1e6":71786,"1f1f7-1f1ea":71787,"1f1f7-1f1f4":71788,"1f1f7-1f1f8":71789,"1f1f7-1f1fa":71790,"1f1f7-1f1fc":71791,"1f1f8-1f1e6":71792,"1f1f8-1f1e7":71793,"1f1f8-1f1e8":71794,"1f1f8-1f1e9":71795,"1f1f8-1f1ea":71796,"1f1f8-1f1ec":71797,"1f1f8-1f1ed":71798,"1f1f8-1f1ee":71799,"1f1f8-1f1ef":71800,"1f1f8-1f1f0":71801,"1f1f8-1f1f1":71802,"1f1f8-1f1f2":71803,"1f1f8-1f1f3":71804,"1f1f8-1f1f4":71805,"1f1f8-1f1f7":71806,"1f1f8-1f1f8":71807,"1f1f8-1f1f9":71808,"1f1f8-1f1fb":71809,"1f1f8-1f1fd":71810,"1f1f8-1f1fe":71811,"1f1f8-1f1ff":71812,"1f1f9-1f1e6":71813,"1f1f9-1f1e8":71814,"1f1f9-1f1e9":71815,"1f1f9-1f1eb":71816,"1f1f9-1f1ec":71817,"1f1f9-1f1ed":71818,"1f1f9-1f1ef":71819,"1f1f9-1f1f0":71820,"1f1f9-1f1f1":71821,"1f1f9-1f1f2":71822,"1f1f9-1f1f3":71823,"1f1f9-1f1f4":71824,"1f1f9-1f1f7":71825,"1f1f9-1f1f9":71826,"1f1f9-1f1fb":71827,"1f1f9-1f1fc":71828,"1f1f9-1f1ff":71829,"1f1fa-1f1e6":71830,"1f1fa-1f1ec":71831,"1f1fa-1f1f2":71832,"1f1fa-1f1f3":71833,"1f1fa-1f1f8":71834,"1f1fa-1f1fe":71835,"1f1fa-1f1ff":71836,"1f1fb-1f1e6":71837,"1f1fb-1f1e8":71838,"1f1fb-1f1ea":71839,"1f1fb-1f1ec":71840,"1f1fb-1f1ee":71841,"1f1fb-1f1f3":71842,"1f1fb-1f1fa":71843,"1f1fc-1f1eb":71844,"1f1fc-1f1f8":71845,"1f1fd-1f1f0":71846,"1f1fe-1f1ea":71847,"1f1fe-1f1f9":71848,"1f1ff-1f1e6":71849,"1f1ff-1f1f2":71850,"1f1ff-1f1fc":71851,"1f201":62899,"1f202":62900,"1f21a":62906,"1f22f":62903,"1f232":62907,"1f233":62911,"1f234":62910,"1f235":62915,"1f236":62902,"1f237":62901,"1f238":62909,"1f239":62905,"1f23a":62914,"1f250":62904,"1f251":62908,"1f300":41010,"1f301":4857,"1f302":41012,"1f303":4858,"1f304":4860,"1f305":4861,"1f306":4862,"1f307":4863,"1f308":41011,"1f309":4864,"1f30a":41023,"1f30b":4815,"1f30c":4997,"1f30d":4806,"1f30e":4807,"1f30f":4808,"1f310":4809,"1f311":4977,"1f312":4978,"1f313":4979,"1f314":4980,"1f315":4981,"1f316":4982,"1f317":4983,"1f318":4984,"1f319":4985,"1f31a":4986,"1f31b":4987,"1f31c":4988,"1f31d":4991,"1f31e":4992,"1f31f":4995,"1f320":4996,"1f321":4989,"1f324":41001,"1f325":41002,"1f326":41003,"1f327":41004,"1f328":41005,"1f329":41006,"1f32a":41007,"1f32b":41008,"1f32c":41009,"1f32d":3725,"1f32e":3727,"1f32f":3728,"1f330":3708,"1f331":2659,"1f332":2661,"1f333":2662,"1f334":2663,"1f335":2664,"1f336":3698,"1f337":2658,"1f338":2649,"1f339":2653,"1f33a":2655,"1f33b":2656,"1f33c":2657,"1f33d":3697,"1f33e":2665,"1f33f":2666,"1f340":2668,"1f341":2669,"1f342":2670,"1f343":2671,"1f344":3705,"1f345":3690,"1f346":3694,"1f347":3674,"1f348":3675,"1f349":3676,"1f34a":3677,"1f34b":3678,"1f34c":3679,"1f34d":3680,"1f34e":3682,"1f34f":3683,"1f350":3684,"1f351":3685,"1f352":3686,"1f353":3687,"1f354":3722,"1f355":3724,"1f356":3718,"1f357":3719,"1f358":3744,"1f359":3745,"1f35a":3746,"1f35b":3747,"1f35c":3748,"1f35d":3749,"1f35e":3709,"1f35f":3723,"1f360":3750,"1f361":3756,"1f362":3751,"1f363":3752,"1f364":3753,"1f365":3754,"1f366":3765,"1f367":3766,"1f368":3767,"1f369":3768,"1f36a":3769,"1f36b":3774,"1f36c":3775,"1f36d":3776,"1f36e":3777,"1f36f":3778,"1f370":3771,"1f371":3743,"1f372":3735,"1f373":3733,"1f374":3801,"1f375":3783,"1f376":3784,"1f377":3786,"1f378":3787,"1f379":3788,"1f37a":3789,"1f37b":3790,"1f37c":3779,"1f37d":3800,"1f37e":3785,"1f37f":3739,"1f380":51040,"1f381":51041,"1f382":3770,"1f383":51024,"1f384":51025,"1f385":1527,"1f386":51026,"1f387":51027,"1f388":51030,"1f389":51031,"1f38a":51032,"1f38b":51033,"1f38c":71588,"1f38d":51034,"1f38e":51035,"1f38f":51036,"1f390":51037,"1f391":51038,"1f392":61134,"1f393":61147,"1f396":51045,"1f397":51042,"1f399":61167,"1f39a":61168,"1f39b":61169,"1f39e":61203,"1f39f":51043,"1f3a0":4866,"1f3a1":4868,"1f3a2":4869,"1f3a3":51072,"1f3a4":61170,"1f3a5":61202,"1f3a6":62819,"1f3a7":61171,"1f3a8":51105,"1f3a9":61146,"1f3aa":4871,"1f3ab":51044,"1f3ac":61205,"1f3ad":51103,"1f3ae":51086,"1f3af":51078,"1f3b0":51088,"1f3b1":51081,"1f3b2":51089,"1f3b3":51060,"1f3b4":51102,"1f3b5":61165,"1f3b6":61166,"1f3b7":61173,"1f3b8":61175,"1f3b9":61176,"1f3ba":61177,"1f3bb":61178,"1f3bc":61164,"1f3bd":51074,"1f3be":51058,"1f3bf":51075,"1f3c0":51054,"1f3c1":71586,"1f3c2":1600,"1f3c3-200d-2640":1584,"1f3c3-200d-2642":1583,"1f3c3":1582,"1f3c4-200d-2640":1606,"1f3c4-200d-2642":1605,"1f3c4":1604,"1f3c5":51047,"1f3c6":51046,"1f3c7":1598,"1f3c8":51056,"1f3c9":51057,"1f3ca-200d-2640":1612,"1f3ca-200d-2642":1611,"1f3ca":1610,"1f3cb-200d-2640":1618,"1f3cb-200d-2642":1617,"1f3cb":1616,"1f3cc-200d-2640":1603,"1f3cc-200d-2642":1602,"1f3cc":1601,"1f3cd":4902,"1f3ce":4901,"1f3cf":51061,"1f3d0":51055,"1f3d1":51062,"1f3d2":51063,"1f3d3":51065,"1f3d4":4813,"1f3d5":4817,"1f3d6":4818,"1f3d7":4824,"1f3d8":4829,"1f3d9":4859,"1f3da":4830,"1f3db":4823,"1f3dc":4819,"1f3dd":4820,"1f3de":4821,"1f3df":4822,"1f3e0":4831,"1f3e1":4832,"1f3e2":4833,"1f3e3":4834,"1f3e4":4835,"1f3e5":4836,"1f3e6":4837,"1f3e7":62729,"1f3e8":4838,"1f3e9":4839,"1f3ea":4840,"1f3eb":4841,"1f3ec":4842,"1f3ed":4843,"1f3ee":61216,"1f3ef":4844,"1f3f0":4845,"1f3f3-200d-1f308":71591,"1f3f3-200d-26a7":71592,"1f3f3":71590,"1f3f4-200d-2620":71593,"1f3f4-e0067-e0062-e0065-e006e-e0067-e007f":71852,"1f3f4-e0067-e0062-e0073-e0063-e0074-e007f":71853,"1f3f4-e0067-e0062-e0077-e006c-e0073-e007f":71854,"1f3f4":71589,"1f3f5":2652,"1f3f7":61234,"1f3f8":51066,"1f3f9":61303,"1f3fa":3805,"1f3fb":9525,"1f3fc":9526,"1f3fd":9527,"1f3fe":9528,"1f3ff":9529,"1f400":2576,"1f401":2575,"1f402":2556,"1f403":2557,"1f404":2558,"1f405":2547,"1f406":2548,"1f407":2579,"1f408-200d-2b1b":2544,"1f408":2543,"1f409":2618,"1f40a":2613,"1f40b":2622,"1f40c":2632,"1f40d":2616,"1f40e":2550,"1f40f":2563,"1f410":2565,"1f411":2564,"1f412":2531,"1f413":2596,"1f414":2595,"1f415-200d-1f9ba":2537,"1f415":2535,"1f416":2560,"1f417":2561,"1f418":2570,"1f419":2629,"1f41a":2630,"1f41b":2634,"1f41c":2635,"1f41d":2636,"1f41e":2638,"1f41f":2625,"1f420":2626,"1f421":2627,"1f422":2614,"1f423":2597,"1f424":2598,"1f425":2599,"1f426":2600,"1f427":2601,"1f428":2586,"1f429":2538,"1f42a":2566,"1f42b":2567,"1f42c":2623,"1f42d":2574,"1f42e":2555,"1f42f":2546,"1f430":2578,"1f431":2542,"1f432":2617,"1f433":2621,"1f434":2549,"1f435":2530,"1f436":2534,"1f437":2559,"1f438":2612,"1f439":2577,"1f43a":2539,"1f43b-200d-2744":2585,"1f43b":2584,"1f43c":2587,"1f43d":2562,"1f43e":2593,"1f43f":2580,"1f440":1381,"1f441-200d-1f5e8":1159,"1f441":1382,"1f442":1373,"1f443":1375,"1f444":1384,"1f445":1383,"1f446":1347,"1f447":1349,"1f448":1345,"1f449":1346,"1f44a":1355,"1f44b":1327,"1f44c":1336,"1f44d":1352,"1f44e":1353,"1f44f":1358,"1f450":1361,"1f451":61144,"1f452":61145,"1f453":61110,"1f454":61115,"1f455":61116,"1f456":61117,"1f457":61122,"1f458":61123,"1f459":61128,"1f45a":61129,"1f45b":61130,"1f45c":61131,"1f45d":61132,"1f45e":61136,"1f45f":61137,"1f460":61140,"1f461":61141,"1f462":61143,"1f463":1687,"1f464":1684,"1f465":1685,"1f466":1388,"1f467":1389,"1f468-200d-1f33e":1457,"1f468-200d-1f373":1460,"1f468-200d-1f37c":1524,"1f468-200d-1f393":1448,"1f468-200d-1f3a4":1478,"1f468-200d-1f3a8":1481,"1f468-200d-1f3eb":1451,"1f468-200d-1f3ed":1466,"1f468-200d-1f466-200d-1f466":1674,"1f468-200d-1f466":1673,"1f468-200d-1f467-200d-1f466":1676,"1f468-200d-1f467-200d-1f467":1677,"1f468-200d-1f467":1675,"1f468-200d-1f468-200d-1f466":1663,"1f468-200d-1f468-200d-1f466-200d-1f466":1666,"1f468-200d-1f468-200d-1f467":1664,"1f468-200d-1f468-200d-1f467-200d-1f466":1665,"1f468-200d-1f468-200d-1f467-200d-1f467":1667,"1f468-200d-1f469-200d-1f466":1658,"1f468-200d-1f469-200d-1f466-200d-1f466":1661,"1f468-200d-1f469-200d-1f467":1659,"1f468-200d-1f469-200d-1f467-200d-1f466":1660,"1f468-200d-1f469-200d-1f467-200d-1f467":1662,"1f468-200d-1f4bb":1475,"1f468-200d-1f4bc":1469,"1f468-200d-1f527":1463,"1f468-200d-1f52c":1472,"1f468-200d-1f680":1487,"1f468-200d-1f692":1490,"1f468-200d-1f9af":1574,"1f468-200d-1f9b0":1396,"1f468-200d-1f9b1":1397,"1f468-200d-1f9b2":1399,"1f468-200d-1f9b3":1398,"1f468-200d-1f9bc":1577,"1f468-200d-1f9bd":1580,"1f468-200d-2695":1445,"1f468-200d-2696":1454,"1f468-200d-2708":1484,"1f468-200d-2764-200d-1f468":1655,"1f468-200d-2764-200d-1f48b-200d-1f468":1651,"1f468":1392,"1f469-200d-1f33e":1458,"1f469-200d-1f373":1461,"1f469-200d-1f37c":1523,"1f469-200d-1f393":1449,"1f469-200d-1f3a4":1479,"1f469-200d-1f3a8":1482,"1f469-200d-1f3eb":1452,"1f469-200d-1f3ed":1467,"1f469-200d-1f466-200d-1f466":1679,"1f469-200d-1f466":1678,"1f469-200d-1f467-200d-1f466":1681,"1f469-200d-1f467-200d-1f467":1682,"1f469-200d-1f467":1680,"1f469-200d-1f469-200d-1f466":1668,"1f469-200d-1f469-200d-1f466-200d-1f466":1671,"1f469-200d-1f469-200d-1f467":1669,"1f469-200d-1f469-200d-1f467-200d-1f466":1670,"1f469-200d-1f469-200d-1f467-200d-1f467":1672,"1f469-200d-1f4bb":1476,"1f469-200d-1f4bc":1470,"1f469-200d-1f527":1464,"1f469-200d-1f52c":1473,"1f469-200d-1f680":1488,"1f469-200d-1f692":1491,"1f469-200d-1f9af":1575,"1f469-200d-1f9b0":1401,"1f469-200d-1f9b1":1403,"1f469-200d-1f9b2":1407,"1f469-200d-1f9b3":1405,"1f469-200d-1f9bc":1578,"1f469-200d-1f9bd":1581,"1f469-200d-2695":1446,"1f469-200d-2696":1455,"1f469-200d-2708":1485,"1f469-200d-2764-200d-1f468":1654,"1f469-200d-2764-200d-1f469":1656,"1f469-200d-2764-200d-1f48b-200d-1f468":1650,"1f469-200d-2764-200d-1f48b-200d-1f469":1652,"1f469":1400,"1f46a":1657,"1f46b":1647,"1f46c":1648,"1f46d":1646,"1f46e-200d-2640":1494,"1f46e-200d-2642":1493,"1f46e":1492,"1f46f-200d-2640":1590,"1f46f-200d-2642":1589,"1f46f":1588,"1f470-200d-2640":1518,"1f470-200d-2642":1517,"1f470":1516,"1f471-200d-2640":1409,"1f471-200d-2642":1410,"1f471":1391,"1f472":1511,"1f473-200d-2640":1510,"1f473-200d-2642":1509,"1f473":1508,"1f474":1412,"1f475":1413,"1f476":1386,"1f477-200d-2640":1504,"1f477-200d-2642":1503,"1f477":1502,"1f478":1507,"1f479":1109,"1f47a":1110,"1f47b":1111,"1f47c":1526,"1f47d":1112,"1f47e":1113,"1f47f":1104,"1f480":1105,"1f481-200d-2640":1428,"1f481-200d-2642":1427,"1f481":1426,"1f482-200d-2640":1500,"1f482-200d-2642":1499,"1f482":1498,"1f483":1585,"1f484":61152,"1f485":1366,"1f486-200d-2640":1560,"1f486-200d-2642":1559,"1f486":1558,"1f487-200d-2640":1563,"1f487-200d-2642":1562,"1f487":1561,"1f488":4870,"1f489":61326,"1f48a":61328,"1f48b":1127,"1f48c":1128,"1f48d":61153,"1f48e":61154,"1f48f":1649,"1f490":2648,"1f491":1653,"1f492":4846,"1f493":1133,"1f494":1138,"1f495":1135,"1f496":1131,"1f497":1132,"1f498":1129,"1f499":1145,"1f49a":1144,"1f49b":1143,"1f49c":1146,"1f49d":1130,"1f49e":1134,"1f49f":1136,"1f4a0":62946,"1f4a1":61214,"1f4a2":1151,"1f4a3":1157,"1f4a4":1163,"1f4a5":1152,"1f4a6":1154,"1f4a7":41022,"1f4a8":1155,"1f4a9":1107,"1f4aa":1368,"1f4ab":1153,"1f4ac":1158,"1f4ad":1162,"1f4ae":2650,"1f4af":1150,"1f4b0":61235,"1f4b1":62841,"1f4b2":62842,"1f4b3":61242,"1f4b4":61237,"1f4b5":61238,"1f4b6":61239,"1f4b7":61240,"1f4b8":61241,"1f4b9":61244,"1f4ba":4936,"1f4bb":61191,"1f4bc":61265,"1f4bd":61197,"1f4be":61198,"1f4bf":61199,"1f4c0":61200,"1f4c1":61266,"1f4c2":61267,"1f4c3":61227,"1f4c4":61229,"1f4c5":61269,"1f4c6":61270,"1f4c7":61273,"1f4c8":61274,"1f4c9":61275,"1f4ca":61276,"1f4cb":61277,"1f4cc":61278,"1f4cd":61279,"1f4ce":61280,"1f4cf":61282,"1f4d0":61283,"1f4d1":61232,"1f4d2":61226,"1f4d3":61225,"1f4d4":61218,"1f4d5":61219,"1f4d6":61220,"1f4d7":61221,"1f4d8":61222,"1f4d9":61223,"1f4da":61224,"1f4db":62847,"1f4dc":61228,"1f4dd":61264,"1f4de":61185,"1f4df":61186,"1f4e0":61187,"1f4e1":61325,"1f4e2":61159,"1f4e3":61160,"1f4e4":61249,"1f4e5":61250,"1f4e6":61251,"1f4e7":61246,"1f4e8":61247,"1f4e9":61248,"1f4ea":61253,"1f4eb":61252,"1f4ec":61254,"1f4ed":61255,"1f4ee":61256,"1f4ef":61161,"1f4f0":61230,"1f4f1":61182,"1f4f2":61183,"1f4f3":62823,"1f4f4":62824,"1f4f5":62751,"1f4f6":62822,"1f4f7":61207,"1f4f8":61208,"1f4f9":61209,"1f4fa":61206,"1f4fb":61172,"1f4fc":61210,"1f4fd":61204,"1f4ff":61151,"1f500":62801,"1f501":62802,"1f502":62803,"1f503":62769,"1f504":62770,"1f505":62820,"1f506":62821,"1f507":61155,"1f508":61156,"1f509":61157,"1f50a":61158,"1f50b":61188,"1f50c":61190,"1f50d":61211,"1f50e":61212,"1f50f":61290,"1f510":61291,"1f511":61292,"1f512":61288,"1f513":61289,"1f514":61162,"1f515":61163,"1f516":61233,"1f517":61313,"1f518":62947,"1f519":62771,"1f51a":62772,"1f51b":62773,"1f51c":62774,"1f51d":62775,"1f51e":62752,"1f51f":62876,"1f520":62877,"1f521":62878,"1f522":62879,"1f523":62880,"1f524":62881,"1f525":41021,"1f526":61215,"1f527":61306,"1f528":61294,"1f529":61308,"1f52a":3803,"1f52b":61301,"1f52c":61323,"1f52d":61324,"1f52e":51082,"1f52f":62787,"1f530":62848,"1f531":62846,"1f532":62949,"1f533":62948,"1f534":62916,"1f535":62920,"1f536":62940,"1f537":62941,"1f538":62942,"1f539":62943,"1f53a":62944,"1f53b":62945,"1f53c":62811,"1f53d":62813,"1f549":62778,"1f54a":2602,"1f54b":4854,"1f54c":4850,"1f54d":4852,"1f54e":62786,"1f550":4955,"1f551":4957,"1f552":4959,"1f553":4961,"1f554":4963,"1f555":4965,"1f556":4967,"1f557":4969,"1f558":4971,"1f559":4973,"1f55a":4975,"1f55b":4953,"1f55c":4956,"1f55d":4958,"1f55e":4960,"1f55f":4962,"1f560":4964,"1f561":4966,"1f562":4968,"1f563":4970,"1f564":4972,"1f565":4974,"1f566":4976,"1f567":4954,"1f56f":61213,"1f570":4952,"1f573":1156,"1f574":1587,"1f575-200d-2640":1497,"1f575-200d-2642":1496,"1f575":1495,"1f576":61111,"1f577":2641,"1f578":2642,"1f579":51087,"1f57a":1586,"1f587":61281,"1f58a":61261,"1f58b":61260,"1f58c":61262,"1f58d":61263,"1f590":1329,"1f595":1348,"1f596":1331,"1f5a4":1148,"1f5a5":61192,"1f5a8":61193,"1f5b1":61195,"1f5b2":61196,"1f5bc":51104,"1f5c2":61268,"1f5c3":61285,"1f5c4":61286,"1f5d1":61287,"1f5d2":61271,"1f5d3":61272,"1f5dc":61310,"1f5dd":61293,"1f5de":61231,"1f5e1":61299,"1f5e3":1683,"1f5e8":1160,"1f5ef":1161,"1f5f3":61257,"1f5fa":4810,"1f5fb":4816,"1f5fc":4847,"1f5fd":4848,"1f5fe":4811,"1f5ff":61362,"1f600":11,"1f601":14,"1f602":18,"1f603":12,"1f604":13,"1f605":16,"1f606":15,"1f607":114,"1f608":1103,"1f609":112,"1f60a":113,"1f60b":124,"1f60c":150,"1f60d":116,"1f60e":170,"1f60f":144,"1f610":139,"1f611":140,"1f612":145,"1f613":195,"1f614":151,"1f615":173,"1f616":192,"1f617":119,"1f618":118,"1f619":122,"1f61a":121,"1f61b":125,"1f61c":126,"1f61d":128,"1f61e":194,"1f61f":175,"1f620":1101,"1f621":1100,"1f622":189,"1f623":193,"1f624":199,"1f625":188,"1f626":184,"1f627":185,"1f628":186,"1f629":196,"1f62a":152,"1f62b":197,"1f62c":147,"1f62d":190,"1f62e-200d-1f4a8":148,"1f62e":178,"1f62f":179,"1f630":187,"1f631":191,"1f632":180,"1f633":181,"1f634":154,"1f635-200d-1f4ab":165,"1f635":164,"1f636-200d-1f32b":143,"1f636":141,"1f637":155,"1f638":1116,"1f639":1117,"1f63a":1115,"1f63b":1118,"1f63c":1119,"1f63d":1120,"1f63e":1123,"1f63f":1122,"1f640":1121,"1f641":176,"1f642":19,"1f643":110,"1f644":146,"1f645-200d-2640":1422,"1f645-200d-2642":1421,"1f645":1420,"1f646-200d-2640":1425,"1f646-200d-2642":1424,"1f646":1423,"1f647-200d-2640":1437,"1f647-200d-2642":1436,"1f647":1435,"1f648":1124,"1f649":1125,"1f64a":1126,"1f64b-200d-2640":1431,"1f64b-200d-2642":1430,"1f64b":1429,"1f64c":1359,"1f64d-200d-2640":1416,"1f64d-200d-2642":1415,"1f64d":1414,"1f64e-200d-2640":1419,"1f64e-200d-2642":1418,"1f64e":1417,"1f64f":1364,"1f680":4942,"1f681":4937,"1f682":4872,"1f683":4873,"1f684":4874,"1f685":4875,"1f686":4876,"1f687":4877,"1f688":4878,"1f689":4879,"1f68a":4880,"1f68b":4883,"1f68c":4884,"1f68d":4885,"1f68e":4886,"1f68f":4911,"1f690":4887,"1f691":4888,"1f692":4889,"1f693":4890,"1f694":4891,"1f695":4892,"1f696":4893,"1f697":4894,"1f698":4895,"1f699":4896,"1f69a":4898,"1f69b":4899,"1f69c":4900,"1f69d":4881,"1f69e":4882,"1f69f":4938,"1f6a0":4939,"1f6a1":4940,"1f6a2":4930,"1f6a3-200d-2640":1609,"1f6a3-200d-2642":1608,"1f6a3":1607,"1f6a4":4926,"1f6a5":4918,"1f6a6":4919,"1f6a7":4921,"1f6a8":4917,"1f6a9":71587,"1f6aa":61333,"1f6ab":62745,"1f6ac":61358,"1f6ad":62747,"1f6ae":62730,"1f6af":62748,"1f6b0":62731,"1f6b1":62749,"1f6b2":4907,"1f6b3":62746,"1f6b4-200d-2640":1621,"1f6b4-200d-2642":1620,"1f6b4":1619,"1f6b5-200d-2640":1624,"1f6b5-200d-2642":1623,"1f6b5":1622,"1f6b6-200d-2640":1566,"1f6b6-200d-2642":1565,"1f6b6":1564,"1f6b7":62750,"1f6b8":62743,"1f6b9":62733,"1f6ba":62734,"1f6bb":62735,"1f6bc":62736,"1f6bd":61340,"1f6be":62737,"1f6bf":61342,"1f6c0":1643,"1f6c1":61343,"1f6c2":62738,"1f6c3":62739,"1f6c4":62740,"1f6c5":62741,"1f6cb":61338,"1f6cc":1644,"1f6cd":61133,"1f6ce":4944,"1f6cf":61337,"1f6d0":62776,"1f6d1":4920,"1f6d2":61357,"1f6d5":4851,"1f6d6":4828,"1f6d7":61334,"1f6e0":61298,"1f6e1":61304,"1f6e2":4914,"1f6e3":4912,"1f6e4":4913,"1f6e5":4929,"1f6e9":4932,"1f6eb":4933,"1f6ec":4934,"1f6f0":4941,"1f6f3":4927,"1f6f4":4908,"1f6f5":4903,"1f6f6":4925,"1f6f7":51076,"1f6f8":4943,"1f6f9":4909,"1f6fa":4906,"1f6fb":4897,"1f6fc":4910,"1f7e0":62917,"1f7e1":62918,"1f7e2":62919,"1f7e3":62921,"1f7e4":62922,"1f7e5":62925,"1f7e6":62929,"1f7e7":62926,"1f7e8":62927,"1f7e9":62928,"1f7ea":62930,"1f7eb":62931,"1f90c":1337,"1f90d":1149,"1f90e":1147,"1f90f":1338,"1f910":137,"1f911":129,"1f912":156,"1f913":171,"1f914":135,"1f915":157,"1f916":1114,"1f917":130,"1f918":1343,"1f919":1344,"1f91a":1328,"1f91b":1356,"1f91c":1357,"1f91d":1363,"1f91e":1340,"1f91f":1342,"1f920":167,"1f921":1108,"1f922":158,"1f923":17,"1f924":153,"1f925":149,"1f926-200d-2640":1440,"1f926-200d-2642":1439,"1f926":1438,"1f927":160,"1f928":138,"1f929":117,"1f92a":127,"1f92b":134,"1f92c":1102,"1f92d":131,"1f92e":159,"1f92f":166,"1f930":1519,"1f931":1522,"1f932":1362,"1f933":1367,"1f934":1506,"1f935-200d-2640":1515,"1f935-200d-2642":1514,"1f935":1513,"1f936":1528,"1f937-200d-2640":1443,"1f937-200d-2642":1442,"1f937":1441,"1f938-200d-2640":1627,"1f938-200d-2642":1626,"1f938":1625,"1f939-200d-2640":1639,"1f939-200d-2642":1638,"1f939":1637,"1f93a":1597,"1f93c-200d-2640":1630,"1f93c-200d-2642":1629,"1f93c":1628,"1f93d-200d-2640":1633,"1f93d-200d-2642":1632,"1f93d":1631,"1f93e-200d-2640":1636,"1f93e-200d-2642":1635,"1f93e":1634,"1f93f":51073,"1f940":2654,"1f941":61180,"1f942":3791,"1f943":3792,"1f944":3802,"1f945":51069,"1f947":51048,"1f948":51049,"1f949":51050,"1f94a":51067,"1f94b":51068,"1f94c":51077,"1f94d":51064,"1f94e":51053,"1f94f":51059,"1f950":3710,"1f951":3693,"1f952":3700,"1f953":3721,"1f954":3695,"1f955":3696,"1f956":3711,"1f957":3738,"1f958":3734,"1f959":3730,"1f95a":3732,"1f95b":3780,"1f95c":3706,"1f95d":3689,"1f95e":3715,"1f95f":3757,"1f960":3758,"1f961":3759,"1f962":3799,"1f963":3737,"1f964":3794,"1f965":3692,"1f966":3702,"1f967":3773,"1f968":3713,"1f969":3720,"1f96a":3726,"1f96b":3742,"1f96c":3701,"1f96d":3681,"1f96e":3755,"1f96f":3714,"1f970":115,"1f971":198,"1f972":123,"1f973":168,"1f974":163,"1f975":161,"1f976":162,"1f977":1501,"1f978":169,"1f97a":182,"1f97b":61124,"1f97c":61113,"1f97d":61112,"1f97e":61138,"1f97f":61139,"1f980":3760,"1f981":2545,"1f982":2643,"1f983":2594,"1f984":2551,"1f985":2603,"1f986":2604,"1f987":2583,"1f988":2628,"1f989":2606,"1f98a":2540,"1f98b":2633,"1f98c":2553,"1f98d":2532,"1f98e":2615,"1f98f":2572,"1f990":3762,"1f991":3763,"1f992":2569,"1f993":2552,"1f994":2582,"1f995":2619,"1f996":2620,"1f997":2639,"1f998":2591,"1f999":2568,"1f99a":2610,"1f99b":2573,"1f99c":2611,"1f99d":2541,"1f99e":3761,"1f99f":2644,"1f9a0":2647,"1f9a1":2592,"1f9a2":2605,"1f9a3":2571,"1f9a4":2607,"1f9a5":2588,"1f9a6":2589,"1f9a7":2533,"1f9a8":2590,"1f9a9":2609,"1f9aa":3764,"1f9ab":2581,"1f9ac":2554,"1f9ad":2624,"1f9ae":2536,"1f9af":61312,"1f9b4":1380,"1f9b5":1371,"1f9b6":1372,"1f9b7":1379,"1f9b8-200d-2640":1532,"1f9b8-200d-2642":1531,"1f9b8":1530,"1f9b9-200d-2640":1535,"1f9b9-200d-2642":1534,"1f9b9":1533,"1f9ba":61114,"1f9bb":1374,"1f9bc":4905,"1f9bd":4904,"1f9be":1369,"1f9bf":1370,"1f9c0":3717,"1f9c1":3772,"1f9c2":3741,"1f9c3":3796,"1f9c4":3703,"1f9c5":3704,"1f9c6":3731,"1f9c7":3716,"1f9c8":3740,"1f9c9":3797,"1f9ca":3798,"1f9cb":3795,"1f9cd-200d-2640":1569,"1f9cd-200d-2642":1568,"1f9cd":1567,"1f9ce-200d-2640":1572,"1f9ce-200d-2642":1571,"1f9ce":1570,"1f9cf-200d-2640":1434,"1f9cf-200d-2642":1433,"1f9cf":1432,"1f9d0":172,"1f9d1-200d-1f33e":1456,"1f9d1-200d-1f373":1459,"1f9d1-200d-1f37c":1525,"1f9d1-200d-1f384":1529,"1f9d1-200d-1f393":1447,"1f9d1-200d-1f3a4":1477,"1f9d1-200d-1f3a8":1480,"1f9d1-200d-1f3eb":1450,"1f9d1-200d-1f3ed":1465,"1f9d1-200d-1f4bb":1474,"1f9d1-200d-1f4bc":1468,"1f9d1-200d-1f527":1462,"1f9d1-200d-1f52c":1471,"1f9d1-200d-1f680":1486,"1f9d1-200d-1f692":1489,"1f9d1-200d-1f91d-200d-1f9d1":1645,"1f9d1-200d-1f9af":1573,"1f9d1-200d-1f9b0":1402,"1f9d1-200d-1f9b1":1404,"1f9d1-200d-1f9b2":1408,"1f9d1-200d-1f9b3":1406,"1f9d1-200d-1f9bc":1576,"1f9d1-200d-1f9bd":1579,"1f9d1-200d-2695":1444,"1f9d1-200d-2696":1453,"1f9d1-200d-2708":1483,"1f9d1":1390,"1f9d2":1387,"1f9d3":1411,"1f9d4-200d-2640":1395,"1f9d4-200d-2642":1394,"1f9d4":1393,"1f9d5":1512,"1f9d6-200d-2640":1593,"1f9d6-200d-2642":1592,"1f9d6":1591,"1f9d7-200d-2640":1596,"1f9d7-200d-2642":1595,"1f9d7":1594,"1f9d8-200d-2640":1642,"1f9d8-200d-2642":1641,"1f9d8":1640,"1f9d9-200d-2640":1538,"1f9d9-200d-2642":1537,"1f9d9":1536,"1f9da-200d-2640":1541,"1f9da-200d-2642":1540,"1f9da":1539,"1f9db-200d-2640":1544,"1f9db-200d-2642":1543,"1f9db":1542,"1f9dc-200d-2640":1547,"1f9dc-200d-2642":1546,"1f9dc":1545,"1f9dd-200d-2640":1550,"1f9dd-200d-2642":1549,"1f9dd":1548,"1f9de-200d-2640":1553,"1f9de-200d-2642":1552,"1f9de":1551,"1f9df-200d-2640":1556,"1f9df-200d-2642":1555,"1f9df":1554,"1f9e0":1376,"1f9e1":1142,"1f9e2":61148,"1f9e3":61118,"1f9e4":61119,"1f9e5":61120,"1f9e6":61121,"1f9e7":51039,"1f9e8":51028,"1f9e9":51090,"1f9ea":61320,"1f9eb":61321,"1f9ec":61322,"1f9ed":4812,"1f9ee":61201,"1f9ef":61356,"1f9f0":61316,"1f9f1":4825,"1f9f2":61317,"1f9f3":4945,"1f9f4":61346,"1f9f5":51106,"1f9f6":51108,"1f9f7":61347,"1f9f8":51091,"1f9f9":61348,"1f9fa":61349,"1f9fb":61350,"1f9fc":61352,"1f9fd":61355,"1f9fe":61243,"1f9ff":51084,"1fa70":61142,"1fa71":61125,"1fa72":61126,"1fa73":61127,"1fa74":61135,"1fa78":61327,"1fa79":61329,"1fa7a":61331,"1fa80":51079,"1fa81":51080,"1fa82":4935,"1fa83":61302,"1fa84":51083,"1fa85":51092,"1fa86":51094,"1fa90":4993,"1fa91":61339,"1fa92":61345,"1fa93":61295,"1fa94":61217,"1fa95":61179,"1fa96":61149,"1fa97":61174,"1fa98":61181,"1fa99":61236,"1fa9a":61305,"1fa9b":61307,"1fa9c":61318,"1fa9d":61315,"1fa9e":61335,"1fa9f":61336,"1faa0":61341,"1faa1":51107,"1faa2":51109,"1faa3":61351,"1faa4":61344,"1faa5":61354,"1faa6":61360,"1faa7":61363,"1faa8":4826,"1fab0":2645,"1fab1":2646,"1fab2":2637,"1fab3":2640,"1fab4":2660,"1fab5":4827,"1fab6":2608,"1fac0":1377,"1fac1":1378,"1fac2":1686,"1fad0":3688,"1fad1":3699,"1fad2":3691,"1fad3":3712,"1fad4":3729,"1fad5":3736,"1fad6":3782,"203c":62834,"21a9":62765,"21aa":62766,"231a":4948,"231b":4946,"23cf":62818,"23e9":62805,"23ea":62809,"23eb":62812,"23ec":62814,"23ed":62806,"23ee":62810,"23ef":62807,"23f0":4949,"23f1":4950,"23f2":4951,"23f3":4947,"23f8":62815,"23f9":62816,"23fa":62817,"24c2":62890,"25aa":62938,"25ab":62939,"25b6":62804,"25c0":62808,"25fb":62935,"25fc":62934,"25fd":62937,"25fe":62936,"260e":61184,"261d":1350,"262a":62784,"262e":62785,"262f":62781,"263a":120,"264a":62790,"264b":62791,"264c":62792,"264d":62793,"264e":62794,"264f":62795,"265f":51099,"267b":62844,"267e":62833,"267f":62732,"269b":62777,"269c":62845,"26a0":62742,"26a1":41016,"26a7":62827,"26aa":62924,"26ab":62923,"26b0":61359,"26b1":61361,"26bd":51051,"26be":51052,"26c4":41019,"26c5":4999,"26c8":41e3,"26ce":62800,"26cf":61296,"26d1":61150,"26d3":61314,"26d4":62744,"26e9":4853,"26ea":4849,"26f0":4814,"26f1":41015,"26f2":4855,"26f3":51070,"26f4":4928,"26f5":4924,"26f7":1599,"26f8":51071,"26f9-200d-2640":1615,"26f9-200d-2642":1614,"26f9":1613,"26fa":4856,"26fd":4915,"270a":1354,"270b":1330,"270c":1339,"270d":1365,"270f":61258,"271d":62782,"274c":62853,"274e":62854,"2764-200d-1f525":1139,"2764-200d-1fa79":1140,"27a1":62757,"27b0":62855,"27bf":62856,"2b05":62761,"2b06":62755,"2b07":62759,"2b1b":62932,"2b1c":62933,"2b50":4994,"2b55":62849,"303d":62857,"1f385-1f3fb":0,"1f385-1f3fc":0,"1f385-1f3fd":0,"1f385-1f3fe":0,"1f385-1f3ff":0,"1f3c2-1f3fb":0,"1f3c2-1f3fc":0,"1f3c2-1f3fd":0,"1f3c2-1f3fe":0,"1f3c2-1f3ff":0,"1f3c3-1f3fb-200d-2640":0,"1f3c3-1f3fc-200d-2640":0,"1f3c3-1f3fd-200d-2640":0,"1f3c3-1f3fe-200d-2640":0,"1f3c3-1f3ff-200d-2640":0,"1f3c3-1f3fb-200d-2642":0,"1f3c3-1f3fc-200d-2642":0,"1f3c3-1f3fd-200d-2642":0,"1f3c3-1f3fe-200d-2642":0,"1f3c3-1f3ff-200d-2642":0,"1f3c3-1f3fb":0,"1f3c3-1f3fc":0,"1f3c3-1f3fd":0,"1f3c3-1f3fe":0,"1f3c3-1f3ff":0,"1f3c4-1f3fb-200d-2640":0,"1f3c4-1f3fc-200d-2640":0,"1f3c4-1f3fd-200d-2640":0,"1f3c4-1f3fe-200d-2640":0,"1f3c4-1f3ff-200d-2640":0,"1f3c4-1f3fb-200d-2642":0,"1f3c4-1f3fc-200d-2642":0,"1f3c4-1f3fd-200d-2642":0,"1f3c4-1f3fe-200d-2642":0,"1f3c4-1f3ff-200d-2642":0,"1f3c4-1f3fb":0,"1f3c4-1f3fc":0,"1f3c4-1f3fd":0,"1f3c4-1f3fe":0,"1f3c4-1f3ff":0,"1f3c7-1f3fb":0,"1f3c7-1f3fc":0,"1f3c7-1f3fd":0,"1f3c7-1f3fe":0,"1f3c7-1f3ff":0,"1f3ca-1f3fb-200d-2640":0,"1f3ca-1f3fc-200d-2640":0,"1f3ca-1f3fd-200d-2640":0,"1f3ca-1f3fe-200d-2640":0,"1f3ca-1f3ff-200d-2640":0,"1f3ca-1f3fb-200d-2642":0,"1f3ca-1f3fc-200d-2642":0,"1f3ca-1f3fd-200d-2642":0,"1f3ca-1f3fe-200d-2642":0,"1f3ca-1f3ff-200d-2642":0,"1f3ca-1f3fb":0,"1f3ca-1f3fc":0,"1f3ca-1f3fd":0,"1f3ca-1f3fe":0,"1f3ca-1f3ff":0,"1f3cb-1f3fb-200d-2640":0,"1f3cb-1f3fc-200d-2640":0,"1f3cb-1f3fd-200d-2640":0,"1f3cb-1f3fe-200d-2640":0,"1f3cb-1f3ff-200d-2640":0,"1f3cb-1f3fb-200d-2642":0,"1f3cb-1f3fc-200d-2642":0,"1f3cb-1f3fd-200d-2642":0,"1f3cb-1f3fe-200d-2642":0,"1f3cb-1f3ff-200d-2642":0,"1f3cb-1f3fb":0,"1f3cb-1f3fc":0,"1f3cb-1f3fd":0,"1f3cb-1f3fe":0,"1f3cb-1f3ff":0,"1f3cc-1f3fb-200d-2640":0,"1f3cc-1f3fc-200d-2640":0,"1f3cc-1f3fd-200d-2640":0,"1f3cc-1f3fe-200d-2640":0,"1f3cc-1f3ff-200d-2640":0,"1f3cc-1f3fb-200d-2642":0,"1f3cc-1f3fc-200d-2642":0,"1f3cc-1f3fd-200d-2642":0,"1f3cc-1f3fe-200d-2642":0,"1f3cc-1f3ff-200d-2642":0,"1f3cc-1f3fb":0,"1f3cc-1f3fc":0,"1f3cc-1f3fd":0,"1f3cc-1f3fe":0,"1f3cc-1f3ff":0,"1f442-1f3fb":0,"1f442-1f3fc":0,"1f442-1f3fd":0,"1f442-1f3fe":0,"1f442-1f3ff":0,"1f443-1f3fb":0,"1f443-1f3fc":0,"1f443-1f3fd":0,"1f443-1f3fe":0,"1f443-1f3ff":0,"1f446-1f3fb":0,"1f446-1f3fc":0,"1f446-1f3fd":0,"1f446-1f3fe":0,"1f446-1f3ff":0,"1f447-1f3fb":0,"1f447-1f3fc":0,"1f447-1f3fd":0,"1f447-1f3fe":0,"1f447-1f3ff":0,"1f448-1f3fb":0,"1f448-1f3fc":0,"1f448-1f3fd":0,"1f448-1f3fe":0,"1f448-1f3ff":0,"1f449-1f3fb":0,"1f449-1f3fc":0,"1f449-1f3fd":0,"1f449-1f3fe":0,"1f449-1f3ff":0,"1f44a-1f3fb":0,"1f44a-1f3fc":0,"1f44a-1f3fd":0,"1f44a-1f3fe":0,"1f44a-1f3ff":0,"1f44b-1f3fb":0,"1f44b-1f3fc":0,"1f44b-1f3fd":0,"1f44b-1f3fe":0,"1f44b-1f3ff":0,"1f44c-1f3fb":0,"1f44c-1f3fc":0,"1f44c-1f3fd":0,"1f44c-1f3fe":0,"1f44c-1f3ff":0,"1f44d-1f3fb":0,"1f44d-1f3fc":0,"1f44d-1f3fd":0,"1f44d-1f3fe":0,"1f44d-1f3ff":0,"1f44e-1f3fb":0,"1f44e-1f3fc":0,"1f44e-1f3fd":0,"1f44e-1f3fe":0,"1f44e-1f3ff":0,"1f44f-1f3fb":0,"1f44f-1f3fc":0,"1f44f-1f3fd":0,"1f44f-1f3fe":0,"1f44f-1f3ff":0,"1f450-1f3fb":0,"1f450-1f3fc":0,"1f450-1f3fd":0,"1f450-1f3fe":0,"1f450-1f3ff":0,"1f466-1f3fb":0,"1f466-1f3fc":0,"1f466-1f3fd":0,"1f466-1f3fe":0,"1f466-1f3ff":0,"1f467-1f3fb":0,"1f467-1f3fc":0,"1f467-1f3fd":0,"1f467-1f3fe":0,"1f467-1f3ff":0,"1f468-1f3fb-200d-1f33e":0,"1f468-1f3fc-200d-1f33e":0,"1f468-1f3fd-200d-1f33e":0,"1f468-1f3fe-200d-1f33e":0,"1f468-1f3ff-200d-1f33e":0,"1f468-1f3fb-200d-1f373":0,"1f468-1f3fc-200d-1f373":0,"1f468-1f3fd-200d-1f373":0,"1f468-1f3fe-200d-1f373":0,"1f468-1f3ff-200d-1f373":0,"1f468-1f3fb-200d-1f37c":0,"1f468-1f3fc-200d-1f37c":0,"1f468-1f3fd-200d-1f37c":0,"1f468-1f3fe-200d-1f37c":0,"1f468-1f3ff-200d-1f37c":0,"1f468-1f3fb-200d-1f393":0,"1f468-1f3fc-200d-1f393":0,"1f468-1f3fd-200d-1f393":0,"1f468-1f3fe-200d-1f393":0,"1f468-1f3ff-200d-1f393":0,"1f468-1f3fb-200d-1f3a4":0,"1f468-1f3fc-200d-1f3a4":0,"1f468-1f3fd-200d-1f3a4":0,"1f468-1f3fe-200d-1f3a4":0,"1f468-1f3ff-200d-1f3a4":0,"1f468-1f3fb-200d-1f3a8":0,"1f468-1f3fc-200d-1f3a8":0,"1f468-1f3fd-200d-1f3a8":0,"1f468-1f3fe-200d-1f3a8":0,"1f468-1f3ff-200d-1f3a8":0,"1f468-1f3fb-200d-1f3eb":0,"1f468-1f3fc-200d-1f3eb":0,"1f468-1f3fd-200d-1f3eb":0,"1f468-1f3fe-200d-1f3eb":0,"1f468-1f3ff-200d-1f3eb":0,"1f468-1f3fb-200d-1f3ed":0,"1f468-1f3fc-200d-1f3ed":0,"1f468-1f3fd-200d-1f3ed":0,"1f468-1f3fe-200d-1f3ed":0,"1f468-1f3ff-200d-1f3ed":0,"1f468-1f3fb-200d-1f4bb":0,"1f468-1f3fc-200d-1f4bb":0,"1f468-1f3fd-200d-1f4bb":0,"1f468-1f3fe-200d-1f4bb":0,"1f468-1f3ff-200d-1f4bb":0,"1f468-1f3fb-200d-1f4bc":0,"1f468-1f3fc-200d-1f4bc":0,"1f468-1f3fd-200d-1f4bc":0,"1f468-1f3fe-200d-1f4bc":0,"1f468-1f3ff-200d-1f4bc":0,"1f468-1f3fb-200d-1f527":0,"1f468-1f3fc-200d-1f527":0,"1f468-1f3fd-200d-1f527":0,"1f468-1f3fe-200d-1f527":0,"1f468-1f3ff-200d-1f527":0,"1f468-1f3fb-200d-1f52c":0,"1f468-1f3fc-200d-1f52c":0,"1f468-1f3fd-200d-1f52c":0,"1f468-1f3fe-200d-1f52c":0,"1f468-1f3ff-200d-1f52c":0,"1f468-1f3fb-200d-1f680":0,"1f468-1f3fc-200d-1f680":0,"1f468-1f3fd-200d-1f680":0,"1f468-1f3fe-200d-1f680":0,"1f468-1f3ff-200d-1f680":0,"1f468-1f3fb-200d-1f692":0,"1f468-1f3fc-200d-1f692":0,"1f468-1f3fd-200d-1f692":0,"1f468-1f3fe-200d-1f692":0,"1f468-1f3ff-200d-1f692":0,"1f468-1f3fb-200d-1f9af":0,"1f468-1f3fc-200d-1f9af":0,"1f468-1f3fd-200d-1f9af":0,"1f468-1f3fe-200d-1f9af":0,"1f468-1f3ff-200d-1f9af":0,"1f468-1f3fb-200d-1f9b0":0,"1f468-1f3fc-200d-1f9b0":0,"1f468-1f3fd-200d-1f9b0":0,"1f468-1f3fe-200d-1f9b0":0,"1f468-1f3ff-200d-1f9b0":0,"1f468-1f3fb-200d-1f9b1":0,"1f468-1f3fc-200d-1f9b1":0,"1f468-1f3fd-200d-1f9b1":0,"1f468-1f3fe-200d-1f9b1":0,"1f468-1f3ff-200d-1f9b1":0,"1f468-1f3fb-200d-1f9b2":0,"1f468-1f3fc-200d-1f9b2":0,"1f468-1f3fd-200d-1f9b2":0,"1f468-1f3fe-200d-1f9b2":0,"1f468-1f3ff-200d-1f9b2":0,"1f468-1f3fb-200d-1f9b3":0,"1f468-1f3fc-200d-1f9b3":0,"1f468-1f3fd-200d-1f9b3":0,"1f468-1f3fe-200d-1f9b3":0,"1f468-1f3ff-200d-1f9b3":0,"1f468-1f3fb-200d-1f9bc":0,"1f468-1f3fc-200d-1f9bc":0,"1f468-1f3fd-200d-1f9bc":0,"1f468-1f3fe-200d-1f9bc":0,"1f468-1f3ff-200d-1f9bc":0,"1f468-1f3fb-200d-1f9bd":0,"1f468-1f3fc-200d-1f9bd":0,"1f468-1f3fd-200d-1f9bd":0,"1f468-1f3fe-200d-1f9bd":0,"1f468-1f3ff-200d-1f9bd":0,"1f468-1f3fb-200d-2695":0,"1f468-1f3fc-200d-2695":0,"1f468-1f3fd-200d-2695":0,"1f468-1f3fe-200d-2695":0,"1f468-1f3ff-200d-2695":0,"1f468-1f3fb-200d-2696":0,"1f468-1f3fc-200d-2696":0,"1f468-1f3fd-200d-2696":0,"1f468-1f3fe-200d-2696":0,"1f468-1f3ff-200d-2696":0,"1f468-1f3fb-200d-2708":0,"1f468-1f3fc-200d-2708":0,"1f468-1f3fd-200d-2708":0,"1f468-1f3fe-200d-2708":0,"1f468-1f3ff-200d-2708":0,"1f468-1f3fb-200d-2764-200d-1f468-1f3fb":0,"1f468-1f3fb-200d-2764-200d-1f468-1f3fc":0,"1f468-1f3fb-200d-2764-200d-1f468-1f3fd":0,"1f468-1f3fb-200d-2764-200d-1f468-1f3fe":0,"1f468-1f3fb-200d-2764-200d-1f468-1f3ff":0,"1f468-1f3fc-200d-2764-200d-1f468-1f3fb":0,"1f468-1f3fc-200d-2764-200d-1f468-1f3fc":0,"1f468-1f3fc-200d-2764-200d-1f468-1f3fd":0,"1f468-1f3fc-200d-2764-200d-1f468-1f3fe":0,"1f468-1f3fc-200d-2764-200d-1f468-1f3ff":0,"1f468-1f3fd-200d-2764-200d-1f468-1f3fb":0,"1f468-1f3fd-200d-2764-200d-1f468-1f3fc":0,"1f468-1f3fd-200d-2764-200d-1f468-1f3fd":0,"1f468-1f3fd-200d-2764-200d-1f468-1f3fe":0,"1f468-1f3fd-200d-2764-200d-1f468-1f3ff":0,"1f468-1f3fe-200d-2764-200d-1f468-1f3fb":0,"1f468-1f3fe-200d-2764-200d-1f468-1f3fc":0,"1f468-1f3fe-200d-2764-200d-1f468-1f3fd":0,"1f468-1f3fe-200d-2764-200d-1f468-1f3fe":0,"1f468-1f3fe-200d-2764-200d-1f468-1f3ff":0,"1f468-1f3ff-200d-2764-200d-1f468-1f3fb":0,"1f468-1f3ff-200d-2764-200d-1f468-1f3fc":0,"1f468-1f3ff-200d-2764-200d-1f468-1f3fd":0,"1f468-1f3ff-200d-2764-200d-1f468-1f3fe":0,"1f468-1f3ff-200d-2764-200d-1f468-1f3ff":0,"1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f468-1f3fb":0,"1f468-1f3fc":0,"1f468-1f3fd":0,"1f468-1f3fe":0,"1f468-1f3ff":0,"1f469-1f3fb-200d-1f33e":0,"1f469-1f3fc-200d-1f33e":0,"1f469-1f3fd-200d-1f33e":0,"1f469-1f3fe-200d-1f33e":0,"1f469-1f3ff-200d-1f33e":0,"1f469-1f3fb-200d-1f373":0,"1f469-1f3fc-200d-1f373":0,"1f469-1f3fd-200d-1f373":0,"1f469-1f3fe-200d-1f373":0,"1f469-1f3ff-200d-1f373":0,"1f469-1f3fb-200d-1f37c":0,"1f469-1f3fc-200d-1f37c":0,"1f469-1f3fd-200d-1f37c":0,"1f469-1f3fe-200d-1f37c":0,"1f469-1f3ff-200d-1f37c":0,"1f469-1f3fb-200d-1f393":0,"1f469-1f3fc-200d-1f393":0,"1f469-1f3fd-200d-1f393":0,"1f469-1f3fe-200d-1f393":0,"1f469-1f3ff-200d-1f393":0,"1f469-1f3fb-200d-1f3a4":0,"1f469-1f3fc-200d-1f3a4":0,"1f469-1f3fd-200d-1f3a4":0,"1f469-1f3fe-200d-1f3a4":0,"1f469-1f3ff-200d-1f3a4":0,"1f469-1f3fb-200d-1f3a8":0,"1f469-1f3fc-200d-1f3a8":0,"1f469-1f3fd-200d-1f3a8":0,"1f469-1f3fe-200d-1f3a8":0,"1f469-1f3ff-200d-1f3a8":0,"1f469-1f3fb-200d-1f3eb":0,"1f469-1f3fc-200d-1f3eb":0,"1f469-1f3fd-200d-1f3eb":0,"1f469-1f3fe-200d-1f3eb":0,"1f469-1f3ff-200d-1f3eb":0,"1f469-1f3fb-200d-1f3ed":0,"1f469-1f3fc-200d-1f3ed":0,"1f469-1f3fd-200d-1f3ed":0,"1f469-1f3fe-200d-1f3ed":0,"1f469-1f3ff-200d-1f3ed":0,"1f469-1f3fb-200d-1f4bb":0,"1f469-1f3fc-200d-1f4bb":0,"1f469-1f3fd-200d-1f4bb":0,"1f469-1f3fe-200d-1f4bb":0,"1f469-1f3ff-200d-1f4bb":0,"1f469-1f3fb-200d-1f4bc":0,"1f469-1f3fc-200d-1f4bc":0,"1f469-1f3fd-200d-1f4bc":0,"1f469-1f3fe-200d-1f4bc":0,"1f469-1f3ff-200d-1f4bc":0,"1f469-1f3fb-200d-1f527":0,"1f469-1f3fc-200d-1f527":0,"1f469-1f3fd-200d-1f527":0,"1f469-1f3fe-200d-1f527":0,"1f469-1f3ff-200d-1f527":0,"1f469-1f3fb-200d-1f52c":0,"1f469-1f3fc-200d-1f52c":0,"1f469-1f3fd-200d-1f52c":0,"1f469-1f3fe-200d-1f52c":0,"1f469-1f3ff-200d-1f52c":0,"1f469-1f3fb-200d-1f680":0,"1f469-1f3fc-200d-1f680":0,"1f469-1f3fd-200d-1f680":0,"1f469-1f3fe-200d-1f680":0,"1f469-1f3ff-200d-1f680":0,"1f469-1f3fb-200d-1f692":0,"1f469-1f3fc-200d-1f692":0,"1f469-1f3fd-200d-1f692":0,"1f469-1f3fe-200d-1f692":0,"1f469-1f3ff-200d-1f692":0,"1f469-1f3fb-200d-1f9af":0,"1f469-1f3fc-200d-1f9af":0,"1f469-1f3fd-200d-1f9af":0,"1f469-1f3fe-200d-1f9af":0,"1f469-1f3ff-200d-1f9af":0,"1f469-1f3fb-200d-1f9b0":0,"1f469-1f3fc-200d-1f9b0":0,"1f469-1f3fd-200d-1f9b0":0,"1f469-1f3fe-200d-1f9b0":0,"1f469-1f3ff-200d-1f9b0":0,"1f469-1f3fb-200d-1f9b1":0,"1f469-1f3fc-200d-1f9b1":0,"1f469-1f3fd-200d-1f9b1":0,"1f469-1f3fe-200d-1f9b1":0,"1f469-1f3ff-200d-1f9b1":0,"1f469-1f3fb-200d-1f9b2":0,"1f469-1f3fc-200d-1f9b2":0,"1f469-1f3fd-200d-1f9b2":0,"1f469-1f3fe-200d-1f9b2":0,"1f469-1f3ff-200d-1f9b2":0,"1f469-1f3fb-200d-1f9b3":0,"1f469-1f3fc-200d-1f9b3":0,"1f469-1f3fd-200d-1f9b3":0,"1f469-1f3fe-200d-1f9b3":0,"1f469-1f3ff-200d-1f9b3":0,"1f469-1f3fb-200d-1f9bc":0,"1f469-1f3fc-200d-1f9bc":0,"1f469-1f3fd-200d-1f9bc":0,"1f469-1f3fe-200d-1f9bc":0,"1f469-1f3ff-200d-1f9bc":0,"1f469-1f3fb-200d-1f9bd":0,"1f469-1f3fc-200d-1f9bd":0,"1f469-1f3fd-200d-1f9bd":0,"1f469-1f3fe-200d-1f9bd":0,"1f469-1f3ff-200d-1f9bd":0,"1f469-1f3fb-200d-2695":0,"1f469-1f3fc-200d-2695":0,"1f469-1f3fd-200d-2695":0,"1f469-1f3fe-200d-2695":0,"1f469-1f3ff-200d-2695":0,"1f469-1f3fb-200d-2696":0,"1f469-1f3fc-200d-2696":0,"1f469-1f3fd-200d-2696":0,"1f469-1f3fe-200d-2696":0,"1f469-1f3ff-200d-2696":0,"1f469-1f3fb-200d-2708":0,"1f469-1f3fc-200d-2708":0,"1f469-1f3fd-200d-2708":0,"1f469-1f3fe-200d-2708":0,"1f469-1f3ff-200d-2708":0,"1f469-1f3fb-200d-2764-200d-1f468-1f3fb":0,"1f469-1f3fb-200d-2764-200d-1f468-1f3fc":0,"1f469-1f3fb-200d-2764-200d-1f468-1f3fd":0,"1f469-1f3fb-200d-2764-200d-1f468-1f3fe":0,"1f469-1f3fb-200d-2764-200d-1f468-1f3ff":0,"1f469-1f3fc-200d-2764-200d-1f468-1f3fb":0,"1f469-1f3fc-200d-2764-200d-1f468-1f3fc":0,"1f469-1f3fc-200d-2764-200d-1f468-1f3fd":0,"1f469-1f3fc-200d-2764-200d-1f468-1f3fe":0,"1f469-1f3fc-200d-2764-200d-1f468-1f3ff":0,"1f469-1f3fd-200d-2764-200d-1f468-1f3fb":0,"1f469-1f3fd-200d-2764-200d-1f468-1f3fc":0,"1f469-1f3fd-200d-2764-200d-1f468-1f3fd":0,"1f469-1f3fd-200d-2764-200d-1f468-1f3fe":0,"1f469-1f3fd-200d-2764-200d-1f468-1f3ff":0,"1f469-1f3fe-200d-2764-200d-1f468-1f3fb":0,"1f469-1f3fe-200d-2764-200d-1f468-1f3fc":0,"1f469-1f3fe-200d-2764-200d-1f468-1f3fd":0,"1f469-1f3fe-200d-2764-200d-1f468-1f3fe":0,"1f469-1f3fe-200d-2764-200d-1f468-1f3ff":0,"1f469-1f3ff-200d-2764-200d-1f468-1f3fb":0,"1f469-1f3ff-200d-2764-200d-1f468-1f3fc":0,"1f469-1f3ff-200d-2764-200d-1f468-1f3fd":0,"1f469-1f3ff-200d-2764-200d-1f468-1f3fe":0,"1f469-1f3ff-200d-2764-200d-1f468-1f3ff":0,"1f469-1f3fb-200d-2764-200d-1f469-1f3fb":0,"1f469-1f3fb-200d-2764-200d-1f469-1f3fc":0,"1f469-1f3fb-200d-2764-200d-1f469-1f3fd":0,"1f469-1f3fb-200d-2764-200d-1f469-1f3fe":0,"1f469-1f3fb-200d-2764-200d-1f469-1f3ff":0,"1f469-1f3fc-200d-2764-200d-1f469-1f3fb":0,"1f469-1f3fc-200d-2764-200d-1f469-1f3fc":0,"1f469-1f3fc-200d-2764-200d-1f469-1f3fd":0,"1f469-1f3fc-200d-2764-200d-1f469-1f3fe":0,"1f469-1f3fc-200d-2764-200d-1f469-1f3ff":0,"1f469-1f3fd-200d-2764-200d-1f469-1f3fb":0,"1f469-1f3fd-200d-2764-200d-1f469-1f3fc":0,"1f469-1f3fd-200d-2764-200d-1f469-1f3fd":0,"1f469-1f3fd-200d-2764-200d-1f469-1f3fe":0,"1f469-1f3fd-200d-2764-200d-1f469-1f3ff":0,"1f469-1f3fe-200d-2764-200d-1f469-1f3fb":0,"1f469-1f3fe-200d-2764-200d-1f469-1f3fc":0,"1f469-1f3fe-200d-2764-200d-1f469-1f3fd":0,"1f469-1f3fe-200d-2764-200d-1f469-1f3fe":0,"1f469-1f3fe-200d-2764-200d-1f469-1f3ff":0,"1f469-1f3ff-200d-2764-200d-1f469-1f3fb":0,"1f469-1f3ff-200d-2764-200d-1f469-1f3fc":0,"1f469-1f3ff-200d-2764-200d-1f469-1f3fd":0,"1f469-1f3ff-200d-2764-200d-1f469-1f3fe":0,"1f469-1f3ff-200d-2764-200d-1f469-1f3ff":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fb":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fc":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fd":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fe":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3ff":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fb":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fc":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fd":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fe":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3ff":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fb":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fc":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fd":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fe":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3ff":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fb":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fc":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fd":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fe":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3ff":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fb":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fc":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fd":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fe":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3ff":0,"1f469-1f3fb":0,"1f469-1f3fc":0,"1f469-1f3fd":0,"1f469-1f3fe":0,"1f469-1f3ff":0,"1f46b-1f3fb":0,"1f46b-1f3fc":0,"1f46b-1f3fd":0,"1f46b-1f3fe":0,"1f46b-1f3ff":0,"1f469-1f3fb-200d-1f91d-200d-1f468-1f3fc":0,"1f469-1f3fb-200d-1f91d-200d-1f468-1f3fd":0,"1f469-1f3fb-200d-1f91d-200d-1f468-1f3fe":0,"1f469-1f3fb-200d-1f91d-200d-1f468-1f3ff":0,"1f469-1f3fc-200d-1f91d-200d-1f468-1f3fb":0,"1f469-1f3fc-200d-1f91d-200d-1f468-1f3fd":0,"1f469-1f3fc-200d-1f91d-200d-1f468-1f3fe":0,"1f469-1f3fc-200d-1f91d-200d-1f468-1f3ff":0,"1f469-1f3fd-200d-1f91d-200d-1f468-1f3fb":0,"1f469-1f3fd-200d-1f91d-200d-1f468-1f3fc":0,"1f469-1f3fd-200d-1f91d-200d-1f468-1f3fe":0,"1f469-1f3fd-200d-1f91d-200d-1f468-1f3ff":0,"1f469-1f3fe-200d-1f91d-200d-1f468-1f3fb":0,"1f469-1f3fe-200d-1f91d-200d-1f468-1f3fc":0,"1f469-1f3fe-200d-1f91d-200d-1f468-1f3fd":0,"1f469-1f3fe-200d-1f91d-200d-1f468-1f3ff":0,"1f469-1f3ff-200d-1f91d-200d-1f468-1f3fb":0,"1f469-1f3ff-200d-1f91d-200d-1f468-1f3fc":0,"1f469-1f3ff-200d-1f91d-200d-1f468-1f3fd":0,"1f469-1f3ff-200d-1f91d-200d-1f468-1f3fe":0,"1f46c-1f3fb":0,"1f46c-1f3fc":0,"1f46c-1f3fd":0,"1f46c-1f3fe":0,"1f46c-1f3ff":0,"1f468-1f3fb-200d-1f91d-200d-1f468-1f3fc":0,"1f468-1f3fb-200d-1f91d-200d-1f468-1f3fd":0,"1f468-1f3fb-200d-1f91d-200d-1f468-1f3fe":0,"1f468-1f3fb-200d-1f91d-200d-1f468-1f3ff":0,"1f468-1f3fc-200d-1f91d-200d-1f468-1f3fb":0,"1f468-1f3fc-200d-1f91d-200d-1f468-1f3fd":0,"1f468-1f3fc-200d-1f91d-200d-1f468-1f3fe":0,"1f468-1f3fc-200d-1f91d-200d-1f468-1f3ff":0,"1f468-1f3fd-200d-1f91d-200d-1f468-1f3fb":0,"1f468-1f3fd-200d-1f91d-200d-1f468-1f3fc":0,"1f468-1f3fd-200d-1f91d-200d-1f468-1f3fe":0,"1f468-1f3fd-200d-1f91d-200d-1f468-1f3ff":0,"1f468-1f3fe-200d-1f91d-200d-1f468-1f3fb":0,"1f468-1f3fe-200d-1f91d-200d-1f468-1f3fc":0,"1f468-1f3fe-200d-1f91d-200d-1f468-1f3fd":0,"1f468-1f3fe-200d-1f91d-200d-1f468-1f3ff":0,"1f468-1f3ff-200d-1f91d-200d-1f468-1f3fb":0,"1f468-1f3ff-200d-1f91d-200d-1f468-1f3fc":0,"1f468-1f3ff-200d-1f91d-200d-1f468-1f3fd":0,"1f468-1f3ff-200d-1f91d-200d-1f468-1f3fe":0,"1f46d-1f3fb":0,"1f46d-1f3fc":0,"1f46d-1f3fd":0,"1f46d-1f3fe":0,"1f46d-1f3ff":0,"1f469-1f3fb-200d-1f91d-200d-1f469-1f3fc":0,"1f469-1f3fb-200d-1f91d-200d-1f469-1f3fd":0,"1f469-1f3fb-200d-1f91d-200d-1f469-1f3fe":0,"1f469-1f3fb-200d-1f91d-200d-1f469-1f3ff":0,"1f469-1f3fc-200d-1f91d-200d-1f469-1f3fb":0,"1f469-1f3fc-200d-1f91d-200d-1f469-1f3fd":0,"1f469-1f3fc-200d-1f91d-200d-1f469-1f3fe":0,"1f469-1f3fc-200d-1f91d-200d-1f469-1f3ff":0,"1f469-1f3fd-200d-1f91d-200d-1f469-1f3fb":0,"1f469-1f3fd-200d-1f91d-200d-1f469-1f3fc":0,"1f469-1f3fd-200d-1f91d-200d-1f469-1f3fe":0,"1f469-1f3fd-200d-1f91d-200d-1f469-1f3ff":0,"1f469-1f3fe-200d-1f91d-200d-1f469-1f3fb":0,"1f469-1f3fe-200d-1f91d-200d-1f469-1f3fc":0,"1f469-1f3fe-200d-1f91d-200d-1f469-1f3fd":0,"1f469-1f3fe-200d-1f91d-200d-1f469-1f3ff":0,"1f469-1f3ff-200d-1f91d-200d-1f469-1f3fb":0,"1f469-1f3ff-200d-1f91d-200d-1f469-1f3fc":0,"1f469-1f3ff-200d-1f91d-200d-1f469-1f3fd":0,"1f469-1f3ff-200d-1f91d-200d-1f469-1f3fe":0,"1f46e-1f3fb-200d-2640":0,"1f46e-1f3fc-200d-2640":0,"1f46e-1f3fd-200d-2640":0,"1f46e-1f3fe-200d-2640":0,"1f46e-1f3ff-200d-2640":0,"1f46e-1f3fb-200d-2642":0,"1f46e-1f3fc-200d-2642":0,"1f46e-1f3fd-200d-2642":0,"1f46e-1f3fe-200d-2642":0,"1f46e-1f3ff-200d-2642":0,"1f46e-1f3fb":0,"1f46e-1f3fc":0,"1f46e-1f3fd":0,"1f46e-1f3fe":0,"1f46e-1f3ff":0,"1f470-1f3fb-200d-2640":0,"1f470-1f3fc-200d-2640":0,"1f470-1f3fd-200d-2640":0,"1f470-1f3fe-200d-2640":0,"1f470-1f3ff-200d-2640":0,"1f470-1f3fb-200d-2642":0,"1f470-1f3fc-200d-2642":0,"1f470-1f3fd-200d-2642":0,"1f470-1f3fe-200d-2642":0,"1f470-1f3ff-200d-2642":0,"1f470-1f3fb":0,"1f470-1f3fc":0,"1f470-1f3fd":0,"1f470-1f3fe":0,"1f470-1f3ff":0,"1f471-1f3fb-200d-2640":0,"1f471-1f3fc-200d-2640":0,"1f471-1f3fd-200d-2640":0,"1f471-1f3fe-200d-2640":0,"1f471-1f3ff-200d-2640":0,"1f471-1f3fb-200d-2642":0,"1f471-1f3fc-200d-2642":0,"1f471-1f3fd-200d-2642":0,"1f471-1f3fe-200d-2642":0,"1f471-1f3ff-200d-2642":0,"1f471-1f3fb":0,"1f471-1f3fc":0,"1f471-1f3fd":0,"1f471-1f3fe":0,"1f471-1f3ff":0,"1f472-1f3fb":0,"1f472-1f3fc":0,"1f472-1f3fd":0,"1f472-1f3fe":0,"1f472-1f3ff":0,"1f473-1f3fb-200d-2640":0,"1f473-1f3fc-200d-2640":0,"1f473-1f3fd-200d-2640":0,"1f473-1f3fe-200d-2640":0,"1f473-1f3ff-200d-2640":0,"1f473-1f3fb-200d-2642":0,"1f473-1f3fc-200d-2642":0,"1f473-1f3fd-200d-2642":0,"1f473-1f3fe-200d-2642":0,"1f473-1f3ff-200d-2642":0,"1f473-1f3fb":0,"1f473-1f3fc":0,"1f473-1f3fd":0,"1f473-1f3fe":0,"1f473-1f3ff":0,"1f474-1f3fb":0,"1f474-1f3fc":0,"1f474-1f3fd":0,"1f474-1f3fe":0,"1f474-1f3ff":0,"1f475-1f3fb":0,"1f475-1f3fc":0,"1f475-1f3fd":0,"1f475-1f3fe":0,"1f475-1f3ff":0,"1f476-1f3fb":0,"1f476-1f3fc":0,"1f476-1f3fd":0,"1f476-1f3fe":0,"1f476-1f3ff":0,"1f477-1f3fb-200d-2640":0,"1f477-1f3fc-200d-2640":0,"1f477-1f3fd-200d-2640":0,"1f477-1f3fe-200d-2640":0,"1f477-1f3ff-200d-2640":0,"1f477-1f3fb-200d-2642":0,"1f477-1f3fc-200d-2642":0,"1f477-1f3fd-200d-2642":0,"1f477-1f3fe-200d-2642":0,"1f477-1f3ff-200d-2642":0,"1f477-1f3fb":0,"1f477-1f3fc":0,"1f477-1f3fd":0,"1f477-1f3fe":0,"1f477-1f3ff":0,"1f478-1f3fb":0,"1f478-1f3fc":0,"1f478-1f3fd":0,"1f478-1f3fe":0,"1f478-1f3ff":0,"1f47c-1f3fb":0,"1f47c-1f3fc":0,"1f47c-1f3fd":0,"1f47c-1f3fe":0,"1f47c-1f3ff":0,"1f481-1f3fb-200d-2640":0,"1f481-1f3fc-200d-2640":0,"1f481-1f3fd-200d-2640":0,"1f481-1f3fe-200d-2640":0,"1f481-1f3ff-200d-2640":0,"1f481-1f3fb-200d-2642":0,"1f481-1f3fc-200d-2642":0,"1f481-1f3fd-200d-2642":0,"1f481-1f3fe-200d-2642":0,"1f481-1f3ff-200d-2642":0,"1f481-1f3fb":0,"1f481-1f3fc":0,"1f481-1f3fd":0,"1f481-1f3fe":0,"1f481-1f3ff":0,"1f482-1f3fb-200d-2640":0,"1f482-1f3fc-200d-2640":0,"1f482-1f3fd-200d-2640":0,"1f482-1f3fe-200d-2640":0,"1f482-1f3ff-200d-2640":0,"1f482-1f3fb-200d-2642":0,"1f482-1f3fc-200d-2642":0,"1f482-1f3fd-200d-2642":0,"1f482-1f3fe-200d-2642":0,"1f482-1f3ff-200d-2642":0,"1f482-1f3fb":0,"1f482-1f3fc":0,"1f482-1f3fd":0,"1f482-1f3fe":0,"1f482-1f3ff":0,"1f483-1f3fb":0,"1f483-1f3fc":0,"1f483-1f3fd":0,"1f483-1f3fe":0,"1f483-1f3ff":0,"1f485-1f3fb":0,"1f485-1f3fc":0,"1f485-1f3fd":0,"1f485-1f3fe":0,"1f485-1f3ff":0,"1f486-1f3fb-200d-2640":0,"1f486-1f3fc-200d-2640":0,"1f486-1f3fd-200d-2640":0,"1f486-1f3fe-200d-2640":0,"1f486-1f3ff-200d-2640":0,"1f486-1f3fb-200d-2642":0,"1f486-1f3fc-200d-2642":0,"1f486-1f3fd-200d-2642":0,"1f486-1f3fe-200d-2642":0,"1f486-1f3ff-200d-2642":0,"1f486-1f3fb":0,"1f486-1f3fc":0,"1f486-1f3fd":0,"1f486-1f3fe":0,"1f486-1f3ff":0,"1f487-1f3fb-200d-2640":0,"1f487-1f3fc-200d-2640":0,"1f487-1f3fd-200d-2640":0,"1f487-1f3fe-200d-2640":0,"1f487-1f3ff-200d-2640":0,"1f487-1f3fb-200d-2642":0,"1f487-1f3fc-200d-2642":0,"1f487-1f3fd-200d-2642":0,"1f487-1f3fe-200d-2642":0,"1f487-1f3ff-200d-2642":0,"1f487-1f3fb":0,"1f487-1f3fc":0,"1f487-1f3fd":0,"1f487-1f3fe":0,"1f487-1f3ff":0,"1f48f-1f3fb":0,"1f48f-1f3fc":0,"1f48f-1f3fd":0,"1f48f-1f3fe":0,"1f48f-1f3ff":0,"1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3fc":0,"1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3fd":0,"1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3fe":0,"1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3ff":0,"1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3fb":0,"1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3fd":0,"1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3fe":0,"1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3ff":0,"1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3fb":0,"1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3fc":0,"1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3fe":0,"1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3ff":0,"1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3fb":0,"1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3fc":0,"1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3fd":0,"1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3ff":0,"1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fb":0,"1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fc":0,"1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fd":0,"1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fe":0,"1f491-1f3fb":0,"1f491-1f3fc":0,"1f491-1f3fd":0,"1f491-1f3fe":0,"1f491-1f3ff":0,"1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3fc":0,"1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3fd":0,"1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3fe":0,"1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3ff":0,"1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3fb":0,"1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3fd":0,"1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3fe":0,"1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3ff":0,"1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3fb":0,"1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3fc":0,"1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3fe":0,"1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3ff":0,"1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3fb":0,"1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3fc":0,"1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3fd":0,"1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3ff":0,"1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fb":0,"1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fc":0,"1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fd":0,"1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fe":0,"1f4aa-1f3fb":0,"1f4aa-1f3fc":0,"1f4aa-1f3fd":0,"1f4aa-1f3fe":0,"1f4aa-1f3ff":0,"1f574-1f3fb":0,"1f574-1f3fc":0,"1f574-1f3fd":0,"1f574-1f3fe":0,"1f574-1f3ff":0,"1f575-1f3fb-200d-2640":0,"1f575-1f3fc-200d-2640":0,"1f575-1f3fd-200d-2640":0,"1f575-1f3fe-200d-2640":0,"1f575-1f3ff-200d-2640":0,"1f575-1f3fb-200d-2642":0,"1f575-1f3fc-200d-2642":0,"1f575-1f3fd-200d-2642":0,"1f575-1f3fe-200d-2642":0,"1f575-1f3ff-200d-2642":0,"1f575-1f3fb":0,"1f575-1f3fc":0,"1f575-1f3fd":0,"1f575-1f3fe":0,"1f575-1f3ff":0,"1f57a-1f3fb":0,"1f57a-1f3fc":0,"1f57a-1f3fd":0,"1f57a-1f3fe":0,"1f57a-1f3ff":0,"1f590-1f3fb":0,"1f590-1f3fc":0,"1f590-1f3fd":0,"1f590-1f3fe":0,"1f590-1f3ff":0,"1f595-1f3fb":0,"1f595-1f3fc":0,"1f595-1f3fd":0,"1f595-1f3fe":0,"1f595-1f3ff":0,"1f596-1f3fb":0,"1f596-1f3fc":0,"1f596-1f3fd":0,"1f596-1f3fe":0,"1f596-1f3ff":0,"1f645-1f3fb-200d-2640":0,"1f645-1f3fc-200d-2640":0,"1f645-1f3fd-200d-2640":0,"1f645-1f3fe-200d-2640":0,"1f645-1f3ff-200d-2640":0,"1f645-1f3fb-200d-2642":0,"1f645-1f3fc-200d-2642":0,"1f645-1f3fd-200d-2642":0,"1f645-1f3fe-200d-2642":0,"1f645-1f3ff-200d-2642":0,"1f645-1f3fb":0,"1f645-1f3fc":0,"1f645-1f3fd":0,"1f645-1f3fe":0,"1f645-1f3ff":0,"1f646-1f3fb-200d-2640":0,"1f646-1f3fc-200d-2640":0,"1f646-1f3fd-200d-2640":0,"1f646-1f3fe-200d-2640":0,"1f646-1f3ff-200d-2640":0,"1f646-1f3fb-200d-2642":0,"1f646-1f3fc-200d-2642":0,"1f646-1f3fd-200d-2642":0,"1f646-1f3fe-200d-2642":0,"1f646-1f3ff-200d-2642":0,"1f646-1f3fb":0,"1f646-1f3fc":0,"1f646-1f3fd":0,"1f646-1f3fe":0,"1f646-1f3ff":0,"1f647-1f3fb-200d-2640":0,"1f647-1f3fc-200d-2640":0,"1f647-1f3fd-200d-2640":0,"1f647-1f3fe-200d-2640":0,"1f647-1f3ff-200d-2640":0,"1f647-1f3fb-200d-2642":0,"1f647-1f3fc-200d-2642":0,"1f647-1f3fd-200d-2642":0,"1f647-1f3fe-200d-2642":0,"1f647-1f3ff-200d-2642":0,"1f647-1f3fb":0,"1f647-1f3fc":0,"1f647-1f3fd":0,"1f647-1f3fe":0,"1f647-1f3ff":0,"1f64b-1f3fb-200d-2640":0,"1f64b-1f3fc-200d-2640":0,"1f64b-1f3fd-200d-2640":0,"1f64b-1f3fe-200d-2640":0,"1f64b-1f3ff-200d-2640":0,"1f64b-1f3fb-200d-2642":0,"1f64b-1f3fc-200d-2642":0,"1f64b-1f3fd-200d-2642":0,"1f64b-1f3fe-200d-2642":0,"1f64b-1f3ff-200d-2642":0,"1f64b-1f3fb":0,"1f64b-1f3fc":0,"1f64b-1f3fd":0,"1f64b-1f3fe":0,"1f64b-1f3ff":0,"1f64c-1f3fb":0,"1f64c-1f3fc":0,"1f64c-1f3fd":0,"1f64c-1f3fe":0,"1f64c-1f3ff":0,"1f64d-1f3fb-200d-2640":0,"1f64d-1f3fc-200d-2640":0,"1f64d-1f3fd-200d-2640":0,"1f64d-1f3fe-200d-2640":0,"1f64d-1f3ff-200d-2640":0,"1f64d-1f3fb-200d-2642":0,"1f64d-1f3fc-200d-2642":0,"1f64d-1f3fd-200d-2642":0,"1f64d-1f3fe-200d-2642":0,"1f64d-1f3ff-200d-2642":0,"1f64d-1f3fb":0,"1f64d-1f3fc":0,"1f64d-1f3fd":0,"1f64d-1f3fe":0,"1f64d-1f3ff":0,"1f64e-1f3fb-200d-2640":0,"1f64e-1f3fc-200d-2640":0,"1f64e-1f3fd-200d-2640":0,"1f64e-1f3fe-200d-2640":0,"1f64e-1f3ff-200d-2640":0,"1f64e-1f3fb-200d-2642":0,"1f64e-1f3fc-200d-2642":0,"1f64e-1f3fd-200d-2642":0,"1f64e-1f3fe-200d-2642":0,"1f64e-1f3ff-200d-2642":0,"1f64e-1f3fb":0,"1f64e-1f3fc":0,"1f64e-1f3fd":0,"1f64e-1f3fe":0,"1f64e-1f3ff":0,"1f64f-1f3fb":0,"1f64f-1f3fc":0,"1f64f-1f3fd":0,"1f64f-1f3fe":0,"1f64f-1f3ff":0,"1f6a3-1f3fb-200d-2640":0,"1f6a3-1f3fc-200d-2640":0,"1f6a3-1f3fd-200d-2640":0,"1f6a3-1f3fe-200d-2640":0,"1f6a3-1f3ff-200d-2640":0,"1f6a3-1f3fb-200d-2642":0,"1f6a3-1f3fc-200d-2642":0,"1f6a3-1f3fd-200d-2642":0,"1f6a3-1f3fe-200d-2642":0,"1f6a3-1f3ff-200d-2642":0,"1f6a3-1f3fb":0,"1f6a3-1f3fc":0,"1f6a3-1f3fd":0,"1f6a3-1f3fe":0,"1f6a3-1f3ff":0,"1f6b4-1f3fb-200d-2640":0,"1f6b4-1f3fc-200d-2640":0,"1f6b4-1f3fd-200d-2640":0,"1f6b4-1f3fe-200d-2640":0,"1f6b4-1f3ff-200d-2640":0,"1f6b4-1f3fb-200d-2642":0,"1f6b4-1f3fc-200d-2642":0,"1f6b4-1f3fd-200d-2642":0,"1f6b4-1f3fe-200d-2642":0,"1f6b4-1f3ff-200d-2642":0,"1f6b4-1f3fb":0,"1f6b4-1f3fc":0,"1f6b4-1f3fd":0,"1f6b4-1f3fe":0,"1f6b4-1f3ff":0,"1f6b5-1f3fb-200d-2640":0,"1f6b5-1f3fc-200d-2640":0,"1f6b5-1f3fd-200d-2640":0,"1f6b5-1f3fe-200d-2640":0,"1f6b5-1f3ff-200d-2640":0,"1f6b5-1f3fb-200d-2642":0,"1f6b5-1f3fc-200d-2642":0,"1f6b5-1f3fd-200d-2642":0,"1f6b5-1f3fe-200d-2642":0,"1f6b5-1f3ff-200d-2642":0,"1f6b5-1f3fb":0,"1f6b5-1f3fc":0,"1f6b5-1f3fd":0,"1f6b5-1f3fe":0,"1f6b5-1f3ff":0,"1f6b6-1f3fb-200d-2640":0,"1f6b6-1f3fc-200d-2640":0,"1f6b6-1f3fd-200d-2640":0,"1f6b6-1f3fe-200d-2640":0,"1f6b6-1f3ff-200d-2640":0,"1f6b6-1f3fb-200d-2642":0,"1f6b6-1f3fc-200d-2642":0,"1f6b6-1f3fd-200d-2642":0,"1f6b6-1f3fe-200d-2642":0,"1f6b6-1f3ff-200d-2642":0,"1f6b6-1f3fb":0,"1f6b6-1f3fc":0,"1f6b6-1f3fd":0,"1f6b6-1f3fe":0,"1f6b6-1f3ff":0,"1f6c0-1f3fb":0,"1f6c0-1f3fc":0,"1f6c0-1f3fd":0,"1f6c0-1f3fe":0,"1f6c0-1f3ff":0,"1f6cc-1f3fb":0,"1f6cc-1f3fc":0,"1f6cc-1f3fd":0,"1f6cc-1f3fe":0,"1f6cc-1f3ff":0,"1f90c-1f3fb":0,"1f90c-1f3fc":0,"1f90c-1f3fd":0,"1f90c-1f3fe":0,"1f90c-1f3ff":0,"1f90f-1f3fb":0,"1f90f-1f3fc":0,"1f90f-1f3fd":0,"1f90f-1f3fe":0,"1f90f-1f3ff":0,"1f918-1f3fb":0,"1f918-1f3fc":0,"1f918-1f3fd":0,"1f918-1f3fe":0,"1f918-1f3ff":0,"1f919-1f3fb":0,"1f919-1f3fc":0,"1f919-1f3fd":0,"1f919-1f3fe":0,"1f919-1f3ff":0,"1f91a-1f3fb":0,"1f91a-1f3fc":0,"1f91a-1f3fd":0,"1f91a-1f3fe":0,"1f91a-1f3ff":0,"1f91b-1f3fb":0,"1f91b-1f3fc":0,"1f91b-1f3fd":0,"1f91b-1f3fe":0,"1f91b-1f3ff":0,"1f91c-1f3fb":0,"1f91c-1f3fc":0,"1f91c-1f3fd":0,"1f91c-1f3fe":0,"1f91c-1f3ff":0,"1f91d-1f3fb":0,"1f91d-1f3fc":0,"1f91d-1f3fd":0,"1f91d-1f3fe":0,"1f91d-1f3ff":0,"1f91e-1f3fb":0,"1f91e-1f3fc":0,"1f91e-1f3fd":0,"1f91e-1f3fe":0,"1f91e-1f3ff":0,"1f91f-1f3fb":0,"1f91f-1f3fc":0,"1f91f-1f3fd":0,"1f91f-1f3fe":0,"1f91f-1f3ff":0,"1f926-1f3fb-200d-2640":0,"1f926-1f3fc-200d-2640":0,"1f926-1f3fd-200d-2640":0,"1f926-1f3fe-200d-2640":0,"1f926-1f3ff-200d-2640":0,"1f926-1f3fb-200d-2642":0,"1f926-1f3fc-200d-2642":0,"1f926-1f3fd-200d-2642":0,"1f926-1f3fe-200d-2642":0,"1f926-1f3ff-200d-2642":0,"1f926-1f3fb":0,"1f926-1f3fc":0,"1f926-1f3fd":0,"1f926-1f3fe":0,"1f926-1f3ff":0,"1f930-1f3fb":0,"1f930-1f3fc":0,"1f930-1f3fd":0,"1f930-1f3fe":0,"1f930-1f3ff":0,"1f931-1f3fb":0,"1f931-1f3fc":0,"1f931-1f3fd":0,"1f931-1f3fe":0,"1f931-1f3ff":0,"1f932-1f3fb":0,"1f932-1f3fc":0,"1f932-1f3fd":0,"1f932-1f3fe":0,"1f932-1f3ff":0,"1f933-1f3fb":0,"1f933-1f3fc":0,"1f933-1f3fd":0,"1f933-1f3fe":0,"1f933-1f3ff":0,"1f934-1f3fb":0,"1f934-1f3fc":0,"1f934-1f3fd":0,"1f934-1f3fe":0,"1f934-1f3ff":0,"1f935-1f3fb-200d-2640":0,"1f935-1f3fc-200d-2640":0,"1f935-1f3fd-200d-2640":0,"1f935-1f3fe-200d-2640":0,"1f935-1f3ff-200d-2640":0,"1f935-1f3fb-200d-2642":0,"1f935-1f3fc-200d-2642":0,"1f935-1f3fd-200d-2642":0,"1f935-1f3fe-200d-2642":0,"1f935-1f3ff-200d-2642":0,"1f935-1f3fb":0,"1f935-1f3fc":0,"1f935-1f3fd":0,"1f935-1f3fe":0,"1f935-1f3ff":0,"1f936-1f3fb":0,"1f936-1f3fc":0,"1f936-1f3fd":0,"1f936-1f3fe":0,"1f936-1f3ff":0,"1f937-1f3fb-200d-2640":0,"1f937-1f3fc-200d-2640":0,"1f937-1f3fd-200d-2640":0,"1f937-1f3fe-200d-2640":0,"1f937-1f3ff-200d-2640":0,"1f937-1f3fb-200d-2642":0,"1f937-1f3fc-200d-2642":0,"1f937-1f3fd-200d-2642":0,"1f937-1f3fe-200d-2642":0,"1f937-1f3ff-200d-2642":0,"1f937-1f3fb":0,"1f937-1f3fc":0,"1f937-1f3fd":0,"1f937-1f3fe":0,"1f937-1f3ff":0,"1f938-1f3fb-200d-2640":0,"1f938-1f3fc-200d-2640":0,"1f938-1f3fd-200d-2640":0,"1f938-1f3fe-200d-2640":0,"1f938-1f3ff-200d-2640":0,"1f938-1f3fb-200d-2642":0,"1f938-1f3fc-200d-2642":0,"1f938-1f3fd-200d-2642":0,"1f938-1f3fe-200d-2642":0,"1f938-1f3ff-200d-2642":0,"1f938-1f3fb":0,"1f938-1f3fc":0,"1f938-1f3fd":0,"1f938-1f3fe":0,"1f938-1f3ff":0,"1f939-1f3fb-200d-2640":0,"1f939-1f3fc-200d-2640":0,"1f939-1f3fd-200d-2640":0,"1f939-1f3fe-200d-2640":0,"1f939-1f3ff-200d-2640":0,"1f939-1f3fb-200d-2642":0,"1f939-1f3fc-200d-2642":0,"1f939-1f3fd-200d-2642":0,"1f939-1f3fe-200d-2642":0,"1f939-1f3ff-200d-2642":0,"1f939-1f3fb":0,"1f939-1f3fc":0,"1f939-1f3fd":0,"1f939-1f3fe":0,"1f939-1f3ff":0,"1f93d-1f3fb-200d-2640":0,"1f93d-1f3fc-200d-2640":0,"1f93d-1f3fd-200d-2640":0,"1f93d-1f3fe-200d-2640":0,"1f93d-1f3ff-200d-2640":0,"1f93d-1f3fb-200d-2642":0,"1f93d-1f3fc-200d-2642":0,"1f93d-1f3fd-200d-2642":0,"1f93d-1f3fe-200d-2642":0,"1f93d-1f3ff-200d-2642":0,"1f93d-1f3fb":0,"1f93d-1f3fc":0,"1f93d-1f3fd":0,"1f93d-1f3fe":0,"1f93d-1f3ff":0,"1f93e-1f3fb-200d-2640":0,"1f93e-1f3fc-200d-2640":0,"1f93e-1f3fd-200d-2640":0,"1f93e-1f3fe-200d-2640":0,"1f93e-1f3ff-200d-2640":0,"1f93e-1f3fb-200d-2642":0,"1f93e-1f3fc-200d-2642":0,"1f93e-1f3fd-200d-2642":0,"1f93e-1f3fe-200d-2642":0,"1f93e-1f3ff-200d-2642":0,"1f93e-1f3fb":0,"1f93e-1f3fc":0,"1f93e-1f3fd":0,"1f93e-1f3fe":0,"1f93e-1f3ff":0,"1f977-1f3fb":0,"1f977-1f3fc":0,"1f977-1f3fd":0,"1f977-1f3fe":0,"1f977-1f3ff":0,"1f9b5-1f3fb":0,"1f9b5-1f3fc":0,"1f9b5-1f3fd":0,"1f9b5-1f3fe":0,"1f9b5-1f3ff":0,"1f9b6-1f3fb":0,"1f9b6-1f3fc":0,"1f9b6-1f3fd":0,"1f9b6-1f3fe":0,"1f9b6-1f3ff":0,"1f9b8-1f3fb-200d-2640":0,"1f9b8-1f3fc-200d-2640":0,"1f9b8-1f3fd-200d-2640":0,"1f9b8-1f3fe-200d-2640":0,"1f9b8-1f3ff-200d-2640":0,"1f9b8-1f3fb-200d-2642":0,"1f9b8-1f3fc-200d-2642":0,"1f9b8-1f3fd-200d-2642":0,"1f9b8-1f3fe-200d-2642":0,"1f9b8-1f3ff-200d-2642":0,"1f9b8-1f3fb":0,"1f9b8-1f3fc":0,"1f9b8-1f3fd":0,"1f9b8-1f3fe":0,"1f9b8-1f3ff":0,"1f9b9-1f3fb-200d-2640":0,"1f9b9-1f3fc-200d-2640":0,"1f9b9-1f3fd-200d-2640":0,"1f9b9-1f3fe-200d-2640":0,"1f9b9-1f3ff-200d-2640":0,"1f9b9-1f3fb-200d-2642":0,"1f9b9-1f3fc-200d-2642":0,"1f9b9-1f3fd-200d-2642":0,"1f9b9-1f3fe-200d-2642":0,"1f9b9-1f3ff-200d-2642":0,"1f9b9-1f3fb":0,"1f9b9-1f3fc":0,"1f9b9-1f3fd":0,"1f9b9-1f3fe":0,"1f9b9-1f3ff":0,"1f9bb-1f3fb":0,"1f9bb-1f3fc":0,"1f9bb-1f3fd":0,"1f9bb-1f3fe":0,"1f9bb-1f3ff":0,"1f9cd-1f3fb-200d-2640":0,"1f9cd-1f3fc-200d-2640":0,"1f9cd-1f3fd-200d-2640":0,"1f9cd-1f3fe-200d-2640":0,"1f9cd-1f3ff-200d-2640":0,"1f9cd-1f3fb-200d-2642":0,"1f9cd-1f3fc-200d-2642":0,"1f9cd-1f3fd-200d-2642":0,"1f9cd-1f3fe-200d-2642":0,"1f9cd-1f3ff-200d-2642":0,"1f9cd-1f3fb":0,"1f9cd-1f3fc":0,"1f9cd-1f3fd":0,"1f9cd-1f3fe":0,"1f9cd-1f3ff":0,"1f9ce-1f3fb-200d-2640":0,"1f9ce-1f3fc-200d-2640":0,"1f9ce-1f3fd-200d-2640":0,"1f9ce-1f3fe-200d-2640":0,"1f9ce-1f3ff-200d-2640":0,"1f9ce-1f3fb-200d-2642":0,"1f9ce-1f3fc-200d-2642":0,"1f9ce-1f3fd-200d-2642":0,"1f9ce-1f3fe-200d-2642":0,"1f9ce-1f3ff-200d-2642":0,"1f9ce-1f3fb":0,"1f9ce-1f3fc":0,"1f9ce-1f3fd":0,"1f9ce-1f3fe":0,"1f9ce-1f3ff":0,"1f9cf-1f3fb-200d-2640":0,"1f9cf-1f3fc-200d-2640":0,"1f9cf-1f3fd-200d-2640":0,"1f9cf-1f3fe-200d-2640":0,"1f9cf-1f3ff-200d-2640":0,"1f9cf-1f3fb-200d-2642":0,"1f9cf-1f3fc-200d-2642":0,"1f9cf-1f3fd-200d-2642":0,"1f9cf-1f3fe-200d-2642":0,"1f9cf-1f3ff-200d-2642":0,"1f9cf-1f3fb":0,"1f9cf-1f3fc":0,"1f9cf-1f3fd":0,"1f9cf-1f3fe":0,"1f9cf-1f3ff":0,"1f9d1-1f3fb-200d-1f33e":0,"1f9d1-1f3fc-200d-1f33e":0,"1f9d1-1f3fd-200d-1f33e":0,"1f9d1-1f3fe-200d-1f33e":0,"1f9d1-1f3ff-200d-1f33e":0,"1f9d1-1f3fb-200d-1f373":0,"1f9d1-1f3fc-200d-1f373":0,"1f9d1-1f3fd-200d-1f373":0,"1f9d1-1f3fe-200d-1f373":0,"1f9d1-1f3ff-200d-1f373":0,"1f9d1-1f3fb-200d-1f37c":0,"1f9d1-1f3fc-200d-1f37c":0,"1f9d1-1f3fd-200d-1f37c":0,"1f9d1-1f3fe-200d-1f37c":0,"1f9d1-1f3ff-200d-1f37c":0,"1f9d1-1f3fb-200d-1f384":0,"1f9d1-1f3fc-200d-1f384":0,"1f9d1-1f3fd-200d-1f384":0,"1f9d1-1f3fe-200d-1f384":0,"1f9d1-1f3ff-200d-1f384":0,"1f9d1-1f3fb-200d-1f393":0,"1f9d1-1f3fc-200d-1f393":0,"1f9d1-1f3fd-200d-1f393":0,"1f9d1-1f3fe-200d-1f393":0,"1f9d1-1f3ff-200d-1f393":0,"1f9d1-1f3fb-200d-1f3a4":0,"1f9d1-1f3fc-200d-1f3a4":0,"1f9d1-1f3fd-200d-1f3a4":0,"1f9d1-1f3fe-200d-1f3a4":0,"1f9d1-1f3ff-200d-1f3a4":0,"1f9d1-1f3fb-200d-1f3a8":0,"1f9d1-1f3fc-200d-1f3a8":0,"1f9d1-1f3fd-200d-1f3a8":0,"1f9d1-1f3fe-200d-1f3a8":0,"1f9d1-1f3ff-200d-1f3a8":0,"1f9d1-1f3fb-200d-1f3eb":0,"1f9d1-1f3fc-200d-1f3eb":0,"1f9d1-1f3fd-200d-1f3eb":0,"1f9d1-1f3fe-200d-1f3eb":0,"1f9d1-1f3ff-200d-1f3eb":0,"1f9d1-1f3fb-200d-1f3ed":0,"1f9d1-1f3fc-200d-1f3ed":0,"1f9d1-1f3fd-200d-1f3ed":0,"1f9d1-1f3fe-200d-1f3ed":0,"1f9d1-1f3ff-200d-1f3ed":0,"1f9d1-1f3fb-200d-1f4bb":0,"1f9d1-1f3fc-200d-1f4bb":0,"1f9d1-1f3fd-200d-1f4bb":0,"1f9d1-1f3fe-200d-1f4bb":0,"1f9d1-1f3ff-200d-1f4bb":0,"1f9d1-1f3fb-200d-1f4bc":0,"1f9d1-1f3fc-200d-1f4bc":0,"1f9d1-1f3fd-200d-1f4bc":0,"1f9d1-1f3fe-200d-1f4bc":0,"1f9d1-1f3ff-200d-1f4bc":0,"1f9d1-1f3fb-200d-1f527":0,"1f9d1-1f3fc-200d-1f527":0,"1f9d1-1f3fd-200d-1f527":0,"1f9d1-1f3fe-200d-1f527":0,"1f9d1-1f3ff-200d-1f527":0,"1f9d1-1f3fb-200d-1f52c":0,"1f9d1-1f3fc-200d-1f52c":0,"1f9d1-1f3fd-200d-1f52c":0,"1f9d1-1f3fe-200d-1f52c":0,"1f9d1-1f3ff-200d-1f52c":0,"1f9d1-1f3fb-200d-1f680":0,"1f9d1-1f3fc-200d-1f680":0,"1f9d1-1f3fd-200d-1f680":0,"1f9d1-1f3fe-200d-1f680":0,"1f9d1-1f3ff-200d-1f680":0,"1f9d1-1f3fb-200d-1f692":0,"1f9d1-1f3fc-200d-1f692":0,"1f9d1-1f3fd-200d-1f692":0,"1f9d1-1f3fe-200d-1f692":0,"1f9d1-1f3ff-200d-1f692":0,"1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fb":0,"1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fc":0,"1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fd":0,"1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fe":0,"1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3ff":0,"1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fb":0,"1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fc":0,"1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fd":0,"1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fe":0,"1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3ff":0,"1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fb":0,"1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fc":0,"1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fd":0,"1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fe":0,"1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3ff":0,"1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fb":0,"1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fc":0,"1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fd":0,"1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fe":0,"1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3ff":0,"1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fb":0,"1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fc":0,"1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fd":0,"1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fe":0,"1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3ff":0,"1f9d1-1f3fb-200d-1f9af":0,"1f9d1-1f3fc-200d-1f9af":0,"1f9d1-1f3fd-200d-1f9af":0,"1f9d1-1f3fe-200d-1f9af":0,"1f9d1-1f3ff-200d-1f9af":0,"1f9d1-1f3fb-200d-1f9b0":0,"1f9d1-1f3fc-200d-1f9b0":0,"1f9d1-1f3fd-200d-1f9b0":0,"1f9d1-1f3fe-200d-1f9b0":0,"1f9d1-1f3ff-200d-1f9b0":0,"1f9d1-1f3fb-200d-1f9b1":0,"1f9d1-1f3fc-200d-1f9b1":0,"1f9d1-1f3fd-200d-1f9b1":0,"1f9d1-1f3fe-200d-1f9b1":0,"1f9d1-1f3ff-200d-1f9b1":0,"1f9d1-1f3fb-200d-1f9b2":0,"1f9d1-1f3fc-200d-1f9b2":0,"1f9d1-1f3fd-200d-1f9b2":0,"1f9d1-1f3fe-200d-1f9b2":0,"1f9d1-1f3ff-200d-1f9b2":0,"1f9d1-1f3fb-200d-1f9b3":0,"1f9d1-1f3fc-200d-1f9b3":0,"1f9d1-1f3fd-200d-1f9b3":0,"1f9d1-1f3fe-200d-1f9b3":0,"1f9d1-1f3ff-200d-1f9b3":0,"1f9d1-1f3fb-200d-1f9bc":0,"1f9d1-1f3fc-200d-1f9bc":0,"1f9d1-1f3fd-200d-1f9bc":0,"1f9d1-1f3fe-200d-1f9bc":0,"1f9d1-1f3ff-200d-1f9bc":0,"1f9d1-1f3fb-200d-1f9bd":0,"1f9d1-1f3fc-200d-1f9bd":0,"1f9d1-1f3fd-200d-1f9bd":0,"1f9d1-1f3fe-200d-1f9bd":0,"1f9d1-1f3ff-200d-1f9bd":0,"1f9d1-1f3fb-200d-2695":0,"1f9d1-1f3fc-200d-2695":0,"1f9d1-1f3fd-200d-2695":0,"1f9d1-1f3fe-200d-2695":0,"1f9d1-1f3ff-200d-2695":0,"1f9d1-1f3fb-200d-2696":0,"1f9d1-1f3fc-200d-2696":0,"1f9d1-1f3fd-200d-2696":0,"1f9d1-1f3fe-200d-2696":0,"1f9d1-1f3ff-200d-2696":0,"1f9d1-1f3fb-200d-2708":0,"1f9d1-1f3fc-200d-2708":0,"1f9d1-1f3fd-200d-2708":0,"1f9d1-1f3fe-200d-2708":0,"1f9d1-1f3ff-200d-2708":0,"1f9d1-1f3fb":0,"1f9d1-1f3fc":0,"1f9d1-1f3fd":0,"1f9d1-1f3fe":0,"1f9d1-1f3ff":0,"1f9d2-1f3fb":0,"1f9d2-1f3fc":0,"1f9d2-1f3fd":0,"1f9d2-1f3fe":0,"1f9d2-1f3ff":0,"1f9d3-1f3fb":0,"1f9d3-1f3fc":0,"1f9d3-1f3fd":0,"1f9d3-1f3fe":0,"1f9d3-1f3ff":0,"1f9d4-1f3fb-200d-2640":0,"1f9d4-1f3fc-200d-2640":0,"1f9d4-1f3fd-200d-2640":0,"1f9d4-1f3fe-200d-2640":0,"1f9d4-1f3ff-200d-2640":0,"1f9d4-1f3fb-200d-2642":0,"1f9d4-1f3fc-200d-2642":0,"1f9d4-1f3fd-200d-2642":0,"1f9d4-1f3fe-200d-2642":0,"1f9d4-1f3ff-200d-2642":0,"1f9d4-1f3fb":0,"1f9d4-1f3fc":0,"1f9d4-1f3fd":0,"1f9d4-1f3fe":0,"1f9d4-1f3ff":0,"1f9d5-1f3fb":0,"1f9d5-1f3fc":0,"1f9d5-1f3fd":0,"1f9d5-1f3fe":0,"1f9d5-1f3ff":0,"1f9d6-1f3fb-200d-2640":0,"1f9d6-1f3fc-200d-2640":0,"1f9d6-1f3fd-200d-2640":0,"1f9d6-1f3fe-200d-2640":0,"1f9d6-1f3ff-200d-2640":0,"1f9d6-1f3fb-200d-2642":0,"1f9d6-1f3fc-200d-2642":0,"1f9d6-1f3fd-200d-2642":0,"1f9d6-1f3fe-200d-2642":0,"1f9d6-1f3ff-200d-2642":0,"1f9d6-1f3fb":0,"1f9d6-1f3fc":0,"1f9d6-1f3fd":0,"1f9d6-1f3fe":0,"1f9d6-1f3ff":0,"1f9d7-1f3fb-200d-2640":0,"1f9d7-1f3fc-200d-2640":0,"1f9d7-1f3fd-200d-2640":0,"1f9d7-1f3fe-200d-2640":0,"1f9d7-1f3ff-200d-2640":0,"1f9d7-1f3fb-200d-2642":0,"1f9d7-1f3fc-200d-2642":0,"1f9d7-1f3fd-200d-2642":0,"1f9d7-1f3fe-200d-2642":0,"1f9d7-1f3ff-200d-2642":0,"1f9d7-1f3fb":0,"1f9d7-1f3fc":0,"1f9d7-1f3fd":0,"1f9d7-1f3fe":0,"1f9d7-1f3ff":0,"1f9d8-1f3fb-200d-2640":0,"1f9d8-1f3fc-200d-2640":0,"1f9d8-1f3fd-200d-2640":0,"1f9d8-1f3fe-200d-2640":0,"1f9d8-1f3ff-200d-2640":0,"1f9d8-1f3fb-200d-2642":0,"1f9d8-1f3fc-200d-2642":0,"1f9d8-1f3fd-200d-2642":0,"1f9d8-1f3fe-200d-2642":0,"1f9d8-1f3ff-200d-2642":0,"1f9d8-1f3fb":0,"1f9d8-1f3fc":0,"1f9d8-1f3fd":0,"1f9d8-1f3fe":0,"1f9d8-1f3ff":0,"1f9d9-1f3fb-200d-2640":0,"1f9d9-1f3fc-200d-2640":0,"1f9d9-1f3fd-200d-2640":0,"1f9d9-1f3fe-200d-2640":0,"1f9d9-1f3ff-200d-2640":0,"1f9d9-1f3fb-200d-2642":0,"1f9d9-1f3fc-200d-2642":0,"1f9d9-1f3fd-200d-2642":0,"1f9d9-1f3fe-200d-2642":0,"1f9d9-1f3ff-200d-2642":0,"1f9d9-1f3fb":0,"1f9d9-1f3fc":0,"1f9d9-1f3fd":0,"1f9d9-1f3fe":0,"1f9d9-1f3ff":0,"1f9da-1f3fb-200d-2640":0,"1f9da-1f3fc-200d-2640":0,"1f9da-1f3fd-200d-2640":0,"1f9da-1f3fe-200d-2640":0,"1f9da-1f3ff-200d-2640":0,"1f9da-1f3fb-200d-2642":0,"1f9da-1f3fc-200d-2642":0,"1f9da-1f3fd-200d-2642":0,"1f9da-1f3fe-200d-2642":0,"1f9da-1f3ff-200d-2642":0,"1f9da-1f3fb":0,"1f9da-1f3fc":0,"1f9da-1f3fd":0,"1f9da-1f3fe":0,"1f9da-1f3ff":0,"1f9db-1f3fb-200d-2640":0,"1f9db-1f3fc-200d-2640":0,"1f9db-1f3fd-200d-2640":0,"1f9db-1f3fe-200d-2640":0,"1f9db-1f3ff-200d-2640":0,"1f9db-1f3fb-200d-2642":0,"1f9db-1f3fc-200d-2642":0,"1f9db-1f3fd-200d-2642":0,"1f9db-1f3fe-200d-2642":0,"1f9db-1f3ff-200d-2642":0,"1f9db-1f3fb":0,"1f9db-1f3fc":0,"1f9db-1f3fd":0,"1f9db-1f3fe":0,"1f9db-1f3ff":0,"1f9dc-1f3fb-200d-2640":0,"1f9dc-1f3fc-200d-2640":0,"1f9dc-1f3fd-200d-2640":0,"1f9dc-1f3fe-200d-2640":0,"1f9dc-1f3ff-200d-2640":0,"1f9dc-1f3fb-200d-2642":0,"1f9dc-1f3fc-200d-2642":0,"1f9dc-1f3fd-200d-2642":0,"1f9dc-1f3fe-200d-2642":0,"1f9dc-1f3ff-200d-2642":0,"1f9dc-1f3fb":0,"1f9dc-1f3fc":0,"1f9dc-1f3fd":0,"1f9dc-1f3fe":0,"1f9dc-1f3ff":0,"1f9dd-1f3fb-200d-2640":0,"1f9dd-1f3fc-200d-2640":0,"1f9dd-1f3fd-200d-2640":0,"1f9dd-1f3fe-200d-2640":0,"1f9dd-1f3ff-200d-2640":0,"1f9dd-1f3fb-200d-2642":0,"1f9dd-1f3fc-200d-2642":0,"1f9dd-1f3fd-200d-2642":0,"1f9dd-1f3fe-200d-2642":0,"1f9dd-1f3ff-200d-2642":0,"1f9dd-1f3fb":0,"1f9dd-1f3fc":0,"1f9dd-1f3fd":0,"1f9dd-1f3fe":0,"1f9dd-1f3ff":0,"261d-1f3fb":0,"261d-1f3fc":0,"261d-1f3fd":0,"261d-1f3fe":0,"261d-1f3ff":0,"26f9-1f3fb-200d-2640":0,"26f9-1f3fc-200d-2640":0,"26f9-1f3fd-200d-2640":0,"26f9-1f3fe-200d-2640":0,"26f9-1f3ff-200d-2640":0,"26f9-1f3fb-200d-2642":0,"26f9-1f3fc-200d-2642":0,"26f9-1f3fd-200d-2642":0,"26f9-1f3fe-200d-2642":0,"26f9-1f3ff-200d-2642":0,"26f9-1f3fb":0,"26f9-1f3fc":0,"26f9-1f3fd":0,"26f9-1f3fe":0,"26f9-1f3ff":0,"270a-1f3fb":0,"270a-1f3fc":0,"270a-1f3fd":0,"270a-1f3fe":0,"270a-1f3ff":0,"270b-1f3fb":0,"270b-1f3fc":0,"270b-1f3fd":0,"270b-1f3fe":0,"270b-1f3ff":0,"270c-1f3fb":0,"270c-1f3fc":0,"270c-1f3fd":0,"270c-1f3fe":0,"270c-1f3ff":0,"270d-1f3fb":0,"270d-1f3fc":0,"270d-1f3fd":0,"270d-1f3fe":0,"270d-1f3ff":0}},Emoji=EmojiVersions[""];for(const d in EmojiVersions)d&&Object.assign(Emoji,EmojiVersions[d]);function encodeEmoji(d){return toCodePoints(removeVS16s(d)).join("-")}const vs16RegExp=/\uFE0F/g,zeroWidthJoiner="‍",removeVS16s=d=>d.indexOf(zeroWidthJoiner)<0?d.replace(vs16RegExp,""):d;function toCodePoints(d){const e=[];let t=0,r=0,s=0;for(;s<d.length;)t=d.charCodeAt(s++),r?(e.push((65536+(r-55296<<10)+(t-56320)).toString(16)),r=0):t>55296&&t<=56319?r=t:e.push(t.toString(16));return e.length&&e[0].length===2&&(e[0]="00"+e[0]),e}function getEmojiUnified(d){const e=encodeEmoji(d).replace(/-?fe0f/g,"");if(Emoji.hasOwnProperty(e))return e}function parseEntities(d){let e,t=d;const r=[];let s,a=0;for(FULL_REG_EXP.lastIndex=0;e=t.match(FULL_REG_EXP);){if(s=a+e.index,e[3])r.push({_:"messageEntityMention",offset:s+e[1].length,length:e[2].length+e[3].length});else if(e[4])if(EMAIL_REG_EXP.test(e[4]))r.push({_:"messageEntityEmail",offset:s,length:e[4].length});else{let n,o=e[5];const p=e[6];if(p){if(!o&&(p.substr(0,4)==="xn--"||TLD.indexOf(p.toLowerCase())!==-1)&&(o="http://"),o){const c=checkBrackets(e[4]);c.length!==e[4].length&&(e[4]=c),n=(e[5]?"":o)+e[4]}}else n=(e[5]?"":"http://")+e[4];n&&r.push({_:"messageEntityUrl",offset:s,length:e[4].length})}else if(e[7])r.push({_:"messageEntityLinebreak",offset:s,length:1});else if(e[8]){const n=getEmojiUnified(e[8]);n&&r.push({_:"messageEntityEmoji",offset:s,length:e[8].length,unicode:n})}else if(e[11])r.push({_:"messageEntityHashtag",offset:s+(e[10]?e[10].length:0),length:e[11].length});else if(e[13])r.push({_:"messageEntityBotCommand",offset:s+(e[11]?e[11].length:0)+(e[12]?e[12].length:0),length:1+e[13].length+(e[14]?1+e[14].length:0),unsafe:!0});else if(e[16]){const n=e[16],o=n.split(":"),p=o.length,c=p===3?+o[0]:0,f=+o[p===3?1:0],l=+o[p-1];r.push({_:"messageEntityTimestamp",offset:s+(/\D/.test(e[0][0])?1:0),length:n.length,raw:n,time:c*3600+f*60+l})}t=t.substr(e.index+e[0].length),a+=e.index+e[0].length}return r}function wrapMessageEntities(d,e=[]){d=fixEmoji(d,e);const t=parseEntities(d),r=mergeEntities(e,t);return{message:d,myEntities:t,totalEntities:r}}function getHistoryStorageKey(d){const{type:e,peerId:t,threadId:r}=d,s=getSearchStorageFilterKey(d);return[e,t,s,r].filter(Boolean).join("_")}function getSearchStorageFilterKey({inputFilter:d,savedReaction:e,query:t}){let r;return e&&(r=`tag-${e.map(n=>n.document_id||n.emoticon).join(",")}`,d??(d={_:"inputMessagesFilterEmpty"})),[d?._,t,r].filter(Boolean).join("_")}function getFwdFromName(d){return d&&(d.saved_from_name||d.from_name)}function getSearchType(d){if(d.inputFilter||d.savedReaction||d.query)return d.query||!d.peerId||d.fromPeerId?"uncached":"cached"}function getMainGroupedMessage(d){return d[0]}function getUnreadReactions(d){const t=d?.reactions?.recent_reactions;if(!t)return;const r=t.filter(s=>s.pFlags.unread);if(r.length)return r}function isMentionUnread(d){if(!d)return!1;const e=d.media?.document;return!!(d.pFlags.media_unread&&d.pFlags.mentioned&&(!e||!["voice","round"].includes(e.type)))}const GLOBAL_HISTORY_PEER_ID=NULL_PEER_ID,processAfter=d=>{d()};class AppMessagesManager extends AppManager{constructor(){super(...arguments),this.pendingByRandomId={},this.pendingByMessageId={},this.pendingAfterMsgs={},this.pendingTopMsgs={},this.tempFinalizeCallbacks={},this.sendSmthLazyLoadQueue=new LazyLoadQueueBase(10),this.needSingleMessages=new Map,this.extendedMedia=new Map,this.maxSeenId=0,this.migratedFromTo={},this.migratedToFrom={},this.newDialogsToHandle=new Map,this.newUpdatesAfterReloadToHandle={},this.notificationsToHandle={},this.reloadConversationsPeers=new Map,this.log=logger("MESSAGES",LogTypes.Error|LogTypes.Debug|LogTypes.Log|LogTypes.Warn),this.groupedTempId=0,this.typings={},this.unreadMentions={},this.goToNextMentionPromises={},this.batchUpdates={},this.tempMids={},this.historyMaxIdSubscribed=new Map,this.clear=e=>{this.middleware?this.middleware.clean():(this.middleware=getMiddleware(),this.uploadFilePromises={}),this.messagesStorageByPeerId={},this.groupedMessagesStorage={},this.scheduledMessagesStorage={},this.historiesStorage={},this.threadsStorage={},this.searchesStorage={},this.pinnedMessages={},this.threadsServiceMessagesIdsStorage={},this.threadsToReplies={},this.references={},this.dialogsStorage&&this.dialogsStorage.clear(e),this.filtersStorage&&this.filtersStorage.clear(e)},this.handleNewDialogs=()=>{let e=0;const t=new Map,r=s=>{const{peerId:a}=s;this.dialogsStorage.pushDialog({dialog:s}),this.appPeersManager.isChannel(a)||(e=Math.max(e,s.top_message||0));let n=t.get(a);n||t.set(a,n={}),isForumTopic(s)?(n.topics??(n.topics=new Map)).set(s.id,s):isSavedDialog(s)?(n.saved??(n.saved=new Map)).set(s.savedPeerId,s):n.dialog=s};for(const[s,a]of this.newDialogsToHandle){const n="dialog"in a,{dialog:o,topics:p,saved:c}=a;n&&(o?this.dialogsStorage.getDialogOnly(s)&&r(o):this.reloadConversation(s.toPeerId())),p?.forEach((f,l)=>{f?this.dialogsStorage.getForumTopic(s,l)&&r(f):this.dialogsStorage.getForumTopicById(s,l)}),c?.forEach((f,l)=>{f?this.dialogsStorage.getAnyDialog(s,l)&&r(f):this.dialogsStorage.getSavedDialogById(l)})}e!==0&&this.incrementMaxSeenId(e),this.rootScope.dispatchEvent("dialogs_multiupdate",t),this.newDialogsToHandle.clear()},this.handleNotifications=()=>{ctx.clearTimeout(this.notificationsHandlePromise),this.notificationsHandlePromise=void 0;for(const e in this.notificationsToHandle){const[t,r]=e.split("_"),s=this.notificationsToHandle[e];this.getNotifyPeerSettings(t.toPeerId(),r?+r:void 0).then(({muted:a,peerTypeNotifySettings:n})=>{const o=s.topMessage;a&&!o.pFlags.mentioned||!o.pFlags.unread||o.pFlags.unread&&this.notifyAboutMessage(o,{fwdCount:s.fwdCount,peerTypeNotifySettings:n})})}this.notificationsToHandle={}},this.onUpdateMessageId=e=>{const t=e.random_id,r=this.pendingByRandomId[t];if(!r)return;const{peerId:s}=r,a=this.appPeersManager.isChannel(s)?s.toChatId():void 0,n=this.appMessagesIdsManager.generateMessageId(e.id,a);this.pendingByMessageId[n]=t},this.onUpdateNewMessage=e=>{var S;const t=e.message,r=this.getMessagePeer(t),s=this.getHistoryMessagesStorage(r),a=e._==="updateNewDiscussionMessage";this.saveMessages([t],{storage:this.createMessageStorage(r,"history")});const n=this.appPeersManager.isForum(r),o=this.getThreadKey(t),p=o?+o.split("_")[1]:void 0,c=this.dialogsStorage.getAnyDialog(r,a?p:void 0);if((!c||this.reloadConversationsPeers.has(r))&&!a){let A=!0;if(r.isAnyChat()&&(A=this.appChatsManager.isInChat(r.toChatId())),A){this.handleNewUpdateAfterReload(r,e);return}}if(p&&!a){const A=this.threadsStorage[r]?.[p],k={_:"updateNewDiscussionMessage",message:t};this.appChatsManager.isForum(r.toChatId())&&!this.dialogsStorage.getForumTopic(r,p)?this.handleNewUpdateAfterReload(r,k,p):r===this.appPeersManager.peerId&&!this.dialogsStorage.getAnyDialog(r,p)?this.handleNewUpdateAfterReload(r,k,p):A&&this.onUpdateNewMessage(k)}if(t._==="messageService"){const{action:A}=t;if(A._==="messageActionPaymentSent"&&t.reply_to){const k=t.reply_to;this.rootScope.dispatchEvent("payment_sent",{peerId:k.reply_to_peer_id?this.appPeersManager.getPeerId(k.reply_to_peer_id):t.peerId,mid:t.reply_to_mid,receiptMessage:t})}if(A._==="messageActionTopicEdit"&&!a){const k=this.dialogsStorage.getForumTopic(r,p);if(!k)this.dialogsStorage.getForumTopicById(r,p);else{const T=copy(k);A.title!==void 0&&(k.title=A.title),A.closed!==void 0&&setBooleanFlag(k.pFlags,"closed",A.closed),A.hidden!==void 0&&setBooleanFlag(k.pFlags,"hidden",A.hidden),A.icon_emoji_id!==void 0&&(k.icon_emoji_id=A.icon_emoji_id),this.scheduleHandleNewDialogs(r,k),this.dialogsStorage.processTopicUpdate(k,T)}}}this.saveMessages([t],{storage:s}),this.checkPendingMessage(t);const f=this.getHistoryStorage(r,a?p:void 0);a||this.updateMessageRepliesIfNeeded(t);const l=e.ignoreExisting,u=!!f.history.findSlice(t.mid);if(this.updateMessageContextForInserting(t),u){if(!l)return!1}else{const A=f.history.first;if(A.isEnd(SliceEnd.Bottom)){let k=0;for(const T=A.length;k<T&&!(t.mid>A[k]);++k);A.splice(k,0,t.mid)}else f.history.unshift(t.mid);f.count!==null&&++f.count}(!f.maxId||t.mid>f.maxId)&&(f.maxId=t.mid),this.mergeReplyKeyboard(f,t)&&this.rootScope.dispatchEvent("history_reply_markup",{peerId:r});const g=t.fromId;if(g.isUser()&&!t.pFlags.out&&t.from_id){t.pFlags.offline||this.appUsersManager.forceUserOnline(g,t.date);const A={_:"sendMessageCancelAction"};let k;r.isUser()?k={_:"updateUserTyping",action:A,user_id:g}:this.appPeersManager.isChannel(r)?k={_:"updateChannelUserTyping",action:A,channel_id:r.toChatId(),from_id:this.appPeersManager.getOutputPeer(g),top_msg_id:p?getServerMessageId(p):void 0}:k={_:"updateChatUserTyping",action:A,chat_id:r.toChatId(),from_id:this.appPeersManager.getOutputPeer(g)},this.apiUpdatesManager.processLocalUpdate(k)}a||this.updateSlowModeOnNewMessage(t),a||this.handleNewMessage(t);const y=isForumTopic(c),b=isSavedDialog(c);if(a&&!y&&!b||!c)return;const I=!t.pFlags.out&&t.pFlags.unread;{if(I&&t.mid>c.top_message&&!b){const A=this.dialogsStorage.prepareDialogUnreadCountModifying(c);++c.unread_count,isMentionUnread(t)&&(++c.unread_mentions_count,this.modifyCachedMentions({peerId:r,mid:t.mid,add:!0,threadId:y?p:void 0})),A()}t.mid>=c.top_message&&this.setDialogTopMessage(t,c)}if((!a&&!n||y)&&I){const A=o||r,k=(S=this.notificationsToHandle)[A]??(S[A]={fwdCount:0,fromId:NULL_PEER_ID});k.fromId!==g&&(k.fromId=g,k.fwdCount=0),t.fwd_from&&++k.fwdCount,k.topMessage=t,this.notificationsHandlePromise??(this.notificationsHandlePromise=ctx.setTimeout(this.handleNotifications,0))}},this.onUpdateMessageReactions=e=>{const{peer:t,msg_id:r,top_msg_id:s,reactions:a}=e,n=t.channel_id,o=this.appMessagesIdsManager.generateMessageId(r,n),p=this.appMessagesIdsManager.generateMessageId(s,n),c=this.appPeersManager.getPeerId(t),f=this.getMessageByPeer(c,o);if(f?._!=="message"){this.fixDialogUnreadMentionsIfNoMessage({peerId:c,threadId:p,force:!0});return}const l=A=>{this.modifyCachedMentionsAndSave({peerId:c,mid:f.mid,threadId:p,addReaction:A})},u=a?.recent_reactions,y=f.reactions?.recent_reactions,b=u?.some(A=>A.pFlags.unread),I=!!y?.some(A=>A.pFlags.unread);if(u?.length&&f.pFlags.out){const A=u[u.length-1];this.appPeersManager.getPeerId(A.peer_id)!==this.appPeersManager.peerId&&(!y||y.length<=u.length)&&(!y||!deepEqual(A,y[y.length-1]))&&b!==I&&this.getNotifyPeerSettings(c).then(({muted:k,peerTypeNotifySettings:T})=>{T.show_previews&&this.notifyAboutMessage(f,{peerReaction:A,peerTypeNotifySettings:T})})}f.pFlags.out&&b!==I&&l(b);const S=f.peerId+"_"+f.mid;this.pushBatchUpdate("messages_reactions",this.batchUpdateReactions,S,()=>copy(f.reactions)),this.modifyMessage(f,A=>{A.reactions=a},void 0,e.local)},this.onUpdateDialogUnreadMark=e=>{const t=this.appPeersManager.getPeerId(e.peer.peer),r=this.getDialogOnly(t);if(!r)this.scheduleHandleNewDialogs(t);else{const s=this.dialogsStorage.prepareDialogUnreadCountModifying(r);e.pFlags.unread?r.pFlags.unread_mark=!0:delete r.pFlags.unread_mark,s(),this.dialogsStorage.setDialogToState(r),this.rootScope.dispatchEvent("dialogs_multiupdate",new Map([[t,{dialog:r}]]))}},this.onUpdateEditMessage=e=>{var b,I;const t=e.message,r=this.getMessagePeer(t),s=this.appPeersManager.isChannel(r)?r.toChatId():void 0,a=this.appMessagesIdsManager.generateMessageId(t.id,s),n=this.getHistoryMessagesStorage(r);if(!n.has(a)){this.fixDialogUnreadMentionsIfNoMessage({peerId:r,threadId:getMessageThreadId(t,this.appPeersManager.isForum(r)),force:!0});return}const o=this.getMessageFromStorage(n,a),p=this.modifyMessage(o,()=>(this.saveMessages([t],{storage:n}),this.getMessageFromStorage(n,a)),!1,!0);this.handleEditedMessage(o,p,n);const c=this.getDialogOnly(r),f=c?.top_message===a;if(t.clear_history){f&&this.rootScope.dispatchEvent("dialog_flush",{peerId:r,dialog:c});return}let l=!0;if(o?._==="message"&&!deepEqual(o.reactions,p.reactions)){const S=p.reactions;p.reactions=o.reactions,this.apiUpdatesManager.processLocalUpdate({_:"updateMessageReactions",peer:this.appPeersManager.getOutputPeer(r),msg_id:t.id,reactions:S}),l=!1}l&&this.rootScope.dispatchEvent("message_edit",{storageKey:n.key,peerId:r,mid:a,message:t}),f&&this.dialogsStorage.setDialogToState(c);const u=new Map,g=()=>{let S=u.get(r);return S||u.set(r,S={}),S};(f||t.grouped_id)&&c&&(g().dialog=c);const y=this.getThreadKey(t);if(y){const S=+y.split("_")[1],A=this.dialogsStorage.getAnyDialog(r,S);A&&((b=g())[I=isSavedDialog(A)?"saved":"topics"]??(b[I]=new Map)).set(S,A)}u.size&&this.rootScope.dispatchEvent("dialogs_multiupdate",u)},this.onUpdateReadHistory=e=>{const t=e.channel_id,r=this.appMessagesIdsManager.generateMessageId(e.max_id||e.read_max_id,t),s=this.appMessagesIdsManager.generateMessageId(e.top_msg_id,t),a=t?t.toPeerId(!0):this.appPeersManager.getPeerId(e.peer),n=e._==="updateReadHistoryOutbox"||e._==="updateReadChannelOutbox"||e._==="updateReadChannelDiscussionOutbox"?!0:void 0,o=t?this.appChatsManager.isForum(t):!1,p=this.getHistoryMessagesStorage(a),c=getObjectKeysAndSort(p,"desc"),f=s&&o?this.dialogsStorage.getForumTopic(a,s):this.getDialogOnly(a),l=e.still_unread_count;let u=0,g=0,y=!1;const b=this.getHistoryStorage(a,s);if(a.isUser()&&n&&this.appUsersManager.forceUserOnline(a.toUserId()),s){const A=this.threadsToReplies[a+"_"+s];if(A){const[k,T]=A.split("_");this.updateMessage(k.toPeerId(),+T,"replies_updated")}}const I=f&&this.dialogsStorage.prepareDialogUnreadCountModifying(f),S=this.getReadMaxIdIfUnread(a,s);for(let A=0,k=c.length;A<k;A++){const T=c[A];if(T>r)continue;const O=p.get(T);if(O.pFlags.out!==n)continue;const $=getMessageThreadId(O,o);if(s&&$!==s)continue;if(!(O.pFlags.unread||S&&S<T))break;this.modifyMessage(O,ee=>{delete ee.pFlags.unread},p,!0),y||(y=!0),!O.pFlags.out&&f&&(l===void 0&&(u=--f.unread_count),isMentionUnread(O)&&(g=--f.unread_mentions_count,this.modifyCachedMentions({peerId:a,mid:O.mid,add:!1}))),this.rootScope.dispatchEvent("notification_cancel","msg"+T)}if(n?b.readOutboxMaxId=r:b.readMaxId=r,f){if(n?f.read_outbox_max_id=r:f.read_inbox_max_id=r,!n){let A;l!==void 0?A=l:u<0||r>=f.top_message||!S?A=0:u&&f.top_message>r&&(A=u),A!==void 0&&(f.unread_count=A),(g<0||!f.unread_count)&&(f.unread_mentions_count=0)}I?.(),this.dialogsStorage.processDialogForFilters(f),this.rootScope.dispatchEvent("dialog_unread",{peerId:a,dialog:f}),this.dialogsStorage.setDialogToState(f),!y&&l===void 0&&!n&&f.unread_count&&(isForumTopic(f)?this.dialogsStorage.getForumTopicById(a,s):this.reloadConversation(a))}if(y&&this.rootScope.dispatchEvent("messages_read"),!s&&t){const A=a+"_";for(const k in this.threadsToReplies)if(k.indexOf(A)===0){const[T,O]=this.threadsToReplies[k].split("_");this.rootScope.dispatchEvent("replies_updated",this.getMessageByPeer(T.toPeerId(),+O))}}},this.onUpdateReadMessagesContents=e=>{const t=e.channel_id,r=e.top_msg_id,s=r?this.appMessagesIdsManager.generateMessageId(r,t):void 0,a=e.messages.map(o=>this.appMessagesIdsManager.generateMessageId(o,t)),n=t?t.toPeerId(!0):this.findPeerIdByMids(a);for(let o=0,p=a.length;o<p;++o){const c=a[o],f=this.getMessageByPeer(n,c);if(f){if(f.pFlags.media_unread&&(this.modifyMessage(f,l=>{delete l.pFlags.media_unread}),!f.pFlags.out&&isMentionUnread(f)&&this.modifyCachedMentionsAndSave({peerId:n,mid:c,addMention:!1})),getUnreadReactions(f)){const l=copy(f.reactions);l.recent_reactions.forEach(u=>{delete u.pFlags.unread}),this.apiUpdatesManager.processLocalUpdate({_:"updateMessageReactions",peer:this.appPeersManager.getOutputPeer(n),msg_id:f.id,reactions:l})}}else this.fixDialogUnreadMentionsIfNoMessage({peerId:n,threadId:s}),this.fixDialogUnreadMentionsIfNoMessage({peerId:n,threadId:s,isReaction:!0})}this.rootScope.dispatchEvent("messages_media_read",{peerId:n,mids:a})},this.onUpdateChannelAvailableMessages=e=>{const t=e.channel_id,r=t.toPeerId(!0),s=this.getHistoryStorage(r).history.slice,a=this.appMessagesIdsManager.generateMessageId(e.available_min_id,t),n=s.filter(o=>o<=a);e.messages=n,this.onUpdateDeleteMessages(e)},this.onUpdateDeleteMessages=e=>{const t=e.channel_id,r=e.messages.map(u=>this.appMessagesIdsManager.generateMessageId(u,t)),s=t?t.toPeerId(!0):this.findPeerIdByMids(r);if(!s)return;this.apiManager.clearCache("messages.getSearchCounters",u=>this.appPeersManager.getPeerId(u.peer)===s);const a=new Set,n=new Map;for(const u of r){const g=this.getMessageByPeer(s,u),y=this.getThreadKey(g);if(!y)continue;const b=+y.split("_")[1];if(this.threadsStorage[s]?.[b]){a.add(y);const I=this.dialogsStorage.getAnyDialog(s,b);I&&n.set(b,I)}}const o=this.handleDeletedMessages(s,this.getHistoryMessagesStorage(s),r),p=Array.from(a).map(u=>{const[g,y]=u.split("_");return this.getHistoryStorage(g.toPeerId(),+y)});[this.getHistoryStorage(s),...p].forEach(u=>{for(const g of o.msgs)u.history.delete(g);o.count&&u.count&&(u.count=Math.max(0,u.count-o.count))}),this.rootScope.dispatchEvent("history_delete",{peerId:s,msgs:o.msgs});const f=[...n.values()],l=this.getDialogOnly(s);l&&f.unshift(l),f.forEach(u=>{const g=isForumTopic(u),y=isSavedDialog(u),b=isDialog(u),I=!!(o.unreadMentions||o.unread||o.unreadReactions),S=I&&this.dialogsStorage.prepareDialogUnreadCountModifying(u);if(!y&&o.unread&&(u.unread_count=Math.max(0,u.unread_count-o.unread)),!y&&o.unreadMentions&&(u.unread_mentions_count=u.unread_count?Math.max(0,u.unread_mentions_count-o.unreadMentions):0),!y&&o.unreadReactions&&(u.unread_reactions_count=Math.max(0,u.unread_reactions_count-o.unreadReactions)),I&&(S(),y||this.rootScope.dispatchEvent("dialog_unread",{peerId:s,dialog:u})),o.msgs.has(u.top_message)){const k=this.getHistoryStorage(u.peerId,b?void 0:getDialogKey(u)).history.first;if(k.isEnd(SliceEnd.Bottom)&&k.length){const T=k[0],O=this.getMessageByPeer(s,T);this.setDialogTopMessage(O,u)}else g?this.dialogsStorage.getForumTopicById(s,u.id):y?this.dialogsStorage.getSavedDialogById(u.savedPeerId):this.reloadConversation(s)}this.dialogsStorage.setDialogToState(u)})},this.onUpdateChannel=e=>{const t=e.channel_id,r=t.toPeerId(!0),s=this.appChatsManager.getChat(t),a=this.appChatsManager.isInChat(t),n=!!getPeerActiveUsernames(s)[0]||!s.pFlags.left,o=this.historiesStorage[r]!==void 0;n!==o&&(delete this.historiesStorage[r],this.rootScope.dispatchEvent("history_forbidden",r)),!!this.getDialogOnly(r)!==a&&(a?this.reloadConversation(r):this.dialogsStorage.dropDialogOnDeletion(r)),this.rootScope.dispatchEvent("channel_update",t)},this.onUpdateChannelReload=e=>{const t=e.channel_id.toPeerId(!0);this.flushStoragesByPeerId(t),Promise.all([this.reloadConversation(t)]).then(()=>{this.rootScope.dispatchEvent("history_reload",t)})},this.onUpdateChannelMessageViews=e=>{const t=e.views,r=e.channel_id.toPeerId(!0),s=this.appMessagesIdsManager.generateMessageId(e.id,e.channel_id),a=this.getMessageByPeer(r,s);a?.views!==void 0&&a.views<t&&(this.modifyMessage(a,n=>{n.views=t}),this.pushBatchUpdate("messages_views",this.batchUpdateViews,a.peerId+"_"+a.mid))},this.onUpdateServiceNotification=e=>{if(e.pFlags?.popup){this.rootScope.dispatchEvent("service_notification",e);return}const t=SERVICE_PEER_ID,r=t,s=this.generateTempMessageId(r),a={_:"message",id:s,from_id:this.appPeersManager.getOutputPeer(t),peer_id:this.appPeersManager.getOutputPeer(r),pFlags:{unread:!0},date:(e.inbox_date||tsNow(!0))+this.timeManager.getServerTimeOffset(),message:e.message,media:e.media,entities:e.entities};this.appUsersManager.hasUser(t)||this.appUsersManager.saveApiUsers([{_:"user",id:t,pFlags:{verified:!0},access_hash:"0",first_name:"Telegram",phone:"42777"}]),this.saveMessages([a],{isOutgoing:!0}),e.inbox_date&&(this.pendingTopMsgs[r]=s,this.onUpdateNewMessage({_:"updateNewMessage",message:a,pts:void 0,pts_count:void 0}))},this.onUpdatePinnedMessages=e=>{const t=e._==="updatePinnedChannelMessages"?e.channel_id:void 0,r=t?t.toPeerId(!0):this.appPeersManager.getPeerId(e.peer),s=e.messages.map(c=>this.appMessagesIdsManager.generateMessageId(c,t)),a=e.pFlags?.pinned,n=this.getHistoryMessagesStorage(r),o=s.filter(c=>!n.has(c)),p=o.length&&Promise.all(o.map(c=>this.reloadMessages(r,c))).catch(noop$2);callbackify(p,()=>{let c;a?c=f=>{f.pFlags.pinned=!0}:c=f=>{delete f.pFlags.pinned};for(const f of s){const l=n.get(f);this.modifyMessage(l,u=>{c(u)},n)}delete this.pinnedMessages[this.getPinnedMessagesKey(r)],this.appStateManager.getState().then(f=>{delete f.hiddenPinnedMessages[r],this.rootScope.dispatchEvent("peer_pinned_messages",{peerId:r,mids:s,pinned:a})})})},this.onUpdateNotifySettings=e=>{const{peer:t,notify_settings:r}=e,s=t._==="notifyForumTopic";if(!(t._==="notifyPeer"||s))return;const n=this.appPeersManager.getPeerId(t.peer),o=this.dialogsStorage.getAnyDialog(n,s?this.appMessagesIdsManager.generateMessageId(t.top_msg_id,t.peer.channel_id):void 0);o&&(o.notify_settings=r,this.rootScope.dispatchEvent("dialog_notify_settings",o),this.dialogsStorage.setDialogToState(o))},this.onUpdateNewScheduledMessage=e=>{const t=e.message,r=this.getMessagePeer(t),s=this.scheduledMessagesStorage[r];if(!s)return;const a=this.appPeersManager.isChannel(r)?r.toChatId():void 0,n=this.appMessagesIdsManager.generateMessageId(t.id,a),o=this.getMessageFromStorage(s,n);this.saveMessages([t],{storage:s,isScheduled:!0});const p=this.getMessageFromStorage(s,n);o?(this.handleEditedMessage(o,p,s),this.rootScope.dispatchEvent("message_edit",{storageKey:s.key,peerId:r,mid:t.mid,message:t})):this.checkPendingMessage(t)||this.rootScope.dispatchEvent("scheduled_new",t)},this.onUpdateDeleteScheduledMessages=e=>{const t=e.peer.channel_id,r=this.appPeersManager.getPeerId(e.peer),s=this.scheduledMessagesStorage[r];if(s){const a=e.messages.map(n=>this.appMessagesIdsManager.generateMessageId(n,t));this.handleDeletedMessages(r,s,a),this.rootScope.dispatchEvent("scheduled_delete",{peerId:r,mids:a})}},this.onUpdateMessageExtendedMedia=e=>{const t=e.peer.channel_id,r=this.appPeersManager.getPeerId(e.peer),s=this.appMessagesIdsManager.generateMessageId(e.msg_id,t),a=this.getHistoryMessagesStorage(r);if(!a.has(s))return;const n=this.getMessageFromStorage(a,s),o=n.media;o.extended_media?._!=="messageExtendedMedia"&&(o.extended_media=e.extended_media,this.onUpdateEditMessage({_:"updateEditMessage",message:n,pts:0,pts_count:0}))},this.onUpdateTranscribedAudio=e=>{const t=e.peer.channel_id,r=this.appPeersManager.getPeerId(e.peer),s=e.text,a=this.appMessagesIdsManager.generateMessageId(e.msg_id,t);this.rootScope.dispatchEvent("message_transcribed",{peerId:r,mid:a,text:s,pending:e.pFlags.pending})},this.batchUpdateViews=e=>{const t=[],r=this.getMessagesFromMap(e);for(const[s]of r)t.push({peerId:s.peerId,mid:s.mid,views:s.views});return t},this.batchUpdateReactions=e=>{const t=[],r=this.getMessagesFromMap(e);for(const[s,a]of r){const n=s.reactions?.results??[],o=a?.results??[],p=n.filter(f=>{const l=o.find(u=>reactionsEqual(u.reaction,f.reaction));return s.pFlags.out&&(!l||f.count>l.count)||f.chosen_order!==void 0&&(!l||l.chosen_order===void 0)}),c=o.filter(f=>!n.some(l=>reactionsEqual(l.reaction,f.reaction)));t.push({message:s,changedResults:p,removedResults:c})}return t}}after(){return this.clear(!0),this.apiUpdatesManager.addMultipleEventsListeners({updateMessageID:this.onUpdateMessageId,updateNewDiscussionMessage:this.onUpdateNewMessage,updateNewMessage:this.onUpdateNewMessage,updateNewChannelMessage:this.onUpdateNewMessage,updateDialogUnreadMark:this.onUpdateDialogUnreadMark,updateEditMessage:this.onUpdateEditMessage,updateEditChannelMessage:this.onUpdateEditMessage,updateMessageReactions:this.onUpdateMessageReactions,updateReadChannelDiscussionInbox:this.onUpdateReadHistory,updateReadChannelDiscussionOutbox:this.onUpdateReadHistory,updateReadHistoryInbox:this.onUpdateReadHistory,updateReadHistoryOutbox:this.onUpdateReadHistory,updateReadChannelInbox:this.onUpdateReadHistory,updateReadChannelOutbox:this.onUpdateReadHistory,updateChannelReadMessagesContents:this.onUpdateReadMessagesContents,updateReadMessagesContents:this.onUpdateReadMessagesContents,updateChannelAvailableMessages:this.onUpdateChannelAvailableMessages,updateDeleteMessages:this.onUpdateDeleteMessages,updateDeleteChannelMessages:this.onUpdateDeleteMessages,updateChannel:this.onUpdateChannel,updateChannelReload:this.onUpdateChannelReload,updateChannelMessageViews:this.onUpdateChannelMessageViews,updateServiceNotification:this.onUpdateServiceNotification,updatePinnedMessages:this.onUpdatePinnedMessages,updatePinnedChannelMessages:this.onUpdatePinnedMessages,updateNotifySettings:this.onUpdateNotifySettings,updateNewScheduledMessage:this.onUpdateNewScheduledMessage,updateDeleteScheduledMessages:this.onUpdateDeleteScheduledMessages,updateMessageExtendedMedia:this.onUpdateMessageExtendedMedia,updateTranscribedAudio:this.onUpdateTranscribedAudio}),this.rootScope.addEventListener("notify_peer_type_settings",({key:e,settings:t})=>{const r=this.dialogsStorage.getFolderDialogs(0).concat(this.dialogsStorage.getFolderDialogs(1));let s;e==="notifyUsers"?s=a=>a.peerId.isUser():e==="notifyBroadcasts"?s=a=>this.appPeersManager.isBroadcast(a.peerId):s=a=>this.appPeersManager.isAnyGroup(a.peerId),r.filter(s).forEach(a=>{this.rootScope.dispatchEvent("dialog_notify_settings",a)})}),this.rootScope.addEventListener("webpage_updated",({id:e,msgs:t})=>{t.forEach(({peerId:r,mid:s,isScheduled:a})=>{const n=a?this.getScheduledMessagesStorage(r):this.getHistoryMessagesStorage(r),o=this.getMessageFromStorage(n,s);o&&(this.modifyMessage(o,p=>{p.media={_:"messageMediaWebPage",pFlags:{},...p.media||{},webpage:this.appWebPagesManager.getCachedWebPage(e)}},n),this.rootScope.dispatchEvent("message_edit",{storageKey:n.key,peerId:r,mid:s,message:o}))})}),this.rootScope.addEventListener("draft_updated",({peerId:e,threadId:t,draft:r})=>{const s=this.dialogsStorage.getAnyDialog(e,t);if(s){s.draft=r;let a=!1;!r&&!getServerMessageId(s.top_message)?(this.dialogsStorage.dropDialog(e),a=!0):(this.dialogsStorage.generateIndexForDialog(s),this.dialogsStorage.pushDialog({dialog:s})),this.rootScope.dispatchEvent("dialog_draft",{peerId:e,dialog:s,drop:a,draft:r})}else if(t){const a=this.appChatsManager.getChat(e.toChatId());a?a.pFlags.forum&&this.dialogsStorage.getForumTopicById(e,t):this.reloadConversation(e)}else this.reloadConversation(e)}),this.rootScope.addEventListener("poll_update",({poll:e})=>{const t=this.appPollsManager.pollToMessages[e.id];if(t)for(const r of t){const[s,a]=r.split("_"),n=this.getMessageByPeer(s.toPeerId(),+a);n&&(this.onMessageModification(n),this.setDialogToStateIfMessageIsTop(n))}}),this.rootScope.addEventListener("chat_toggle_forum",({chatId:e,enabled:t})=>{const r=e.toPeerId(!0);if(!t){delete this.threadsStorage[r];for(const s in this.pinnedMessages)+s===r&&s.startsWith(r+"_")&&delete this.pinnedMessages[s]}}),this.batchUpdatesDebounced=debounce(()=>{for(const e in this.batchUpdates){const t=this.batchUpdates[e];delete this.batchUpdates[e];const r=t.callback(t.batch);r&&(!(r instanceof Array)||r.length)&&rootScope.dispatchEvent(e,r)}},33,!1,!0),this.appStateManager.getState().then(e=>{e.maxSeenMsgId&&(this.maxSeenId=e.maxSeenMsgId)})}getInputEntities(e){const t=copy(e);return forEachReverse(t,(r,s,a)=>{LOCAL_ENTITIES.has(r._)?a.splice(s,1):r._==="messageEntityMentionName"&&(r._="inputMessageEntityMentionName",r.user_id=this.appUsersManager.getUserInput(r.user_id))}),t}invokeAfterMessageIsSent(e,t,r){var n;const s=(n=this.tempFinalizeCallbacks)[e]??(n[e]={}),a=s[t]??(s[t]={deferred:deferredPromise()});return a.callback=r,a.deferred}editMessage(e,t,r={}){const{mid:s,peerId:a}=e;if(e.pFlags.is_outgoing)return this.invokeAfterMessageIsSent(s,"edit",f=>this.editMessage(f,t,r));const n=r.entities||[];t&&(t=parseMarkdown(t,n));let o=this.getInputEntities(n);o.length||(o=void 0);const p=this.processMessageWebPageOptions(e,r),c=r.scheduleDate||(e.pFlags.is_scheduled?e.date:void 0);return this.apiManager.invokeApi("messages.editMessage",{peer:this.appPeersManager.getInputPeerById(a),id:e.id,message:t,media:r.newMedia,entities:o,no_webpage:r.noWebPage,schedule_date:c,...p}).then(f=>{this.apiUpdatesManager.processUpdateMessage(f)},f=>{if(this.log.error("editMessage error:",f),f?.type==="MESSAGE_NOT_MODIFIED"){f.handled=!0;return}throw f?.type==="MESSAGE_EMPTY"&&(f.handled=!0),f})}async transcribeAudio(e){const{id:t,peerId:r}=e,s=a=>{this.apiUpdatesManager.processLocalUpdate({_:"updateTranscribedAudio",msg_id:e.id,peer:this.appPeersManager.getOutputPeer(r),pFlags:a.pFlags,text:a.text,transcription_id:a.transcription_id})};return this.apiManager.invokeApiSingleProcess({method:"messages.transcribeAudio",params:{peer:this.appPeersManager.getInputPeerById(r),msg_id:t},processResult:a=>(s(a),a),processError:a=>{throw(a.type==="TRANSCRIPTION_FAILED"||a.type==="MSG_VOICE_MISSING")&&s({_:"messages.transcribedAudio",transcription_id:0,text:"",pFlags:{}}),a}})}async sendText(e){let{peerId:t,text:r}=e;if(!r.trim())return;e.entities??(e.entities=[]),e.webPageOptions??(e.webPageOptions={}),this.checkSendOptions(e);const a=(await this.apiManager.getConfig()).message_length_max,n=splitStringByLength(r,a);r=n[0],n.length>1&&e.webPage?._==="webPage"&&!r.includes(e.webPage.url)&&delete e.webPage,t=this.appPeersManager.getPeerMigratedTo(t)||t;const o=e.entities;e.viaBotId||(r=parseMarkdown(r,o));let p=this.getInputEntities(o);p.length||(p=void 0);const c=this.generateOutgoingMessage(t,e);c.entities=o,c.message=r;const f=this.appPeersManager.isChannel(t),l=this.processMessageWebPageOptions(c,e),u=y=>{this.onMessagesSendError([c],y),this.rootScope.dispatchEvent("messages_pending")};c.send=()=>{u();const y={};this.pendingAfterMsgs[t]&&(y.afterMessageId=this.pendingAfterMsgs[t].messageId);const b=e.sendAsPeerId?this.appPeersManager.getInputPeerById(e.sendAsPeerId):void 0,I=this.appPeersManager.getInputPeerById(t),S=e.replyTo;let A;if(e.viaBotId)A=this.apiManager.invokeApiAfter("messages.sendInlineBotResult",{peer:I,random_id:c.random_id,reply_to:S,query_id:e.queryId,id:e.resultId,clear_draft:e.clearDraft,send_as:b},y);else{const k={peer:I,message:r,random_id:c.random_id,reply_to:S,entities:p,clear_draft:e.clearDraft,schedule_date:e.scheduleDate||void 0,silent:e.silent,send_as:b,update_stickersets_order:e.updateStickersetOrder};A=this.apiManager.invokeApiAfter(e.webPage?"messages.sendMedia":"messages.sendMessage",{...k,...l},y)}return this.pendingAfterMsgs[t]=y,A.then(k=>{if(k._==="updateShortSentMessage"){const T=c.promise;delete c.promise;const O=copy(c);defineNotNumerableProperties(c,["promise"]),c.promise=T,O.date=k.date,O.id=k.id,O.media=k.media,O.entities=k.entities,O.ttl_period=k.ttl_period,this.wrapMessageEntities(O),k.pFlags.out&&(O.pFlags.out=!0);const{pts:$,pts_count:K}=k;this.apiUpdatesManager.processLocalUpdate({_:"updateMessageID",random_id:c.random_id,id:O.id}),this.apiUpdatesManager.processLocalUpdate({_:e.scheduleDate?"updateNewScheduledMessage":f?"updateNewChannelMessage":"updateNewMessage",message:O,pts:$,pts_count:K}),k=void 0}else k.updates&&k.updates.forEach(T=>{T._==="updateDraftMessage"&&(T.local=!0)});k&&this.apiUpdatesManager.processUpdateMessage(k),c.promise.resolve()},k=>{throw u(k),c.promise.reject(k),k}).finally(()=>{this.pendingAfterMsgs[t]===y&&delete this.pendingAfterMsgs[t]})},this.beforeMessageSending(c,{isScheduled:!!e.scheduleDate||void 0,threadId:e.threadId,clearDraft:e.clearDraft,sequential:!0});const g=[c.promise];for(let y=1;y<n.length;++y)g.push(this.sendText({...e,peerId:t,text:n[y]}));return Promise.all(g).then(noop$2)}sendFile(e){const t=e.file;let{peerId:r}=e;r=this.appPeersManager.getPeerMigratedTo(r)||r,this.checkSendOptions(e);const s=this.generateOutgoingMessage(r,e);let a,n;const o=t.mime_type||t.type,p=t instanceof File?t.name:"",c=!(t instanceof File)&&!(t instanceof Blob);let f=e.caption||"";this.log("sendFile",t,o);const l=e.entities||[];f&&(f=parseMarkdown(f,l));const u=[],g=getEnvironment().IMAGE_MIME_TYPES_SUPPORTED.has(o),y=e.strippedBytes&&{_:"photoStrippedSize",bytes:e.strippedBytes,type:"i"};let b,I,S;if(c)a="document",n="";else if(o.indexOf("audio/")===0||["video/ogg"].indexOf(o)>=0){a="audio",n="audio."+(o.split("/")[1]==="ogg"?"ogg":"mp3"),S="sendMessageUploadAudioAction",e.isVoiceMessage&&(a="voice",s.pFlags.media_unread=!0);const te={_:"documentAttributeAudio",pFlags:{voice:e.isVoiceMessage||void 0},waveform:e.waveform,duration:e.duration||void 0};u.push(te)}else if(!e.isMedia)a="document",n="document."+o.split("/")[1],S="sendMessageUploadDocumentAction";else if(g){a="photo",n="photo."+o.split("/")[1],S="sendMessageUploadPhotoAction";const te={_:"photoSize",w:e.width,h:e.height,type:THUMB_TYPE_FULL,location:null,size:t.size};b={_:"photo",id:""+s.id,sizes:[te],w:e.width,h:e.height},y&&b.sizes.unshift(y),this.thumbsStorage.setCacheContextURL(b,te.type,e.objectURL||"",t.size),b=this.appPhotosManager.savePhoto(b)}else if(getEnvironment().VIDEO_MIME_TYPES_SUPPORTED.has(o)){a="video",n="video.mp4",S="sendMessageUploadVideoAction";const te={_:"documentAttributeVideo",pFlags:{round_message:e.isRoundMessage||void 0,supports_streaming:!0},duration:e.duration,w:e.width,h:e.height};u.push(te),e.noSound&&t.size>10*1024&&t.size<10*1024*1024&&u.push({_:"documentAttributeAnimated"})}else a="document",n="document."+o.split("/")[1],S="sendMessageUploadDocumentAction";if(u.push({_:"documentAttributeFilename",file_name:p||n}),["document","video","audio","voice"].indexOf(a)!==-1&&!c){const te=[];I={_:"document",id:""+s.id,duration:e.duration,attributes:u,w:e.width,h:e.height,thumbs:te,mime_type:o,size:t.size},e.objectURL&&this.thumbsStorage.setCacheContextURL(I,void 0,e.objectURL,t.size);let N;g?(u.push({_:"documentAttributeImageSize",w:e.width,h:e.height}),N={_:"photoSize",w:e.width,h:e.height,type:THUMB_TYPE_FULL,size:t.size}):a==="video"&&e.thumb&&(N={_:"photoSize",w:e.thumb.size.width,h:e.thumb.size.height,type:"local-thumb",size:e.thumb.blob.size},this.thumbsStorage.setCacheContextURL(I,N.type,e.thumb.url,N.size)),N&&te.push(N),y&&te.unshift(y),I=this.appDocsManager.saveDoc(I)}this.log("sendFile",a,n,t.type,e);const A=deferredPromise(),k=c?void 0:{_:b?"messageMediaPhoto":"messageMediaDocument",pFlags:{},photo:b,document:I};k&&(defineNotNumerableProperties(k,["promise"]),k.promise=A,e.spoiler&&(k.pFlags.spoiler=!0));let T=this.getInputEntities(l);T.length||(T=void 0),s.entities=l,s.message=f,s.media=c?{_:"messageMediaDocument",pFlags:{},document:t}:k;const O=c?void 0:getFileNameForUpload(t);s.uploadingFileName=O,O&&(this.uploadFilePromises[O]=A);const $=te=>{this.onMessagesSendError([s],te),this.rootScope.dispatchEvent("messages_pending")};let K=!1,ee=null;if(s.send=()=>{if(c){const te={_:"inputMediaDocument",id:getDocumentInput(t),pFlags:{}};A.resolve(te)}else if(t instanceof File||t instanceof Blob){const te=()=>{(!K||s.error)&&(K=!1,ee=this.apiFileManager.upload({file:t,fileName:O}),ee.catch(m=>{K||(this.log("cancelling upload",k),this.cancelPendingMessage(s.random_id),this.setTyping(r,{_:"sendMessageCancelAction"},void 0,e.threadId),A.reject(m))}),ee.addNotifyListener(m=>{const _=Math.max(1,Math.floor(100*m.done/m.total));S&&this.setTyping(r,{_:S,progress:_|0},void 0,e.threadId),A.notifyAll(m)}),A.notifyAll({done:0,total:t.size}));let N;return a==="video"&&e.objectURL&&e.thumb?.blob&&(N=this.apiFileManager.upload({file:e.thumb.blob})),ee&&ee.then(async m=>{m.name=n,K=!0;let _;switch(a){case"photo":_={_:"inputMediaUploadedPhoto",file:m,pFlags:{spoiler:e.spoiler||void 0}};break;default:_={_:"inputMediaUploadedDocument",file:m,mime_type:o,pFlags:{force_file:S==="sendMessageUploadDocumentAction"||void 0,spoiler:e.spoiler||void 0},attributes:u}}if(N)try{const h=await N;_.thumb=h}catch(h){this.log.error("sendFile thumb upload error:",h)}A.resolve(_)},m=>{throw $(m),m}),A};e.isGroupedItem?te():this.sendSmthLazyLoadQueue.push({load:te})}return A},this.beforeMessageSending(s,{isGroupedItem:e.isGroupedItem,isScheduled:!!e.scheduleDate||void 0,threadId:e.threadId,clearDraft:e.clearDraft,processAfter:e.processAfter}),!e.isGroupedItem){A.then(N=>(this.setTyping(r,{_:"sendMessageCancelAction"},void 0,e.threadId),this.apiManager.invokeApi("messages.sendMedia",{background:e.background,peer:this.appPeersManager.getInputPeerById(r),media:N,message:f,random_id:s.random_id,reply_to:e.replyTo,schedule_date:e.scheduleDate,silent:e.silent,entities:T,clear_draft:e.clearDraft,send_as:e.sendAsPeerId?this.appPeersManager.getInputPeerById(e.sendAsPeerId):void 0,update_stickersets_order:e.updateStickersetOrder}).then(m=>{this.apiUpdatesManager.processUpdateMessage(m)},m=>{if(a==="photo"&&m.code===400&&(m.type==="PHOTO_INVALID_DIMENSIONS"||m.type==="PHOTO_SAVE_FILE_INVALID")){m.handled=!0,a="document",s.send();return}throw $(m),m})));const te=s.promise;A.then(()=>te.resolve(),N=>te.reject(N))}const Q={message:s};return defineNotNumerableProperties(Q,["promise"]),Q.promise=A,Q}async sendGrouped(e){if(this.checkSendOptions(e),e.sendFileDetails.length===1)return this.sendFile({...e,...e.sendFileDetails[0]});let{peerId:t}=e;t=this.appPeersManager.getPeerMigratedTo(t)||t;let r=e.caption||"";const s=e.entities||[];r&&(r=parseMarkdown(r,s));let a=this.getInputEntities(s);a.length||(a=void 0);const n=this.log.bindPrefix("sendGrouped");n(e);const o=""+ ++this.groupedTempId,p=[],c=b=>{p.push(b)},f=e.sendFileDetails.map((b,I)=>{const S={peerId:t,isGroupedItem:!0,isMedia:e.isMedia,scheduleDate:e.scheduleDate,silent:e.silent,replyToMsgId:e.replyToMsgId,replyToStoryId:e.replyToStoryId,replyToQuote:e.replyToQuote,threadId:e.threadId,sendAsPeerId:e.sendAsPeerId,groupId:o,processAfter:c,...b};return I===0&&(S.caption=r,S.entities=s),this.sendFile(S).message});e.clearDraft&&p.push(()=>{this.appDraftsManager.clearDraft(t,e.threadId)}),p.forEach(b=>{b()});const l=(b,I)=>{this.onMessagesSendError([b],I),this.rootScope.dispatchEvent("messages_pending")},u=this.appPeersManager.getInputPeerById(t),g=b=>{this.setTyping(t,{_:"sendMessageCancelAction"},void 0,e.threadId);const I=deferredPromise();return this.sendSmthLazyLoadQueue.push({load:()=>this.apiManager.invokeApi("messages.sendMultiMedia",{peer:u,multi_media:b,reply_to:e.replyTo,schedule_date:e.scheduleDate,silent:e.silent,clear_draft:e.clearDraft,send_as:e.sendAsPeerId?this.appPeersManager.getInputPeerById(e.sendAsPeerId):void 0,update_stickersets_order:e.updateStickersetOrder}).then(S=>{this.apiUpdatesManager.processUpdateMessage(S),I.resolve()},S=>{f.forEach(A=>l(A,S)),I.reject(S)})}),I},y=f.map(async b=>{let I;try{I=await b.send()}catch(O){if(O.type==="UPLOAD_CANCELED")return;throw n.error("upload item error:",O,b),l(b,O),O}let S;try{S=await this.apiManager.invokeApi("messages.uploadMedia",{peer:u,media:I})}catch(O){throw n.error("uploadMedia error:",O,b),l(b,O),O}const A=I;if(S._==="messageMediaPhoto"){const O=this.appPhotosManager.savePhoto(S.photo);I=getPhotoMediaInput(O)}else if(S._==="messageMediaDocument"){const O=this.appDocsManager.saveDoc(S.document);I=getMediaInput(O)}["pFlags","ttl_seconds"].forEach(O=>{I[O]=A[O]??I[O]});const T={_:"inputSingleMedia",media:I,random_id:b.random_id,message:r,entities:a};return r&&(r="",a=void 0),T});return Promise.all(y).then(b=>g(b.filter(Boolean)))}sendContact(e,t){return this.sendOther({peerId:e,inputMedia:this.appUsersManager.getContactMediaInput(t)})}sendOther(e){let{peerId:t,inputMedia:r}=e;t=this.appPeersManager.getPeerMigratedTo(t)||t;const s=r?._==="inputMediaDocumentExternal";this.checkSendOptions(e);const a=this.generateOutgoingMessage(t,e);let n;switch(r._){case"inputMediaPoll":{const c=randomLong();r.poll.id=c,this.appPollsManager.savePoll(r.poll,{_:"pollResults",total_voters:0,pFlags:{},recent_voters:[]});const{poll:f,results:l}=this.appPollsManager.getPoll(c);n={_:"messageMediaPoll",poll:f,results:l};break}case"inputMediaPhoto":{n={_:"messageMediaPhoto",photo:this.appPhotosManager.getPhoto(r.id.id),pFlags:{}};break}case"inputMediaDocument":{n={_:"messageMediaDocument",document:this.appDocsManager.getDoc(r.id.id),pFlags:{}};break}case"inputMediaContact":{n={_:"messageMediaContact",phone_number:r.phone_number,first_name:r.first_name,last_name:r.last_name,user_id:r.user_id??"0",vcard:r.vcard};break}case"inputMediaGeoPoint":{n={_:"messageMediaGeo",geo:e.geoPoint};break}case"inputMediaVenue":{n={_:"messageMediaVenue",geo:e.geoPoint,title:r.title,address:r.address,provider:r.provider,venue_id:r.venue_id,venue_type:r.venue_type};break}case"inputMediaPhotoExternal":{if(s)break;n={_:"messageMediaPhotoExternal",photo:e.webDocument};break}case"inputMediaDocumentExternal":{if(s)break;n={_:"messageMediaDocumentExternal",document:e.webDocument};break}case"inputMediaStory":{n={_:"messageMediaStory",id:r.id,pFlags:{},peer:this.appPeersManager.getOutputPeer(this.appPeersManager.getPeerId(r.peer))};break}case"messageMediaPending":{n=r.messageMedia;break}}a.media=n;const o=c=>{this.onMessagesSendError([a],c),this.rootScope.dispatchEvent("messages_pending")};a.send=()=>{const c={};this.pendingAfterMsgs[t]&&(c.afterMessageId=this.pendingAfterMsgs[t].messageId);const f=e.sendAsPeerId?this.appPeersManager.getInputPeerById(e.sendAsPeerId):void 0;let l;return e.viaBotId?l=this.apiManager.invokeApiAfter("messages.sendInlineBotResult",{peer:this.appPeersManager.getInputPeerById(t),random_id:a.random_id,reply_to:e.replyTo,query_id:e.queryId,id:e.resultId,clear_draft:e.clearDraft,schedule_date:e.scheduleDate,silent:e.silent,send_as:f},c):l=this.apiManager.invokeApiAfter("messages.sendMedia",{peer:this.appPeersManager.getInputPeerById(t),media:r,random_id:a.random_id,reply_to:e.replyTo,message:"",clear_draft:e.clearDraft,schedule_date:e.scheduleDate,silent:e.silent,send_as:f,update_stickersets_order:e.updateStickersetOrder},c),this.pendingAfterMsgs[t]=c,l.then(u=>{u.updates&&u.updates.forEach(g=>{g._==="updateDraftMessage"&&(g.local=!0)}),this.apiUpdatesManager.processUpdateMessage(u),p.resolve()},u=>{throw o(u),p.reject(u),u}).finally(()=>{this.pendingAfterMsgs[t]===c&&delete this.pendingAfterMsgs[t]})},this.beforeMessageSending(a,{isScheduled:!!e.scheduleDate||void 0,threadId:e.threadId,clearDraft:e.clearDraft,sequential:!0,noOutgoingMessage:s});const p=a.promise;return p}getInputReplyTo(e){if(e.replyToStoryId)return{_:"inputReplyToStory",story_id:e.replyToStoryId,peer:this.appPeersManager.getInputPeerById(e.peerId)};if(e.replyToMsgId)return{_:"inputReplyToMessage",reply_to_msg_id:getServerMessageId(e.replyToMsgId),reply_to_peer_id:e.replyToPeerId&&this.appPeersManager.getInputPeerById(e.replyToPeerId),top_msg_id:e.threadId?getServerMessageId(e.threadId):void 0,...e.replyToQuote&&{quote_text:e.replyToQuote.text,quote_entities:e.replyToQuote.entities,quote_offset:e.replyToQuote.offset}}}checkSendOptions(e){e.threadId&&!e.replyToMsgId&&(e.replyToMsgId=e.threadId),e.replyTo??(e.replyTo=this.getInputReplyTo(e))}beforeMessageSending(e,t={}){const r=e.id,s=this.getMessagePeer(e),a=t.isScheduled?this.getScheduledMessagesStorage(s):this.getHistoryMessagesStorage(s);e.storageKey=a.key;const n=[];if(t.isScheduled&&!t.noOutgoingMessage)this.saveMessages([e],{storage:a,isScheduled:!0,isOutgoing:!0}),n.push(()=>{this.rootScope.dispatchEvent("scheduled_new",e)});else if(!t.noOutgoingMessage){const p=[this.getHistoryStorage(s),t.threadId?this.getHistoryStorage(s,t.threadId):void 0].filter(Boolean);for(const c of p)c.history.unshift(r);if(this.saveMessages([e],{storage:a,isOutgoing:!0}),this.setDialogTopMessage(e),this.updateMessageContextForInserting(e),t.threadId){const c=this.dialogsStorage.getAnyDialog(s,t.threadId);c&&this.setDialogTopMessage(e,c)}n.push(()=>{this.rootScope.dispatchEvent("history_append",{storageKey:a.key,message:e})})}let o;if(t.noOutgoingMessage||(o=this.pendingByRandomId[e.random_id]={peerId:s,tempId:r,threadId:t.threadId,storage:a,sequential:t.sequential},t.isScheduled||(this.pendingTopMsgs[s]=r,t.threadId&&(this.pendingTopMsgs[`${s}_${t.threadId}`]=r))),e.reactions){const p=e.reactions.results[0].reaction;this.invokeAfterMessageIsSent(r,"reactions",c=>this.appReactionsManager.sendReaction({message:c,reaction:p}))}return!t.isGroupedItem&&e.send&&n.push(()=>{t.clearDraft&&this.appDraftsManager.clearDraft(s,t.threadId),e.send()}),n.length&&(t.processAfter||processAfter)(()=>{for(const p of n)p()}),o}generateOutgoingMessage(e,t){let r;const s=this.appPeersManager.isBroadcast(e);if(s&&this.appPeersManager.getPeer(e).pFlags.signatures){const p=this.appUsersManager.getSelf();r=p.first_name+(p.last_name?" "+p.last_name:"")}let a;t.threadId&&!this.appPeersManager.isForum(e)&&(a=this.getHistoryStorage(e,t.threadId).history.first[0]);const n={_:"message",id:this.generateTempMessageId(e,a),from_id:t.sendAsPeerId?this.appPeersManager.getOutputPeer(t.sendAsPeerId):this.generateFromId(e),peer_id:this.appPeersManager.getOutputPeer(e),post_author:r,pFlags:this.generateFlags(e),date:t.scheduleDate||tsNow(!0)+this.timeManager.getServerTimeOffset(),message:"",grouped_id:t.groupId,random_id:randomLong(),reply_to:this.generateReplyHeader(e,t.replyTo),via_bot_id:t.viaBotId,reply_markup:t.replyMarkup,replies:this.generateReplies(e),views:s&&1,pending:!0};return defineNotNumerableProperties(n,["send","promise"]),t.groupId===void 0&&(n.promise=deferredPromise()),t.savedReaction&&(n.reactions={_:"messageReactions",pFlags:{reactions_as_tags:!0},results:t.savedReaction.map(o=>({_:"reactionCount",count:1,reaction:o,chosen_order:0}))}),n}generateReplyHeader(e,t){if(!t)return;if(t._==="inputReplyToStory")return{_:"messageReplyStoryHeader",story_id:t.story_id,peer:this.appPeersManager.getOutputPeer(this.appPeersManager.getPeerId(t.peer))};const r=e,s=this.appPeersManager.getPeerId(t.reply_to_peer_id);s&&(e=s);const a=this.appPeersManager.isChannel(e)?e.toChatId():void 0,n=this.appPeersManager.isForum(e),o=this.appMessagesIdsManager.generateMessageId(t.reply_to_msg_id,a);let p=t.top_msg_id?this.appMessagesIdsManager.generateMessageId(t.top_msg_id,a):void 0;const c=this.getMessageByPeer(e,o);n&&!p&&c&&(p=getMessageThreadId(c,!0));const f={_:"messageReplyHeader",pFlags:{},reply_to_msg_id:o||p};return p&&n&&GENERAL_TOPIC_ID!==p&&(f.pFlags.forum_topic=!0),p&&f.reply_to_msg_id!==p&&(f.reply_to_top_id=p),t.quote_text&&(f.quote_text=t.quote_text,f.quote_entities=t.quote_entities,f.quote_offset=t.quote_offset,f.pFlags.quote=!0),s&&(s.isUser()||!this.appPeersManager.isPeerPublic(s)?(delete f.reply_to_msg_id,f.quote_text??(f.quote_text=c.message)):f.reply_to_peer_id=this.appPeersManager.getOutputPeer(s)),f.reply_media=c?.media,c&&r!==c.peerId&&(f.reply_from=this.generateForwardHeader(e,c,!0)),f}generateReplies(e){let t;if(this.appPeersManager.isBroadcast(e)){const r=this.appProfileManager.getCachedFullChat(e.toChatId());r?.linked_chat_id&&(t={_:"messageReplies",pFlags:{comments:!0},channel_id:r.linked_chat_id,replies:0,replies_pts:0})}return t}generateFromId(e){if(!(this.appPeersManager.isAnyChat(e)&&(this.appPeersManager.isBroadcast(e)||this.isAnonymousSending(e))))return this.appPeersManager.getOutputPeer(this.appUsersManager.getSelf().id.toPeerId())}generateFlags(e){const t={},r=this.appUsersManager.getSelf().id;return e!==r&&(t.out=!0,!this.appPeersManager.isChannel(e)&&!this.appUsersManager.isBot(e)&&(t.unread=!0)),this.appPeersManager.isBroadcast(e)&&(t.post=!0),t}generateForwardHeader(e,t,r){if(!t)return;const s=this.appPeersManager.peerId,a=t.fromId,n=t.peerId,o=t.fwd_from;if(a===s&&n===s&&!o&&!r)return;const p={_:"messageFwdHeader",date:t.date,pFlags:{}};let c;return a.isUser()&&(c=this.appProfileManager.getCachedFullUser(a.toUserId())?.private_forward_name),o?["from_id","from_name","channel_post","post_author"].forEach(l=>{p[l]=o[l]}):(p.post_author=t.post_author,c||(p.from_id=this.appPeersManager.getOutputPeer(a)),this.appPeersManager.isBroadcast(n)&&(p.channel_post=t.id)),p.from_name||(p.from_name=c),e===s&&!r&&(c?p.from_name&&(p.saved_from_name=c):(p.saved_from_msg_id=t.id,p.saved_from_peer=this.appPeersManager.getOutputPeer(n),o&&(p.saved_from_id=this.appPeersManager.getOutputPeer(a))),t.pFlags.out&&!this.appPeersManager.isBroadcast(n)&&(p.pFlags.saved_out=!0),o&&(p.saved_date=t.date)),p}processMessageWebPageOptions(e,t){return e._!=="message"?{}:t.webPage?(e.media={_:"messageMediaWebPage",pFlags:{force_large_media:t.webPageOptions.largeMedia||void 0,force_small_media:t.webPageOptions.smallMedia||void 0},webpage:t.webPage},t.webPageOptions.invertMedia&&(e.pFlags.invert_media=!0),{media:{_:"inputMediaWebPage",url:t.webPage.url,pFlags:{force_large_media:t.webPageOptions.largeMedia||void 0,force_small_media:t.webPageOptions.smallMedia||void 0,optional:t.webPageOptions.optional||void 0}},invert_media:t.webPageOptions.invertMedia}):{no_webpage:t.noWebPage}}generateFakeAvatarMessage(e,t){const r=Number.MAX_SAFE_INTEGER,s={_:"messageService",pFlags:{},action:{_:"messageActionChannelEditPhoto",photo:t},id:r,peer_id:this.appPeersManager.getOutputPeer(e),mid:r,peerId:e,date:t.date,fromId:e};return this.getHistoryMessagesStorage(e).set(r,s),s}getUploadPromise(e){return this.uploadFilePromises[e]}isAnonymousSending(e){return e.isAnyChat()?this.appPeersManager.getPeer(e).admin_rights?.pFlags?.anonymous:!1}setDialogTopMessage(e,t=this.getDialogOnly(e.peerId)){if(!t)return;t.top_message=e.mid;const r=this.getHistoryStorage(e.peerId,isDialog(t)?void 0:getDialogKey(t));r.maxId=e.mid,this.dialogsStorage.generateIndexForDialog(t,!1,e),this.scheduleHandleNewDialogs(e.peerId,t)}cancelPendingMessage(e){const t=this.pendingByRandomId[e];if(t){const{peerId:r,tempId:s,storage:a}=t,n=this.getHistoryStorage(r);return this.appPeersManager.isChannel(r)?this.apiUpdatesManager.processLocalUpdate({_:"updateDeleteChannelMessages",channel_id:r.toChatId(),messages:[s],pts:void 0,pts_count:void 0}):this.apiUpdatesManager.processLocalUpdate({_:"updateDeleteMessages",messages:[s],pts:void 0,pts_count:void 0}),n.history.delete(s),delete this.pendingByRandomId[e],this.deleteMessageFromStorage(a,s),!0}return!1}async fillConversations(e=GLOBAL_FOLDER_ID){const t=this.middleware.get();for(;!this.dialogsStorage.isDialogsLoaded(e);){const r=await this.getTopMessages({limit:100,folderId:e});if(!t()||!r||r.isEnd)break}}getReadMaxIdIfUnread(e,t){const r=this.getHistoryStorage(e,t);if(t&&!this.appChatsManager.isForum(e.toChatId())){const s=this.getHistoryStorage(e),a=Math.max(s.readMaxId??0,r.readMaxId);return!this.getMessageByPeer(e,r.maxId)?.pFlags?.out&&a<r.maxId?a:0}else{const s=this.getMessageByPeer(e,r.maxId),a=r.readMaxId;return!s?.pFlags?.out&&a<r.maxId&&getServerMessageId(a)?a:0}}getTopMessages({limit:e,folderId:t,query:r,offsetTopicId:s,filterType:a=this.dialogsStorage.getFilterType(t)}){const n=this.log.bindPrefix("getTopMessages"),o=0;let p,c=0;r||(r=void 0);let f=this.dialogsStorage.getOffsetDate(t);f&&(c=f*65536,f+=this.timeManager.getServerTimeOffset());const l=100,u=this.middleware.get(),g=!!r,y=this.dialogsStorage.isVirtualFilter(t)?t:void 0,b=T=>{if(!u()||T._==="messages.dialogsNotModified"||T._==="messages.savedDialogsNotModified")return null;n("result",T),!y&&!o&&!f&&!p&&t!==GLOBAL_FOLDER_ID&&(n("resetting pinned order",t),this.dialogsStorage.resetPinnedOrder(t)),!y&&!f&&(n("adding missed dialogs"),this.appDraftsManager.addMissedDialogs()),this.saveApiResult(T);let O=!!f,$=!1;const K=new Map,ee=t===GLOBAL_FOLDER_ID?FOLDER_ID_ALL:t,Q=!!y&&!g||t===GLOBAL_FOLDER_ID,te=T.dialogs||T.topics;if(n("saving",{setFolderId:ee,saveGlobalOffset:Q,noIdsDialogs:K,isSearch:g}),forEachReverse(te,(M,P,D)=>{if(!M){D.splice(P,1);return}if(y||(M.folder_id??(M.folder_id=ee)),this.dialogsStorage.saveDialog({dialog:M,ignoreOffsetDate:!g,saveGlobalOffset:Q}),M.peerId===void 0){D.splice(P,1);return}if(!O&&!this.appPeersManager.isChannel(M.peerId||this.dialogsStorage.getDialogPeerId(M))&&(this.incrementMaxSeenId(M.top_message),O=!0),c&&getDialogIndex(M)>c&&(this.scheduleHandleNewDialogs(M.peerId,M),$=!0),!y&&!isSavedDialog(M)&&!getServerMessageId(M.read_inbox_max_id)&&!getServerMessageId(M.read_outbox_max_id)&&!M.unread_count&&getServerMessageId(M.top_message))K.set(M.peerId,{dialog:M}),this.log.error("noIdsDialogs",M,k);else if(M.top_message){const w=this.getMessageByPeer(M.peerId,M.top_message);w&&(this.setMessageUnreadByDialog(w,M),this.dialogsStorage.setDialogToState(M))}}),K.size){const M=[...K.keys()],P=M.map(D=>this.reloadConversation(D));Promise.all(P).then(()=>{this.rootScope.dispatchEvent("dialogs_multiupdate",K);for(let D=0;D<M.length;++D){const w=M[D];this.rootScope.dispatchEvent("dialog_unread",{peerId:w,dialog:this.getDialogOnly(w)})}})}const N=T.count,m=this.dialogsStorage.getFolderDialogs(t,!1);let _=0;if(!g)for(let M=0,P=m.length;M<P;++M){const D=m[M];getServerMessageId(D.top_message)||D.draft?++_:this.log.error("something strange with dialog",D)}let h;g?h=!N||te.length===N:h=!N||_>=N||!te.length,h&&!g&&this.dialogsStorage.setDialogsLoaded(t,!0),$?this.scheduleHandleNewDialogs():this.rootScope.dispatchEvent("dialogs_multiupdate",new Map),n("end",{isEnd:h,hasPrepend:$,offsetDate:this.dialogsStorage.getOffsetDate(t)});const v=te,E=e===l?v:v.slice(0,e);return{isEnd:h&&E[E.length-1]===v[v.length-1],count:N??te.length,dialogs:E}},I={noErrorBox:!0};let S,A,k;return a===FilterType.Forum?S=this.apiManager.invokeApiSingleProcess({method:A="channels.getForumTopics",params:k={channel:this.appChatsManager.getChannelInput(y.toChatId()),limit:l,offset_date:s?void 0:f,offset_id:o,offset_topic:s,q:r},options:I,processResult:T=>(T=this.dialogsStorage.processTopics(y,T),b(T))}):a===FilterType.Saved?S=this.apiManager.invokeApiSingleProcess({method:A="messages.getSavedDialogs",params:k={offset_date:f,offset_id:o,offset_peer:this.appPeersManager.getInputPeerById(p),limit:l,hash:"0"},options:I,processResult:b}):S=this.apiManager.invokeApiSingleProcess({method:A="messages.getDialogs",params:k={folder_id:t,offset_date:f,offset_id:o,offset_peer:this.appPeersManager.getInputPeerById(p),limit:l,hash:"0"},options:I,processResult:b}),n("invoke",A,k),S}async forwardMessagesInner(e){let{peerId:t,fromPeerId:r,mids:s}=e;t=this.appPeersManager.getPeerMigratedTo(t)||t,s=s.slice().sort((g,y)=>g-y);for(let g=0,y=s.length;g<y;++g){const b=s[g],I=this.getMessageByPeer(r,b);I.pFlags.is_outgoing&&(this.sendText({peerId:t,threadId:e.threadId,sendAsPeerId:e.sendAsPeerId,text:I.message,entities:I.entities,scheduleDate:e.scheduleDate,silent:e.silent}),s.splice(g--,1),--y)}if(!s.length)return Promise.resolve();const a=await this.apiManager.getConfig(),n=s.splice(a.forwarded_count_max,s.length-a.forwarded_count_max);e.dropCaptions&&(e.dropAuthor=!0);const o={},p=[],c=s.map(g=>{var O;const y=this.getMessageByPeer(r,g),b=this.generateOutgoingMessage(t,e);p.push(b.id);const I=["entities","media"],S=["invert_media"];e.dropAuthor||(b.fwd_from=this.generateForwardHeader(t,y),I.push("views","forwards"),b.fwd_from?.from_name&&t===this.appPeersManager.peerId&&delete b.from_id),(!e.dropCaptions||!y.media)&&I.push("message");const A=y.reply_to?.reply_to_msg_id,k=s.indexOf(A);if(A&&k!==-1){const $=p[k];b.reply_to={_:"messageReplyHeader",reply_to_msg_id:$,pFlags:{}}}I.forEach($=>{b[$]=copy(y[$])}),S.forEach($=>{b.pFlags[$]=y.pFlags[$]});const T=b.media?.document;return T&&(["round","voice"].includes(T.type)&&(b.pFlags.media_unread=!0),T.sticker&&!this.rootScope.premium&&getStickerEffectThumb(T)&&(b.media.pFlags.nopremium=!0)),y.grouped_id&&(o[O=y.grouped_id]??(o[O]={tempId:""+ ++this.groupedTempId,messages:[]})).messages.push(b),t===this.appPeersManager.peerId&&(b.saved_peer_id=this.appPeersManager.getOutputPeer(r)),b});for(const g in o){const y=o[g];y.messages.length>1&&y.messages.forEach(b=>{b.grouped_id=y.tempId})}c.forEach(g=>{this.beforeMessageSending(g,{isScheduled:!!e.scheduleDate||void 0,sequential:!0,threadId:g.peerId===this.appPeersManager.peerId?r:void 0})});const f={};this.pendingAfterMsgs[t]&&(f.afterMessageId=this.pendingAfterMsgs[t].messageId);const l=this.apiManager.invokeApiAfter("messages.forwardMessages",{from_peer:this.appPeersManager.getInputPeerById(r),id:s.map(g=>getServerMessageId(g)),random_id:c.map(g=>g.random_id),to_peer:this.appPeersManager.getInputPeerById(t),with_my_score:e.withMyScore,silent:e.silent,schedule_date:e.scheduleDate,drop_author:e.dropAuthor,drop_media_captions:e.dropCaptions,send_as:e.sendAsPeerId?this.appPeersManager.getInputPeerById(e.sendAsPeerId):void 0,top_msg_id:e.threadId?this.appMessagesIdsManager.generateMessageId(e.threadId):void 0},f).then(g=>{this.log("forwardMessages updates:",g),this.apiUpdatesManager.processUpdateMessage(g)},g=>{throw this.onMessagesSendError(c,g),g}).finally(()=>{this.pendingAfterMsgs[t]===f&&delete this.pendingAfterMsgs[t]});this.pendingAfterMsgs[t]=f;const u=[l];return n.length&&u.push(this.forwardMessages({...e,peerId:t,fromPeerId:r,mids:n})),Promise.all(u).then(noop$2)}forwardMessages(e){this.checkSendOptions(e);const{peerId:t,fromPeerId:r,mids:s}=e,a=this.appPeersManager.isChannel(r)?r.toChatId():void 0,o=this.appMessagesIdsManager.splitMessageIdsByChannels(s,a).map(([p,{mids:c}])=>this.forwardMessagesInner({...e,peerId:t,fromPeerId:p?a.toPeerId(!0):this.getMessageByPeer(r,c[0]).peerId,mids:c}));return Promise.all(o).then(noop$2)}generateEmptyMessage(e){}onMessagesSendError(e,t){e.forEach(r=>{if(r.error!==t&&(this.modifyMessage(r,s=>{t?s.error=t:delete s.error},void 0,!0),t)){this.rootScope.dispatchEvent("message_error",{storageKey:r.storageKey,peerId:r.peerId,tempId:r.mid,error:t});const s=this.getDialogOnly(r.peerId);s&&this.rootScope.dispatchEvent("dialog_unread",{peerId:r.peerId,dialog:s})}})}onMessageModification(e,t){this.setMessageToStorage(t??this.getHistoryMessagesStorage(e.peerId),e)}updateMessageContextForDeletion(e,t,r){const s=this.getReferenceContextByMessage(e,!0);if(!s)return;let a=!1;const{searchStorages:n}=s;n?.forEach(o=>{!t&&o.filterMessage(e)||(a=!0,o.history.delete(e.mid),o.count&&(o.count=Math.max(0,o.count-1)),n.delete(o),this.historyMaxIdSubscribed.has(o.key)&&!r&&this.rootScope.dispatchEvent("history_delete_key",{historyKey:o.key,mid:e.mid}))}),a&&(n&&!n.size&&delete s.searchStorages,Object.keys(s).length||delete this.references[e.peerId+"_"+e.mid])}updateMessageContextForInserting(e){const t=getMessageThreadId(e),r=this.searchesStorage[e.peerId];if(!r)return;const a=this.getReferenceContextByMessage(e,!0)?.searchStorages;filterUnique([r[void 0],r[t]].filter(Boolean)).forEach(o=>{for(const p in o){const c=o[p];if(a?.has(c)||!c.filterMessage(e))continue;const{first:f,last:l}=c.history,{mid:u}=e;let g=!0;if(f.isEnd(SliceEnd.Bottom)&&f[0]<u)c.history.unshift(u);else if(l.isEnd(SliceEnd.Top)&&l[l.length-1]>u)c.history.push(u);else{const y=c.history.findSliceOffset(u),b=y?.slice||[],I=b.findIndex(k=>u>k),S=b[I],A=b[I-1];S&&A?b.splice(I,0,u):(g=!1,this.log.error("cannot insert message for search filter",e,y,c))}g&&(c.onMidInsertion(u),++c.count),this.log("inserting message for search filter",e.mid,p)}})}updateMessageContext(e){this.updateMessageContextForDeletion(e),this.updateMessageContextForInserting(e)}modifyMessage(e,t,r,s){return e=t(e)||e,r!==!1&&this.onMessageModification(e,r),s||this.setDialogToStateIfMessageIsTop(e),this.updateMessageContext(e),e}mirrorAllMessages(e){const t={};[this.messagesStorageByPeerId,this.scheduledMessagesStorage].forEach(r=>{for(const s in r){const a=r[s];t[a.key]=Object.fromEntries(a.entries())}}),MTProtoMessagePort.getInstance().invokeVoid("mirror",{name:"messages",value:t},e)}getMessagesStorageByKey(e){const t=e.split("_"),r=+t[0];return t[1]==="scheduled"?this.getScheduledMessagesStorage(r):this.getHistoryMessagesStorage(r)}getMessageFromStorage(e,t){return e=this.getMessagesStorage(e),e?.type==="history"&&isLegacyMessageId(t)&&(e=this.getGlobalHistoryMessagesStorage()),e?.get(t)}setMessageToStorage(e,t){e=this.getMessagesStorage(e);const{mid:r}=t;if(e?.type==="history"&&isLegacyMessageId(r)&&e.peerId!==GLOBAL_HISTORY_PEER_ID){const s=this.getGlobalHistoryMessagesStorage();this.setMessageToStorage(s,t)}return e.type!=="grouped"&&MTProtoMessagePort.getInstance().invokeVoid("mirror",{name:"messages",key:joinDeepPath(e.key,r),value:t}),e?.set(r,t)}deleteMessageFromStorage(e,t){if(e?.type==="history"&&isLegacyMessageId(t)&&e.peerId!==GLOBAL_HISTORY_PEER_ID){const r=this.getGlobalHistoryMessagesStorage();this.deleteMessageFromStorage(r,t)}return e.type!=="grouped"&&MTProtoMessagePort.getInstance().invokeVoid("mirror",{name:"messages",key:joinDeepPath(e.key,t)}),e?.delete(t)}createMessageStorage(e,t){const r=new Map;return r.peerId=e,r.type=t,r.key=`${e}_${t}`,r}getHistoryMessagesStorage(e){var t;return(t=this.messagesStorageByPeerId)[e]??(t[e]=this.createMessageStorage(e,"history"))}getGlobalHistoryMessagesStorage(){return this.getHistoryMessagesStorage(GLOBAL_HISTORY_PEER_ID)}getMessagesStorage(e){return typeof e=="object"?e:this.getMessagesStorageByKey(e)}getMessageById(e){return isLegacyMessageId(e)?this.getMessageFromStorage(this.getGlobalHistoryMessagesStorage(),e):this.generateEmptyMessage(e)}getMessageByPeer(e,t){return e?this.getMessageFromStorage(this.getHistoryMessagesStorage(e),t):this.getMessageById(t)}getMessagePeer(e){return e?.peer_id&&this.appPeersManager.getPeerId(e.peer_id)||NULL_PEER_ID}getDialogOnly(e){return this.dialogsStorage.getDialogOnly(e)}cantForwardDeleteMids(e,t){const r=this.getMessagesStorage(e);let s=!t.length,a=!t.length;for(const n of t){const o=this.getMessageFromStorage(r,n);if(s||(s=!this.canForward(o)),a||(a=!this.canDeleteMessage(o)),s&&a)break}return{cantForward:s,cantDelete:a}}reloadConversationOrTopic(e,t){t?this.dialogsStorage.getForumTopicById(e,t):this.reloadConversation(e)}reloadConversation(e,t){const r=this.log.bindPrefix("reloadConversation");let s;if(e!==void 0){const a=this.appPeersManager.getPeerId(e);let n=this.reloadConversationsPeers.get(a);if(n&&(t||!n.sentRequest)&&(s=n.promise),r.warn({peerId:a,throttled:!!s,sentRequest:n?.sentRequest}),s)return s;s=deferredPromise(),this.reloadConversationsPeers.set(a,n={inputDialogPeer:this.appPeersManager.getInputDialogPeerById(e),promise:s})}return this.reloadConversationsPromise?s||this.reloadConversationsPromise:(r("creating throttled promise"),this.reloadConversationsPromise=pause(0).then(()=>{const a=new Map(this.reloadConversationsPeers),n=[...a.values()].map(c=>(c.sentRequest=!0,c.inputDialogPeer)),o=()=>{r("fullfilling left",a);for(const[c,f]of a)this.reloadConversationsPeers.get(c)===f&&this.reloadConversationsPeers.delete(c),f.promise.resolve(void 0)};return(async()=>{for(;;){const c=await this.apiManager.invokeApi("messages.getPeerDialogs",{peers:n},{floodMaxTimeout:1/0}),f=this.apiUpdatesManager.updatesState,{state:l}=c;if(f.pts&&f.pts!==l.pts){this.log.warn("current pts is different, will try again",f.pts,l.pts),await pause(500);continue}return c}})().then(c=>{r("result",c);for(const[f,l]of a)this.reloadConversationsPeers.get(f)===l&&this.reloadConversationsPeers.delete(f);this.dialogsStorage.applyDialogs(c),c.dialogs.forEach(f=>{const l=f.peerId;if(!l)return;a.get(l).promise.resolve(f),a.delete(l)})},c=>{r.error(c)}).then(()=>{o(),this.reloadConversationsPromise=null,this.reloadConversationsPeers.size&&this.reloadConversation()})}),s||this.reloadConversationsPromise)}doFlushHistory(e,t,r,s,a){const n=this.appPeersManager.isSavedDialog(e,s);let o;const p=c=>{if(this.apiUpdatesManager.processLocalUpdate({_:"updatePts",pts:c.pts,pts_count:c.pts_count}),!c.offset){let f;if(a?f=l=>l.fromId===a:n&&(f=l=>{const u=l.saved_peer_id;return u?this.appPeersManager.getPeerId(u)===s:l.fromId===this.appPeersManager.peerId}),f){const l=this.getHistoryMessagesStorage(e),u=[];for(const[g,y]of l)f(y)&&u.push(g);this.apiUpdatesManager.processLocalUpdate(e.isUser()?{_:"updateDeleteMessages",messages:u,pts:void 0,pts_count:void 0}:{_:"updateDeleteChannelMessages",channel_id:e.toChatId(),messages:u,pts:void 0,pts_count:void 0})}return!0}return this.doFlushHistory(e,t,r,s)};return a?o=this.apiManager.invokeApiSingleProcess({method:"channels.deleteParticipantHistory",params:{channel:this.appChatsManager.getChannelInput(e.toChatId()),participant:this.appPeersManager.getInputPeerById(a)},processResult:p}):s?n?o=this.apiManager.invokeApiSingleProcess({method:"messages.deleteSavedHistory",params:{peer:this.appPeersManager.getInputPeerById(s),max_id:0},processResult:p}):o=this.apiManager.invokeApiSingleProcess({method:"channels.deleteTopicHistory",params:{channel:this.appChatsManager.getChannelInput(e.toChatId()),top_msg_id:getServerMessageId(s)},processResult:p}):o=this.apiManager.invokeApiSingleProcess({method:"messages.deleteHistory",params:{just_clear:t,revoke:r,peer:this.appPeersManager.getInputPeerById(e),max_id:0},processResult:p}),o}async flushHistory(e,t,r,s){if(this.appPeersManager.isChannel(e)&&!s){const n=await this.getHistory({peerId:e,offsetId:0,limit:1}),o=e.toChatId(),p=n.history[0]||0;return this.apiManager.invokeApiSingle("channels.deleteHistory",{channel:this.appChatsManager.getChannelInput(o),max_id:getServerMessageId(p)}).then(c=>(c&&this.apiUpdatesManager.processLocalUpdate({_:"updateChannelAvailableMessages",channel_id:o,available_min_id:p}),c))}return this.doFlushHistory(e,t,r,s).then(()=>{if(s||this.flushStoragesByPeerId(e),t)this.rootScope.dispatchEvent("dialog_flush",{peerId:e,dialog:this.getDialogOnly(e)});else{const a=this.getTypingKey(e,s);if(delete this.notificationsToHandle[a],delete this.typings[a],!s){const n=this.reloadConversationsPeers.get(e);n&&(this.reloadConversationsPeers.delete(e),n.promise.resolve(void 0))}this.dialogsStorage.dropDialogOnDeletion(e,s)}})}flushStoragesByPeerId(e){[this.historiesStorage,this.threadsStorage,this.searchesStorage,this.pendingAfterMsgs,this.pendingTopMsgs].forEach(r=>{delete r[e]});for(const r in this.pinnedMessages)(+r===e||r.startsWith(e+"_"))&&delete this.pinnedMessages[r];const t=this.needSingleMessages.get(e);if(t){for(const[r,s]of t)s.resolve(this.generateEmptyMessage(r));t.clear()}[this.messagesStorageByPeerId,this.scheduledMessagesStorage].forEach(r=>{const s=r[e];if(s){if(s.type==="history"&&(s.forEach((a,n)=>{delete this.references[e+"_"+n]}),!this.appPeersManager.isChannel(e))){const a=this.getGlobalHistoryMessagesStorage();s.forEach((n,o)=>{this.deleteMessageFromStorage(a,o)})}s.clear(),delete r[e]}}),this.dialogsStorage.flushForumTopicsCache(e)}hidePinnedMessages(e){return Promise.all([this.appStateManager.getState(),this.getPinnedMessage(e)]).then(([t,r])=>{t.hiddenPinnedMessages[e]=r.maxId,this.rootScope.dispatchEvent("peer_pinned_hidden",{peerId:e,maxId:r.maxId})})}getPinnedMessagesKey(e,t){return e+(t?"_"+t:"")}getPinnedMessage(e,t){var s,a;const r=(s=this.pinnedMessages)[a=this.getPinnedMessagesKey(e,t)]??(s[a]={});return r.promise?r.promise:r.maxId?Promise.resolve(r):r.promise=Promise.resolve(this.getHistory({peerId:e,inputFilter:{_:"inputMessagesFilterPinned"},offsetId:0,limit:1,threadId:t})).then(n=>(r.count=n.count,r.maxId=n.history[0],r)).finally(()=>{delete r.promise})}getPinnedMessagesCount(e,t){return this.pinnedMessages[this.getPinnedMessagesKey(e,t)]?.count}getPinnedMessagesMaxId(e,t){return this.pinnedMessages[this.getPinnedMessagesKey(e,t)]?.maxId}updatePinnedMessage(e,t,r,s,a){return this.apiManager.invokeApi("messages.updatePinnedMessage",{peer:this.appPeersManager.getInputPeerById(e),unpin:r,silent:s,pm_oneside:a,id:getServerMessageId(t)}).then(n=>{this.apiUpdatesManager.processUpdateMessage(n)})}unpinAllMessages(e){return this.apiManager.invokeApiSingle("messages.unpinAllMessages",{peer:this.appPeersManager.getInputPeerById(e)}).then(t=>(this.apiUpdatesManager.processLocalUpdate({_:"updatePts",pts:t.pts,pts_count:t.pts_count}),t.offset?this.unpinAllMessages(e):(this.getHistoryMessagesStorage(e).forEach(s=>{s.pFlags.pinned&&delete s.pFlags.pinned}),this.rootScope.dispatchEvent("peer_pinned_messages",{peerId:e,unpinAll:!0}),delete this.pinnedMessages[this.getPinnedMessagesKey(e)],!0)))}getGroupedText(e){const t=this.groupedMessagesStorage[e];return getGroupedText(Array.from(t.values()))}getGroupsFirstMessage(e){if(!e?.grouped_id)return e;const t=this.groupedMessagesStorage[e.grouped_id];let r=Number.MAX_SAFE_INTEGER;for(const[s,a]of t)a.mid<r&&(r=a.mid);return this.getMessageFromStorage(t,r)}getMidsByGroupedId(e,t="asc"){return getObjectKeysAndSort(this.groupedMessagesStorage[e],t)}getMessagesByGroupedId(e){const t=this.getMidsByGroupedId(e,"asc"),r=this.groupedMessagesStorage[e];return t.map(s=>this.getMessageFromStorage(r,s))}getMidsByMessage(e){return e?e.grouped_id?this.getMidsByGroupedId(e.grouped_id):[e.mid]:[]}filterMessages(e,t){const r=[];if(e.grouped_id){const s=this.groupedMessagesStorage[e.grouped_id];for(const[a,n]of s)t(n)&&r.push(n)}else t(e)&&r.push(e);return r}generateTempMessageId(e,t){if(!t){const n=this.getDialogOnly(e),o=this.historiesStorage[e];t=(n?.top_message??o?.maxId)||0}const r=this.tempMids[e];r&&r>t&&(t=r);const s=this.appPeersManager.isChannel(e)?e.toChatId():void 0,a=this.appMessagesIdsManager.generateTempMessageId(t,s);return(!r||a>r)&&(this.tempMids[e]=a),a}setMessageUnreadByDialog(e,t=this.getDialogOnly(e.peerId)){isSavedDialog(t)||t&&e.mid&&e.mid>t[e.pFlags.out?"read_outbox_max_id":"read_inbox_max_id"]&&(e.pFlags.unread=!0)}saveMessage(e,t={}){var S,A;if(!e||e._==="messageEmpty")return;e.pFlags??(e.pFlags={});const r=!!e.peerId,s=this.getMessagePeer(e),a=t.storage||this.getHistoryMessagesStorage(s),n=e.peer_id._==="peerChannel",o=n&&this.appChatsManager.isBroadcast(s.toChatId()),p=e._==="message",c=n?s.toChatId():void 0;t.isOutgoing&&(e.pFlags.is_outgoing=!0);const f=this.appMessagesIdsManager.generateMessageId(e.id,c);if(e.mid=f,p){if(t.isScheduled&&(e.pFlags.is_scheduled=!0),e.grouped_id){const k=(S=this.groupedMessagesStorage)[A=e.grouped_id]??(S[A]=this.createMessageStorage(s,"grouped"));this.setMessageToStorage(k,e)}e.via_bot_id&&(e.viaBotId=e.via_bot_id)}const l={type:"message",peerId:s,messageId:f},u=e.reply_to;if(u&&u._==="messageReplyHeader"){const k=u.reply_to_peer_id?.channel_id||c;u.reply_to_msg_id&&(u.reply_to_msg_id=e.reply_to_mid=this.appMessagesIdsManager.generateMessageId(u.reply_to_msg_id,k)),u.reply_to_top_id&&(u.reply_to_top_id=this.appMessagesIdsManager.generateMessageId(u.reply_to_top_id,k)),this.saveMessageMedia(u,l,t.isScheduled)}const g=p&&e.replies;g&&(g.max_id&&(g.max_id=this.appMessagesIdsManager.generateMessageId(g.max_id,g.channel_id)),g.read_max_id&&(g.read_max_id=this.appMessagesIdsManager.generateMessageId(g.read_max_id,g.channel_id))),r||(e.date-=this.timeManager.getServerTimeOffset());const y=this.appPeersManager.peerId,b=p&&e.fwd_from;if(e.peerId=s,s===y){if(p&&!e.saved_peer_id){let T;b?b.saved_from_peer?e.saved_peer_id=b.saved_from_peer:b.from_id?T=y:b.from_name?T=HIDDEN_PEER_ID:T=y:T=y,e.saved_peer_id||(e.saved_peer_id=this.appPeersManager.getOutputPeer(T))}const k=b?.saved_from_id||b?.from_id;e.fromId=b?k&&!getFwdFromName(b)?this.appPeersManager.getPeerId(k):NULL_PEER_ID:y}else e.fromId=e.pFlags.post||!e.from_id?s:this.appPeersManager.getPeerId(e.from_id);if(this.setMessageUnreadByDialog(e),b){b.saved_from_msg_id&&(b.saved_from_msg_id=this.appMessagesIdsManager.generateMessageId(b.saved_from_msg_id,b.saved_from_peer.channel_id)),b.channel_post&&(b.channel_post=this.appMessagesIdsManager.generateMessageId(b.channel_post,b.from_id.channel_id));const k=b.saved_from_peer||b.from_id,T=b.saved_from_msg_id||b.channel_post;if(k&&T){const O=this.appPeersManager.getPeerId(k),$=this.appMessagesIdsManager.generateMessageId(T,k.channel_id);e.savedFrom=O+"_"+$}e.fwdFromId=this.appPeersManager.getPeerId(b.from_id),r||(b.date-=this.timeManager.getServerTimeOffset())}const I=this.saveMessageMedia(e,l,t.isScheduled);if(p&&I&&(e.media={_:"messageMediaUnsupported"},e.message="",delete e.entities,delete e.totalEntities),!p&&e.action){const k=e.action,T=e.fromId===this.appUsersManager.getSelf().id?"You":"";let O,$;switch(k.photo&&(k.photo=this.appPhotosManager.savePhoto(k.photo,l)),k.document&&(k.document=this.appDocsManager.saveDoc(k.photo,l)),k._){case"messageActionChatEditPhoto":k.photo?.video_sizes?k._=o?"messageActionChannelEditVideo":"messageActionChatEditVideo":o&&(k._="messageActionChannelEditPhoto");break;case"messageActionGroupCall":{this.appGroupCallsManager.saveGroupCall(k.call);let K;k.duration===void 0?K="started":K="ended",o||(K+="_by"+T),k.type=K;break}case"messageActionChatEditTitle":o&&(k._="messageActionChannelEditTitle");break;case"messageActionChatDeletePhoto":o&&(k._="messageActionChannelDeletePhoto");break;case"messageActionChatAddUser":k.users.length===1?(k.user_id=k.users[0],e.fromId===k.user_id&&(n?k._="messageActionChatJoined"+T:k._="messageActionChatReturn"+T)):k.users.length>1&&(k._="messageActionChatAddUsers");break;case"messageActionChatDeleteUser":e.fromId===k.user_id&&(k._="messageActionChatLeave"+T);break;case"messageActionChannelMigrateFrom":O=k.chat_id.toPeerId(!0),$=s;break;case"messageActionChatMigrateTo":O=s,$=k.channel_id.toPeerId(!0);break;case"messageActionHistoryClear":e.clear_history=!0,delete e.pFlags.out,delete e.pFlags.unread;break;case"messageActionPhoneCall":k.type=(k.pFlags.video?"video_":"")+(k.duration!==void 0?e.pFlags.out?"out_":"in_":"")+(k.duration!==void 0?"ok":k.reason._==="phoneCallDiscardReasonMissed"?"missed":"cancelled");break}O&&$&&!this.getMigration(O)&&this.migrateChecks(O,$)}return p&&e.message.length&&!e.totalEntities&&this.wrapMessageEntities(e),this.setMessageToStorage(a,e),e}saveMessages(e,t={}){return!e||e.saved||(e.saved=!0,e.forEach((r,s,a)=>{a[s]=this.saveMessage(r,t)})),e}saveMessageMedia(e,t,r){const s="media"in e?"media":"reply_media",a=e[s];if(!a)return;let n=!1;switch(a._){case"messageMediaEmpty":{delete e[s];break}case"messageMediaPhoto":{a.ttl_seconds?n=!0:a.photo=this.appPhotosManager.savePhoto(a.photo,t),a.photo||delete e[s];break}case"messageMediaPoll":{const o=this.appPollsManager.savePoll(a.poll,a.results,e.peerId&&e);a.poll=o.poll,a.results=o.results;break}case"messageMediaDocument":{if(a.ttl_seconds)n=!0;else{const o=a.document;a.document=this.appDocsManager.saveDoc(o,t),a.alt_document&&(a.alt_document=this.appDocsManager.saveDoc(a.alt_document,t)),!a.document&&o._!=="documentEmpty"&&(n=!0)}break}case"messageMediaWebPage":{const o=e.peerId?this.appWebPagesManager.getMessageKeyForPendingWebPage(e.peerId,e.mid,r):void 0;a.webpage=this.appWebPagesManager.saveWebPage(a.webpage,o,t),a.webpage||delete e[s];break}case"messageMediaInvoice":{a.photo=this.appWebDocsManager.saveWebDocument(a.photo);const o=a.extended_media;if(o?._==="messageExtendedMedia"){const p=o.media;p.photo=this.appPhotosManager.savePhoto(p.photo,t),p.document=this.appDocsManager.saveDoc(p.document,t)}break}case"messageMediaStory":{const o=this.appStoriesManager.getPeerStoriesCache(this.appPeersManager.getPeerId(a.peer));a.story=this.appStoriesManager.saveStoryItems([a.story],o)[0];break}case"messageMediaGiveawayResults":{a.launch_msg_id=this.appMessagesIdsManager.generateMessageId(a.launch_msg_id,a.channel_id);break}case"messageMediaUnsupported":{n=!0;break}}return n}saveApiResult(e){this.appPeersManager.saveApiPeers(e),this.saveMessages(e.messages)}async getFirstMessageToEdit(e,t){const s=this.getHistoryStorage(e,t).history.slice;if(s.isEnd(SliceEnd.Bottom)&&s.length){let a;const n=this.appPeersManager.peerId;for(const o of s){const p=this.getMessageByPeer(e,o);if((n===e?p.fromId===n:p.pFlags.out)&&await this.canEditMessage(p,"text")){a=p;break}}return a}}wrapMessageEntities(e){if("message"in e){const{message:t,totalEntities:r}=wrapMessageEntities(e.message,e.entities);e.message=t,e.totalEntities=r}else{const{message:t,totalEntities:r}=wrapMessageEntities(e.text,e.entities);e.text=t,e.entities=r}}reportMessages(e,t,r,s){return this.apiManager.invokeApiSingle("messages.report",{peer:this.appPeersManager.getInputPeerById(e),id:t.map(a=>getServerMessageId(a)),reason:{_:r},message:s})}async unblockBot(e){await this.appProfileManager.isUserBlocked(e)&&await this.appUsersManager.toggleBlock(e.toPeerId(!1),!1)}async startBot(e,t,r){const s=t?t.toPeerId(!0):e.toPeerId();if(t||await this.unblockBot(e),r){const n=randomLong();return this.apiManager.invokeApi("messages.startBot",{bot:this.appUsersManager.getUserInput(e),peer:this.appPeersManager.getInputPeerById(s),random_id:n,start_param:r}).then(o=>{this.apiUpdatesManager.processUpdateMessage(o)})}const a="/start";if(t){let n;return this.appChatsManager.isChannel(t)?n=this.appChatsManager.inviteToChannel(t,[e]):n=this.appChatsManager.addChatUser(t,e,0),n.catch(o=>{if(o?.type=="USER_ALREADY_PARTICIPANT"){o.handled=!0;return}throw o}).then(()=>this.sendText({peerId:s,text:a+"@"+this.appPeersManager.getPeerUsername(e.toPeerId())}))}return this.sendText({peerId:s,text:a})}editPeerFolders(e,t){this.apiManager.invokeApi("folders.editPeerFolders",{folder_peers:e.map(r=>({_:"inputFolderPeer",peer:this.appPeersManager.getInputPeerById(r),folder_id:t}))}).then(r=>{const s=e[0];e.length===1&&t===FOLDER_ID_ALL&&this.appProfileManager.refreshPeerSettingsIfNeeded(s),this.apiUpdatesManager.processUpdateMessage(r)})}getFilter(e){return this.filtersStorage.getFilter(e)}async toggleDialogPin(e){let{peerId:t,topicOrSavedId:r,filterId:s}=e;if(s!==void 0&&!REAL_FOLDERS.has(s))return this.filtersStorage.toggleDialogPin(t,s);const a=this.dialogsStorage.getAnyDialog(t,r);if(!a)throw void 0;const n=isSavedDialog(a),o=isForumTopic(a),p=isDialog(a);s??(s=this.dialogsStorage.getDialogFilterId(a));const c=a.pFlags?.pinned?void 0:!0;if(c){let l;n?l="savedPin":o?l="topicPin":l=s===FOLDER_ID_ARCHIVE?"folderPin":"pin";const u=await this.apiManager.getLimit(l);if(this.dialogsStorage.getPinnedOrders(s).length>=u)throw makeError(p?"PINNED_DIALOGS_TOO_MUCH":"PINNED_TOO_MUCH")}if(o)return this.appChatsManager.updatePinnedForumTopic(t.toChatId(),r,c);let f;return n?f=this.apiManager.invokeApi("messages.toggleSavedDialogPin",{peer:this.appPeersManager.getInputDialogPeerById(r),pinned:c}):f=this.apiManager.invokeApi("messages.toggleDialogPin",{peer:this.appPeersManager.getInputDialogPeerById(t),pinned:c}),f.then(()=>{const l=c?{pinned:c}:{},u=this.appPeersManager.getDialogPeer(n?r:t);this.apiUpdatesManager.saveUpdate(n?{_:"updateSavedDialogPinned",peer:u,pFlags:l}:{_:"updateDialogPinned",peer:u,folder_id:s,pFlags:l})})}async markDialogUnread(e,t){const r=this.getDialogOnly(e);if(!r)return Promise.reject();if(this.appPeersManager.isForum(e)&&!r.pFlags.view_forum_as_messages&&(t||await this.dialogsStorage.getForumUnreadCount(e))){const a=this.dialogsStorage.getFolder(e);for(const n of a.unreadPeerIds){const o=this.dialogsStorage.getForumTopic(e,n);this.readHistory(e,o.top_message,n,!0)}return}const s=t||r.pFlags?.unread_mark?void 0:!0;if(!s&&r.unread_count){const a=this.readHistory(e,r.top_message,void 0,!0);if(!r.pFlags.unread_mark)return a}return this.apiManager.invokeApi("messages.markDialogUnread",{peer:this.appPeersManager.getInputDialogPeerById(e),unread:s}).then(()=>{const a=s?{unread:s}:{};this.onUpdateDialogUnreadMark({_:"updateDialogUnreadMark",peer:this.appPeersManager.getDialogPeer(e),pFlags:a})})}migrateChecks(e,t){if(!this.getMigration(e)&&this.appChatsManager.hasChat(t.toChatId())){const r=this.appChatsManager.getChat(e.toChatId());r?.migrated_to&&r.migrated_to.channel_id===t.toChatId()&&(this.migratedFromTo[e]=t,this.migratedToFrom[t]=e,this.rootScope.dispatchEvent("dialog_migrate",{migrateFrom:e,migrateTo:t}),this.dialogsStorage.dropDialogWithEvent(e))}}canMessageBeEdited(e,t){if(e?.pFlags?.is_outgoing)return!1;const r=["messageMediaPhoto","messageMediaDocument","messageMediaWebPage"];return t==="poll"&&r.push("messageMediaPoll"),!(!e||e._!=="message"||e.fwd_from||e.via_bot_id||e.media&&r.indexOf(e.media._)===-1||e.fromId&&this.appUsersManager.isBot(e.fromId)||e.media?._==="messageMediaDocument"&&(e.media.document.sticker||e.media.document.type==="round"))}async canEditMessage(e,t="text"){if(!e||!this.canMessageBeEdited(e,t))return!1;if(this.getMessagePeer(e)===this.appUsersManager.getSelf().id)return!0;const{peerId:r}=e;return!(!(this.appPeersManager.isBroadcast(r)?this.appChatsManager.hasRights(r.toChatId(),"edit_messages"):(r.isAnyChat()&&t==="text"?!this.getMigration(e.peerId)?.next&&(this.appChatsManager.hasRights(r.toChatId(),"send_plain")||this.appChatsManager.hasRights(r.toChatId(),"send_media")):!0)&&e.pFlags.out)||e.peer_id._!=="peerChannel"&&e.date<tsNow(!0)-(await this.apiManager.getConfig()).edit_time_limit&&e.media?._!=="messageMediaPoll")}canDeleteMessage(e){return e&&(e.peerId.isUser()||e.pFlags.out||this.appChatsManager.getChat(e.peerId.toChatId())._==="chat"||this.appChatsManager.hasRights(e.peerId.toChatId(),"delete_messages"))&&(!e.pFlags.is_outgoing||!!e.error)}getReplyKeyboard(e){return this.getHistoryStorage(e).replyMarkup}mergeReplyKeyboard(e,t){if(!t)return!1;const r=t.reply_markup;if(!r&&!t.pFlags?.out&&!t.action||r?._==="replyInlineMarkup")return!1;const s=e.replyMarkup;if(r)return s&&s.mid>=t.mid||r.pFlags.selective?!1:(e.maxOutId&&t.mid<e.maxOutId&&r.pFlags.single_use&&(r.pFlags.hidden=!0),r.mid=t.mid,r._!=="replyKeyboardHide"&&(r.fromId=this.appPeersManager.getPeerId(t.from_id||t.peer_id)),e.replyMarkup=r,!0);if(t.pFlags.out)if(s){if(s.pFlags.single_use&&!s.pFlags.hidden&&(t.mid>s.mid||t.pFlags.is_outgoing)&&t.message)return s.pFlags.hidden=!0,!0}else(!e.maxOutId||t.mid>e.maxOutId)&&(e.maxOutId=t.mid);return t.action?._==="messageActionChatDeleteUser"&&(s?t.action.user_id===s.fromId:this.appUsersManager.isBot(t.action.user_id))?(e.replyMarkup={_:"replyKeyboardHide",mid:t.mid,pFlags:{}},!0):!1}getReferenceContext(e,t,r){const s=e+"_"+t;let a=this.references[s];return!a&&!r&&(a=this.references[s]={}),a}getReferenceContextByMessage(e,t){return this.getReferenceContext(e.peerId,e.mid,t)}getSearchStorage(e){var a,n,o,p,c;const t={...e,type:"search"};if(getSearchType(e)==="uncached")return this.createHistoryStorage(t);const r=getSearchStorageFilterKey(t),s=(c=(o=(a=this.searchesStorage)[n=e.peerId]??(a[n]={}))[p=e.threadId]??(o[p]={}))[r]??(c[r]=this.createHistoryStorage(t));return s.originalInsertSlice||(s.originalInsertSlice=s.history.insertSlice.bind(s.history),s.history.insertSlice=(...f)=>{const l=s.originalInsertSlice(...f);return l&&f[0].forEach(u=>{s.onMidInsertion(u)}),l},s.filterMessages=f=>filterMessagesByInputFilter({inputFilter:e.inputFilter._,limit:f.length,messages:f,savedReaction:e.savedReaction}),s.filterMessage=f=>!!s.filterMessages([f]).length,s.onMidInsertion=f=>{const l=this.getReferenceContext(e.peerId,f);(l.searchStorages??(l.searchStorages=new Set)).add(s)}),s}getSearchCounters(e,t,r=!0,s){if(e=this.appPeersManager.getPeerMigratedTo(e)||e,this.appPeersManager.isPeerRestricted(e))return Promise.resolve(t.map(f=>({_:"messages.searchCounter",pFlags:{},filter:f,count:0})));const a=this.getHistoryType(e,s),n=this.getMigration(e),o="messages.getSearchCounters",p=(r?this.apiManager.invokeApiCacheable:this.apiManager.invokeApi).bind(this.apiManager),c=p(o,{peer:this.appPeersManager.getInputPeerById(e),filters:t,top_msg_id:s&&a!==3?getServerMessageId(s):void 0,saved_peer_id:a===3?this.appPeersManager.getInputPeerById(s):void 0},{cacheSeconds:6e4});if(n){const f=p(o,{peer:this.appPeersManager.getInputPeerById(n.prev),filters:t});return Promise.all([c,f]).then(([l,u])=>l.map((y,b)=>({...y,count:y.count+u[b].count})))}return c}filterMessagesByInputFilterFromStorage(e,t,r,s){const a=this.getMessagesStorage(r);return filterMessagesByInputFilter({inputFilter:e,messages:t.map(n=>a.get(n)),limit:s})}subscribeRepliesThread(e,t){const r=e+"_"+t;for(const s in this.threadsToReplies)if(this.threadsToReplies[s]===r)return;this.getDiscussionMessage(e,t)}generateThreadServiceStartMessage(e){const{peerId:t,mid:r}=e,s=t+"_"+r,a=this.threadsServiceMessagesIdsStorage[s];if(a)return a;const n=Math.max(...this.getMidsByMessage(e)),o={_:"messageService",pFlags:{is_single:!0},id:this.generateTempMessageId(t,n),date:e.date,from_id:{_:"peerUser",user_id:NULL_PEER_ID},peer_id:e.peer_id,action:{_:"messageActionDiscussionStarted"},reply_to:this.generateReplyHeader(t,this.getInputReplyTo({replyToMsgId:r,threadId:r}))};return this.saveMessages([o],{isOutgoing:!0}),this.threadsServiceMessagesIdsStorage[s]=o.mid}getThreadServiceMessageId(e,t){return this.threadsServiceMessagesIdsStorage[e+"_"+t]}getDiscussionMessage(e,t){return this.apiManager.invokeApiSingle("messages.getDiscussionMessage",{peer:this.appPeersManager.getInputPeerById(e),msg_id:getServerMessageId(t)}).then(r=>{this.saveApiResult(r);const s=this.getMessageWithReplies(r.messages[0]),a=s.peerId+"_"+s.mid,n=s.peerId.toChatId();this.log("got discussion message",e,t,r,s.peerId,s.mid);const o=this.getHistoryStorage(s.peerId,s.mid),p=r.max_id=this.appMessagesIdsManager.generateMessageId(r.max_id,n)||0;r.read_inbox_max_id=o.readMaxId=this.appMessagesIdsManager.generateMessageId(r.read_inbox_max_id??s.mid,n),r.read_outbox_max_id=o.readOutboxMaxId=this.appMessagesIdsManager.generateMessageId(r.read_outbox_max_id,n)||0;const c=o.history.first;return o.maxId&&o.maxId<p&&c.isEnd(SliceEnd.Bottom)&&c.unsetEnd(SliceEnd.Bottom),o.maxId=p,this.threadsToReplies[a]=e+"_"+t,s})}handleNewMessage(e){this.rootScope.dispatchEvent("history_multiappend",e)}scheduleHandleNewDialogs(e,t){if(e!==void 0){let r=this.newDialogsToHandle.get(e);r||this.newDialogsToHandle.set(e,r={});const s=typeof t=="object";if(!t||s&&isDialog(t))r.dialog=t;else{const a=s?getDialogKey(t):t,n=this.getHistoryType(e,a)===3?r.saved??(r.saved=new Map):r.topics??(r.topics=new Map);s?n.set(a,t):n.set(a,void 0)}}return this.newDialogsHandlePromise??(this.newDialogsHandlePromise=pause(0).then(()=>{this.newDialogsHandlePromise=void 0,this.handleNewDialogs()}))}async deleteMessagesInner(e,t,r,s){let a;if(e&&!s){const f=this.appChatsManager.getChat(e);if(!f.pFlags.creator&&!f.admin_rights?.pFlags?.delete_messages&&(t=t.filter(l=>!!this.getMessageByPeer(e.toPeerId(!0),l).pFlags.out),!t.length))return}const n=await this.apiManager.getConfig(),o=t.splice(n.forwarded_count_max,t.length-n.forwarded_count_max),p=t.map(f=>{const l=getServerMessageId(f);return this.appMessagesIdsManager.generateMessageId(l,e)===f&&l}).filter(Boolean);e?a=this.apiManager.invokeApi("channels.deleteMessages",{channel:this.appChatsManager.getChannelInput(e),id:p}).then(f=>{this.apiUpdatesManager.processLocalUpdate({_:"updateDeleteChannelMessages",channel_id:e,messages:t,pts:f.pts,pts_count:f.pts_count})}):a=this.apiManager.invokeApi("messages.deleteMessages",{revoke:r,id:p}).then(f=>{this.apiUpdatesManager.processLocalUpdate({_:"updateDeleteMessages",messages:t,pts:f.pts,pts_count:f.pts_count})});const c=[a];return o.length&&c.push(this.deleteMessagesInner(e,o,r,!0)),Promise.all(c).then(noop$2)}deleteMessages(e,t,r){const s=this.appPeersManager.isChannel(e)?e.toChatId():void 0,n=this.appMessagesIdsManager.splitMessageIdsByChannels(t,s).map(([o,{mids:p}])=>this.deleteMessagesInner(o,p,r));return Promise.all(n).then(noop$2)}readHistory(e,t=0,r,s=!1){if(this.log("readHistory:",e,t,r),!this.getReadMaxIdIfUnread(e,r)){if(r&&!s){const p=this.dialogsStorage.getForumTopic(e,r);p&&!getServerMessageId(p.read_inbox_max_id)&&(s=!0)}if(!s){const p=this.appChatsManager.isForum(e.toChatId())&&r?this.dialogsStorage.getForumTopic(e,r):this.getDialogOnly(e);p&&this.isDialogUnread(p)&&(s=!0)}if(!s)return this.log("readHistory: isn't unread"),Promise.resolve()}const n=this.getHistoryStorage(e,r);if(n.triedToReadMaxId>=t)return Promise.resolve();let o;return r?(n.readPromise||(o=this.apiManager.invokeApi("messages.readDiscussion",{peer:this.appPeersManager.getInputPeerById(e),msg_id:getServerMessageId(r),read_max_id:getServerMessageId(t)})),this.apiUpdatesManager.processLocalUpdate({_:"updateReadChannelDiscussionInbox",channel_id:e.toChatId(),top_msg_id:r,read_max_id:t})):this.appPeersManager.isChannel(e)?(n.readPromise||(o=this.apiManager.invokeApi("channels.readHistory",{channel:this.appChatsManager.getChannelInput(e.toChatId()),max_id:getServerMessageId(t)})),this.apiUpdatesManager.processLocalUpdate({_:"updateReadChannelInbox",max_id:t,channel_id:e.toChatId(),still_unread_count:void 0,pts:void 0})):(n.readPromise||(o=this.apiManager.invokeApi("messages.readHistory",{peer:this.appPeersManager.getInputPeerById(e),max_id:getServerMessageId(t)}).then(p=>{this.apiUpdatesManager.processLocalUpdate({_:"updatePts",pts:p.pts,pts_count:p.pts_count})})),this.apiUpdatesManager.processLocalUpdate({_:"updateReadHistoryInbox",max_id:t,peer:this.appPeersManager.getOutputPeer(e),still_unread_count:void 0,pts:void 0,pts_count:void 0})),this.rootScope.dispatchEvent("notification_reset",this.appPeersManager.getPeerString(e)),n.readPromise?n.readPromise:(n.triedToReadMaxId=t,o.finally(()=>{delete n.readPromise;const{readMaxId:p}=n;this.log("readHistory: promise finally",t,p),p>t&&this.readHistory(e,p,r,!0)}),n.readPromise=o)}readAllHistory(e,t,r=!1){const s=this.getHistoryStorage(e,t);s.maxId&&this.readHistory(e,s.maxId,t,r)}getUnreadMentionsKey({peerId:e,threadId:t,isReaction:r}){return e+(t?`_${t}`:"")+(r?"_reaction":"")}getDialogUnreadMentions(e,t){return e&&(t?e.unread_reactions_count:e.unread_mentions_count)}fixDialogUnreadMentionsIfNoMessage({peerId:e,threadId:t,isReaction:r,force:s}){const a=this.dialogsStorage.getAnyDialog(e,t);(s||this.getDialogUnreadMentions(a,r))&&this.reloadConversationOrTopic(e)}modifyCachedMentions(e){const{mid:t,add:r}=e,s=this.unreadMentions[this.getUnreadMentionsKey(e)];s&&(r?s.first.isEnd(SliceEnd.Top)&&s.insertSlice([t]):t?s.delete(t):(s.slices.splice(1,1/0),s.first.length=0,s.first.setEnd(SliceEnd.Both)))}modifyCachedMentionsAndSave(e){const t=this.dialogsStorage.getAnyDialog(e.peerId,e.threadId);if(!t)return;const r=this.dialogsStorage.prepareDialogUnreadCountModifying(t);[[e.addMention,"unread_mentions_count"],[e.addReaction,"unread_reactions_count"]].forEach(([a,n])=>{a!==void 0&&(a?t[n]+=+a:t[n]=Math.max(0,t[n]-Math.max(1,+a)),this.modifyCachedMentions({...e,threadId:isForumTopic(t)?e.threadId:void 0,isReaction:n==="unread_reactions_count",add:!!a}))}),r(),this.rootScope.dispatchEvent("dialog_unread",{peerId:e.peerId,dialog:t}),this.dialogsStorage.setDialogToState(t)}fixUnreadMentionsCountIfNeeded({peerId:e,threadId:t,slicedArray:r,isReaction:s}){const a=this.dialogsStorage.getAnyDialog(e,t);!r.length&&this.getDialogUnreadMentions(a,s)&&this.reloadConversationOrTopic(e)}goToNextMention(e){var p;const t=this.getUnreadMentionsKey(e),r=this.goToNextMentionPromises[t];if(r)return r;const s=(p=this.unreadMentions)[t]??(p[t]=new SlicedArray),a=s.length,n=s.first.isEnd(SliceEnd.Top);if(!a&&n)return this.fixUnreadMentionsCountIfNeeded({...e,slicedArray:s}),Promise.resolve();let o=Promise.resolve();return!n&&a<25&&(o=this.loadNextMentions(e)),this.goToNextMentionPromises[t]=o.then(()=>{const c=s.last,f=c&&c[c.length-1];if(f)return s.delete(f),f;this.fixUnreadMentionsCountIfNeeded({...e,slicedArray:s})}).finally(()=>{delete this.goToNextMentionPromises[t]})}loadNextMentions(e){const{peerId:t}=e,r=this.unreadMentions[this.getUnreadMentionsKey(e)],s=r.first[0]||1,a=50,n=-a,o=a;return this.getUnreadMentions({...e,offsetId:s,addOffset:n,limit:o}).then(p=>{this.mergeHistoryResult({slicedArray:r,historyResult:p,offsetId:s===1?0:s,limit:o,addOffset:n,peerId:t})})}getUnreadMentions({peerId:e,offsetId:t,addOffset:r,limit:s,maxId:a=0,minId:n=0,threadId:o,isReaction:p}){return this.apiManager.invokeApiSingleProcess({method:p?"messages.getUnreadReactions":"messages.getUnreadMentions",params:{peer:this.appPeersManager.getInputPeerById(e),offset_id:getServerMessageId(t),add_offset:r,limit:s,max_id:getServerMessageId(a),min_id:getServerMessageId(n),top_msg_id:o?getServerMessageId(o):void 0},processResult:c=>(this.saveApiResult(c),c)})}readMessages(e,t){if(!t.length)return Promise.resolve();t=t.map(a=>getServerMessageId(a));let r,s;if(e.isAnyChat()&&this.appPeersManager.isChannel(e)){const a=e.toChatId();s={_:"updateChannelReadMessagesContents",channel_id:a,messages:t},r=this.apiManager.invokeApi("channels.readMessageContents",{channel:this.appChatsManager.getChannelInput(a),id:t})}else s={_:"updateReadMessagesContents",messages:t,pts:void 0,pts_count:void 0},r=this.apiManager.invokeApi("messages.readMessageContents",{id:t}).then(a=>{s.pts=a.pts,s.pts_count=a.pts_count,this.apiUpdatesManager.processLocalUpdate(s)});return this.apiUpdatesManager.processLocalUpdate(s),r}async readMentions(e,t,r){return this.apiManager.invokeApi(r?"messages.readReactions":"messages.readMentions",{peer:this.appPeersManager.getInputPeerById(e),top_msg_id:t?getServerMessageId(t):void 0}).then(s=>{if(this.apiUpdatesManager.processLocalUpdate({_:"updatePts",pts:s.pts,pts_count:s.pts_count}),!s.offset){const a=this.dialogsStorage.getAnyDialog(e,t);return this.modifyCachedMentionsAndSave({peerId:e,threadId:t,mid:void 0,...r?{addReaction:-a.unread_reactions_count}:{addMention:-a.unread_mentions_count}}),!0}return this.readMentions(e,t,r)})}toggleHistoryMaxIdSubscription(e,t){if(!e)return;const r=this.historyMaxIdSubscribed.get(e)||0;t?this.historyMaxIdSubscribed.set(e,r+1):r===1?this.historyMaxIdSubscribed.delete(e):this.historyMaxIdSubscribed.set(e,r-1)}getDetailsForChannelJoinedService(e,t,r){if(e.isUser()||t.channelJoinedMid)return;const s=e.toChatId(),a=this.appChatsManager.getChat(s),n=a?.date;if(!n||!this.appChatsManager.isInChat(s)||!a.pFlags.broadcast)return;const o=r?[r]:t.history.slices;for(const p of o){let c,f;for(const g of p){const y=this.getMessageByPeer(e,g);if(!y){this.log.error("no message from historyStorage?",e,t,p,g);debugger;continue}if(y.date>=n)c=y;else{f=y;break}}const l=c||p.isEnd(SliceEnd.Bottom),u=f||p.isEnd(SliceEnd.Top);if(l&&u)return{date:n,slice:p,newerMessage:c,olderMessage:f}}}insertChannelJoinedService(e,t,r){const s=this.getDetailsForChannelJoinedService(e,t,r);if(!s)return!1;const{date:a,slice:n,newerMessage:o,olderMessage:p}=s,c=this.generateTempMessageId(e,p?.mid||o.mid-1);this.log("will insert channel joined",e,c,o?.mid,p?.mid,n);const f={_:"messageService",pFlags:{is_single:!0,out:!0},id:c,date:a,from_id:{_:"peerUser",user_id:NULL_PEER_ID},peer_id:this.appPeersManager.getOutputPeer(e),action:{_:"messageActionChannelJoined"}};this.saveMessages([f],{isOutgoing:!0}),insertInDescendSortedArray(n,c),t.maxId=Math.max(t.maxId,f.mid),t.channelJoinedMid=f.mid,t.originalInsertSlice&&(t.history.insertSlice=t.originalInsertSlice,delete t.originalInsertSlice);const l=this.getDialogOnly(e);return l&&l.top_message<f.mid&&this.setDialogTopMessage(f,l),this.handleNewMessage(f),!0}processNewHistoryStorage(e,t){return this.appPeersManager.isBroadcast(e)&&!t.originalInsertSlice&&(t.originalInsertSlice=t.history.insertSlice.bind(t.history),t.history.insertSlice=(...r)=>{const s=t.originalInsertSlice(...r);return s&&this.insertChannelJoinedService(e,t,s),s}),t}createHistoryStorage(e){const t=this;return{history:new SlicedArray,type:e.type,key:getHistoryStorageKey(e),_maxId:void 0,_count:null,get count(){return this._count},set count(r){this._count=r,t.historyMaxIdSubscribed.has(this.key)&&t.rootScope.dispatchEvent("history_count",{historyKey:this.key,count:r})},get maxId(){const r=this._maxId;if(r)return r;const s=this.history.first;if(s.isEnd(SliceEnd.Bottom))return s[0]},set maxId(r){this._maxId=r}}}getHistoryStorage(e,t){var r,s,a;return t?(s=(r=this.threadsStorage)[e]??(r[e]={}))[t]??(s[t]=this.createHistoryStorage({type:"replies",peerId:e,threadId:t})):(a=this.historiesStorage)[e]??(a[e]=this.processNewHistoryStorage(e,this.createHistoryStorage({type:"history",peerId:e})))}getHistoryStorageTransferable(e){this.processRequestHistoryOptions(e);const t=e.historyStorage,{count:r,history:s,maxId:a,readMaxId:n,readOutboxMaxId:o,maxOutId:p,replyMarkup:c}=t;return{count:r,history:void 0,historySerialized:s.toJSON(),maxId:a,readMaxId:n,readOutboxMaxId:o,maxOutId:p,replyMarkup:c}}getNotifyPeerSettings(e,t){const r=this.appPeersManager.getInputNotifyPeerById({peerId:e,ignorePeerId:!0,threadId:t});return Promise.all([this.appNotificationsManager.getNotifyPeerTypeSettings(),this.appNotificationsManager.getNotifySettings(r)]).then(([s,a])=>({muted:this.appNotificationsManager.isPeerLocalMuted({peerId:e,respectType:!0,threadId:t}),peerTypeNotifySettings:a}))}getUpdateAfterReloadKey(e,t){return e+(t?"_"+t:"")}handleNewUpdateAfterReload(e,t,r){var a,n;const s=(a=this.newUpdatesAfterReloadToHandle)[n=this.getUpdateAfterReloadKey(e,r)]??(a[n]=new Set);if(s.has(t)){this.log.error("here we go again",e);return}t.ignoreExisting=!0,s.add(t),this.scheduleHandleNewDialogs(e,r)}updateSlowModeOnNewMessage(e){const{peerId:t}=e;if(e.pFlags.out&&!t.isUser()){const r=t.toChatId();this.appProfileManager.modifyCachedFullChat(r,s=>{const a=this.appChatsManager.getChat(r);if(!(s.slowmode_seconds&&!a.admin_rights))return!1;s.slowmode_next_send_date=e.date+s.slowmode_seconds})}}hasOutgoingMessage(e){for(const t in this.pendingByRandomId)if(this.pendingByRandomId[t].peerId===e)return!0;return!1}setDialogToStateIfMessageIsTop(e){this.isMessageIsTopMessage(e)&&this.dialogsStorage.setDialogToState(this.getDialogOnly(e.peerId))}isMessageIsTopMessage(e){const t=this.getDialogOnly(e.peerId);return t&&t.top_message===e.mid}updateMessageRepliesIfNeeded(e){try{const t=this.getThreadKey(e);if(t){const r=this.threadsToReplies[t];if(r){const[s,a]=r.split("_");this.updateMessage(s.toPeerId(),+a,"replies_updated")}}}catch(t){this.log.error("incrementMessageReplies err",t,e)}}getThreadKey(e){let t="";const r=e?.peerId;if(!r)return t;if(r.isAnyChat()||e.saved_peer_id){const s=getMessageThreadId(e,this.appChatsManager.isForum(r.toChatId()));s&&(t=r+"_"+s)}return t}updateMessage(e,t,r){return this.reloadMessages(e,t,!0).then(()=>{const a=this.getMessageByPeer(e,t);if(a)return r&&this.rootScope.dispatchEvent(r,a),a})}checkPendingMessage(e){const t=this.pendingByMessageId[e.mid];let r;if(t){const s=this.pendingByRandomId[t];(r=this.finalizePendingMessage(t,e))&&this.rootScope.dispatchEvent("history_update",{storageKey:s.storage.key,message:e,sequential:s.sequential}),delete this.pendingByMessageId[e.mid]}return r}mutePeer(e){if(!(e=this.appNotificationsManager.validatePeerSettings(e)))return;const{peerId:t,muteUntil:r,threadId:s}=e,a={_:"inputPeerNotifySettings"};a.mute_until=r;const n=this.appPeersManager.getInputPeerById(t);return this.appNotificationsManager.updateNotifySettings(s?{_:"inputNotifyForumTopic",peer:n,top_msg_id:getServerMessageId(s)}:{_:"inputNotifyPeer",peer:n},a)}togglePeerMute({peerId:e,mute:t,threadId:r}){return t===void 0&&(t=!this.appNotificationsManager.isPeerLocalMuted({peerId:e,respectType:!1,threadId:r})),this.mutePeer({peerId:e,muteUntil:t?MUTE_UNTIL:0,threadId:r})}findPeerIdByMids(e){for(let t=e.length,r=t-1;r>=0;--r){const s=e[r],a=this.getMessageById(s);if(a)return a.peerId}}canSendToPeer(e,t,r="send_messages"){if(this.appPeersManager.isPeerRestricted(e))return!1;if(e.isAnyChat()){const s=e.toChatId();if(t){const a=this.dialogsStorage.getForumTopic(e,t);if(a?.pFlags?.closed&&!this.dialogsStorage.canManageTopic(a))return!1}return this.appChatsManager.hasRights(s,r,void 0,!!t)}else return this.appUsersManager.canSendToUser(e)}finalizePendingMessage(e,t){const r=this.pendingByRandomId[e];if(!r)return;const{peerId:s,tempId:a,threadId:n,storage:o}=r;[this.getHistoryStorage(s),n?this.getHistoryStorage(s,n):void 0].filter(Boolean).forEach(c=>{c.history.delete(a)});const p=this.getMessageFromStorage(o,a);return p&&(this.updateMessageContextForDeletion(p,!0,t.mid),delete t.pFlags.is_outgoing,delete t.pending,delete t.error,delete t.random_id,delete t.send),this.rootScope.dispatchEvent("messages_pending"),delete this.pendingByRandomId[e],this.finalizePendingMessageCallbacks(o,a,t),p}finalizePendingMessageCallbacks(e,t,r){const s=this.tempFinalizeCallbacks[t];if(s!==void 0){for(const n in s){const{deferred:o,callback:p}=s[n];p(r).then(o.resolve.bind(o),o.reject.bind(o))}delete this.tempFinalizeCallbacks[t]}if(r.media){const{photo:n,document:o}=r.media;if(n){const p=this.appPhotosManager.getPhoto(""+t);if(p){const c=n.sizes[n.sizes.length-1],f=this.thumbsStorage.getCacheContext(p,THUMB_TYPE_FULL);this.thumbsStorage.setCacheContextURL(n,c.type,f.url,f.downloaded)}}else if(o){const p=this.appDocsManager.getDoc(""+t);if(p){const c=this.thumbsStorage.getCacheContext(p);p.type&&p.type!=="sticker"&&p.mime_type!=="image/gif"&&c.url&&this.thumbsStorage.setCacheContextURL(o,void 0,c.url,c.downloaded)}}else r.media.poll&&(delete this.appPollsManager.polls[t],delete this.appPollsManager.results[t])}const a=this.getMessageFromStorage(e,t);this.deleteMessageFromStorage(e,t),!a.reply_markup&&r.reply_markup&&setTimeout(()=>{this.getMessageFromStorage(e,r.mid)&&this.rootScope.dispatchEvent("message_edit",{storageKey:e.key,peerId:r.peerId,mid:r.mid,message:r})},0),this.handleReleasingMessage(a,e),this.onMessageModification(r,e),this.rootScope.dispatchEvent("message_sent",{storageKey:e.key,tempId:t,tempMessage:a,mid:r.mid,message:r})}incrementMaxSeenId(e){if(!e||!(!this.maxSeenId||e>this.maxSeenId))return!1;this.maxSeenId=e,this.appStateManager.pushToState("maxSeenMsgId",e),this.apiManager.invokeApi("messages.receivedMessages",{max_id:getServerMessageId(e)})}async getMessageReactionsListAndReadParticipants(e,t,r,s,a,n){const o={reactions:[],count:0,next_offset:void 0},p=await this.canViewMessageReadParticipants(e);return t??(t=p?100:50),Promise.all([p&&!r&&!a?this.getMessageReadParticipants(e.peerId,e.mid).catch(()=>[]):[],e.reactions?.recent_reactions?.length&&!n?this.appReactionsManager.getMessageReactionsList(e.peerId,e.mid,t,r,s).catch(c=>o):o]).then(([c,f])=>{const l=c.slice();forEachReverse(l,({user_id:g},y,b)=>{f.reactions.some(I=>this.appPeersManager.getPeerId(I.peer_id)===g.toPeerId())&&b.splice(y,1)});let u=f.reactions.map(g=>({peerId:this.appPeersManager.getPeerId(g.peer_id),reaction:g.reaction,date:g.date}));return u=u.concat(l.map(({user_id:g,date:y})=>({date:y,peerId:g.toPeerId()}))),{reactions:f.reactions,reactionsCount:f.count,readParticipantDates:c,combined:u,nextOffset:f.next_offset}})}getMessageReadParticipants(e,t){return this.apiManager.invokeApiSingle("messages.getMessageReadParticipants",{peer:this.appPeersManager.getInputPeerById(e),msg_id:getServerMessageId(t)}).then(r=>(r.forEach(s=>s.user_id=s.user_id.toUserId()),r))}getOutboxReadDate(e,t){return this.apiManager.invokeApiSingle("messages.getOutboxReadDate",{peer:this.appPeersManager.getInputPeerById(e),msg_id:getServerMessageId(t)})}async canViewMessageReadParticipants(e){if(e?._!=="message"||e.pFlags.is_outgoing||!e.pFlags.out||e.pFlags.unread||e.peerId===this.appPeersManager.peerId||this.appPeersManager.isBroadcast(e.peerId))return!1;const t=await this.apiManager.getAppConfig(),r=tsNow(!0)-e.date;if(e.peerId.isUser()){const a=await this.appProfileManager.getProfile(e.peerId.toUserId());return r<t.pm_read_date_expire_period&&!a.pFlags.read_dates_private}return this.appChatsManager.getChat(e.peerId.toChatId()).participants_count<=t.chat_read_mark_size_threshold&&r<t.chat_read_mark_expire_period}incrementMessageViews(e,t){if(t.length)return this.apiManager.invokeApiSingle("messages.getMessagesViews",{peer:this.appPeersManager.getInputPeerById(e),id:t.map(r=>getServerMessageId(r)),increment:!0}).then(r=>{this.appPeersManager.saveApiPeers(r);for(let s=0,a=t.length;s<a;++s)this.apiUpdatesManager.processLocalUpdate({_:"updateChannelMessageViews",channel_id:e.toChatId(),id:t[s],views:r.views[s].views})})}notifyAboutMessage(e,t={}){const r=this.getMessagePeer(e);if(this.appPeersManager.isPeerRestricted(r))return;const s=appTabsManager.getTabs();let a=s.find(o=>{const{chatPeerIds:p}=o.state;return p[p.length-1]===r});!a&&s.length&&(s.sort((o,p)=>o.state.idleStartTime-p.state.idleStartTime),a=s[0].state.idleStartTime?s[s.length-1]:s[0]),MTProtoMessagePort.getInstance().invokeVoid("notificationBuild",{message:e,...t},a?.source)}getScheduledMessagesStorage(e){var t;return(t=this.scheduledMessagesStorage)[e]??(t[e]=this.createMessageStorage(e,"scheduled"))}getScheduledMessageByPeer(e,t){return this.getMessageFromStorage(this.getScheduledMessagesStorage(e),t)}getScheduledMessages(e){if(!this.canSendToPeer(e))return;const t=this.getScheduledMessagesStorage(e);return t.size?[...t.keys()]:this.apiManager.invokeApiSingle("messages.getScheduledHistory",{peer:this.appPeersManager.getInputPeerById(e),hash:""}).then(r=>{if(r._!=="messages.messagesNotModified"){this.appUsersManager.saveApiUsers(r.users),this.appChatsManager.saveApiChats(r.chats);const s=this.getScheduledMessagesStorage(e);return this.saveMessages(r.messages,{storage:s,isScheduled:!0}),[...s.keys()]}return[]})}sendScheduledMessages(e,t){return this.apiManager.invokeApi("messages.sendScheduledMessages",{peer:this.appPeersManager.getInputPeerById(e),id:t.map(r=>getServerMessageId(r))}).then(r=>{this.apiUpdatesManager.processUpdateMessage(r)})}deleteScheduledMessages(e,t){return this.apiManager.invokeApi("messages.deleteScheduledMessages",{peer:this.appPeersManager.getInputPeerById(e),id:t.map(r=>getServerMessageId(r))}).then(r=>{this.apiUpdatesManager.processUpdateMessage(r)})}getMessageWithReplies(e){return getMainGroupedMessage(this.filterMessages(e,t=>!!t.replies))}getMessageWithCommentReplies(e){if(e.peerId!==REPLIES_PEER_ID){e=this.getMessageWithReplies(e);const t=e?.replies;if(!(t&&t.pFlags.comments&&t.channel_id.toChatId()!==REPLIES_HIDDEN_CHANNEL_ID))return}return e}isFetchIntervalNeeded(e){return e.isAnyChat()&&(!this.appChatsManager.isInChat(e.toChatId())||this.appChatsManager.isForum(e.toChatId()))}getMigration(e){const t=this.migratedFromTo[e],r=this.migratedToFrom[e];return t||r?{next:t,prev:r}:void 0}getHistoryType(e,t){return t?e.isUser()?3:this.appPeersManager.isForum(e)?2:1:0}processRequestHistoryOptions(e){return e.offsetId??(e.offsetId=0),e.historyType??(e.historyType=this.getHistoryType(e.peerId,e.threadId)),e.searchType??(e.searchType=getSearchType(e)),e.savedReaction&&(e.savedReaction=e.savedReaction.filter(Boolean),e.savedReaction.length?e.inputFilter??(e.inputFilter={_:"inputMessagesFilterEmpty"}):delete e.savedReaction),e.addOffset===void 0&&(e.addOffset=0,e.backLimit&&(e.addOffset=-e.backLimit,e.limit+=e.backLimit)),e.historyStorage??(e.historyStorage=e.searchType?this.getSearchStorage(e):this.getHistoryStorage(e.peerId,e.threadId)),e}getHistory(e){this.processRequestHistoryOptions(e);const{historyStorage:t,limit:r,addOffset:s,offsetId:a,needRealOffsetIdOffset:n}=e;if(this.appPeersManager.isPeerRestricted(e.peerId)){const p=t.history.first;p.setEnd(SliceEnd.Both);const c=p.slice(0,0);return c.setEnd(SliceEnd.Both),{count:0,history:Array.from(c),isEnd:c.getEnds(),offsetIdOffset:0}}const o=t.history.sliceMe(a,s,r);return o&&(o.slice.length===r||(o.fulfilled&SliceEnd.Both)===SliceEnd.Both)&&(!n||o.slice.isEnd(SliceEnd.Bottom))?{count:t.count,history:Array.from(o.slice),isEnd:o.slice.getEnds(),offsetIdOffset:o.offsetIdOffset}:this.fillHistoryStorage(e).then(p=>{if(e.searchType==="uncached"){const g=p.messages.map(y=>y.mid);return{count:p.count??t.count,history:g,isEnd:t.history.slice.getEnds(),offsetIdOffset:p?.offset_id_offset||0,nextRate:p?.next_rate,messages:p.messages}}const c=t.history.sliceMe(a,s,r),f=c?.slice||t.history.constructSlice(),l=f.getEnds();let u;return n?u=p.offset_id_offset||0:u=c?.offsetIdOffset||t.count,{count:t.count,history:Array.from(f),isEnd:l,offsetIdOffset:u}})}isHistoryResultEnd({historyResult:e,limit:t,addOffset:r,offsetId:s,offsetPeerId:a,inputFilter:n,peerId:o}){const{offset_id_offset:p,messages:c}=e,f=c.map(({mid:O})=>O),l=e.count||c.length,u=r<0?t+r:t,g=Math.abs(r);!o&&n&&(s=0);let y=p,b=!1,I=!s,S=c.length,A=0,k=!1;const T=s&&getServerMessageId(s);if(T){let O=0;for(const $=f.length;O<$&&!(s>f[O]);++O);k=f.includes(s),S=c.length-O,A=O}return y!==void 0?(b=y>=l-u||l<u,I=!y||r<0&&y+r<=0):T?(u&&(b=S<u),g&&(I=A<g),(b||I)&&(y=b?l-S:A-+k)):c.length>=l&&(b=!0,I=!0),y??(y=0),{count:l,offsetIdOffset:y,isTopEnd:b,isBottomEnd:I,mids:f,topWasMeantToLoad:u,bottomWasMeantToLoad:g,topLoaded:S,bottomLoaded:A}}mergeHistoryResult(e){const{slicedArray:t,historyResult:r,offsetId:s,addOffset:a,peerId:n,historyStorage:o}=e,{messages:p}=r,c=this.isHistoryResultEnd(e),{count:f,offsetIdOffset:l,mids:u}=c,g=this.getMigration(n);if(g&&o&&o.type!=="replies"&&(g.prev?c.isTopEnd=!1:g.next&&c.isBottomEnd&&(u.unshift(this.appMessagesIdsManager.generateMessageId(1,g.next.toChatId())),c.isBottomEnd=!1)),s&&getServerMessageId(s)&&!u.includes(s)&&l<f&&(a||0)>=0){let b=0;for(const I=u.length;b<I&&!(s>u[b]);++b);u.splice(b,0,s)}const y=t.insertSlice(u)||t.slice;return c.isTopEnd&&y.setEnd(SliceEnd.Top),c.isBottomEnd&&y.setEnd(SliceEnd.Bottom),{slice:y,mids:u,messages:p,...c}}async fillHistoryStorage(e){const{offsetId:t,historyStorage:r,inputFilter:s,recursion:a}=e;e.recursion=!0;let{peerId:n}=e;const o=r.maxId,p=this.middleware.get();let c=this.getMigration(n),f=n;t&&c?.prev&&getServerMessageId(t)===t&&(f=c.prev),n=e.peerId=this.appPeersManager.getPeerMigratedTo(n)||n;const l=f!==n,u=await this.requestHistory({...e,peerId:f});if(!p())return;const g=this.mergeHistoryResult({...e,slicedArray:r.history,historyResult:u,peerId:f}),{count:y,isBottomEnd:b,isTopEnd:I,slice:S,messages:A,topWasMeantToLoad:k,bottomWasMeantToLoad:T,topLoaded:O,bottomLoaded:$}=g;if(l||(r.count=y),!s)for(let Q=0,te=A.length;Q<te;++Q){const N=A[Q];this.mergeReplyKeyboard(r,N)&&this.rootScope.dispatchEvent("history_reply_markup",{peerId:n})}if(!s&&b){const Q=S[0];if(r.maxId===o){const te=r.history.first;te!==S&&r.history.deleteSlice(te),r.maxId!==Q&&(r.maxId=S[0],this.reloadConversation(n))}}const K=A[0],ee=A[A.length-1];if(!(!s&&!b&&K?.grouped_id&&(await this.getHistory({...e,offsetId:K.mid,limit:20,addOffset:-10}),!p()))&&!(!s&&!I&&ee?.grouped_id&&ee.grouped_id!==K?.grouped_id&&(await this.getHistory({...e,offsetId:ee.mid,limit:20,addOffset:-10}),!p()))){if(e.threadId){if(I&&e.historyType===1){const Q=r.history.last,te=this.getMessageByPeer(n,e.threadId),N=this.getMessageWithReplies(te),m=this.generateThreadServiceStartMessage(N),_=this.getMidsByMessage(N),h=[m,..._.sort((E,M)=>M-E)];forEachReverse(h,(E,M,P)=>{Q.includes(E)&&P.splice(M,1)});const v=Q.length;Q.isEnd(SliceEnd.Top)&&v&&h.unshift(Q[v-1]),r.history.insertSlice(h),this.log("inserted thread service start message",n,e.threadId,m)}return u}if(c??(c=this.getMigration(n)),c?.prev&&k!==O&&!I){const Q=k-O,te=await this.fillHistoryStorage({...e,peerId:c.prev,offsetId:0,limit:Q,addOffset:0});u.messages.push(...te.messages);const N=te.count??te.messages.length;u.count=(u.count||0)+N}else if((c?.next||l)&&T!==$&&!b){const Q=T-$,te=await this.fillHistoryStorage({...e,offsetId:this.appMessagesIdsManager.generateMessageId(1,n.toChatId()),limit:Q,addOffset:-Q});u.messages.unshift(...te.messages);const N=te.count??te.messages.length;u.count=(u.count||0)+N;const m=u.offset_id_offset||0;u.offset_id_offset=m+N}else if(c&&s&&!a){const Q=await this.requestHistory({...e,peerId:l?n:c.prev,offsetId:0,limit:1}),te=Q.count??Q.messages.length;u.count=(u.count||0)+te;const N=u.offset_id_offset||0;u.offset_id_offset=N+te}if(p()){if(s&&e.savedReaction){const Q=u.messages.filter(te=>te.grouped_id);if(await Promise.all(Q.map(te=>this.getHistory({peerId:te.peerId,offsetId:te.mid,limit:20,addOffset:-10}))),!p())return}return u}}}requestHistory({peerId:e,offsetId:t=0,limit:r=50,addOffset:s=0,offsetDate:a=0,threadId:n=0,offsetPeerId:o,nextRate:p,folderId:c,query:f,inputFilter:l,minDate:u,maxDate:g,historyType:y=this.getHistoryType(e,n),fromPeerId:b,savedReaction:I}){const S=t&&this.getMessageByPeer(o||e,t);o??(o=S?.peerId),t=getServerMessageId(t)||0,n=y===3?n:getServerMessageId(n)||0,u=u?u/1e3|0:0,g=g?g/1e3|0:0;let A,k;const T={peer:this.appPeersManager.getInputPeerById(e),offset_id:t,offset_date:a,add_offset:s,limit:r,max_id:0,min_id:0,hash:0};if(I&&(l??(l={_:"inputMessagesFilterEmpty"})),l&&e&&!p&&c===void 0){const $={...T,q:f||"",filter:l,min_date:u,max_date:g,top_msg_id:y===3?void 0:n,saved_peer_id:y===3?this.appPeersManager.getInputPeerById(n):void 0,from_id:b?this.appPeersManager.getInputPeerById(b):void 0,saved_reaction:I};k="messages.search",A=$}else if(l){const $={...T,q:f||"",filter:l,min_date:u,max_date:g,offset_rate:p,offset_peer:this.appPeersManager.getInputPeerById(o),folder_id:c};k="messages.searchGlobal",A=$}else if(y===1||y===2){const $={...T,msg_id:n};k="messages.getReplies",A=$}else if(y===3){const $={...T,peer:this.appPeersManager.getInputPeerById(n)};k="messages.getSavedHistory",A=$}else{const $={...T};k="messages.getHistory",A=$}return this.apiManager.invokeApiSingle(k,A,{noErrorBox:!0}).then($=>{DEBUG&&this.log("requestHistory result:",e,$,t,r,s);const{messages:K}=$;this.saveApiResult($),"pts"in $&&this.apiUpdatesManager.addChannelState(e.toChatId(),$.pts);let ee=K.length;return $.count,ee&&!K[ee-1]&&(K.splice(ee-1,1),ee--),$},$=>{switch($.type){case"CHANNEL_PRIVATE":let K=this.appChatsManager.getChat(e.toChatId());K._==="channel"&&(K={_:"channelForbidden",id:K.id,access_hash:K.access_hash,title:K.title,pFlags:K.pFlags}),this.appChatsManager.saveApiChats([K]),this.apiUpdatesManager.processLocalUpdate({_:"updateChannel",channel_id:K.id});break}throw $})}fetchSingleMessages(){return this.fetchSingleMessagesPromise??(this.fetchSingleMessagesPromise=pause(0).then(()=>{const e=[];for(const[t,r]of this.needSingleMessages){const s=[...r.keys()],a=s.map(c=>({_:"inputMessageID",id:getServerMessageId(c)}));let n;const o=this.appPeersManager.isChannel(t)?t.toChatId():void 0;o?n=this.apiManager.invokeApiSingle("channels.getMessages",{channel:this.appChatsManager.getChannelInput(o),id:a}):n=this.apiManager.invokeApiSingle("messages.getMessages",{id:a});const p=n.then(c=>{this.saveApiResult(c);const{messages:f}=c;for(let l=0;l<f.length;++l){const u=f[l];if(!u)continue;const g=this.appMessagesIdsManager.generateMessageId(u.id,o);r.get(g).resolve(u),r.delete(g)}if(r.size)for(const[l,u]of r)u.resolve(this.generateEmptyMessage(l))}).finally(()=>{this.rootScope.dispatchEvent("messages_downloaded",{peerId:t,mids:s})});e.push(p)}return this.needSingleMessages.clear(),Promise.all(e).then(noop$2,noop$2).then(()=>{this.fetchSingleMessagesPromise=void 0,this.needSingleMessages.size&&this.fetchSingleMessages()})}))}reloadMessages(e,t,r){if(Array.isArray(t))return Promise.all(t.map(a=>this.reloadMessages(e,a,r)));e.isAnyChat()&&isLegacyMessageId(t)&&(e=GLOBAL_HISTORY_PEER_ID);const s=this.getMessageByPeer(e,t);if(s&&!r)return this.rootScope.dispatchEvent("messages_downloaded",{peerId:e,mids:[t]}),Promise.resolve(s);{let a=this.needSingleMessages.get(e);a||this.needSingleMessages.set(e,a=new Map);let n=a.get(t);return n||(n=deferredPromise(),a.set(t,n),this.fetchSingleMessages(),n)}}getExtendedMedia(e,t){let r=this.extendedMedia.get(e);r||this.extendedMedia.set(e,r=new Map);const s=deferredPromise(),a=[],n=t.map(o=>{let p=r.get(o);return p||(r.set(o,p=s),a.push(o),p.then(()=>{r.delete(o),!r.size&&this.extendedMedia.get(e)===r&&this.extendedMedia.delete(e)})),p});return a.length?this.apiManager.invokeApi("messages.getExtendedMedia",{peer:this.appPeersManager.getInputPeerById(e),id:a.map(o=>getServerMessageId(o))}).then(o=>{this.apiUpdatesManager.processUpdateMessage(o),s.resolve()}):s.resolve(),Promise.all(n)}clearMessageReplyTo(e){e=this.getMessageByPeer(e.peerId,e.mid),this.modifyMessage(e,t=>{delete t.reply_to_mid,delete t.reply_to},this.getHistoryMessagesStorage(e.peerId),!0)}fetchMessageReplyTo(e){if(!e.reply_to)return Promise.resolve(this.generateEmptyMessage(0));const t=e.reply_to;if(t._==="messageReplyStoryHeader"){const s=this.appStoriesManager.getStoryById(this.appPeersManager.getPeerId(t.peer),t.story_id);return callbackify(s,a=>a)}const r=t.reply_to_peer_id?this.appPeersManager.getPeerId(t.reply_to_peer_id):e.peerId;return this.reloadMessages(r,e.reply_to_mid).then(s=>{if(s||this.clearMessageReplyTo(e),e._==="messageService"){const a=e.peerId;this.rootScope.dispatchEvent("message_edit",{storageKey:`${a}_history`,peerId:a,mid:e.mid,message:e}),this.isMessageIsTopMessage(e)&&this.rootScope.dispatchEvent("dialogs_multiupdate",new Map([[a,{dialog:this.getDialogOnly(a)}]]))}return s})}getTypingKey(e,t){return t?`${e}_${t}`:e}setTyping(e,t,r,s){s&&!this.appPeersManager.isForum(e)&&(s=void 0);const a=this.getTypingKey(e,s);let n=this.typings[a];return!e||!this.canSendToPeer(e)||e===this.appPeersManager.peerId||!r&&n?.action?._===t._?Promise.resolve(!1):(n?.timeout&&clearTimeout(n.timeout),n=this.typings[a]={action:t},this.apiManager.invokeApi("messages.setTyping",{peer:this.appPeersManager.getInputPeerById(e),action:t,top_msg_id:s?getServerMessageId(s):void 0}).finally(()=>{n===this.typings[a]&&(n.timeout=ctx.setTimeout(()=>{delete this.typings[a]},6e3))}))}handleReleasingMessage(e,t){const r=e.media;if(r){const s=r.webpage||r,a=s.photo||s.document;if(a?.file_reference&&this.referenceDatabase.deleteContext(a.file_reference,{type:"message",peerId:e.peerId,messageId:e.mid}),"webpage"in r&&r.webpage){const n=this.getScheduledMessagesStorage(e.peerId)===t,o=this.appWebPagesManager.getMessageKeyForPendingWebPage(e.peerId,e.mid,n);this.appWebPagesManager.deleteWebPageFromPending(r.webpage,o)}r.poll&&this.appPollsManager.updatePollToMessage(e,!1)}}handleDeletedMessages(e,t,r){const s={count:0,unread:0,unreadMentions:0,unreadReactions:0,msgs:new Set},a=t.type==="history";for(const n of r){const o=this.getMessageFromStorage(t,n);if(!o){this.fixDialogUnreadMentionsIfNoMessage({peerId:e}),this.fixDialogUnreadMentionsIfNoMessage({peerId:e,isReaction:!0});continue}this.handleReleasingMessage(o,t),this.updateMessageRepliesIfNeeded(o),!o.pFlags.out&&!o.pFlags.is_outgoing&&o.pFlags.unread&&(++s.unread,this.rootScope.dispatchEvent("notification_cancel","msg"+n),isMentionUnread(o)&&(++s.unreadMentions,this.modifyCachedMentions({peerId:e,mid:n,add:!1}))),++s.count,s.msgs.add(n);const p=o.grouped_id;if(p){const c=this.groupedMessagesStorage[p];c&&(this.deleteMessageFromStorage(c,n),s.grouped||(s.grouped={}),(s.grouped[p]||(s.grouped[p]=new Set)).add(n),c.size||(delete s.grouped,delete this.groupedMessagesStorage[p]))}if(a){this.updateMessageContextForDeletion(o,!0);const c=o.reactions;c&&c.pFlags.reactions_as_tags&&this.appReactionsManager.processMessageReactionsChanges({message:o,changedResults:[],removedResults:c.results});const f=c?.recent_reactions;o.pFlags.out&&f?.some(l=>l.pFlags.unread)&&(++s.unreadReactions,this.modifyCachedMentions({peerId:e,mid:n,add:!1,isReaction:!0})),this.appTranslationsManager.resetMessageTranslations(o.peerId,o.mid)}this.deleteMessageFromStorage(t,n)}if(s.grouped)for(const n in s.grouped)this.dispatchGroupedEdit(n,t,[...s.grouped[n]]);return s}handleEditedMessage(e,t,r){if(e._==="message"){if(e.media?.webpage){const n=this.appWebPagesManager.getMessageKeyForPendingWebPage(e.peerId,e.mid,!!e.pFlags.is_scheduled);this.appWebPagesManager.deleteWebPageFromPending(e.media.webpage,n)}const s=e.grouped_id;s&&this.dispatchGroupedEdit(s,r,[]),this.appTranslationsManager.hasTriedToTranslateMessage(e.peerId,e.mid)&&(e.message!==t.message||!deepEqual(e.entities,t.entities))&&this.appTranslationsManager.resetMessageTranslations(e.peerId,e.mid)}}dispatchGroupedEdit(e,t,r){const a=this.getMidsByGroupedId(e).map(n=>this.getMessageFromStorage(t,n));this.rootScope.dispatchEvent("grouped_edit",{peerId:a[0].peerId,groupedId:e,deletedMids:r||[],messages:a})}getDialogUnreadCount(e){let t=e.unread_count;if(!isForumTopic(e)&&this.appPeersManager.isForum(e.peerId)&&!e.pFlags.view_forum_as_messages){const r=this.dialogsStorage.getForumUnreadCount(e.peerId);r instanceof Promise?t=0:t=r.count}return t||+!!e.pFlags?.unread_mark}isDialogUnread(e){return!isSavedDialog(e)&&!!this.getDialogUnreadCount(e)}canForward(e){return e?._==="message"&&!e.pFlags.noforwards&&!this.appPeersManager.noForwards(e.peerId)}pushBatchUpdate(e,t,r,s){let a=this.batchUpdates[e];a||(a=this.batchUpdates[e]={callback:t,batch:new Map}),a.batch.has(r)||(a.batch.set(r,s?s():void 0),this.batchUpdatesDebounced())}getMessagesFromMap(e){const t=new Map;for(const[r,s]of e){const[a,n]=r.split("_"),o=this.getMessageByPeer(a.toPeerId(),+n);o&&t.set(o,s)}return t}saveDefaultSendAs(e,t){return this.appProfileManager.modifyCachedFullChat(e.toChatId(),r=>{r.default_send_as=this.appPeersManager.getOutputPeer(t)}),this.apiManager.invokeApi("messages.saveDefaultSendAs",{peer:this.appPeersManager.getInputPeerById(e),send_as:this.appPeersManager.getInputPeerById(t)})}sendBotRequestedPeer(e,t,r,s){return this.apiManager.invokeApi("messages.sendBotRequestedPeer",{peer:this.appPeersManager.getInputPeerById(e),msg_id:getServerMessageId(t),button_id:r,requested_peers:s.map(a=>this.appPeersManager.getInputPeerById(a))}).then(a=>{this.apiUpdatesManager.processUpdateMessage(a)})}reportSpam(e){return this.apiManager.invokeApi("messages.reportSpam",{peer:this.appPeersManager.getInputPeerById(e)})}}function convertInputKeyToKey(d){const e=d.replace("input","");return e[0].toLowerCase()+e.slice(1)}class AppNotificationsManager extends AppManager{constructor(){super(...arguments),this.peerSettings={notifyPeer:{},notifyUsers:null,notifyChats:null,notifyBroadcasts:null,notifyForumTopic:{}},this.checkMuteUntil=()=>{this.checkMuteUntilTimeout!==void 0&&(clearTimeout(this.checkMuteUntilTimeout),this.checkMuteUntilTimeout=void 0);const e=tsNow(!0);let t=MUTE_UNTIL;const r=a=>{if(a instanceof Promise)return!1;const n=a.mute_until;return n?n<=e?(a.mute_until=0,!0):(n<t&&(t=n),!1):!1};["notifyPeer","notifyForumTopic"].forEach(a=>{for(const n in this.peerSettings[a]){const o=this.peerSettings[a][n];if(r(o)){const[p,c]=n.split("_"),f=this.appPeersManager.getOutputPeer(p.toPeerId());this.apiUpdatesManager.saveUpdate({_:"updateNotifySettings",peer:c?{_:"notifyForumTopic",peer:f,top_msg_id:+c}:{_:"notifyPeer",peer:f},notify_settings:o})}}});const s=Math.min(18e5,(t-e)*1e3);this.checkMuteUntilTimeout=ctx.setTimeout(this.checkMuteUntil,s)},this.onUpdateNotifySettings=e=>{const{peer:t}=e,r=t._==="notifyForumTopic",s=t._==="notifyPeer"||r,a=s&&this.appPeersManager.getPeerId(t.peer),n=s?void 0:t._,o=r?this.appMessagesIdsManager.generateMessageId(t.top_msg_id,t.peer.channel_id):void 0;this.savePeerSettings({key:n,peerId:a,threadId:o,settings:e.notify_settings}),this.rootScope.dispatchEvent("notify_settings",e)}}after(){return this.checkMuteUntilThrottled=throttle(this.checkMuteUntil,1e3,!1),this.apiUpdatesManager.addMultipleEventsListeners({updateNotifySettings:this.onUpdateNotifySettings}),this.appStateManager.getState().then(e=>{if(e.notifySettings)for(const t in e.notifySettings)this.savePeerSettings({key:t,settings:e.notifySettings[t]})})}getNotifySettings(e){let t=convertInputKeyToKey(e._),r=this.peerSettings[t],s;return e._==="inputNotifyPeer"&&(s=t=this.appPeersManager.getPeerId(e.peer),r=r[t]),r||((r||this.peerSettings)[t]=this.apiManager.invokeApi("account.getNotifySettings",{peer:e}).then(a=>(this.savePeerSettings({key:t,peerId:s,settings:a}),a)))}getNotifyPeerTypeSettings(){if(this.getNotifyPeerTypePromise)return this.getNotifyPeerTypePromise;const e=["inputNotifyBroadcasts","inputNotifyUsers","inputNotifyChats"].map(t=>this.getNotifySettings({_:t}));return this.getNotifyPeerTypePromise=Promise.all(e)}generateLocalNotifySettingsUpdate(e,t){this.apiUpdatesManager.processLocalUpdate({_:"updateNotifySettings",peer:{...e,_:convertInputKeyToKey(e._)},notify_settings:{...t,_:"peerNotifySettings"}})}updateNotifySettings(e,t){return this.apiManager.invokeApi("account.updateNotifySettings",{peer:e,settings:t}).then(()=>{this.generateLocalNotifySettingsUpdate(e,t)})}getContactSignUpNotification(){return this.notifyContactsSignUp?this.notifyContactsSignUp:this.notifyContactsSignUp=this.apiManager.invokeApi("account.getContactSignUpNotification")}setContactSignUpNotification(e){this.apiManager.invokeApi("account.setContactSignUpNotification",{silent:e}).then(t=>{this.notifyContactsSignUp=Promise.resolve(!e)})}getPeerKey(e,t){return e+(t?"_"+t:"")}savePeerSettings({key:e,peerId:t,threadId:r,settings:s}){let a;t&&(e=this.getPeerKey(t,r),a=this.peerSettings[r?"notifyForumTopic":"notifyPeer"]),(a||this.peerSettings)[e]=s,t?this.checkMuteUntilThrottled():(this.rootScope.dispatchEvent("notify_peer_type_settings",{key:e,settings:s}),this.appStateManager.getState().then(n=>{const o=n.notifySettings;o[e]=s,this.appStateManager.pushToState("notifySettings",o)}))}isMuted(e){return e._==="peerNotifySettings"&&(e.silent||e.mute_until!==void 0&&e.mute_until*1e3>tsNow())}getPeerMuted(e){const t=this.getNotifySettings({_:"inputNotifyPeer",peer:this.appPeersManager.getInputPeerById(e)});return(t instanceof Promise?t:Promise.resolve(t)).then(r=>this.isMuted(r))}getPeerLocalSettings({peerId:e,respectType:t=!0,threadId:r}){const s={_:"peerNotifySettings"},a=this.getPeerKey(e,r),n=this.peerSettings[r?"notifyForumTopic":"notifyPeer"][a];if(n&&!(n instanceof Promise)&&Object.assign(s,n),t){const o=this.appPeersManager.getInputNotifyPeerById({peerId:e,ignorePeerId:!0,threadId:r}),p=convertInputKeyToKey(o._),c=this.peerSettings[p];if(c&&!(c instanceof Promise))for(const f in c)s[f]===void 0&&(s[f]=c[f])}return s}validatePeerSettings(e){if(e.peerId!==this.appPeersManager.peerId)return e.threadId&&!this.appPeersManager.isForum(e.peerId)&&(e.threadId=void 0),e}isPeerLocalMuted(e){if(!(e=this.validatePeerSettings(e)))return!1;if(e.threadId){const s=this.getPeerLocalSettings({...e,respectType:!1});return s.silent!==void 0||s.mute_until!==void 0?this.isMuted(s):this.isPeerLocalMuted({...e,threadId:void 0})}const t=this.getPeerLocalSettings(e);return this.isMuted(t)}isPeerStoriesMuted(e){return!!this.getPeerLocalSettings({peerId:e})?.stories_muted}toggleStoriesMute(e,t,r){const s=this.getPeerLocalSettings({peerId:e}),a={_:"inputNotifyPeer",peer:this.appPeersManager.getInputPeerById(e)},n={...s,_:"inputPeerNotifySettings"};t?n.stories_muted=!0:delete n.stories_muted,r?this.generateLocalNotifySettingsUpdate(a,n):this.updateNotifySettings(a,n)}}const platforms=new Set(["all","web","webk"]),ignore=new Set;function getRestrictionReason(d){return d.find(e=>platforms.has(e.platform)&&!ignore.has(e.reason))}function isRestricted(d){return!!getRestrictionReason(d)}function ignoreRestrictionReasons(d){ignore.clear(),d.forEach(e=>{ignore.add(e)})}function isPeerRestricted(d){const e=d?.restriction_reason;return!!(e&&d.pFlags.restricted&&isRestricted(e))}function getPeerPhoto(d){if(!(!d||isPeerRestricted(d)))return d?.photo}class AppPeersManager extends AppManager{get peerId(){return this.appUsersManager.userId.toPeerId()}saveApiPeers(e){this.appChatsManager.saveApiChats(e.chats),this.appUsersManager.saveApiUsers(e.users)}canPinMessage(e){return e.isUser()||this.appChatsManager.hasRights(e.toChatId(),"pin_messages")}getPeerPhoto(e){const t=this.getPeer(e);return getPeerPhoto(t)}getPeerMigratedTo(e){if(e.isUser())return;const t=this.appChatsManager.getChat(e.toChatId()),r=t?.migrated_to;if(r&&t.pFlags.deactivated)return getPeerId(r)}getOutputPeer(e){if(e.isUser())return{_:"peerUser",user_id:e.toUserId()};const t=e.toChatId();return this.appChatsManager.isChannel(t)?{_:"peerChannel",channel_id:t}:{_:"peerChat",chat_id:t}}getPeerString(e){return e.isUser()?this.appUsersManager.getUserString(e.toUserId()):this.appChatsManager.getChatString(e.toChatId())}getPeerUsername(e){return this.getPeerActiveUsernames(e)[0]||""}getPeerActiveUsernames(e){const t=this.getPeer(e);return getPeerActiveUsernames(t)}getPeer(e){return e.isUser()?this.appUsersManager.getUser(e.toUserId()):this.appChatsManager.getChat(e.toChatId())}getPeerId(e){return getPeerId(e)||isObject(e)&&e._==="inputPeerSelf"&&this.peerId||NULL_PEER_ID}getDialogPeer(e){return{_:"dialogPeer",peer:this.getOutputPeer(e)}}isChannel(e){return!e.isUser()&&this.appChatsManager.isChannel(e.toChatId())}isMegagroup(e){return!e.isUser()&&this.appChatsManager.isMegagroup(e.toChatId())}isForum(e){return!e.isUser()&&this.appChatsManager.isForum(e.toChatId())}isAnyGroup(e){return!e.isUser()&&!this.appChatsManager.isBroadcast(e.toChatId())}isBroadcast(e){return this.isChannel(e)&&!this.isMegagroup(e)}isBot(e){return e.isUser()&&this.appUsersManager.isBot(e.toUserId())}isContact(e){return e.isUser()&&this.appUsersManager.isContact(e.toUserId())}isUser(e){return isUser(e)}isRegularUser(e){return this.isUser(e)&&this.appUsersManager.isRegularUser(e)}isAnyChat(e){return isAnyChat(e)}isPeerRestricted(e){return isPeerRestricted(this.getPeer(e))}isPeerPublic(e){return!!getPeerActiveUsernames(this.getPeer(e))[0]}isSavedDialog(e,t){return!!(e===this.peerId&&t)}getRestrictionReasonText(e){const t=this.getPeer(e),r=t.restriction_reason?getRestrictionReason(t.restriction_reason):void 0;return r?r.text:e.isUser()?"This user is restricted":"This chat is restricted"}getInputNotifyPeerById({peerId:e,ignorePeerId:t,threadId:r}){return t?e.isUser()?{_:"inputNotifyUsers"}:this.isBroadcast(e)?{_:"inputNotifyBroadcasts"}:{_:"inputNotifyChats"}:r?{_:"inputNotifyForumTopic",peer:this.getInputPeerById(e),top_msg_id:getServerMessageId(r)}:{_:"inputNotifyPeer",peer:this.getInputPeerById(e)}}getInputPeerById(e){if(!e)return{_:"inputPeerEmpty"};if(!e.isUser()){const r=e.toChatId();return this.appChatsManager.getInputPeer(r)}const t=e.toUserId();return this.appUsersManager.getUserInputPeer(t)}getInputPeerSelf(){return{_:"inputPeerSelf"}}getInputDialogPeerById(e){return{_:"inputDialogPeer",peer:isObject(e)?e:this.getInputPeerById(e)}}getPeerSearchText(e){let t;return this.isUser(e)?t="%pu "+this.appUsersManager.getUserSearchText(e.toUserId()):t="%pg "+this.appChatsManager.getChatSearchText(e.toChatId()),t}getDialogType(e,t){return this.peerId===e&&t?"savedDialog":this.isMegagroup(e)?"megagroup":this.isChannel(e)?"channel":this.isUser(e)?e===this.peerId?"saved":"chat":"group"}getDeleteButtonText(e){switch(this.getDialogType(e)){case"channel":return this.appChatsManager.hasRights(e.toChatId(),"delete_chat")?"ChannelDelete":"ChatList.Context.LeaveChannel";case"megagroup":case"group":return this.appChatsManager.hasRights(e.toChatId(),"delete_chat")?"DeleteMega":"ChatList.Context.LeaveGroup";default:return"ChatList.Context.DeleteChat"}}noForwards(e){return e.isUser()?!1:!!this.appChatsManager.getChat(e.toChatId()).pFlags?.noforwards}mirrorAllPeers(e){const t={...this.appUsersManager.getUsers()},r=this.appChatsManager.getChats();for(const s in r)t[s.toPeerId(!0)]=r[s];MTProtoMessagePort.getInstance().invokeVoid("mirror",{name:"peers",value:t},e)}}class AppPhotosManager extends AppManager{constructor(){super(...arguments),this.photos={}}savePhoto(e,t){if(!e||e._==="photoEmpty")return;const r=this.photos[e.id];if(e.file_reference&&(safeReplaceArrayInObject("file_reference",r,e),this.referenceDatabase.saveContext(e.file_reference,t)),e.sizes?.length){e.sizes.sort((a,n)=>(a.size||(a.sizes?1/0:0))-(n.size||(n.sizes?1/0:0)));const s=e.sizes[e.sizes.length-1];s._==="photoSizeProgressive"&&(s.size=s.sizes[s.sizes.length-1])}return r?Object.assign(r,e):this.photos[e.id]=e}getUserPhotos(e,t="0",r=20){const s=this.appUsersManager.getUserInput(e);return this.apiManager.invokeApiCacheable("photos.getUserPhotos",{user_id:s,offset:0,limit:r,max_id:t},{cacheSeconds:60}).then(a=>{this.appUsersManager.saveApiUsers(a.users);const n=a.photos.map((o,p)=>(a.photos[p]=this.savePhoto(o,{type:"profilePhoto",peerId:e.toPeerId()}),o.id));if(t!=="0"&&t){const o=n.indexOf(t);o!==-1&&n.splice(o,1)}return{count:a.count||n.length,photos:n}})}getPhoto(e){return isObject(e)?e:this.photos[e]}}class AppPollsManager extends AppManager{constructor(){super(...arguments),this.polls={},this.results={},this.pollToMessages={},this.log=logger("POLLS",LogTypes.Error)}after(){this.apiUpdatesManager.addMultipleEventsListeners({updateMessagePoll:e=>{this.log("updateMessagePoll:",e);let t=e.poll||this.polls[e.poll_id];if(!t)return;let r=e.results;const s=this.savePoll(t,r);t=s.poll,r=s.results,this.rootScope.dispatchEvent("poll_update",{poll:t,results:r})}})}savePoll(e,t,r){r&&this.updatePollToMessage(r,!0);const s=e.id;return this.polls[s]?(e=Object.assign(this.polls[s],e),t=this.saveResults(e,t)):(this.polls[s]=e,e.chosenIndexes=[],t=this.saveResults(e,t)),{poll:e,results:t}}saveResults(e,t){return this.results[e.id]?t=Object.assign(this.results[e.id],t):this.results[e.id]=t,t.pFlags.min||(e.chosenIndexes.length=0,t?.results?.length&&t.results.forEach((r,s)=>{r.pFlags?.chosen&&e.chosenIndexes.push(s)})),t}getPoll(e){return{poll:this.polls[e],results:this.results[e]}}getInputMediaPoll(e,t,r,s){return r?(s||(s=[]),r=parseMarkdown(r,s)):r=void 0,{_:"inputMediaPoll",poll:e,correct_answers:t,solution:r,solution_entities:r?s:void 0}}updatePollToMessage(e,t){const{id:r}=e.media.poll;let s=this.pollToMessages[r];if(!t&&!s)return;s||(s=this.pollToMessages[r]=new Set);const a=e.peerId+"_"+e.mid;t?s.add(a):s.delete(a),!t&&!s.size&&(delete this.polls[r],delete this.results[r],delete this.pollToMessages[r])}sendVote(e,t){const r=e.media.poll,s=t.map(p=>r.answers[p].option),a=e.mid,n=e.peerId,o=this.appPeersManager.getInputPeerById(n);return e.pFlags.is_outgoing?this.appMessagesManager.invokeAfterMessageIsSent(a,"sendVote",p=>(this.log("invoke sendVote callback"),this.sendVote(p,t))):this.apiManager.invokeApi("messages.sendVote",{peer:o,msg_id:getServerMessageId(e.mid),options:s}).then(p=>{this.log("sendVote updates:",p),this.apiUpdatesManager.processUpdateMessage(p)})}getResults(e){const t=this.appPeersManager.getInputPeerById(e.peerId);return this.apiManager.invokeApi("messages.getPollResults",{peer:t,msg_id:getServerMessageId(e.mid)}).then(r=>{this.apiUpdatesManager.processUpdateMessage(r),this.log("getResults updates:",r)})}getVotes(e,t,r,s=20){return this.apiManager.invokeApi("messages.getPollVotes",{peer:this.appPeersManager.getInputPeerById(e.peerId),id:getServerMessageId(e.mid),option:t,offset:r,limit:s}).then(a=>(this.log("getPollVotes messages:",a),this.appUsersManager.saveApiUsers(a.users),this.appChatsManager.saveApiChats(a.chats),a))}stopPoll(e){const t=e.media.poll;if(t.pFlags.closed)return Promise.resolve();const r=copy(t);return r.pFlags.closed=!0,this.appMessagesManager.editMessage(e,void 0,{newMedia:this.getInputMediaPoll(r)}).then(()=>{},s=>{this.log.error("stopPoll error:",s)})}}class AppPrivacyManager extends AppManager{constructor(){super(...arguments),this.privacy={}}after(){this.apiUpdatesManager.addMultipleEventsListeners({updatePrivacy:e=>{const t=e.key._;this.privacy[t]=e.rules,this.rootScope.dispatchEvent("privacy_update",e)}})}setPrivacy(e,t){return this.apiManager.invokeApi("account.setPrivacy",{key:{_:e},rules:t}).then(r=>(this.appUsersManager.saveApiUsers(r.users),this.appChatsManager.saveApiChats(r.chats),this.apiUpdatesManager.processLocalUpdate({_:"updatePrivacy",key:{_:convertInputKeyToKey(e)},rules:t.map(s=>{const a={};return Object.assign(a,s),a._=convertInputKeyToKey(a._),a})}),r.rules))}getPrivacy(e){const t=convertInputKeyToKey(e),r=this.privacy[t];return r?Promise.resolve(r):this.privacy[t]=this.apiManager.invokeApi("account.getPrivacy",{key:{_:e}}).then(s=>(this.appUsersManager.saveApiUsers(s.users),this.appChatsManager.saveApiChats(s.chats),this.privacy[t]=s.rules))}getGlobalPrivacySettings(){return this.apiManager.invokeApi("account.getGlobalPrivacySettings")}setGlobalPrivacySettings(e){return this.apiManager.invokeApi("account.setGlobalPrivacySettings",{settings:e})}}function getParticipantsCount(d){return d.participants_count||d.participants?.participants?.length||1}function callbackifyAll(d,e){return d.some(t=>t instanceof Promise)?Promise.all(d).then(e):e(d)}const PEER_FULL_TTL=3*6e4,defaultGetChannelParticipantsOptions={filter:{_:"channelParticipantsRecent"},limit:200,offset:0};class AppProfileManager extends AppManager{constructor(){super(...arguments),this.usersFull={},this.chatsFull={},this.fullExpiration={},this.onUpdateChatParticipants=e=>{const t=e.participants;if(t._!=="chatParticipants")return;const r=t.chat_id,s=this.chatsFull[r];s!==void 0&&(s.participants=t,this.rootScope.dispatchEvent("chat_full_update",r))},this.onUpdateChatParticipantAdd=e=>{const t=this.chatsFull[e.chat_id];if(t===void 0)return;const r=t.participants,s=r.participants||[];for(let a=0,n=s.length;a<n;a++)if(s[a].user_id===e.user_id)return;s.push({_:"chatParticipant",user_id:e.user_id,inviter_id:e.inviter_id,date:tsNow(!0)}),r.version=e.version,this.rootScope.dispatchEvent("chat_full_update",e.chat_id)},this.onUpdateChatParticipantDelete=e=>{const t=this.chatsFull[e.chat_id];if(t===void 0)return;const r=t.participants,s=r.participants||[];for(let a=0,n=s.length;a<n;a++)if(s[a].user_id===e.user_id){s.splice(a,1),r.version=e.version,this.rootScope.dispatchEvent("chat_full_update",e.chat_id);return}},this.onUpdateUserTyping=e=>{var u;const t=e.user_id?e.user_id.toPeerId():this.appPeersManager.getPeerId(e.from_id);if(this.appPeersManager.peerId===t||e.action._==="speakingInGroupCallAction")return;const r=e.top_msg_id,s=r?this.appMessagesIdsManager.generateMessageId(r,e.channel_id):void 0,a=this.appPeersManager.getPeerId(e),n=this.getTypingsKey(a,s),o=(u=this.typingsInPeer)[n]??(u[n]=[]),p=e.action;let c=o.find(g=>g.userId===t);p.msg_id&&(p.msg_id=this.appMessagesIdsManager.generateMessageId(p.msg_id,e.channel_id));const f=()=>{delete c.timeout;const g=o.indexOf(c);g!==-1&&o.splice(g,1),this.rootScope.dispatchEvent("peer_typings",{peerId:a,threadId:s,typings:o}),o.length||delete this.typingsInPeer[n]};if(c?.timeout!==void 0&&clearTimeout(c.timeout),p._==="sendMessageCancelAction"){if(!c)return;f();return}c||(c={userId:t},o.push(c)),c.action=p;const l=this.appUsersManager.hasUser(t);l?this.appUsersManager.forceUserOnline(t):e._==="updateChatUserTyping"&&e.chat_id&&this.appChatsManager.hasChat(e.chat_id)&&!this.appChatsManager.isChannel(e.chat_id)&&Promise.resolve(this.getChatFull(e.chat_id)).then(()=>{c.timeout!==void 0&&this.appUsersManager.hasUser(t)&&this.rootScope.dispatchEvent("peer_typings",{peerId:a,threadId:s,typings:o})}),c.timeout=ctx.setTimeout(f,6e3),l&&this.rootScope.dispatchEvent("peer_typings",{peerId:a,threadId:s,typings:o})},this.onUpdatePeerBlocked=e=>{const t=this.appPeersManager.getPeerId(e.peer_id);if(this.appPeersManager.isUser(t)){const r=t.toUserId(),s=this.usersFull[r];s&&(e.pFlags.blocked?s.pFlags.blocked=!0:delete s.pFlags.blocked,e.pFlags.blocked_my_stories_from?s.pFlags.blocked_my_stories_from=!0:delete s.pFlags.blocked_my_stories_from),this.rootScope.dispatchEvent("user_full_update",r)}this.rootScope.dispatchEvent("peer_block",{peerId:t,blocked:e.pFlags.blocked,blockedMyStoriesFrom:e.pFlags.blocked_my_stories_from})},this.onUpdatePeerSettings=e=>{const t=this.appPeersManager.getPeerId(e.peer);this.rootScope.dispatchEvent("peer_settings",{peerId:t,settings:e.settings})}}after(){this.apiUpdatesManager.addMultipleEventsListeners({updateChatParticipants:this.onUpdateChatParticipants,updateChatParticipantAdd:this.onUpdateChatParticipantAdd,updateChatParticipantDelete:this.onUpdateChatParticipantDelete,updateUserTyping:this.onUpdateUserTyping,updateChatUserTyping:this.onUpdateUserTyping,updateChannelUserTyping:this.onUpdateUserTyping,updatePeerBlocked:this.onUpdatePeerBlocked,updatePeerSettings:this.onUpdatePeerSettings}),this.rootScope.addEventListener("chat_update",e=>{const t=this.chatsFull[e],r=this.appChatsManager.getChat(e);if(!t||!r)return;let s=!1;!!t.call!=!!r.pFlags?.call_active&&(s=!0);const{photo:a}=r;if(a){const n=a._!=="chatPhotoEmpty",o=!!(t.chat_photo&&t.chat_photo._!=="photoEmpty");(n!==o||n&&a.photo_id!==t.chat_photo?.id)&&(s=!0)}s&&this.refreshFullPeer(e.toPeerId(!0))}),this.rootScope.addEventListener("channel_update",e=>{this.refreshFullPeer(e.toPeerId(!0))}),this.rootScope.addEventListener("chat_full_update",e=>{this.rootScope.dispatchEvent("peer_full_update",e.toPeerId(!0))}),this.rootScope.addEventListener("user_full_update",e=>{this.rootScope.dispatchEvent("peer_full_update",e.toPeerId(!1))}),this.rootScope.addEventListener("invalidate_participants",e=>{this.invalidateChannelParticipants(e)}),this.rootScope.addEventListener("peer_bio_edit",e=>{this.rootScope.dispatchEvent("user_full_update",e.toUserId())}),this.typingsInPeer={},this.peerSettings={}}getProfile(e,t){return this.usersFull[e]&&!t&&Date.now()<this.fullExpiration[e.toPeerId()]?this.usersFull[e]:this.apiManager.invokeApiSingleProcess({method:"users.getFullUser",params:{id:this.appUsersManager.getUserInput(e)},processResult:r=>{this.appChatsManager.saveApiChats(r.chats,!0),this.appUsersManager.saveApiUsers(r.users);const s=r.full_user,a=e.toPeerId(!1);s.profile_photo&&(s.profile_photo=this.appPhotosManager.savePhoto(s.profile_photo,{type:"profilePhoto",peerId:a})),s.wallpaper=this.appThemesManager.saveWallPaper(s.wallpaper);const n=s.bot_info;if(n){const o={type:"userFull",userId:e};n.description_document=this.appDocsManager.saveDoc(n.description_document,o),n.description_photo=this.appPhotosManager.savePhoto(n.description_photo,o)}return s.business_intro=this.appBusinessManager.saveBusinessIntro(e,s.business_intro),s.personal_channel_message&&(s.personal_channel_message=this.appMessagesIdsManager.generateMessageId(s.personal_channel_message,s.personal_channel_id)),this.appNotificationsManager.savePeerSettings({peerId:a,settings:s.notify_settings}),this.usersFull[e]=s,this.fullExpiration[a]=Date.now()+PEER_FULL_TTL,this.rootScope.dispatchEvent("user_full_update",e),s}})}getProfileByPeerId(e,t){return this.appPeersManager.isAnyChat(e)?this.getChatFull(e.toChatId(),t):this.getProfile(e.toUserId(),t)}getCachedFullChat(e){return this.chatsFull[e]}getCachedFullUser(e){return this.usersFull[e]}getCachedProfileByPeerId(e){return e.isUser()?this.getCachedFullUser(e.toUserId()):this.getCachedFullChat(e.toChatId())}modifyCachedFullChat(e,t){this.modifyCachedFullPeer(e.toPeerId(!0),t)}modifyCachedFullUser(e,t){this.modifyCachedFullPeer(e.toPeerId(!0),t)}modifyCachedFullPeer(e,t){const r=this.getCachedProfileByPeerId(e);if(r){if(t(r)===!1)return;e.isUser()?this.rootScope.dispatchEvent("user_full_update",e.toUserId()):this.rootScope.dispatchEvent("chat_full_update",e.toChatId())}}isUserBlocked(e){return callbackify(this.getProfile(e),t=>!!t.pFlags.blocked)}isCachedUserBlocked(e){const t=this.isUserBlocked(e);return t instanceof Promise?void 0:t}async getFullPhoto(e){const t=await this.getProfileByPeerId(e);switch(t._){case"userFull":return t.profile_photo;case"channelFull":case"chatFull":return t.chat_photo}}getChatFull(e,t){if(this.appChatsManager.isChannel(e))return this.getChannelFull(e,t);const r=e.toPeerId(!0),s=this.chatsFull[e];if(s&&!t&&Date.now()<this.fullExpiration[r]){const a=this.appChatsManager.getChat(e);if(a.pFlags.left||a.pFlags.deactivated||a.version===s.participants.version)return s}return this.apiManager.invokeApiSingleProcess({method:"messages.getFullChat",params:{chat_id:e},processResult:a=>{this.appChatsManager.saveApiChats(a.chats,!0),this.appUsersManager.saveApiUsers(a.users);const n=a.full_chat;return n&&n.chat_photo&&n.chat_photo.id&&(n.chat_photo=this.appPhotosManager.savePhoto(n.chat_photo,{type:"profilePhoto",peerId:r})),n.call&&this.appGroupCallsManager.saveGroupCall(n.call,e),this.appNotificationsManager.savePeerSettings({peerId:r,settings:n.notify_settings}),this.chatsFull[e]=n,this.fullExpiration[r]=Date.now()+PEER_FULL_TTL,this.rootScope.dispatchEvent("chat_full_update",e),n}})}async getChatInviteLink(e,t){const r=await this.getChatFull(e);return!t&&r.exported_invite&&r.exported_invite._=="chatInviteExported"?r.exported_invite.link:this.apiManager.invokeApi("messages.exportChatInvite",{peer:this.appPeersManager.getInputPeerById(e.toPeerId(!0))}).then(s=>(this.chatsFull[e]!==void 0&&(this.chatsFull[e].exported_invite=s),s.link))}filterParticipantsByQuery(e,t){const r=this.appUsersManager.createSearchIndex();e.forEach(n=>{const o=getParticipantPeerId(n);r.indexObject(o,this.appPeersManager.getPeerSearchText(o))});const s=r.search(t);return e.filter(n=>{const o=getParticipantPeerId(n);return s.has(o)})}getParticipants(e){e={...defaultGetChannelParticipantsOptions,...e};const{id:t,filter:r}=e;return this.appChatsManager.isChannel(t)?this.getChannelParticipants(e):callbackify(this.getChatFull(t),s=>{const a=s.participants;if(a._!=="chatParticipants")throw makeError("CHAT_PRIVATE");return r._==="channelParticipantsSearch"&&r.q.trim()?{...a,participants:this.filterParticipantsByQuery(a.participants,r.q)}:a})}getParticipant(e,t){return this.appChatsManager.isChannel(e)?this.getChannelParticipant(e,t):Promise.resolve(this.getParticipants({id:e})).then(r=>{const s=r.participants.find(a=>{if(getParticipantPeerId(a)===t)return a});if(!s)throw makeError("USER_NOT_PARTICIPANT");return s})}getChannelParticipants(e){e={...defaultGetChannelParticipantsOptions,...e};const{id:t,filter:r,offset:s,limit:a}=e;if(!this.appChatsManager.hasRights(t,"view_participants"))throw makeError("CHAT_ADMIN_REQUIRED");const n=new Set(["channelParticipantsAdmins"]),o=this.apiManager.invokeApiCacheable("channels.getParticipants",{channel:this.appChatsManager.getChannelInput(t),filter:r,offset:s,limit:a,hash:"0"},{cacheSeconds:60,syncIfHasResult:!0});let p;if(e.forMessagesSearch)try{p=this.appChatsManager.getSendAs(t),p instanceof Promise&&(p=p.catch(()=>{}))}catch{}return callbackifyAll([o,p],([c,f])=>{this.appPeersManager.saveApiPeers(c);const l=r.q;if(f){const u=f.map(k=>({_:"channelParticipant",date:0,user_id:0,peer:k.peer})),g=t.toPeerId(!0),y={_:"channelParticipant",date:0,user_id:0,peer:this.appPeersManager.getOutputPeer(g)},b=this.appPeersManager.peerId,I={_:"channelParticipant",date:0,user_id:b.toUserId()};u.unshift(y,I);const S=c.participants.slice(),A=this.filterParticipantsByQuery(u,l);(A.includes(y)||!l?.trim())&&!S.some(k=>getParticipantPeerId(k)===g)&&(indexOfAndSplice(A,y),S.unshift(y));for(const k of A){const T=getParticipantPeerId(k);if(!S.some(O=>getParticipantPeerId(O)===T)||!S.some(O=>getParticipantPeerId(O)===b)){S.unshift(I);break}}return{...c,participants:S}}return n.has(r._)&&l?.trim()?{...c,participants:this.filterParticipantsByQuery(c.participants,l)}:c})}getChannelParticipant(e,t){return this.apiManager.invokeApiSingle("channels.getParticipant",{channel:this.appChatsManager.getChannelInput(e),participant:this.appPeersManager.getInputPeerById(t)}).then(r=>(this.appUsersManager.saveApiUsers(r.users),r.participant))}getChannelFull(e,t){const r=e.toPeerId(!0);return this.chatsFull[e]!==void 0&&!t&&Date.now()<this.fullExpiration[r]?this.chatsFull[e]:this.apiManager.invokeApiSingleProcess({method:"channels.getFullChannel",params:{channel:this.appChatsManager.getChannelInput(e)},processResult:s=>{this.appChatsManager.saveApiChats(s.chats,!0),this.appUsersManager.saveApiUsers(s.users);const a=s.full_chat;return a&&a.chat_photo.id&&(a.chat_photo=this.appPhotosManager.savePhoto(a.chat_photo,{type:"profilePhoto",peerId:r})),a.wallpaper=this.appThemesManager.saveWallPaper(a.wallpaper),a.call&&this.appGroupCallsManager.saveGroupCall(a.call,e),this.appNotificationsManager.savePeerSettings({peerId:r,settings:a.notify_settings}),this.chatsFull[e]=a,this.fullExpiration[r]=Date.now()+PEER_FULL_TTL,this.rootScope.dispatchEvent("chat_full_update",e),a},processError:s=>{switch(s.type){case"CHANNEL_PRIVATE":const a=this.appChatsManager.getChat(e);a._!=="channelForbidden"&&this.appChatsManager.saveApiChats([{_:"channelForbidden",id:e,access_hash:a.access_hash,title:a.title,pFlags:a.pFlags}]),this.apiUpdatesManager.processLocalUpdate({_:"updateChannel",channel_id:e});break}throw s}})}getMentions(e,t,r,s){const a=o=>{if(t.charAt(0)==="@"&&(t=t.slice(1)),!!!t.trim())return o.map(g=>g.id);const f=new SearchIndex({ignoreCase:!0}),l=new Map;o.forEach(g=>{f.indexObject(g.id,this.appUsersManager.getUserSearchText(g.id)),l.set(g.id,g.rating)});const u=Array.from(f.search(t));return u.sort((g,y)=>l.get(y)-l.get(g)),u};let n;return this.appChatsManager.isChannel(e)?n=Promise.resolve(this.getChannelParticipants({id:e,filter:{_:"channelParticipantsMentions",q:t,top_msg_id:getServerMessageId(r)},limit:50,offset:0})).then(o=>o.participants.map(p=>getParticipantPeerId(p))):e&&(n=Promise.resolve(this.getChatFull(e)).then(o=>o.participants.participants.map(p=>p.user_id.toPeerId()))),Promise.all([s?[]:this.appUsersManager.getTopPeers("bots_inline").catch(()=>[]),n,s&&this.appUsersManager.getContactsPeerIds(t,!1,"rating",30)]).then(([o,p,c])=>{c&&(c=c.filter(u=>{const g=this.appPeersManager.getPeer(u);return!!getPeerActiveUsernames(g)[0]}));const f=u=>u?u.map(g=>({id:g,rating:0})):[],l=o.concat(f(p),f(c));return a(l)})}invalidateChannelParticipants(e){this.apiManager.clearCache("channels.getParticipants",t=>t.channel.channel_id===e),this.getCachedFullChat(e)&&this.refreshFullPeer(e.toPeerId(!0))}refreshFullPeer(e){if(e.isUser()){const t=e.toUserId();delete this.usersFull[t],this.rootScope.dispatchEvent("user_full_update",t)}else{const t=e.toChatId();delete this.chatsFull[t],this.rootScope.dispatchEvent("chat_full_update",t)}}refreshFullPeerIfNeeded(e){(e.isUser()?this.usersFull[e.toUserId()]:this.chatsFull[e.toChatId()])&&this.refreshFullPeer(e)}updateProfile(e,t,r){return this.apiManager.invokeApi("account.updateProfile",{first_name:e,last_name:t,about:r}).then(s=>{if(this.appUsersManager.saveApiUser(s),r!==void 0){const a=s.id.toPeerId(),n=this.usersFull[s.id];n&&(n.about=r),this.rootScope.dispatchEvent("peer_bio_edit",a)}return this.getProfile(s.id,!0)})}setBotInfo(e,t,r){return this.apiManager.invokeApi("bots.setBotInfo",{lang_code:"",bot:this.appUsersManager.getUserInput(e),name:t,about:r}).then(()=>{const s=this.appUsersManager.getUser(e);t!==void 0&&this.appUsersManager.saveApiUser({...s,first_name:t});const a=this.getCachedFullUser(e);return r!==void 0&&(a&&(a.about=r),this.rootScope.dispatchEvent("peer_bio_edit",e.toPeerId())),this.getProfile(e,!0)})}getBotInfo(e){return this.apiManager.invokeApiSingle("bots.getBotInfo",{bot:this.appUsersManager.getUserInput(e),lang_code:""})}uploadProfilePhoto(e,t){return this.apiManager.invokeApi("photos.uploadProfilePhoto",{file:e,bot:t?this.appUsersManager.getUserInput(t):void 0}).then(r=>{const s=r.photo;if(!r.users.length){const o=s.sizes.find(p=>p._==="photoStrippedSize");r.users.push({...t?this.appUsersManager.getUser(t):this.appUsersManager.getSelf(),photo:{_:"userProfilePhoto",dc_id:s.dc_id,photo_id:s.id,stripped_thumb:o?.bytes,pFlags:{}}})}this.appUsersManager.saveApiUsers(r.users);const a=t?t.toPeerId():this.appPeersManager.peerId;this.appPhotosManager.savePhoto(r.photo,{type:"profilePhoto",peerId:a});const n=a.toUserId();this.apiUpdatesManager.processLocalUpdate({_:"updateUser",user_id:n})})}deletePhotos(e){return this.apiManager.invokeApiSingle("photos.deletePhotos",{id:e.map(t=>{const r=this.appPhotosManager.getPhoto(t);return getPhotoInput(r)})}).then(t=>{})}verifyParticipantForOnlineCount(e){const t=this.appUsersManager.getUser(e.user_id);return!!(t&&t.status&&t.status._==="userStatusOnline")}reduceParticipantsForOnlineCount(e){return e.reduce((t,r)=>t+ +this.verifyParticipantForOnlineCount(r),0)}getOnlines(e){return this.appChatsManager.isBroadcast(e)?1:callbackify(this.getChatFull(e),r=>{if(getParticipantsCount(r)<2)return 1;if(this.appChatsManager.isMegagroup(e)){if(r.participants_count<=100){const n=this.getChannelParticipants({id:e,filter:{_:"channelParticipantsRecent"},limit:100});return callbackify(n,o=>this.reduceParticipantsForOnlineCount(o.participants))}const a=this.apiManager.invokeApiCacheable("messages.getOnlines",{peer:this.appChatsManager.getChannelInputPeer(e)},{cacheSeconds:60,syncIfHasResult:!0});return callbackify(a,n=>n.onlines??1)}const s=r.participants;return s?.participants?this.reduceParticipantsForOnlineCount(s.participants):1})}getTypingsKey(e,t){return e+(t?`_${t}`:"")}getPeerTypings(e,t){return this.typingsInPeer[this.getTypingsKey(e,t)]}canGiftPremium(e){return this.appUsersManager.getUser(e)?.pFlags?.premium?!1:callbackify(this.getProfile(e),r=>{const s=this.appUsersManager.getUser(e);return!!r.premium_gifts&&!s?.pFlags?.premium})}canViewStatistics(e){if(e.isUser())return!1;const t=e.toChatId(),r=this.getCachedFullChat(t);return r?!!(r.stats_dc&&r.pFlags.can_view_stats):!1}refreshPeerSettingsIfNeeded(e){this.peerSettings[e]&&(delete this.peerSettings[e],callbackify(this.getPeerSettings(e),t=>{this.apiUpdatesManager.processLocalUpdate({_:"updatePeerSettings",peer:this.appPeersManager.getOutputPeer(e),settings:t})}))}getPeerSettings(e){return this.peerSettings[e]?this.peerSettings[e]:this.apiManager.invokeApiSingleProcess({method:"messages.getPeerSettings",params:{peer:this.appPeersManager.getInputPeerById(e)},processResult:t=>(this.appChatsManager.saveApiChats(t.chats,!0),this.appUsersManager.saveApiUsers(t.users),this.peerSettings[e]=t.settings)})}hidePeerSettingsBar(e){return this.apiManager.invokeApiSingleProcess({method:"messages.hidePeerSettingsBar",params:{peer:this.appPeersManager.getInputPeerById(e)},processResult:()=>{this.refreshPeerSettingsIfNeeded(e)}})}}function getDefaultExportFromCjs$1(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var browser$c={exports:{}},process=browser$c.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(d){if(cachedSetTimeout===setTimeout)return setTimeout(d,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(d,0);try{return cachedSetTimeout(d,0)}catch{try{return cachedSetTimeout.call(null,d,0)}catch{return cachedSetTimeout.call(this,d,0)}}}function runClearTimeout(d){if(cachedClearTimeout===clearTimeout)return clearTimeout(d);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(d);try{return cachedClearTimeout(d)}catch{try{return cachedClearTimeout.call(null,d)}catch{return cachedClearTimeout.call(this,d)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var d=runTimeout(cleanUpNextTick);draining=!0;for(var e=queue.length;e;){for(currentQueue=queue,queue=[];++queueIndex<e;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,e=queue.length}currentQueue=null,draining=!1,runClearTimeout(d)}}process.nextTick=function(d){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];queue.push(new Item(d,e)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(d,e){this.fun=d,this.array=e}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=!0;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(d){return[]};process.binding=function(d){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(d){throw new Error("process.chdir is not supported")};process.umask=function(){return 0};var browserExports=browser$c.exports;const process$1=getDefaultExportFromCjs$1(browserExports);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}function getAugmentedNamespace(d){if(d.__esModule)return d;var e=d.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(d).forEach(function(r){var s=Object.getOwnPropertyDescriptor(d,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return d[r]}})}),t}var md5$1={exports:{}},cryptoBrowserify={},browser$b={exports:{}},safeBuffer$1={exports:{}},buffer$1={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup[45]=62;revLookup[95]=63;function getLens(d){var e=d.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=d.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function byteLength(d){var e=getLens(d),t=e[0],r=e[1];return(t+r)*3/4-r}function _byteLength(d,e,t){return(e+t)*3/4-t}function toByteArray(d){var e,t=getLens(d),r=t[0],s=t[1],a=new Arr(_byteLength(d,r,s)),n=0,o=s>0?r-4:r,p;for(p=0;p<o;p+=4)e=revLookup[d.charCodeAt(p)]<<18|revLookup[d.charCodeAt(p+1)]<<12|revLookup[d.charCodeAt(p+2)]<<6|revLookup[d.charCodeAt(p+3)],a[n++]=e>>16&255,a[n++]=e>>8&255,a[n++]=e&255;return s===2&&(e=revLookup[d.charCodeAt(p)]<<2|revLookup[d.charCodeAt(p+1)]>>4,a[n++]=e&255),s===1&&(e=revLookup[d.charCodeAt(p)]<<10|revLookup[d.charCodeAt(p+1)]<<4|revLookup[d.charCodeAt(p+2)]>>2,a[n++]=e>>8&255,a[n++]=e&255),a}function tripletToBase64(d){return lookup[d>>18&63]+lookup[d>>12&63]+lookup[d>>6&63]+lookup[d&63]}function encodeChunk(d,e,t){for(var r,s=[],a=e;a<t;a+=3)r=(d[a]<<16&16711680)+(d[a+1]<<8&65280)+(d[a+2]&255),s.push(tripletToBase64(r));return s.join("")}function fromByteArray(d){for(var e,t=d.length,r=t%3,s=[],a=16383,n=0,o=t-r;n<o;n+=a)s.push(encodeChunk(d,n,n+a>o?o:n+a));return r===1?(e=d[t-1],s.push(lookup[e>>2]+lookup[e<<4&63]+"==")):r===2&&(e=(d[t-2]<<8)+d[t-1],s.push(lookup[e>>10]+lookup[e>>4&63]+lookup[e<<2&63]+"=")),s.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(d,e,t,r,s){var a,n,o=s*8-r-1,p=(1<<o)-1,c=p>>1,f=-7,l=t?s-1:0,u=t?-1:1,g=d[e+l];for(l+=u,a=g&(1<<-f)-1,g>>=-f,f+=o;f>0;a=a*256+d[e+l],l+=u,f-=8);for(n=a&(1<<-f)-1,a>>=-f,f+=r;f>0;n=n*256+d[e+l],l+=u,f-=8);if(a===0)a=1-c;else{if(a===p)return n?NaN:(g?-1:1)*(1/0);n=n+Math.pow(2,r),a=a-c}return(g?-1:1)*n*Math.pow(2,a-r)};ieee754.write=function(d,e,t,r,s,a){var n,o,p,c=a*8-s-1,f=(1<<c)-1,l=f>>1,u=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:a-1,y=r?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,n=f):(n=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-n))<1&&(n--,p*=2),n+l>=1?e+=u/p:e+=u*Math.pow(2,1-l),e*p>=2&&(n++,p/=2),n+l>=f?(o=0,n=f):n+l>=1?(o=(e*p-1)*Math.pow(2,s),n=n+l):(o=e*Math.pow(2,l-1)*Math.pow(2,s),n=0));s>=8;d[t+g]=o&255,g+=y,o/=256,s-=8);for(n=n<<s|o,c+=s;c>0;d[t+g]=n&255,g+=y,n/=256,c-=8);d[t+g-y]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(d){const e=base64Js,t=ieee754,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;d.Buffer=f,d.SlowBuffer=O,d.INSPECT_MAX_BYTES=50;const s=2147483647;d.kMaxLength=s;const{Uint8Array:a,ArrayBuffer:n,SharedArrayBuffer:o}=globalThis;f.TYPED_ARRAY_SUPPORT=p(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function p(){try{const F=new a(1),C={foo:function(){return 42}};return Object.setPrototypeOf(C,a.prototype),Object.setPrototypeOf(F,C),F.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});function c(F){if(F>s)throw new RangeError('The value "'+F+'" is invalid for option "size"');const C=new a(F);return Object.setPrototypeOf(C,f.prototype),C}function f(F,C,R){if(typeof F=="number"){if(typeof C=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(F)}return l(F,C,R)}f.poolSize=8192;function l(F,C,R){if(typeof F=="string")return b(F,C);if(n.isView(F))return S(F);if(F==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F);if(Le(F,n)||F&&Le(F.buffer,n)||typeof o<"u"&&(Le(F,o)||F&&Le(F.buffer,o)))return A(F,C,R);if(typeof F=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const j=F.valueOf&&F.valueOf();if(j!=null&&j!==F)return f.from(j,C,R);const Y=k(F);if(Y)return Y;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof F[Symbol.toPrimitive]=="function")return f.from(F[Symbol.toPrimitive]("string"),C,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F)}f.from=function(F,C,R){return l(F,C,R)},Object.setPrototypeOf(f.prototype,a.prototype),Object.setPrototypeOf(f,a);function u(F){if(typeof F!="number")throw new TypeError('"size" argument must be of type number');if(F<0)throw new RangeError('The value "'+F+'" is invalid for option "size"')}function g(F,C,R){return u(F),F<=0?c(F):C!==void 0?typeof R=="string"?c(F).fill(C,R):c(F).fill(C):c(F)}f.alloc=function(F,C,R){return g(F,C,R)};function y(F){return u(F),c(F<0?0:T(F)|0)}f.allocUnsafe=function(F){return y(F)},f.allocUnsafeSlow=function(F){return y(F)};function b(F,C){if((typeof C!="string"||C==="")&&(C="utf8"),!f.isEncoding(C))throw new TypeError("Unknown encoding: "+C);const R=$(F,C)|0;let j=c(R);const Y=j.write(F,C);return Y!==R&&(j=j.slice(0,Y)),j}function I(F){const C=F.length<0?0:T(F.length)|0,R=c(C);for(let j=0;j<C;j+=1)R[j]=F[j]&255;return R}function S(F){if(Le(F,a)){const C=new a(F);return A(C.buffer,C.byteOffset,C.byteLength)}return I(F)}function A(F,C,R){if(C<0||F.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if(F.byteLength<C+(R||0))throw new RangeError('"length" is outside of buffer bounds');let j;return C===void 0&&R===void 0?j=new a(F):R===void 0?j=new a(F,C):j=new a(F,C,R),Object.setPrototypeOf(j,f.prototype),j}function k(F){if(f.isBuffer(F)){const C=T(F.length)|0,R=c(C);return R.length===0||F.copy(R,0,0,C),R}if(F.length!==void 0)return typeof F.length!="number"||V(F.length)?c(0):I(F);if(F.type==="Buffer"&&Array.isArray(F.data))return I(F.data)}function T(F){if(F>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return F|0}function O(F){return+F!=F&&(F=0),f.alloc(+F)}f.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==f.prototype},f.compare=function(C,R){if(Le(C,a)&&(C=f.from(C,C.offset,C.byteLength)),Le(R,a)&&(R=f.from(R,R.offset,R.byteLength)),!f.isBuffer(C)||!f.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===R)return 0;let j=C.length,Y=R.length;for(let ie=0,pe=Math.min(j,Y);ie<pe;++ie)if(C[ie]!==R[ie]){j=C[ie],Y=R[ie];break}return j<Y?-1:Y<j?1:0},f.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(C,R){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return f.alloc(0);let j;if(R===void 0)for(R=0,j=0;j<C.length;++j)R+=C[j].length;const Y=f.allocUnsafe(R);let ie=0;for(j=0;j<C.length;++j){let pe=C[j];if(Le(pe,a))ie+pe.length>Y.length?(f.isBuffer(pe)||(pe=f.from(pe)),pe.copy(Y,ie)):a.prototype.set.call(Y,pe,ie);else if(f.isBuffer(pe))pe.copy(Y,ie);else throw new TypeError('"list" argument must be an Array of Buffers');ie+=pe.length}return Y};function $(F,C){if(f.isBuffer(F))return F.length;if(n.isView(F)||Le(F,n))return F.byteLength;if(typeof F!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof F);const R=F.length,j=arguments.length>2&&arguments[2]===!0;if(!j&&R===0)return 0;let Y=!1;for(;;)switch(C){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return Ge(F).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return Ke(F).length;default:if(Y)return j?-1:Ge(F).length;C=(""+C).toLowerCase(),Y=!0}}f.byteLength=$;function K(F,C,R){let j=!1;if((C===void 0||C<0)&&(C=0),C>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,C>>>=0,R<=C))return"";for(F||(F="utf8");;)switch(F){case"hex":return x(this,C,R);case"utf8":case"utf-8":return M(this,C,R);case"ascii":return w(this,C,R);case"latin1":case"binary":return B(this,C,R);case"base64":return E(this,C,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,C,R);default:if(j)throw new TypeError("Unknown encoding: "+F);F=(F+"").toLowerCase(),j=!0}}f.prototype._isBuffer=!0;function ee(F,C,R){const j=F[C];F[C]=F[R],F[R]=j}f.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let R=0;R<C;R+=2)ee(this,R,R+1);return this},f.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let R=0;R<C;R+=4)ee(this,R,R+3),ee(this,R+1,R+2);return this},f.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let R=0;R<C;R+=8)ee(this,R,R+7),ee(this,R+1,R+6),ee(this,R+2,R+5),ee(this,R+3,R+4);return this},f.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?M(this,0,C):K.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(C){if(!f.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:f.compare(this,C)===0},f.prototype.inspect=function(){let C="";const R=d.INSPECT_MAX_BYTES;return C=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(C+=" ... "),"<Buffer "+C+">"},r&&(f.prototype[r]=f.prototype.inspect),f.prototype.compare=function(C,R,j,Y,ie){if(Le(C,a)&&(C=f.from(C,C.offset,C.byteLength)),!f.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(R===void 0&&(R=0),j===void 0&&(j=C?C.length:0),Y===void 0&&(Y=0),ie===void 0&&(ie=this.length),R<0||j>C.length||Y<0||ie>this.length)throw new RangeError("out of range index");if(Y>=ie&&R>=j)return 0;if(Y>=ie)return-1;if(R>=j)return 1;if(R>>>=0,j>>>=0,Y>>>=0,ie>>>=0,this===C)return 0;let pe=ie-Y,Me=j-R;const Ce=Math.min(pe,Me),Ee=this.slice(Y,ie),Z=C.slice(R,j);for(let ne=0;ne<Ce;++ne)if(Ee[ne]!==Z[ne]){pe=Ee[ne],Me=Z[ne];break}return pe<Me?-1:Me<pe?1:0};function Q(F,C,R,j,Y){if(F.length===0)return-1;if(typeof R=="string"?(j=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,V(R)&&(R=Y?0:F.length-1),R<0&&(R=F.length+R),R>=F.length){if(Y)return-1;R=F.length-1}else if(R<0)if(Y)R=0;else return-1;if(typeof C=="string"&&(C=f.from(C,j)),f.isBuffer(C))return C.length===0?-1:te(F,C,R,j,Y);if(typeof C=="number")return C=C&255,typeof a.prototype.indexOf=="function"?Y?a.prototype.indexOf.call(F,C,R):a.prototype.lastIndexOf.call(F,C,R):te(F,[C],R,j,Y);throw new TypeError("val must be string, number or Buffer")}function te(F,C,R,j,Y){let ie=1,pe=F.length,Me=C.length;if(j!==void 0&&(j=String(j).toLowerCase(),j==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(F.length<2||C.length<2)return-1;ie=2,pe/=2,Me/=2,R/=2}function Ce(Z,ne){return ie===1?Z[ne]:Z.readUInt16BE(ne*ie)}let Ee;if(Y){let Z=-1;for(Ee=R;Ee<pe;Ee++)if(Ce(F,Ee)===Ce(C,Z===-1?0:Ee-Z)){if(Z===-1&&(Z=Ee),Ee-Z+1===Me)return Z*ie}else Z!==-1&&(Ee-=Ee-Z),Z=-1}else for(R+Me>pe&&(R=pe-Me),Ee=R;Ee>=0;Ee--){let Z=!0;for(let ne=0;ne<Me;ne++)if(Ce(F,Ee+ne)!==Ce(C,ne)){Z=!1;break}if(Z)return Ee}return-1}f.prototype.includes=function(C,R,j){return this.indexOf(C,R,j)!==-1},f.prototype.indexOf=function(C,R,j){return Q(this,C,R,j,!0)},f.prototype.lastIndexOf=function(C,R,j){return Q(this,C,R,j,!1)};function N(F,C,R,j){R=Number(R)||0;const Y=F.length-R;j?(j=Number(j),j>Y&&(j=Y)):j=Y;const ie=C.length;j>ie/2&&(j=ie/2);let pe;for(pe=0;pe<j;++pe){const Me=parseInt(C.substr(pe*2,2),16);if(V(Me))return pe;F[R+pe]=Me}return pe}function m(F,C,R,j){return be(Ge(C,F.length-R),F,R,j)}function _(F,C,R,j){return be(Be(C),F,R,j)}function h(F,C,R,j){return be(Ke(C),F,R,j)}function v(F,C,R,j){return be(He(C,F.length-R),F,R,j)}f.prototype.write=function(C,R,j,Y){if(R===void 0)Y="utf8",j=this.length,R=0;else if(j===void 0&&typeof R=="string")Y=R,j=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(j)?(j=j>>>0,Y===void 0&&(Y="utf8")):(Y=j,j=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ie=this.length-R;if((j===void 0||j>ie)&&(j=ie),C.length>0&&(j<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");Y||(Y="utf8");let pe=!1;for(;;)switch(Y){case"hex":return N(this,C,R,j);case"utf8":case"utf-8":return m(this,C,R,j);case"ascii":case"latin1":case"binary":return _(this,C,R,j);case"base64":return h(this,C,R,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,C,R,j);default:if(pe)throw new TypeError("Unknown encoding: "+Y);Y=(""+Y).toLowerCase(),pe=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(F,C,R){return C===0&&R===F.length?e.fromByteArray(F):e.fromByteArray(F.slice(C,R))}function M(F,C,R){R=Math.min(F.length,R);const j=[];let Y=C;for(;Y<R;){const ie=F[Y];let pe=null,Me=ie>239?4:ie>223?3:ie>191?2:1;if(Y+Me<=R){let Ce,Ee,Z,ne;switch(Me){case 1:ie<128&&(pe=ie);break;case 2:Ce=F[Y+1],(Ce&192)===128&&(ne=(ie&31)<<6|Ce&63,ne>127&&(pe=ne));break;case 3:Ce=F[Y+1],Ee=F[Y+2],(Ce&192)===128&&(Ee&192)===128&&(ne=(ie&15)<<12|(Ce&63)<<6|Ee&63,ne>2047&&(ne<55296||ne>57343)&&(pe=ne));break;case 4:Ce=F[Y+1],Ee=F[Y+2],Z=F[Y+3],(Ce&192)===128&&(Ee&192)===128&&(Z&192)===128&&(ne=(ie&15)<<18|(Ce&63)<<12|(Ee&63)<<6|Z&63,ne>65535&&ne<1114112&&(pe=ne))}}pe===null?(pe=65533,Me=1):pe>65535&&(pe-=65536,j.push(pe>>>10&1023|55296),pe=56320|pe&1023),j.push(pe),Y+=Me}return D(j)}const P=4096;function D(F){const C=F.length;if(C<=P)return String.fromCharCode.apply(String,F);let R="",j=0;for(;j<C;)R+=String.fromCharCode.apply(String,F.slice(j,j+=P));return R}function w(F,C,R){let j="";R=Math.min(F.length,R);for(let Y=C;Y<R;++Y)j+=String.fromCharCode(F[Y]&127);return j}function B(F,C,R){let j="";R=Math.min(F.length,R);for(let Y=C;Y<R;++Y)j+=String.fromCharCode(F[Y]);return j}function x(F,C,R){const j=F.length;(!C||C<0)&&(C=0),(!R||R<0||R>j)&&(R=j);let Y="";for(let ie=C;ie<R;++ie)Y+=W[F[ie]];return Y}function U(F,C,R){const j=F.slice(C,R);let Y="";for(let ie=0;ie<j.length-1;ie+=2)Y+=String.fromCharCode(j[ie]+j[ie+1]*256);return Y}f.prototype.slice=function(C,R){const j=this.length;C=~~C,R=R===void 0?j:~~R,C<0?(C+=j,C<0&&(C=0)):C>j&&(C=j),R<0?(R+=j,R<0&&(R=0)):R>j&&(R=j),R<C&&(R=C);const Y=this.subarray(C,R);return Object.setPrototypeOf(Y,f.prototype),Y};function X(F,C,R){if(F%1!==0||F<0)throw new RangeError("offset is not uint");if(F+C>R)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(C,R,j){C=C>>>0,R=R>>>0,j||X(C,R,this.length);let Y=this[C],ie=1,pe=0;for(;++pe<R&&(ie*=256);)Y+=this[C+pe]*ie;return Y},f.prototype.readUintBE=f.prototype.readUIntBE=function(C,R,j){C=C>>>0,R=R>>>0,j||X(C,R,this.length);let Y=this[C+--R],ie=1;for(;R>0&&(ie*=256);)Y+=this[C+--R]*ie;return Y},f.prototype.readUint8=f.prototype.readUInt8=function(C,R){return C=C>>>0,R||X(C,1,this.length),this[C]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(C,R){return C=C>>>0,R||X(C,2,this.length),this[C]|this[C+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(C,R){return C=C>>>0,R||X(C,2,this.length),this[C]<<8|this[C+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(C,R){return C=C>>>0,R||X(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(C,R){return C=C>>>0,R||X(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},f.prototype.readBigUInt64LE=ae(function(C){C=C>>>0,Pe(C,"offset");const R=this[C],j=this[C+7];(R===void 0||j===void 0)&&ke(C,this.length-8);const Y=R+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,ie=this[++C]+this[++C]*2**8+this[++C]*2**16+j*2**24;return BigInt(Y)+(BigInt(ie)<<BigInt(32))}),f.prototype.readBigUInt64BE=ae(function(C){C=C>>>0,Pe(C,"offset");const R=this[C],j=this[C+7];(R===void 0||j===void 0)&&ke(C,this.length-8);const Y=R*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],ie=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+j;return(BigInt(Y)<<BigInt(32))+BigInt(ie)}),f.prototype.readIntLE=function(C,R,j){C=C>>>0,R=R>>>0,j||X(C,R,this.length);let Y=this[C],ie=1,pe=0;for(;++pe<R&&(ie*=256);)Y+=this[C+pe]*ie;return ie*=128,Y>=ie&&(Y-=Math.pow(2,8*R)),Y},f.prototype.readIntBE=function(C,R,j){C=C>>>0,R=R>>>0,j||X(C,R,this.length);let Y=R,ie=1,pe=this[C+--Y];for(;Y>0&&(ie*=256);)pe+=this[C+--Y]*ie;return ie*=128,pe>=ie&&(pe-=Math.pow(2,8*R)),pe},f.prototype.readInt8=function(C,R){return C=C>>>0,R||X(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},f.prototype.readInt16LE=function(C,R){C=C>>>0,R||X(C,2,this.length);const j=this[C]|this[C+1]<<8;return j&32768?j|4294901760:j},f.prototype.readInt16BE=function(C,R){C=C>>>0,R||X(C,2,this.length);const j=this[C+1]|this[C]<<8;return j&32768?j|4294901760:j},f.prototype.readInt32LE=function(C,R){return C=C>>>0,R||X(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},f.prototype.readInt32BE=function(C,R){return C=C>>>0,R||X(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},f.prototype.readBigInt64LE=ae(function(C){C=C>>>0,Pe(C,"offset");const R=this[C],j=this[C+7];(R===void 0||j===void 0)&&ke(C,this.length-8);const Y=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(j<<24);return(BigInt(Y)<<BigInt(32))+BigInt(R+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),f.prototype.readBigInt64BE=ae(function(C){C=C>>>0,Pe(C,"offset");const R=this[C],j=this[C+7];(R===void 0||j===void 0)&&ke(C,this.length-8);const Y=(R<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt(Y)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+j)}),f.prototype.readFloatLE=function(C,R){return C=C>>>0,R||X(C,4,this.length),t.read(this,C,!0,23,4)},f.prototype.readFloatBE=function(C,R){return C=C>>>0,R||X(C,4,this.length),t.read(this,C,!1,23,4)},f.prototype.readDoubleLE=function(C,R){return C=C>>>0,R||X(C,8,this.length),t.read(this,C,!0,52,8)},f.prototype.readDoubleBE=function(C,R){return C=C>>>0,R||X(C,8,this.length),t.read(this,C,!1,52,8)};function se(F,C,R,j,Y,ie){if(!f.isBuffer(F))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>Y||C<ie)throw new RangeError('"value" argument is out of bounds');if(R+j>F.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(C,R,j,Y){if(C=+C,R=R>>>0,j=j>>>0,!Y){const Me=Math.pow(2,8*j)-1;se(this,C,R,j,Me,0)}let ie=1,pe=0;for(this[R]=C&255;++pe<j&&(ie*=256);)this[R+pe]=C/ie&255;return R+j},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(C,R,j,Y){if(C=+C,R=R>>>0,j=j>>>0,!Y){const Me=Math.pow(2,8*j)-1;se(this,C,R,j,Me,0)}let ie=j-1,pe=1;for(this[R+ie]=C&255;--ie>=0&&(pe*=256);)this[R+ie]=C/pe&255;return R+j},f.prototype.writeUint8=f.prototype.writeUInt8=function(C,R,j){return C=+C,R=R>>>0,j||se(this,C,R,1,255,0),this[R]=C&255,R+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(C,R,j){return C=+C,R=R>>>0,j||se(this,C,R,2,65535,0),this[R]=C&255,this[R+1]=C>>>8,R+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(C,R,j){return C=+C,R=R>>>0,j||se(this,C,R,2,65535,0),this[R]=C>>>8,this[R+1]=C&255,R+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(C,R,j){return C=+C,R=R>>>0,j||se(this,C,R,4,4294967295,0),this[R+3]=C>>>24,this[R+2]=C>>>16,this[R+1]=C>>>8,this[R]=C&255,R+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(C,R,j){return C=+C,R=R>>>0,j||se(this,C,R,4,4294967295,0),this[R]=C>>>24,this[R+1]=C>>>16,this[R+2]=C>>>8,this[R+3]=C&255,R+4};function J(F,C,R,j,Y){we(C,j,Y,F,R,7);let ie=Number(C&BigInt(4294967295));F[R++]=ie,ie=ie>>8,F[R++]=ie,ie=ie>>8,F[R++]=ie,ie=ie>>8,F[R++]=ie;let pe=Number(C>>BigInt(32)&BigInt(4294967295));return F[R++]=pe,pe=pe>>8,F[R++]=pe,pe=pe>>8,F[R++]=pe,pe=pe>>8,F[R++]=pe,R}function L(F,C,R,j,Y){we(C,j,Y,F,R,7);let ie=Number(C&BigInt(4294967295));F[R+7]=ie,ie=ie>>8,F[R+6]=ie,ie=ie>>8,F[R+5]=ie,ie=ie>>8,F[R+4]=ie;let pe=Number(C>>BigInt(32)&BigInt(4294967295));return F[R+3]=pe,pe=pe>>8,F[R+2]=pe,pe=pe>>8,F[R+1]=pe,pe=pe>>8,F[R]=pe,R+8}f.prototype.writeBigUInt64LE=ae(function(C,R=0){return J(this,C,R,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=ae(function(C,R=0){return L(this,C,R,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(C,R,j,Y){if(C=+C,R=R>>>0,!Y){const Ce=Math.pow(2,8*j-1);se(this,C,R,j,Ce-1,-Ce)}let ie=0,pe=1,Me=0;for(this[R]=C&255;++ie<j&&(pe*=256);)C<0&&Me===0&&this[R+ie-1]!==0&&(Me=1),this[R+ie]=(C/pe>>0)-Me&255;return R+j},f.prototype.writeIntBE=function(C,R,j,Y){if(C=+C,R=R>>>0,!Y){const Ce=Math.pow(2,8*j-1);se(this,C,R,j,Ce-1,-Ce)}let ie=j-1,pe=1,Me=0;for(this[R+ie]=C&255;--ie>=0&&(pe*=256);)C<0&&Me===0&&this[R+ie+1]!==0&&(Me=1),this[R+ie]=(C/pe>>0)-Me&255;return R+j},f.prototype.writeInt8=function(C,R,j){return C=+C,R=R>>>0,j||se(this,C,R,1,127,-128),C<0&&(C=255+C+1),this[R]=C&255,R+1},f.prototype.writeInt16LE=function(C,R,j){return C=+C,R=R>>>0,j||se(this,C,R,2,32767,-32768),this[R]=C&255,this[R+1]=C>>>8,R+2},f.prototype.writeInt16BE=function(C,R,j){return C=+C,R=R>>>0,j||se(this,C,R,2,32767,-32768),this[R]=C>>>8,this[R+1]=C&255,R+2},f.prototype.writeInt32LE=function(C,R,j){return C=+C,R=R>>>0,j||se(this,C,R,4,2147483647,-2147483648),this[R]=C&255,this[R+1]=C>>>8,this[R+2]=C>>>16,this[R+3]=C>>>24,R+4},f.prototype.writeInt32BE=function(C,R,j){return C=+C,R=R>>>0,j||se(this,C,R,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[R]=C>>>24,this[R+1]=C>>>16,this[R+2]=C>>>8,this[R+3]=C&255,R+4},f.prototype.writeBigInt64LE=ae(function(C,R=0){return J(this,C,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=ae(function(C,R=0){return L(this,C,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function G(F,C,R,j,Y,ie){if(R+j>F.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function re(F,C,R,j,Y){return C=+C,R=R>>>0,Y||G(F,C,R,4),t.write(F,C,R,j,23,4),R+4}f.prototype.writeFloatLE=function(C,R,j){return re(this,C,R,!0,j)},f.prototype.writeFloatBE=function(C,R,j){return re(this,C,R,!1,j)};function fe(F,C,R,j,Y){return C=+C,R=R>>>0,Y||G(F,C,R,8),t.write(F,C,R,j,52,8),R+8}f.prototype.writeDoubleLE=function(C,R,j){return fe(this,C,R,!0,j)},f.prototype.writeDoubleBE=function(C,R,j){return fe(this,C,R,!1,j)},f.prototype.copy=function(C,R,j,Y){if(!f.isBuffer(C))throw new TypeError("argument should be a Buffer");if(j||(j=0),!Y&&Y!==0&&(Y=this.length),R>=C.length&&(R=C.length),R||(R=0),Y>0&&Y<j&&(Y=j),Y===j||C.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(j<0||j>=this.length)throw new RangeError("Index out of range");if(Y<0)throw new RangeError("sourceEnd out of bounds");Y>this.length&&(Y=this.length),C.length-R<Y-j&&(Y=C.length-R+j);const ie=Y-j;return this===C&&typeof a.prototype.copyWithin=="function"?this.copyWithin(R,j,Y):a.prototype.set.call(C,this.subarray(j,Y),R),ie},f.prototype.fill=function(C,R,j,Y){if(typeof C=="string"){if(typeof R=="string"?(Y=R,R=0,j=this.length):typeof j=="string"&&(Y=j,j=this.length),Y!==void 0&&typeof Y!="string")throw new TypeError("encoding must be a string");if(typeof Y=="string"&&!f.isEncoding(Y))throw new TypeError("Unknown encoding: "+Y);if(C.length===1){const pe=C.charCodeAt(0);(Y==="utf8"&&pe<128||Y==="latin1")&&(C=pe)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(R<0||this.length<R||this.length<j)throw new RangeError("Out of range index");if(j<=R)return this;R=R>>>0,j=j===void 0?this.length:j>>>0,C||(C=0);let ie;if(typeof C=="number")for(ie=R;ie<j;++ie)this[ie]=C;else{const pe=f.isBuffer(C)?C:f.from(C,Y),Me=pe.length;if(Me===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(ie=0;ie<j-R;++ie)this[ie+R]=pe[ie%Me]}return this};const z={};function H(F,C,R){z[F]=class extends R{constructor(){super(),Object.defineProperty(this,"message",{value:C.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${F}]`,this.stack,delete this.name}get code(){return F}set code(Y){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Y,writable:!0})}toString(){return`${this.name} [${F}]: ${this.message}`}}}H("ERR_BUFFER_OUT_OF_BOUNDS",function(F){return F?`${F} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),H("ERR_INVALID_ARG_TYPE",function(F,C){return`The "${F}" argument must be of type number. Received type ${typeof C}`},TypeError),H("ERR_OUT_OF_RANGE",function(F,C,R){let j=`The value of "${F}" is out of range.`,Y=R;return Number.isInteger(R)&&Math.abs(R)>2**32?Y=de(String(R)):typeof R=="bigint"&&(Y=String(R),(R>BigInt(2)**BigInt(32)||R<-(BigInt(2)**BigInt(32)))&&(Y=de(Y)),Y+="n"),j+=` It must be ${C}. Received ${Y}`,j},RangeError);function de(F){let C="",R=F.length;const j=F[0]==="-"?1:0;for(;R>=j+4;R-=3)C=`_${F.slice(R-3,R)}${C}`;return`${F.slice(0,R)}${C}`}function me(F,C,R){Pe(C,"offset"),(F[C]===void 0||F[C+R]===void 0)&&ke(C,F.length-(R+1))}function we(F,C,R,j,Y,ie){if(F>R||F<C){const pe=typeof C=="bigint"?"n":"";let Me;throw C===0||C===BigInt(0)?Me=`>= 0${pe} and < 2${pe} ** ${(ie+1)*8}${pe}`:Me=`>= -(2${pe} ** ${(ie+1)*8-1}${pe}) and < 2 ** ${(ie+1)*8-1}${pe}`,new z.ERR_OUT_OF_RANGE("value",Me,F)}me(j,Y,ie)}function Pe(F,C){if(typeof F!="number")throw new z.ERR_INVALID_ARG_TYPE(C,"number",F)}function ke(F,C,R){throw Math.floor(F)!==F?(Pe(F,R),new z.ERR_OUT_OF_RANGE("offset","an integer",F)):C<0?new z.ERR_BUFFER_OUT_OF_BOUNDS:new z.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${C}`,F)}const Ue=/[^+/0-9A-Za-z-_]/g;function he(F){if(F=F.split("=")[0],F=F.trim().replace(Ue,""),F.length<2)return"";for(;F.length%4!==0;)F=F+"=";return F}function Ge(F,C){C=C||1/0;let R;const j=F.length;let Y=null;const ie=[];for(let pe=0;pe<j;++pe){if(R=F.charCodeAt(pe),R>55295&&R<57344){if(!Y){if(R>56319){(C-=3)>-1&&ie.push(239,191,189);continue}else if(pe+1===j){(C-=3)>-1&&ie.push(239,191,189);continue}Y=R;continue}if(R<56320){(C-=3)>-1&&ie.push(239,191,189),Y=R;continue}R=(Y-55296<<10|R-56320)+65536}else Y&&(C-=3)>-1&&ie.push(239,191,189);if(Y=null,R<128){if((C-=1)<0)break;ie.push(R)}else if(R<2048){if((C-=2)<0)break;ie.push(R>>6|192,R&63|128)}else if(R<65536){if((C-=3)<0)break;ie.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((C-=4)<0)break;ie.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return ie}function Be(F){const C=[];for(let R=0;R<F.length;++R)C.push(F.charCodeAt(R)&255);return C}function He(F,C){let R,j,Y;const ie=[];for(let pe=0;pe<F.length&&!((C-=2)<0);++pe)R=F.charCodeAt(pe),j=R>>8,Y=R%256,ie.push(Y),ie.push(j);return ie}function Ke(F){return e.toByteArray(he(F))}function be(F,C,R,j){let Y;for(Y=0;Y<j&&!(Y+R>=C.length||Y>=F.length);++Y)C[Y+R]=F[Y];return Y}function Le(F,C){return F instanceof C||F!=null&&F.constructor!=null&&F.constructor.name!=null&&F.constructor.name===C.name}function V(F){return F!==F}const W=function(){const F="0123456789abcdef",C=new Array(256);for(let R=0;R<16;++R){const j=R*16;for(let Y=0;Y<16;++Y)C[j+Y]=F[R]+F[Y]}return C}();function ae(F){return typeof BigInt>"u"?oe:F}function oe(){throw new Error("BigInt not supported")}})(buffer$1);const Buffer=buffer$1.Buffer,Blob$1=buffer$1.Blob,BlobOptions=buffer$1.BlobOptions,Buffer$1=buffer$1.Buffer,File$1=buffer$1.File,FileOptions=buffer$1.FileOptions,INSPECT_MAX_BYTES=buffer$1.INSPECT_MAX_BYTES,SlowBuffer=buffer$1.SlowBuffer,TranscodeEncoding=buffer$1.TranscodeEncoding,atob$1=buffer$1.atob,btoa=buffer$1.btoa,constants$1=buffer$1.constants,isAscii=buffer$1.isAscii,isUtf8=buffer$1.isUtf8,kMaxLength=buffer$1.kMaxLength,kStringMaxLength=buffer$1.kStringMaxLength,resolveObjectURL=buffer$1.resolveObjectURL,transcode=buffer$1.transcode;var dist=Object.freeze({__proto__:null,Blob:Blob$1,BlobOptions,Buffer:Buffer$1,File:File$1,FileOptions,INSPECT_MAX_BYTES,SlowBuffer,TranscodeEncoding,atob:atob$1,btoa,constants:constants$1,default:Buffer,isAscii,isUtf8,kMaxLength,kStringMaxLength,resolveObjectURL,transcode}),require$$1$2=getAugmentedNamespace(dist);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer$1;function requireSafeBuffer$1(){return hasRequiredSafeBuffer$1||(hasRequiredSafeBuffer$1=1,function(d,e){var t=require$$1$2,r=t.Buffer;function s(n,o){for(var p in n)o[p]=n[p]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?d.exports=t:(s(t,e),e.Buffer=a);function a(n,o,p){return r(n,o,p)}a.prototype=Object.create(r.prototype),s(r,a),a.from=function(n,o,p){if(typeof n=="number")throw new TypeError("Argument must not be a number");return r(n,o,p)},a.alloc=function(n,o,p){if(typeof n!="number")throw new TypeError("Argument must be a number");var c=r(n);return o!==void 0?typeof p=="string"?c.fill(o,p):c.fill(o):c.fill(0),c},a.allocUnsafe=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return r(n)},a.allocUnsafeSlow=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(n)}}(safeBuffer$1,safeBuffer$1.exports)),safeBuffer$1.exports}var hasRequiredBrowser$b;function requireBrowser$b(){if(hasRequiredBrowser$b)return browser$b.exports;hasRequiredBrowser$b=1;var d=65536,e=4294967295;function t(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var r=requireSafeBuffer$1().Buffer,s=commonjsGlobal.crypto||commonjsGlobal.msCrypto;s&&s.getRandomValues?browser$b.exports=a:browser$b.exports=t;function a(n,o){if(n>e)throw new RangeError("requested too many random bytes");var p=r.allocUnsafe(n);if(n>0)if(n>d)for(var c=0;c<n;c+=d)s.getRandomValues(p.slice(c,c+d));else s.getRandomValues(p);return typeof o=="function"?process$1.nextTick(function(){o(null,p)}):p}return browser$b.exports}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),inherits_browser.exports}var readableBrowser$1={exports:{}},events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var d=typeof Reflect=="object"?Reflect:null,e=d&&typeof d.apply=="function"?d.apply:function(O,$,K){return Function.prototype.apply.call(O,$,K)},t;d&&typeof d.ownKeys=="function"?t=d.ownKeys:Object.getOwnPropertySymbols?t=function(O){return Object.getOwnPropertyNames(O).concat(Object.getOwnPropertySymbols(O))}:t=function(O){return Object.getOwnPropertyNames(O)};function r(T){console&&console.warn&&console.warn(T)}var s=Number.isNaN||function(O){return O!==O};function a(){a.init.call(this)}events.exports=a,events.exports.once=S,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var n=10;function o(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(T){if(typeof T!="number"||T<0||s(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");n=T}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(O){if(typeof O!="number"||O<0||s(O))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+O+".");return this._maxListeners=O,this};function p(T){return T._maxListeners===void 0?a.defaultMaxListeners:T._maxListeners}a.prototype.getMaxListeners=function(){return p(this)},a.prototype.emit=function(O){for(var $=[],K=1;K<arguments.length;K++)$.push(arguments[K]);var ee=O==="error",Q=this._events;if(Q!==void 0)ee=ee&&Q.error===void 0;else if(!ee)return!1;if(ee){var te;if($.length>0&&(te=$[0]),te instanceof Error)throw te;var N=new Error("Unhandled error."+(te?" ("+te.message+")":""));throw N.context=te,N}var m=Q[O];if(m===void 0)return!1;if(typeof m=="function")e(m,this,$);else for(var _=m.length,h=y(m,_),K=0;K<_;++K)e(h[K],this,$);return!0};function c(T,O,$,K){var ee,Q,te;if(o($),Q=T._events,Q===void 0?(Q=T._events=Object.create(null),T._eventsCount=0):(Q.newListener!==void 0&&(T.emit("newListener",O,$.listener?$.listener:$),Q=T._events),te=Q[O]),te===void 0)te=Q[O]=$,++T._eventsCount;else if(typeof te=="function"?te=Q[O]=K?[$,te]:[te,$]:K?te.unshift($):te.push($),ee=p(T),ee>0&&te.length>ee&&!te.warned){te.warned=!0;var N=new Error("Possible EventEmitter memory leak detected. "+te.length+" "+String(O)+" listeners added. Use emitter.setMaxListeners() to increase limit");N.name="MaxListenersExceededWarning",N.emitter=T,N.type=O,N.count=te.length,r(N)}return T}a.prototype.addListener=function(O,$){return c(this,O,$,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(O,$){return c(this,O,$,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(T,O,$){var K={fired:!1,wrapFn:void 0,target:T,type:O,listener:$},ee=f.bind(K);return ee.listener=$,K.wrapFn=ee,ee}a.prototype.once=function(O,$){return o($),this.on(O,l(this,O,$)),this},a.prototype.prependOnceListener=function(O,$){return o($),this.prependListener(O,l(this,O,$)),this},a.prototype.removeListener=function(O,$){var K,ee,Q,te,N;if(o($),ee=this._events,ee===void 0)return this;if(K=ee[O],K===void 0)return this;if(K===$||K.listener===$)--this._eventsCount===0?this._events=Object.create(null):(delete ee[O],ee.removeListener&&this.emit("removeListener",O,K.listener||$));else if(typeof K!="function"){for(Q=-1,te=K.length-1;te>=0;te--)if(K[te]===$||K[te].listener===$){N=K[te].listener,Q=te;break}if(Q<0)return this;Q===0?K.shift():b(K,Q),K.length===1&&(ee[O]=K[0]),ee.removeListener!==void 0&&this.emit("removeListener",O,N||$)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(O){var $,K,ee;if(K=this._events,K===void 0)return this;if(K.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):K[O]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete K[O]),this;if(arguments.length===0){var Q=Object.keys(K),te;for(ee=0;ee<Q.length;++ee)te=Q[ee],te!=="removeListener"&&this.removeAllListeners(te);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if($=K[O],typeof $=="function")this.removeListener(O,$);else if($!==void 0)for(ee=$.length-1;ee>=0;ee--)this.removeListener(O,$[ee]);return this};function u(T,O,$){var K=T._events;if(K===void 0)return[];var ee=K[O];return ee===void 0?[]:typeof ee=="function"?$?[ee.listener||ee]:[ee]:$?I(ee):y(ee,ee.length)}a.prototype.listeners=function(O){return u(this,O,!0)},a.prototype.rawListeners=function(O){return u(this,O,!1)},a.listenerCount=function(T,O){return typeof T.listenerCount=="function"?T.listenerCount(O):g.call(T,O)},a.prototype.listenerCount=g;function g(T){var O=this._events;if(O!==void 0){var $=O[T];if(typeof $=="function")return 1;if($!==void 0)return $.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function y(T,O){for(var $=new Array(O),K=0;K<O;++K)$[K]=T[K];return $}function b(T,O){for(;O+1<T.length;O++)T[O]=T[O+1];T.pop()}function I(T){for(var O=new Array(T.length),$=0;$<O.length;++$)O[$]=T[$].listener||T[$];return O}function S(T,O){return new Promise(function($,K){function ee(te){T.removeListener(O,Q),K(te)}function Q(){typeof T.removeListener=="function"&&T.removeListener("error",ee),$([].slice.call(arguments))}k(T,O,Q,{once:!0}),O!=="error"&&A(T,ee,{once:!0})})}function A(T,O,$){typeof T.on=="function"&&k(T,"error",O,$)}function k(T,O,$,K){if(typeof T.on=="function")K.once?T.once(O,$):T.on(O,$);else if(typeof T.addEventListener=="function")T.addEventListener(O,function ee(Q){K.once&&T.removeEventListener(O,ee),$(Q)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}return events.exports}var streamBrowser$1,hasRequiredStreamBrowser$1;function requireStreamBrowser$1(){return hasRequiredStreamBrowser$1||(hasRequiredStreamBrowser$1=1,streamBrowser$1=requireEvents().EventEmitter),streamBrowser$1}var util$1={},types={},shams$1,hasRequiredShams$1;function requireShams$1(){return hasRequiredShams$1||(hasRequiredShams$1=1,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var s=42;e[t]=s;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var n=Object.getOwnPropertyDescriptor(e,t);if(n.value!==s||n.enumerable!==!0)return!1}return!0}),shams$1}var shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var d=requireShams$1();return shams=function(){return d()&&!!Symbol.toStringTag},shams}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var d=typeof Symbol<"u"&&Symbol,e=requireShams$1();return hasSymbols=function(){return typeof d!="function"||typeof Symbol!="function"||typeof d("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},hasSymbols}var hasProto,hasRequiredHasProto;function requireHasProto(){if(hasRequiredHasProto)return hasProto;hasRequiredHasProto=1;var d={foo:{}},e=Object;return hasProto=function(){return{__proto__:d}.foo===d.foo&&!({__proto__:null}instanceof e)},hasProto}var implementation,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var d="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",s=function(p,c){for(var f=[],l=0;l<p.length;l+=1)f[l]=p[l];for(var u=0;u<c.length;u+=1)f[u+p.length]=c[u];return f},a=function(p,c){for(var f=[],l=c,u=0;l<p.length;l+=1,u+=1)f[u]=p[l];return f},n=function(o,p){for(var c="",f=0;f<o.length;f+=1)c+=o[f],f+1<o.length&&(c+=p);return c};return implementation=function(p){var c=this;if(typeof c!="function"||e.apply(c)!==r)throw new TypeError(d+c);for(var f=a(arguments,1),l,u=function(){if(this instanceof l){var S=c.apply(this,s(f,arguments));return Object(S)===S?S:this}return c.apply(p,s(f,arguments))},g=t(0,c.length-f.length),y=[],b=0;b<g;b++)y[b]="$"+b;if(l=Function("binder","return function ("+n(y,",")+"){ return binder.apply(this,arguments); }")(u),c.prototype){var I=function(){};I.prototype=c.prototype,l.prototype=new I,I.prototype=null}return l},implementation}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var d=requireImplementation();return functionBind=Function.prototype.bind||d,functionBind}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var d=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=requireFunctionBind();return hasown=t.call(d,e),hasown}var getIntrinsic$1,hasRequiredGetIntrinsic$1;function requireGetIntrinsic$1(){if(hasRequiredGetIntrinsic$1)return getIntrinsic$1;hasRequiredGetIntrinsic$1=1;var d,e=SyntaxError,t=Function,r=TypeError,s=function(m){try{return t('"use strict"; return ('+m+").constructor;")()}catch{}},a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch{a=null}var n=function(){throw new r},o=a?function(){try{return arguments.callee,n}catch{try{return a(arguments,"callee").get}catch{return n}}}():n,p=requireHasSymbols()(),c=requireHasProto()(),f=Object.getPrototypeOf||(c?function(m){return m.__proto__}:null),l={},u=typeof Uint8Array>"u"||!f?d:f(Uint8Array),g={"%AggregateError%":typeof AggregateError>"u"?d:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?d:ArrayBuffer,"%ArrayIteratorPrototype%":p&&f?f([][Symbol.iterator]()):d,"%AsyncFromSyncIteratorPrototype%":d,"%AsyncFunction%":l,"%AsyncGenerator%":l,"%AsyncGeneratorFunction%":l,"%AsyncIteratorPrototype%":l,"%Atomics%":typeof Atomics>"u"?d:Atomics,"%BigInt%":typeof BigInt>"u"?d:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?d:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?d:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?d:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?d:Float32Array,"%Float64Array%":typeof Float64Array>"u"?d:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?d:FinalizationRegistry,"%Function%":t,"%GeneratorFunction%":l,"%Int8Array%":typeof Int8Array>"u"?d:Int8Array,"%Int16Array%":typeof Int16Array>"u"?d:Int16Array,"%Int32Array%":typeof Int32Array>"u"?d:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p&&f?f(f([][Symbol.iterator]())):d,"%JSON%":typeof JSON=="object"?JSON:d,"%Map%":typeof Map>"u"?d:Map,"%MapIteratorPrototype%":typeof Map>"u"||!p||!f?d:f(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?d:Promise,"%Proxy%":typeof Proxy>"u"?d:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?d:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?d:Set,"%SetIteratorPrototype%":typeof Set>"u"||!p||!f?d:f(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?d:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p&&f?f(""[Symbol.iterator]()):d,"%Symbol%":p?Symbol:d,"%SyntaxError%":e,"%ThrowTypeError%":o,"%TypedArray%":u,"%TypeError%":r,"%Uint8Array%":typeof Uint8Array>"u"?d:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?d:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?d:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?d:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?d:WeakMap,"%WeakRef%":typeof WeakRef>"u"?d:WeakRef,"%WeakSet%":typeof WeakSet>"u"?d:WeakSet};if(f)try{null.error}catch(m){var y=f(f(m));g["%Error.prototype%"]=y}var b=function m(_){var h;if(_==="%AsyncFunction%")h=s("async function () {}");else if(_==="%GeneratorFunction%")h=s("function* () {}");else if(_==="%AsyncGeneratorFunction%")h=s("async function* () {}");else if(_==="%AsyncGenerator%"){var v=m("%AsyncGeneratorFunction%");v&&(h=v.prototype)}else if(_==="%AsyncIteratorPrototype%"){var E=m("%AsyncGenerator%");E&&f&&(h=f(E.prototype))}return g[_]=h,h},I={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},S=requireFunctionBind(),A=requireHasown(),k=S.call(Function.call,Array.prototype.concat),T=S.call(Function.apply,Array.prototype.splice),O=S.call(Function.call,String.prototype.replace),$=S.call(Function.call,String.prototype.slice),K=S.call(Function.call,RegExp.prototype.exec),ee=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Q=/\\(\\)?/g,te=function(_){var h=$(_,0,1),v=$(_,-1);if(h==="%"&&v!=="%")throw new e("invalid intrinsic syntax, expected closing `%`");if(v==="%"&&h!=="%")throw new e("invalid intrinsic syntax, expected opening `%`");var E=[];return O(_,ee,function(M,P,D,w){E[E.length]=D?O(w,Q,"$1"):P||M}),E},N=function(_,h){var v=_,E;if(A(I,v)&&(E=I[v],v="%"+E[0]+"%"),A(g,v)){var M=g[v];if(M===l&&(M=b(v)),typeof M>"u"&&!h)throw new r("intrinsic "+_+" exists, but is not available. Please file an issue!");return{alias:E,name:v,value:M}}throw new e("intrinsic "+_+" does not exist!")};return getIntrinsic$1=function(_,h){if(typeof _!="string"||_.length===0)throw new r("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof h!="boolean")throw new r('"allowMissing" argument must be a boolean');if(K(/^%?[^%]*%?$/,_)===null)throw new e("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var v=te(_),E=v.length>0?v[0]:"",M=N("%"+E+"%",h),P=M.name,D=M.value,w=!1,B=M.alias;B&&(E=B[0],T(v,k([0,1],B)));for(var x=1,U=!0;x<v.length;x+=1){var X=v[x],se=$(X,0,1),J=$(X,-1);if((se==='"'||se==="'"||se==="`"||J==='"'||J==="'"||J==="`")&&se!==J)throw new e("property names with quotes must have matching quotes");if((X==="constructor"||!U)&&(w=!0),E+="."+X,P="%"+E+"%",A(g,P))D=g[P];else if(D!=null){if(!(X in D)){if(!h)throw new r("base intrinsic for "+_+" exists, but the property is not available.");return}if(a&&x+1>=v.length){var L=a(D,X);U=!!L,U&&"get"in L&&!("originalValue"in L.get)?D=L.get:D=D[X]}else U=A(D,X),D=D[X];U&&!w&&(g[P]=D)}}return D},getIntrinsic$1}var callBind$1={exports:{}},hasPropertyDescriptors_1$1,hasRequiredHasPropertyDescriptors$1;function requireHasPropertyDescriptors$1(){if(hasRequiredHasPropertyDescriptors$1)return hasPropertyDescriptors_1$1;hasRequiredHasPropertyDescriptors$1=1;var d=requireGetIntrinsic$1(),e=d("%Object.defineProperty%",!0),t=function(){if(e)try{return e({},"a",{value:1}),!0}catch{return!1}return!1};return t.hasArrayLengthDefineBug=function(){if(!t())return null;try{return e([],"length",{value:1}).length!==1}catch{return!0}},hasPropertyDescriptors_1$1=t,hasPropertyDescriptors_1$1}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var d=requireGetIntrinsic$1(),e=d("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return gopd=e,gopd}var defineDataProperty$1,hasRequiredDefineDataProperty$1;function requireDefineDataProperty$1(){if(hasRequiredDefineDataProperty$1)return defineDataProperty$1;hasRequiredDefineDataProperty$1=1;var d=requireHasPropertyDescriptors$1()(),e=requireGetIntrinsic$1(),t=d&&e("%Object.defineProperty%",!0);if(t)try{t({},"a",{value:1})}catch{t=!1}var r=e("%SyntaxError%"),s=e("%TypeError%"),a=requireGopd();return defineDataProperty$1=function(o,p,c){if(!o||typeof o!="object"&&typeof o!="function")throw new s("`obj` must be an object or a function`");if(typeof p!="string"&&typeof p!="symbol")throw new s("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new s("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new s("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new s("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new s("`loose`, if provided, must be a boolean");var f=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,g=arguments.length>6?arguments[6]:!1,y=!!a&&a(o,p);if(t)t(o,p,{configurable:u===null&&y?y.configurable:!u,enumerable:f===null&&y?y.enumerable:!f,value:c,writable:l===null&&y?y.writable:!l});else if(g||!f&&!l&&!u)o[p]=c;else throw new r("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},defineDataProperty$1}var setFunctionLength$1,hasRequiredSetFunctionLength$1;function requireSetFunctionLength$1(){if(hasRequiredSetFunctionLength$1)return setFunctionLength$1;hasRequiredSetFunctionLength$1=1;var d=requireGetIntrinsic$1(),e=requireDefineDataProperty$1(),t=requireHasPropertyDescriptors$1()(),r=requireGopd(),s=d("%TypeError%"),a=d("%Math.floor%");return setFunctionLength$1=function(o,p){if(typeof o!="function")throw new s("`fn` is not a function");if(typeof p!="number"||p<0||p>4294967295||a(p)!==p)throw new s("`length` must be a positive 32-bit integer");var c=arguments.length>2&&!!arguments[2],f=!0,l=!0;if("length"in o&&r){var u=r(o,"length");u&&!u.configurable&&(f=!1),u&&!u.writable&&(l=!1)}return(f||l||!c)&&(t?e(o,"length",p,!0,!0):e(o,"length",p)),o},setFunctionLength$1}var hasRequiredCallBind$1;function requireCallBind$1(){return hasRequiredCallBind$1||(hasRequiredCallBind$1=1,function(d){var e=requireFunctionBind(),t=requireGetIntrinsic$1(),r=requireSetFunctionLength$1(),s=t("%TypeError%"),a=t("%Function.prototype.apply%"),n=t("%Function.prototype.call%"),o=t("%Reflect.apply%",!0)||e.call(n,a),p=t("%Object.defineProperty%",!0),c=t("%Math.max%");if(p)try{p({},"a",{value:1})}catch{p=null}d.exports=function(u){if(typeof u!="function")throw new s("a function is required");var g=o(e,n,arguments);return r(g,1+c(0,u.length-(arguments.length-1)),!0)};var f=function(){return o(e,a,arguments)};p?p(d.exports,"apply",{value:f}):d.exports.apply=f}(callBind$1)),callBind$1.exports}var callBound$1,hasRequiredCallBound$1;function requireCallBound$1(){if(hasRequiredCallBound$1)return callBound$1;hasRequiredCallBound$1=1;var d=requireGetIntrinsic$1(),e=requireCallBind$1(),t=e(d("String.prototype.indexOf"));return callBound$1=function(s,a){var n=d(s,!!a);return typeof n=="function"&&t(s,".prototype.")>-1?e(n):n},callBound$1}var isArguments,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var d=requireShams()(),e=requireCallBound$1(),t=e("Object.prototype.toString"),r=function(o){return d&&o&&typeof o=="object"&&Symbol.toStringTag in o?!1:t(o)==="[object Arguments]"},s=function(o){return r(o)?!0:o!==null&&typeof o=="object"&&typeof o.length=="number"&&o.length>=0&&t(o)!=="[object Array]"&&t(o.callee)==="[object Function]"},a=function(){return r(arguments)}();return r.isLegacyArguments=s,isArguments=a?r:s,isArguments}var isGeneratorFunction,hasRequiredIsGeneratorFunction;function requireIsGeneratorFunction(){if(hasRequiredIsGeneratorFunction)return isGeneratorFunction;hasRequiredIsGeneratorFunction=1;var d=Object.prototype.toString,e=Function.prototype.toString,t=/^\s*(?:function)?\*/,r=requireShams()(),s=Object.getPrototypeOf,a=function(){if(!r)return!1;try{return Function("return function*() {}")()}catch{}},n;return isGeneratorFunction=function(p){if(typeof p!="function")return!1;if(t.test(e.call(p)))return!0;if(!r){var c=d.call(p);return c==="[object GeneratorFunction]"}if(!s)return!1;if(typeof n>"u"){var f=a();n=f?s(f):!1}return s(p)===n},isGeneratorFunction}var isCallable,hasRequiredIsCallable;function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var d=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,t)}catch(A){A!==r&&(e=null)}else e=null;var s=/^\s*class\b/,a=function(k){try{var T=d.call(k);return s.test(T)}catch{return!1}},n=function(k){try{return a(k)?!1:(d.call(k),!0)}catch{return!1}},o=Object.prototype.toString,p="[object Object]",c="[object Function]",f="[object GeneratorFunction]",l="[object HTMLAllCollection]",u="[object HTML document.all class]",g="[object HTMLCollection]",y=typeof Symbol=="function"&&!!Symbol.toStringTag,b=!(0 in[,]),I=function(){return!1};if(typeof document=="object"){var S=document.all;o.call(S)===o.call(document.all)&&(I=function(k){if((b||!k)&&(typeof k>"u"||typeof k=="object"))try{var T=o.call(k);return(T===l||T===u||T===g||T===p)&&k("")==null}catch{}return!1})}return isCallable=e?function(k){if(I(k))return!0;if(!k||typeof k!="function"&&typeof k!="object")return!1;try{e(k,null,t)}catch(T){if(T!==r)return!1}return!a(k)&&n(k)}:function(k){if(I(k))return!0;if(!k||typeof k!="function"&&typeof k!="object")return!1;if(y)return n(k);if(a(k))return!1;var T=o.call(k);return T!==c&&T!==f&&!/^\[object HTML/.test(T)?!1:n(k)},isCallable}var forEach_1,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach_1;hasRequiredForEach=1;var d=requireIsCallable(),e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,r=function(p,c,f){for(var l=0,u=p.length;l<u;l++)t.call(p,l)&&(f==null?c(p[l],l,p):c.call(f,p[l],l,p))},s=function(p,c,f){for(var l=0,u=p.length;l<u;l++)f==null?c(p.charAt(l),l,p):c.call(f,p.charAt(l),l,p)},a=function(p,c,f){for(var l in p)t.call(p,l)&&(f==null?c(p[l],l,p):c.call(f,p[l],l,p))},n=function(p,c,f){if(!d(c))throw new TypeError("iterator must be a function");var l;arguments.length>=3&&(l=f),e.call(p)==="[object Array]"?r(p,c,l):typeof p=="string"?s(p,c,l):a(p,c,l)};return forEach_1=n,forEach_1}var possibleTypedArrayNames,hasRequiredPossibleTypedArrayNames;function requirePossibleTypedArrayNames(){return hasRequiredPossibleTypedArrayNames||(hasRequiredPossibleTypedArrayNames=1,possibleTypedArrayNames=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),possibleTypedArrayNames}var availableTypedArrays,hasRequiredAvailableTypedArrays;function requireAvailableTypedArrays(){if(hasRequiredAvailableTypedArrays)return availableTypedArrays;hasRequiredAvailableTypedArrays=1;var d=requirePossibleTypedArrayNames(),e=typeof globalThis>"u"?commonjsGlobal:globalThis;return availableTypedArrays=function(){for(var r=[],s=0;s<d.length;s++)typeof e[d[s]]=="function"&&(r[r.length]=d[s]);return r},availableTypedArrays}var callBind={exports:{}},esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range=RangeError),range}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=ReferenceError),ref}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var type,hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,type=TypeError),type}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var d,e=requireEsErrors(),t=require_eval(),r=requireRange(),s=requireRef(),a=requireSyntax(),n=requireType(),o=requireUri(),p=Function,c=function(M){try{return p('"use strict"; return ('+M+").constructor;")()}catch{}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch{f=null}var l=function(){throw new n},u=f?function(){try{return arguments.callee,l}catch{try{return f(arguments,"callee").get}catch{return l}}}():l,g=requireHasSymbols()(),y=requireHasProto()(),b=Object.getPrototypeOf||(y?function(M){return M.__proto__}:null),I={},S=typeof Uint8Array>"u"||!b?d:b(Uint8Array),A={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?d:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?d:ArrayBuffer,"%ArrayIteratorPrototype%":g&&b?b([][Symbol.iterator]()):d,"%AsyncFromSyncIteratorPrototype%":d,"%AsyncFunction%":I,"%AsyncGenerator%":I,"%AsyncGeneratorFunction%":I,"%AsyncIteratorPrototype%":I,"%Atomics%":typeof Atomics>"u"?d:Atomics,"%BigInt%":typeof BigInt>"u"?d:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?d:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?d:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?d:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":t,"%Float32Array%":typeof Float32Array>"u"?d:Float32Array,"%Float64Array%":typeof Float64Array>"u"?d:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?d:FinalizationRegistry,"%Function%":p,"%GeneratorFunction%":I,"%Int8Array%":typeof Int8Array>"u"?d:Int8Array,"%Int16Array%":typeof Int16Array>"u"?d:Int16Array,"%Int32Array%":typeof Int32Array>"u"?d:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&b?b(b([][Symbol.iterator]())):d,"%JSON%":typeof JSON=="object"?JSON:d,"%Map%":typeof Map>"u"?d:Map,"%MapIteratorPrototype%":typeof Map>"u"||!g||!b?d:b(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?d:Promise,"%Proxy%":typeof Proxy>"u"?d:Proxy,"%RangeError%":r,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?d:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?d:Set,"%SetIteratorPrototype%":typeof Set>"u"||!g||!b?d:b(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?d:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&b?b(""[Symbol.iterator]()):d,"%Symbol%":g?Symbol:d,"%SyntaxError%":a,"%ThrowTypeError%":u,"%TypedArray%":S,"%TypeError%":n,"%Uint8Array%":typeof Uint8Array>"u"?d:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?d:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?d:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?d:Uint32Array,"%URIError%":o,"%WeakMap%":typeof WeakMap>"u"?d:WeakMap,"%WeakRef%":typeof WeakRef>"u"?d:WeakRef,"%WeakSet%":typeof WeakSet>"u"?d:WeakSet};if(b)try{null.error}catch(M){var k=b(b(M));A["%Error.prototype%"]=k}var T=function M(P){var D;if(P==="%AsyncFunction%")D=c("async function () {}");else if(P==="%GeneratorFunction%")D=c("function* () {}");else if(P==="%AsyncGeneratorFunction%")D=c("async function* () {}");else if(P==="%AsyncGenerator%"){var w=M("%AsyncGeneratorFunction%");w&&(D=w.prototype)}else if(P==="%AsyncIteratorPrototype%"){var B=M("%AsyncGenerator%");B&&b&&(D=b(B.prototype))}return A[P]=D,D},O={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},$=requireFunctionBind(),K=requireHasown(),ee=$.call(Function.call,Array.prototype.concat),Q=$.call(Function.apply,Array.prototype.splice),te=$.call(Function.call,String.prototype.replace),N=$.call(Function.call,String.prototype.slice),m=$.call(Function.call,RegExp.prototype.exec),_=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,h=/\\(\\)?/g,v=function(P){var D=N(P,0,1),w=N(P,-1);if(D==="%"&&w!=="%")throw new a("invalid intrinsic syntax, expected closing `%`");if(w==="%"&&D!=="%")throw new a("invalid intrinsic syntax, expected opening `%`");var B=[];return te(P,_,function(x,U,X,se){B[B.length]=X?te(se,h,"$1"):U||x}),B},E=function(P,D){var w=P,B;if(K(O,w)&&(B=O[w],w="%"+B[0]+"%"),K(A,w)){var x=A[w];if(x===I&&(x=T(w)),typeof x>"u"&&!D)throw new n("intrinsic "+P+" exists, but is not available. Please file an issue!");return{alias:B,name:w,value:x}}throw new a("intrinsic "+P+" does not exist!")};return getIntrinsic=function(P,D){if(typeof P!="string"||P.length===0)throw new n("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof D!="boolean")throw new n('"allowMissing" argument must be a boolean');if(m(/^%?[^%]*%?$/,P)===null)throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var w=v(P),B=w.length>0?w[0]:"",x=E("%"+B+"%",D),U=x.name,X=x.value,se=!1,J=x.alias;J&&(B=J[0],Q(w,ee([0,1],J)));for(var L=1,G=!0;L<w.length;L+=1){var re=w[L],fe=N(re,0,1),z=N(re,-1);if((fe==='"'||fe==="'"||fe==="`"||z==='"'||z==="'"||z==="`")&&fe!==z)throw new a("property names with quotes must have matching quotes");if((re==="constructor"||!G)&&(se=!0),B+="."+re,U="%"+B+"%",K(A,U))X=A[U];else if(X!=null){if(!(re in X)){if(!D)throw new n("base intrinsic for "+P+" exists, but the property is not available.");return}if(f&&L+1>=w.length){var H=f(X,re);G=!!H,G&&"get"in H&&!("originalValue"in H.get)?X=H.get:X=X[re]}else G=K(X,re),X=X[re];G&&!se&&(A[U]=X)}}return X},getIntrinsic}var esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var d=requireGetIntrinsic(),e=d("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return esDefineProperty=e,esDefineProperty}var defineDataProperty,hasRequiredDefineDataProperty;function requireDefineDataProperty(){if(hasRequiredDefineDataProperty)return defineDataProperty;hasRequiredDefineDataProperty=1;var d=requireEsDefineProperty(),e=requireSyntax(),t=requireType(),r=requireGopd();return defineDataProperty=function(a,n,o){if(!a||typeof a!="object"&&typeof a!="function")throw new t("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var p=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,f=arguments.length>5?arguments[5]:null,l=arguments.length>6?arguments[6]:!1,u=!!r&&r(a,n);if(d)d(a,n,{configurable:f===null&&u?u.configurable:!f,enumerable:p===null&&u?u.enumerable:!p,value:o,writable:c===null&&u?u.writable:!c});else if(l||!p&&!c&&!f)a[n]=o;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},defineDataProperty}var hasPropertyDescriptors_1,hasRequiredHasPropertyDescriptors;function requireHasPropertyDescriptors(){if(hasRequiredHasPropertyDescriptors)return hasPropertyDescriptors_1;hasRequiredHasPropertyDescriptors=1;var d=requireEsDefineProperty(),e=function(){return!!d};return e.hasArrayLengthDefineBug=function(){if(!d)return null;try{return d([],"length",{value:1}).length!==1}catch{return!0}},hasPropertyDescriptors_1=e,hasPropertyDescriptors_1}var setFunctionLength,hasRequiredSetFunctionLength;function requireSetFunctionLength(){if(hasRequiredSetFunctionLength)return setFunctionLength;hasRequiredSetFunctionLength=1;var d=requireGetIntrinsic(),e=requireDefineDataProperty(),t=requireHasPropertyDescriptors()(),r=requireGopd(),s=requireType(),a=d("%Math.floor%");return setFunctionLength=function(o,p){if(typeof o!="function")throw new s("`fn` is not a function");if(typeof p!="number"||p<0||p>4294967295||a(p)!==p)throw new s("`length` must be a positive 32-bit integer");var c=arguments.length>2&&!!arguments[2],f=!0,l=!0;if("length"in o&&r){var u=r(o,"length");u&&!u.configurable&&(f=!1),u&&!u.writable&&(l=!1)}return(f||l||!c)&&(t?e(o,"length",p,!0,!0):e(o,"length",p)),o},setFunctionLength}var hasRequiredCallBind;function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,function(d){var e=requireFunctionBind(),t=requireGetIntrinsic(),r=requireSetFunctionLength(),s=requireType(),a=t("%Function.prototype.apply%"),n=t("%Function.prototype.call%"),o=t("%Reflect.apply%",!0)||e.call(n,a),p=requireEsDefineProperty(),c=t("%Math.max%");d.exports=function(u){if(typeof u!="function")throw new s("a function is required");var g=o(e,n,arguments);return r(g,1+c(0,u.length-(arguments.length-1)),!0)};var f=function(){return o(e,a,arguments)};p?p(d.exports,"apply",{value:f}):d.exports.apply=f}(callBind)),callBind.exports}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var d=requireGetIntrinsic(),e=requireCallBind(),t=e(d("String.prototype.indexOf"));return callBound=function(s,a){var n=d(s,!!a);return typeof n=="function"&&t(s,".prototype.")>-1?e(n):n},callBound}var whichTypedArray,hasRequiredWhichTypedArray;function requireWhichTypedArray(){if(hasRequiredWhichTypedArray)return whichTypedArray;hasRequiredWhichTypedArray=1;var d=requireForEach(),e=requireAvailableTypedArrays(),t=requireCallBind(),r=requireCallBound(),s=requireGopd(),a=r("Object.prototype.toString"),n=requireShams()(),o=typeof globalThis>"u"?commonjsGlobal:globalThis,p=e(),c=r("String.prototype.slice"),f=Object.getPrototypeOf,l=r("Array.prototype.indexOf",!0)||function(I,S){for(var A=0;A<I.length;A+=1)if(I[A]===S)return A;return-1},u={__proto__:null};n&&s&&f?d(p,function(b){var I=new o[b];if(Symbol.toStringTag in I){var S=f(I),A=s(S,Symbol.toStringTag);if(!A){var k=f(S);A=s(k,Symbol.toStringTag)}u["$"+b]=t(A.get)}}):d(p,function(b){var I=new o[b],S=I.slice||I.set;S&&(u["$"+b]=t(S))});var g=function(I){var S=!1;return d(u,function(A,k){if(!S)try{"$"+A(I)===k&&(S=c(k,1))}catch{}}),S},y=function(I){var S=!1;return d(u,function(A,k){if(!S)try{A(I),S=c(k,1)}catch{}}),S};return whichTypedArray=function(I){if(!I||typeof I!="object")return!1;if(!n){var S=c(a(I),8,-1);return l(p,S)>-1?S:S!=="Object"?!1:y(I)}return s?g(I):null},whichTypedArray}var isTypedArray,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray;hasRequiredIsTypedArray=1;var d=requireWhichTypedArray();return isTypedArray=function(t){return!!d(t)},isTypedArray}var hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(d){var e=requireIsArguments(),t=requireIsGeneratorFunction(),r=requireWhichTypedArray(),s=requireIsTypedArray();function a(he){return he.call.bind(he)}var n=typeof BigInt<"u",o=typeof Symbol<"u",p=a(Object.prototype.toString),c=a(Number.prototype.valueOf),f=a(String.prototype.valueOf),l=a(Boolean.prototype.valueOf);if(n)var u=a(BigInt.prototype.valueOf);if(o)var g=a(Symbol.prototype.valueOf);function y(he,Ge){if(typeof he!="object")return!1;try{return Ge(he),!0}catch{return!1}}d.isArgumentsObject=e,d.isGeneratorFunction=t,d.isTypedArray=s;function b(he){return typeof Promise<"u"&&he instanceof Promise||he!==null&&typeof he=="object"&&typeof he.then=="function"&&typeof he.catch=="function"}d.isPromise=b;function I(he){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(he):s(he)||U(he)}d.isArrayBufferView=I;function S(he){return r(he)==="Uint8Array"}d.isUint8Array=S;function A(he){return r(he)==="Uint8ClampedArray"}d.isUint8ClampedArray=A;function k(he){return r(he)==="Uint16Array"}d.isUint16Array=k;function T(he){return r(he)==="Uint32Array"}d.isUint32Array=T;function O(he){return r(he)==="Int8Array"}d.isInt8Array=O;function $(he){return r(he)==="Int16Array"}d.isInt16Array=$;function K(he){return r(he)==="Int32Array"}d.isInt32Array=K;function ee(he){return r(he)==="Float32Array"}d.isFloat32Array=ee;function Q(he){return r(he)==="Float64Array"}d.isFloat64Array=Q;function te(he){return r(he)==="BigInt64Array"}d.isBigInt64Array=te;function N(he){return r(he)==="BigUint64Array"}d.isBigUint64Array=N;function m(he){return p(he)==="[object Map]"}m.working=typeof Map<"u"&&m(new Map);function _(he){return typeof Map>"u"?!1:m.working?m(he):he instanceof Map}d.isMap=_;function h(he){return p(he)==="[object Set]"}h.working=typeof Set<"u"&&h(new Set);function v(he){return typeof Set>"u"?!1:h.working?h(he):he instanceof Set}d.isSet=v;function E(he){return p(he)==="[object WeakMap]"}E.working=typeof WeakMap<"u"&&E(new WeakMap);function M(he){return typeof WeakMap>"u"?!1:E.working?E(he):he instanceof WeakMap}d.isWeakMap=M;function P(he){return p(he)==="[object WeakSet]"}P.working=typeof WeakSet<"u"&&P(new WeakSet);function D(he){return P(he)}d.isWeakSet=D;function w(he){return p(he)==="[object ArrayBuffer]"}w.working=typeof ArrayBuffer<"u"&&w(new ArrayBuffer);function B(he){return typeof ArrayBuffer>"u"?!1:w.working?w(he):he instanceof ArrayBuffer}d.isArrayBuffer=B;function x(he){return p(he)==="[object DataView]"}x.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&x(new DataView(new ArrayBuffer(1),0,1));function U(he){return typeof DataView>"u"?!1:x.working?x(he):he instanceof DataView}d.isDataView=U;var X=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function se(he){return p(he)==="[object SharedArrayBuffer]"}function J(he){return typeof X>"u"?!1:(typeof se.working>"u"&&(se.working=se(new X)),se.working?se(he):he instanceof X)}d.isSharedArrayBuffer=J;function L(he){return p(he)==="[object AsyncFunction]"}d.isAsyncFunction=L;function G(he){return p(he)==="[object Map Iterator]"}d.isMapIterator=G;function re(he){return p(he)==="[object Set Iterator]"}d.isSetIterator=re;function fe(he){return p(he)==="[object Generator]"}d.isGeneratorObject=fe;function z(he){return p(he)==="[object WebAssembly.Module]"}d.isWebAssemblyCompiledModule=z;function H(he){return y(he,c)}d.isNumberObject=H;function de(he){return y(he,f)}d.isStringObject=de;function me(he){return y(he,l)}d.isBooleanObject=me;function we(he){return n&&y(he,u)}d.isBigIntObject=we;function Pe(he){return o&&y(he,g)}d.isSymbolObject=Pe;function ke(he){return H(he)||de(he)||me(he)||we(he)||Pe(he)}d.isBoxedPrimitive=ke;function Ue(he){return typeof Uint8Array<"u"&&(B(he)||J(he))}d.isAnyArrayBuffer=Ue,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(he){Object.defineProperty(d,he,{enumerable:!1,value:function(){throw new Error(he+" is not supported in userland")}})})}(types)),types}var isBufferBrowser,hasRequiredIsBufferBrowser;function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser||(hasRequiredIsBufferBrowser=1,isBufferBrowser=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),isBufferBrowser}var hasRequiredUtil$1;function requireUtil$1(){return hasRequiredUtil$1||(hasRequiredUtil$1=1,function(d){var e={},t=Object.getOwnPropertyDescriptors||function(X){for(var se=Object.keys(X),J={},L=0;L<se.length;L++)J[se[L]]=Object.getOwnPropertyDescriptor(X,se[L]);return J},r=/%[sdj%]/g;d.format=function(U){if(!$(U)){for(var X=[],se=0;se<arguments.length;se++)X.push(o(arguments[se]));return X.join(" ")}for(var se=1,J=arguments,L=J.length,G=String(U).replace(r,function(fe){if(fe==="%%")return"%";if(se>=L)return fe;switch(fe){case"%s":return String(J[se++]);case"%d":return Number(J[se++]);case"%j":try{return JSON.stringify(J[se++])}catch{return"[Circular]"}default:return fe}}),re=J[se];se<L;re=J[++se])k(re)||!te(re)?G+=" "+re:G+=" "+o(re);return G},d.deprecate=function(U,X){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return U;if(typeof process$1>"u")return function(){return d.deprecate(U,X).apply(this,arguments)};var se=!1;function J(){if(!se){if(process$1.throwDeprecation)throw new Error(X);process$1.traceDeprecation?console.trace(X):console.error(X),se=!0}return U.apply(this,arguments)}return J};var s={},a=/^$/;if(e.NODE_DEBUG){var n=e.NODE_DEBUG;n=n.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+n+"$","i")}d.debuglog=function(U){if(U=U.toUpperCase(),!s[U])if(a.test(U)){var X=process$1.pid;s[U]=function(){var se=d.format.apply(d,arguments);console.error("%s %d: %s",U,X,se)}}else s[U]=function(){};return s[U]};function o(U,X){var se={seen:[],stylize:c};return arguments.length>=3&&(se.depth=arguments[2]),arguments.length>=4&&(se.colors=arguments[3]),A(X)?se.showHidden=X:X&&d._extend(se,X),ee(se.showHidden)&&(se.showHidden=!1),ee(se.depth)&&(se.depth=2),ee(se.colors)&&(se.colors=!1),ee(se.customInspect)&&(se.customInspect=!0),se.colors&&(se.stylize=p),l(se,U,se.depth)}d.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function p(U,X){var se=o.styles[X];return se?"\x1B["+o.colors[se][0]+"m"+U+"\x1B["+o.colors[se][1]+"m":U}function c(U,X){return U}function f(U){var X={};return U.forEach(function(se,J){X[se]=!0}),X}function l(U,X,se){if(U.customInspect&&X&&_(X.inspect)&&X.inspect!==d.inspect&&!(X.constructor&&X.constructor.prototype===X)){var J=X.inspect(se,U);return $(J)||(J=l(U,J,se)),J}var L=u(U,X);if(L)return L;var G=Object.keys(X),re=f(G);if(U.showHidden&&(G=Object.getOwnPropertyNames(X)),m(X)&&(G.indexOf("message")>=0||G.indexOf("description")>=0))return g(X);if(G.length===0){if(_(X)){var fe=X.name?": "+X.name:"";return U.stylize("[Function"+fe+"]","special")}if(Q(X))return U.stylize(RegExp.prototype.toString.call(X),"regexp");if(N(X))return U.stylize(Date.prototype.toString.call(X),"date");if(m(X))return g(X)}var z="",H=!1,de=["{","}"];if(S(X)&&(H=!0,de=["[","]"]),_(X)){var me=X.name?": "+X.name:"";z=" [Function"+me+"]"}if(Q(X)&&(z=" "+RegExp.prototype.toString.call(X)),N(X)&&(z=" "+Date.prototype.toUTCString.call(X)),m(X)&&(z=" "+g(X)),G.length===0&&(!H||X.length==0))return de[0]+z+de[1];if(se<0)return Q(X)?U.stylize(RegExp.prototype.toString.call(X),"regexp"):U.stylize("[Object]","special");U.seen.push(X);var we;return H?we=y(U,X,se,re,G):we=G.map(function(Pe){return b(U,X,se,re,Pe,H)}),U.seen.pop(),I(we,z,de)}function u(U,X){if(ee(X))return U.stylize("undefined","undefined");if($(X)){var se="'"+JSON.stringify(X).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return U.stylize(se,"string")}if(O(X))return U.stylize(""+X,"number");if(A(X))return U.stylize(""+X,"boolean");if(k(X))return U.stylize("null","null")}function g(U){return"["+Error.prototype.toString.call(U)+"]"}function y(U,X,se,J,L){for(var G=[],re=0,fe=X.length;re<fe;++re)D(X,String(re))?G.push(b(U,X,se,J,String(re),!0)):G.push("");return L.forEach(function(z){z.match(/^\d+$/)||G.push(b(U,X,se,J,z,!0))}),G}function b(U,X,se,J,L,G){var re,fe,z;if(z=Object.getOwnPropertyDescriptor(X,L)||{value:X[L]},z.get?z.set?fe=U.stylize("[Getter/Setter]","special"):fe=U.stylize("[Getter]","special"):z.set&&(fe=U.stylize("[Setter]","special")),D(J,L)||(re="["+L+"]"),fe||(U.seen.indexOf(z.value)<0?(k(se)?fe=l(U,z.value,null):fe=l(U,z.value,se-1),fe.indexOf(`
`)>-1&&(G?fe=fe.split(`
`).map(function(H){return"  "+H}).join(`
`).slice(2):fe=`
`+fe.split(`
`).map(function(H){return"   "+H}).join(`
`))):fe=U.stylize("[Circular]","special")),ee(re)){if(G&&L.match(/^\d+$/))return fe;re=JSON.stringify(""+L),re.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(re=re.slice(1,-1),re=U.stylize(re,"name")):(re=re.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),re=U.stylize(re,"string"))}return re+": "+fe}function I(U,X,se){var J=U.reduce(function(L,G){return G.indexOf(`
`)>=0,L+G.replace(/\u001b\[\d\d?m/g,"").length+1},0);return J>60?se[0]+(X===""?"":X+`
 `)+" "+U.join(`,
  `)+" "+se[1]:se[0]+X+" "+U.join(", ")+" "+se[1]}d.types=requireTypes();function S(U){return Array.isArray(U)}d.isArray=S;function A(U){return typeof U=="boolean"}d.isBoolean=A;function k(U){return U===null}d.isNull=k;function T(U){return U==null}d.isNullOrUndefined=T;function O(U){return typeof U=="number"}d.isNumber=O;function $(U){return typeof U=="string"}d.isString=$;function K(U){return typeof U=="symbol"}d.isSymbol=K;function ee(U){return U===void 0}d.isUndefined=ee;function Q(U){return te(U)&&v(U)==="[object RegExp]"}d.isRegExp=Q,d.types.isRegExp=Q;function te(U){return typeof U=="object"&&U!==null}d.isObject=te;function N(U){return te(U)&&v(U)==="[object Date]"}d.isDate=N,d.types.isDate=N;function m(U){return te(U)&&(v(U)==="[object Error]"||U instanceof Error)}d.isError=m,d.types.isNativeError=m;function _(U){return typeof U=="function"}d.isFunction=_;function h(U){return U===null||typeof U=="boolean"||typeof U=="number"||typeof U=="string"||typeof U=="symbol"||typeof U>"u"}d.isPrimitive=h,d.isBuffer=requireIsBufferBrowser();function v(U){return Object.prototype.toString.call(U)}function E(U){return U<10?"0"+U.toString(10):U.toString(10)}var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var U=new Date,X=[E(U.getHours()),E(U.getMinutes()),E(U.getSeconds())].join(":");return[U.getDate(),M[U.getMonth()],X].join(" ")}d.log=function(){console.log("%s - %s",P(),d.format.apply(d,arguments))},d.inherits=requireInherits_browser(),d._extend=function(U,X){if(!X||!te(X))return U;for(var se=Object.keys(X),J=se.length;J--;)U[se[J]]=X[se[J]];return U};function D(U,X){return Object.prototype.hasOwnProperty.call(U,X)}var w=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;d.promisify=function(X){if(typeof X!="function")throw new TypeError('The "original" argument must be of type Function');if(w&&X[w]){var se=X[w];if(typeof se!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(se,w,{value:se,enumerable:!1,writable:!1,configurable:!0}),se}function se(){for(var J,L,G=new Promise(function(z,H){J=z,L=H}),re=[],fe=0;fe<arguments.length;fe++)re.push(arguments[fe]);re.push(function(z,H){z?L(z):J(H)});try{X.apply(this,re)}catch(z){L(z)}return G}return Object.setPrototypeOf(se,Object.getPrototypeOf(X)),w&&Object.defineProperty(se,w,{value:se,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(se,t(X))},d.promisify.custom=w;function B(U,X){if(!U){var se=new Error("Promise was rejected with a falsy value");se.reason=U,U=se}return X(U)}function x(U){if(typeof U!="function")throw new TypeError('The "original" argument must be of type Function');function X(){for(var se=[],J=0;J<arguments.length;J++)se.push(arguments[J]);var L=se.pop();if(typeof L!="function")throw new TypeError("The last argument must be of type Function");var G=this,re=function(){return L.apply(G,arguments)};U.apply(this,se).then(function(fe){process$1.nextTick(re.bind(null,null,fe))},function(fe){process$1.nextTick(B.bind(null,fe,re))})}return Object.setPrototypeOf(X,Object.getPrototypeOf(U)),Object.defineProperties(X,t(U)),X}d.callbackify=x}(util$1)),util$1}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function d(y,b){var I=Object.keys(y);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(y);b&&(S=S.filter(function(A){return Object.getOwnPropertyDescriptor(y,A).enumerable})),I.push.apply(I,S)}return I}function e(y){for(var b=1;b<arguments.length;b++){var I=arguments[b]!=null?arguments[b]:{};b%2?d(Object(I),!0).forEach(function(S){t(y,S,I[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(I)):d(Object(I)).forEach(function(S){Object.defineProperty(y,S,Object.getOwnPropertyDescriptor(I,S))})}return y}function t(y,b,I){return b=n(b),b in y?Object.defineProperty(y,b,{value:I,enumerable:!0,configurable:!0,writable:!0}):y[b]=I,y}function r(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function s(y,b){for(var I=0;I<b.length;I++){var S=b[I];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,n(S.key),S)}}function a(y,b,I){return b&&s(y.prototype,b),Object.defineProperty(y,"prototype",{writable:!1}),y}function n(y){var b=o(y,"string");return typeof b=="symbol"?b:String(b)}function o(y,b){if(typeof y!="object"||y===null)return y;var I=y[Symbol.toPrimitive];if(I!==void 0){var S=I.call(y,b||"default");if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(y)}var p=require$$1$2,c=p.Buffer,f=requireUtil$1(),l=f.inspect,u=l&&l.custom||"inspect";function g(y,b,I){c.prototype.copy.call(y,b,I)}return buffer_list=function(){function y(){r(this,y),this.head=null,this.tail=null,this.length=0}return a(y,[{key:"push",value:function(I){var S={data:I,next:null};this.length>0?this.tail.next=S:this.head=S,this.tail=S,++this.length}},{key:"unshift",value:function(I){var S={data:I,next:this.head};this.length===0&&(this.tail=S),this.head=S,++this.length}},{key:"shift",value:function(){if(this.length!==0){var I=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,I}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(I){if(this.length===0)return"";for(var S=this.head,A=""+S.data;S=S.next;)A+=I+S.data;return A}},{key:"concat",value:function(I){if(this.length===0)return c.alloc(0);for(var S=c.allocUnsafe(I>>>0),A=this.head,k=0;A;)g(A.data,S,k),k+=A.data.length,A=A.next;return S}},{key:"consume",value:function(I,S){var A;return I<this.head.data.length?(A=this.head.data.slice(0,I),this.head.data=this.head.data.slice(I)):I===this.head.data.length?A=this.shift():A=S?this._getString(I):this._getBuffer(I),A}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(I){var S=this.head,A=1,k=S.data;for(I-=k.length;S=S.next;){var T=S.data,O=I>T.length?T.length:I;if(O===T.length?k+=T:k+=T.slice(0,I),I-=O,I===0){O===T.length?(++A,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=T.slice(O));break}++A}return this.length-=A,k}},{key:"_getBuffer",value:function(I){var S=c.allocUnsafe(I),A=this.head,k=1;for(A.data.copy(S),I-=A.data.length;A=A.next;){var T=A.data,O=I>T.length?T.length:I;if(T.copy(S,S.length-I,0,O),I-=O,I===0){O===T.length?(++k,A.next?this.head=A.next:this.head=this.tail=null):(this.head=A,A.data=T.slice(O));break}++k}return this.length-=k,S}},{key:u,value:function(I,S){return l(this,e(e({},S),{},{depth:0,customInspect:!1}))}}]),y}(),buffer_list}var destroy_1$1,hasRequiredDestroy$1;function requireDestroy$1(){if(hasRequiredDestroy$1)return destroy_1$1;hasRequiredDestroy$1=1;function d(n,o){var p=this,c=this._readableState&&this._readableState.destroyed,f=this._writableState&&this._writableState.destroyed;return c||f?(o?o(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(s,this,n)):process$1.nextTick(s,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(l){!o&&l?p._writableState?p._writableState.errorEmitted?process$1.nextTick(t,p):(p._writableState.errorEmitted=!0,process$1.nextTick(e,p,l)):process$1.nextTick(e,p,l):o?(process$1.nextTick(t,p),o(l)):process$1.nextTick(t,p)}),this)}function e(n,o){s(n,o),t(n)}function t(n){n._writableState&&!n._writableState.emitClose||n._readableState&&!n._readableState.emitClose||n.emit("close")}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(n,o){n.emit("error",o)}function a(n,o){var p=n._readableState,c=n._writableState;p&&p.autoDestroy||c&&c.autoDestroy?n.destroy(o):n.emit("error",o)}return destroy_1$1={destroy:d,undestroy:r,errorOrDestroy:a},destroy_1$1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function d(o,p){o.prototype=Object.create(p.prototype),o.prototype.constructor=o,o.__proto__=p}var e={};function t(o,p,c){c||(c=Error);function f(u,g,y){return typeof p=="string"?p:p(u,g,y)}var l=function(u){d(g,u);function g(y,b,I){return u.call(this,f(y,b,I))||this}return g}(c);l.prototype.name=c.name,l.prototype.code=o,e[o]=l}function r(o,p){if(Array.isArray(o)){var c=o.length;return o=o.map(function(f){return String(f)}),c>2?"one of ".concat(p," ").concat(o.slice(0,c-1).join(", "),", or ")+o[c-1]:c===2?"one of ".concat(p," ").concat(o[0]," or ").concat(o[1]):"of ".concat(p," ").concat(o[0])}else return"of ".concat(p," ").concat(String(o))}function s(o,p,c){return o.substr(0,p.length)===p}function a(o,p,c){return(c===void 0||c>o.length)&&(c=o.length),o.substring(c-p.length,c)===p}function n(o,p,c){return typeof c!="number"&&(c=0),c+p.length>o.length?!1:o.indexOf(p,c)!==-1}return t("ERR_INVALID_OPT_VALUE",function(o,p){return'The value "'+p+'" is invalid for option "'+o+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(o,p,c){var f;typeof p=="string"&&s(p,"not ")?(f="must not be",p=p.replace(/^not /,"")):f="must be";var l;if(a(o," argument"))l="The ".concat(o," ").concat(f," ").concat(r(p,"type"));else{var u=n(o,".")?"property":"argument";l='The "'.concat(o,'" ').concat(u," ").concat(f," ").concat(r(p,"type"))}return l+=". Received type ".concat(typeof c),l},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(o){return"The "+o+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(o){return"Cannot call "+o+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(o){return"Unknown encoding: "+o},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=e,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var d=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function e(r,s,a){return r.highWaterMark!=null?r.highWaterMark:s?r[a]:null}function t(r,s,a,n){var o=e(s,n,a);if(o!=null){if(!(isFinite(o)&&Math.floor(o)===o)||o<0){var p=n?a:"highWaterMark";throw new d(p,o)}return Math.floor(o)}return r.objectMode?16:16*1024}return state={getHighWaterMark:t},state}var browser$a,hasRequiredBrowser$a;function requireBrowser$a(){if(hasRequiredBrowser$a)return browser$a;hasRequiredBrowser$a=1,browser$a=d;function d(t,r){if(e("noDeprecation"))return t;var s=!1;function a(){if(!s){if(e("throwDeprecation"))throw new Error(r);e("traceDeprecation")?console.trace(r):console.warn(r),s=!0}return t.apply(this,arguments)}return a}function e(t){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var r=commonjsGlobal.localStorage[t];return r==null?!1:String(r).toLowerCase()==="true"}return browser$a}var _stream_writable$1,hasRequired_stream_writable$1;function require_stream_writable$1(){if(hasRequired_stream_writable$1)return _stream_writable$1;hasRequired_stream_writable$1=1,_stream_writable$1=ee;function d(J){var L=this;this.next=null,this.entry=null,this.finish=function(){se(L,J)}}var e;ee.WritableState=$;var t={deprecate:requireBrowser$a()},r=requireStreamBrowser$1(),s=require$$1$2.Buffer,a=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function n(J){return s.from(J)}function o(J){return s.isBuffer(J)||J instanceof a}var p=requireDestroy$1(),c=requireState(),f=c.getHighWaterMark,l=requireErrorsBrowser().codes,u=l.ERR_INVALID_ARG_TYPE,g=l.ERR_METHOD_NOT_IMPLEMENTED,y=l.ERR_MULTIPLE_CALLBACK,b=l.ERR_STREAM_CANNOT_PIPE,I=l.ERR_STREAM_DESTROYED,S=l.ERR_STREAM_NULL_VALUES,A=l.ERR_STREAM_WRITE_AFTER_END,k=l.ERR_UNKNOWN_ENCODING,T=p.errorOrDestroy;requireInherits_browser()(ee,r);function O(){}function $(J,L,G){e=e||require_stream_duplex$1(),J=J||{},typeof G!="boolean"&&(G=L instanceof e),this.objectMode=!!J.objectMode,G&&(this.objectMode=this.objectMode||!!J.writableObjectMode),this.highWaterMark=f(this,J,"writableHighWaterMark",G),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var re=J.decodeStrings===!1;this.decodeStrings=!re,this.defaultEncoding=J.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(fe){E(L,fe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=J.emitClose!==!1,this.autoDestroy=!!J.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}$.prototype.getBuffer=function(){for(var L=this.bufferedRequest,G=[];L;)G.push(L),L=L.next;return G},function(){try{Object.defineProperty($.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var K;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(K=Function.prototype[Symbol.hasInstance],Object.defineProperty(ee,Symbol.hasInstance,{value:function(L){return K.call(this,L)?!0:this!==ee?!1:L&&L._writableState instanceof $}})):K=function(L){return L instanceof this};function ee(J){e=e||require_stream_duplex$1();var L=this instanceof e;if(!L&&!K.call(ee,this))return new ee(J);this._writableState=new $(J,this,L),this.writable=!0,J&&(typeof J.write=="function"&&(this._write=J.write),typeof J.writev=="function"&&(this._writev=J.writev),typeof J.destroy=="function"&&(this._destroy=J.destroy),typeof J.final=="function"&&(this._final=J.final)),r.call(this)}ee.prototype.pipe=function(){T(this,new b)};function Q(J,L){var G=new A;T(J,G),process$1.nextTick(L,G)}function te(J,L,G,re){var fe;return G===null?fe=new S:typeof G!="string"&&!L.objectMode&&(fe=new u("chunk",["string","Buffer"],G)),fe?(T(J,fe),process$1.nextTick(re,fe),!1):!0}ee.prototype.write=function(J,L,G){var re=this._writableState,fe=!1,z=!re.objectMode&&o(J);return z&&!s.isBuffer(J)&&(J=n(J)),typeof L=="function"&&(G=L,L=null),z?L="buffer":L||(L=re.defaultEncoding),typeof G!="function"&&(G=O),re.ending?Q(this,G):(z||te(this,re,J,G))&&(re.pendingcb++,fe=m(this,re,z,J,L,G)),fe},ee.prototype.cork=function(){this._writableState.corked++},ee.prototype.uncork=function(){var J=this._writableState;J.corked&&(J.corked--,!J.writing&&!J.corked&&!J.bufferProcessing&&J.bufferedRequest&&D(this,J))},ee.prototype.setDefaultEncoding=function(L){if(typeof L=="string"&&(L=L.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((L+"").toLowerCase())>-1))throw new k(L);return this._writableState.defaultEncoding=L,this},Object.defineProperty(ee.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function N(J,L,G){return!J.objectMode&&J.decodeStrings!==!1&&typeof L=="string"&&(L=s.from(L,G)),L}Object.defineProperty(ee.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function m(J,L,G,re,fe,z){if(!G){var H=N(L,re,fe);re!==H&&(G=!0,fe="buffer",re=H)}var de=L.objectMode?1:re.length;L.length+=de;var me=L.length<L.highWaterMark;if(me||(L.needDrain=!0),L.writing||L.corked){var we=L.lastBufferedRequest;L.lastBufferedRequest={chunk:re,encoding:fe,isBuf:G,callback:z,next:null},we?we.next=L.lastBufferedRequest:L.bufferedRequest=L.lastBufferedRequest,L.bufferedRequestCount+=1}else _(J,L,!1,de,re,fe,z);return me}function _(J,L,G,re,fe,z,H){L.writelen=re,L.writecb=H,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new I("write")):G?J._writev(fe,L.onwrite):J._write(fe,z,L.onwrite),L.sync=!1}function h(J,L,G,re,fe){--L.pendingcb,G?(process$1.nextTick(fe,re),process$1.nextTick(U,J,L),J._writableState.errorEmitted=!0,T(J,re)):(fe(re),J._writableState.errorEmitted=!0,T(J,re),U(J,L))}function v(J){J.writing=!1,J.writecb=null,J.length-=J.writelen,J.writelen=0}function E(J,L){var G=J._writableState,re=G.sync,fe=G.writecb;if(typeof fe!="function")throw new y;if(v(G),L)h(J,G,re,L,fe);else{var z=w(G)||J.destroyed;!z&&!G.corked&&!G.bufferProcessing&&G.bufferedRequest&&D(J,G),re?process$1.nextTick(M,J,G,z,fe):M(J,G,z,fe)}}function M(J,L,G,re){G||P(J,L),L.pendingcb--,re(),U(J,L)}function P(J,L){L.length===0&&L.needDrain&&(L.needDrain=!1,J.emit("drain"))}function D(J,L){L.bufferProcessing=!0;var G=L.bufferedRequest;if(J._writev&&G&&G.next){var re=L.bufferedRequestCount,fe=new Array(re),z=L.corkedRequestsFree;z.entry=G;for(var H=0,de=!0;G;)fe[H]=G,G.isBuf||(de=!1),G=G.next,H+=1;fe.allBuffers=de,_(J,L,!0,L.length,fe,"",z.finish),L.pendingcb++,L.lastBufferedRequest=null,z.next?(L.corkedRequestsFree=z.next,z.next=null):L.corkedRequestsFree=new d(L),L.bufferedRequestCount=0}else{for(;G;){var me=G.chunk,we=G.encoding,Pe=G.callback,ke=L.objectMode?1:me.length;if(_(J,L,!1,ke,me,we,Pe),G=G.next,L.bufferedRequestCount--,L.writing)break}G===null&&(L.lastBufferedRequest=null)}L.bufferedRequest=G,L.bufferProcessing=!1}ee.prototype._write=function(J,L,G){G(new g("_write()"))},ee.prototype._writev=null,ee.prototype.end=function(J,L,G){var re=this._writableState;return typeof J=="function"?(G=J,J=null,L=null):typeof L=="function"&&(G=L,L=null),J!=null&&this.write(J,L),re.corked&&(re.corked=1,this.uncork()),re.ending||X(this,re,G),this},Object.defineProperty(ee.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function w(J){return J.ending&&J.length===0&&J.bufferedRequest===null&&!J.finished&&!J.writing}function B(J,L){J._final(function(G){L.pendingcb--,G&&T(J,G),L.prefinished=!0,J.emit("prefinish"),U(J,L)})}function x(J,L){!L.prefinished&&!L.finalCalled&&(typeof J._final=="function"&&!L.destroyed?(L.pendingcb++,L.finalCalled=!0,process$1.nextTick(B,J,L)):(L.prefinished=!0,J.emit("prefinish")))}function U(J,L){var G=w(L);if(G&&(x(J,L),L.pendingcb===0&&(L.finished=!0,J.emit("finish"),L.autoDestroy))){var re=J._readableState;(!re||re.autoDestroy&&re.endEmitted)&&J.destroy()}return G}function X(J,L,G){L.ending=!0,U(J,L),G&&(L.finished?process$1.nextTick(G):J.once("finish",G)),L.ended=!0,J.writable=!1}function se(J,L,G){var re=J.entry;for(J.entry=null;re;){var fe=re.callback;L.pendingcb--,fe(G),re=re.next}L.corkedRequestsFree.next=J}return Object.defineProperty(ee.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(L){this._writableState&&(this._writableState.destroyed=L)}}),ee.prototype.destroy=p.destroy,ee.prototype._undestroy=p.undestroy,ee.prototype._destroy=function(J,L){L(J)},_stream_writable$1}var _stream_duplex$1,hasRequired_stream_duplex$1;function require_stream_duplex$1(){if(hasRequired_stream_duplex$1)return _stream_duplex$1;hasRequired_stream_duplex$1=1;var d=Object.keys||function(c){var f=[];for(var l in c)f.push(l);return f};_stream_duplex$1=n;var e=require_stream_readable$1(),t=require_stream_writable$1();requireInherits_browser()(n,e);for(var r=d(t.prototype),s=0;s<r.length;s++){var a=r[s];n.prototype[a]||(n.prototype[a]=t.prototype[a])}function n(c){if(!(this instanceof n))return new n(c);e.call(this,c),t.call(this,c),this.allowHalfOpen=!0,c&&(c.readable===!1&&(this.readable=!1),c.writable===!1&&(this.writable=!1),c.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",o)))}Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(n.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(n.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function o(){this._writableState.ended||process$1.nextTick(p,this)}function p(c){c.end()}return Object.defineProperty(n.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(f){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=f,this._writableState.destroyed=f)}}),_stream_duplex$1}var string_decoder={},hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var d=requireSafeBuffer$1().Buffer,e=d.isEncoding||function(S){switch(S=""+S,S&&S.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(S){if(!S)return"utf8";for(var A;;)switch(S){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return S;default:if(A)return;S=(""+S).toLowerCase(),A=!0}}function r(S){var A=t(S);if(typeof A!="string"&&(d.isEncoding===e||!e(S)))throw new Error("Unknown encoding: "+S);return A||S}string_decoder.StringDecoder=s;function s(S){this.encoding=r(S);var A;switch(this.encoding){case"utf16le":this.text=l,this.end=u,A=4;break;case"utf8":this.fillLast=p,A=4;break;case"base64":this.text=g,this.end=y,A=3;break;default:this.write=b,this.end=I;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=d.allocUnsafe(A)}s.prototype.write=function(S){if(S.length===0)return"";var A,k;if(this.lastNeed){if(A=this.fillLast(S),A===void 0)return"";k=this.lastNeed,this.lastNeed=0}else k=0;return k<S.length?A?A+this.text(S,k):this.text(S,k):A||""},s.prototype.end=f,s.prototype.text=c,s.prototype.fillLast=function(S){if(this.lastNeed<=S.length)return S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,S.length),this.lastNeed-=S.length};function a(S){return S<=127?0:S>>5===6?2:S>>4===14?3:S>>3===30?4:S>>6===2?-1:-2}function n(S,A,k){var T=A.length-1;if(T<k)return 0;var O=a(A[T]);return O>=0?(O>0&&(S.lastNeed=O-1),O):--T<k||O===-2?0:(O=a(A[T]),O>=0?(O>0&&(S.lastNeed=O-2),O):--T<k||O===-2?0:(O=a(A[T]),O>=0?(O>0&&(O===2?O=0:S.lastNeed=O-3),O):0))}function o(S,A,k){if((A[0]&192)!==128)return S.lastNeed=0,"�";if(S.lastNeed>1&&A.length>1){if((A[1]&192)!==128)return S.lastNeed=1,"�";if(S.lastNeed>2&&A.length>2&&(A[2]&192)!==128)return S.lastNeed=2,"�"}}function p(S){var A=this.lastTotal-this.lastNeed,k=o(this,S);if(k!==void 0)return k;if(this.lastNeed<=S.length)return S.copy(this.lastChar,A,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,A,0,S.length),this.lastNeed-=S.length}function c(S,A){var k=n(this,S,A);if(!this.lastNeed)return S.toString("utf8",A);this.lastTotal=k;var T=S.length-(k-this.lastNeed);return S.copy(this.lastChar,0,T),S.toString("utf8",A,T)}function f(S){var A=S&&S.length?this.write(S):"";return this.lastNeed?A+"�":A}function l(S,A){if((S.length-A)%2===0){var k=S.toString("utf16le",A);if(k){var T=k.charCodeAt(k.length-1);if(T>=55296&&T<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1],k.slice(0,-1)}return k}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=S[S.length-1],S.toString("utf16le",A,S.length-1)}function u(S){var A=S&&S.length?this.write(S):"";if(this.lastNeed){var k=this.lastTotal-this.lastNeed;return A+this.lastChar.toString("utf16le",0,k)}return A}function g(S,A){var k=(S.length-A)%3;return k===0?S.toString("base64",A):(this.lastNeed=3-k,this.lastTotal=3,k===1?this.lastChar[0]=S[S.length-1]:(this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1]),S.toString("base64",A,S.length-k))}function y(S){var A=S&&S.length?this.write(S):"";return this.lastNeed?A+this.lastChar.toString("base64",0,3-this.lastNeed):A}function b(S){return S.toString(this.encoding)}function I(S){return S&&S.length?this.write(S):""}return string_decoder}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var d=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function e(a){var n=!1;return function(){if(!n){n=!0;for(var o=arguments.length,p=new Array(o),c=0;c<o;c++)p[c]=arguments[c];a.apply(this,p)}}}function t(){}function r(a){return a.setHeader&&typeof a.abort=="function"}function s(a,n,o){if(typeof n=="function")return s(a,null,n);n||(n={}),o=e(o||t);var p=n.readable||n.readable!==!1&&a.readable,c=n.writable||n.writable!==!1&&a.writable,f=function(){a.writable||u()},l=a._writableState&&a._writableState.finished,u=function(){c=!1,l=!0,p||o.call(a)},g=a._readableState&&a._readableState.endEmitted,y=function(){p=!1,g=!0,c||o.call(a)},b=function(k){o.call(a,k)},I=function(){var k;if(p&&!g)return(!a._readableState||!a._readableState.ended)&&(k=new d),o.call(a,k);if(c&&!l)return(!a._writableState||!a._writableState.ended)&&(k=new d),o.call(a,k)},S=function(){a.req.on("finish",u)};return r(a)?(a.on("complete",u),a.on("abort",I),a.req?S():a.on("request",S)):c&&!a._writableState&&(a.on("end",f),a.on("close",f)),a.on("end",y),a.on("finish",u),n.error!==!1&&a.on("error",b),a.on("close",I),function(){a.removeListener("complete",u),a.removeListener("abort",I),a.removeListener("request",S),a.req&&a.req.removeListener("finish",u),a.removeListener("end",f),a.removeListener("close",f),a.removeListener("finish",u),a.removeListener("end",y),a.removeListener("error",b),a.removeListener("close",I)}}return endOfStream=s,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var d;function e(k,T,O){return T=t(T),T in k?Object.defineProperty(k,T,{value:O,enumerable:!0,configurable:!0,writable:!0}):k[T]=O,k}function t(k){var T=r(k,"string");return typeof T=="symbol"?T:String(T)}function r(k,T){if(typeof k!="object"||k===null)return k;var O=k[Symbol.toPrimitive];if(O!==void 0){var $=O.call(k,T||"default");if(typeof $!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(k)}var s=requireEndOfStream(),a=Symbol("lastResolve"),n=Symbol("lastReject"),o=Symbol("error"),p=Symbol("ended"),c=Symbol("lastPromise"),f=Symbol("handlePromise"),l=Symbol("stream");function u(k,T){return{value:k,done:T}}function g(k){var T=k[a];if(T!==null){var O=k[l].read();O!==null&&(k[c]=null,k[a]=null,k[n]=null,T(u(O,!1)))}}function y(k){process$1.nextTick(g,k)}function b(k,T){return function(O,$){k.then(function(){if(T[p]){O(u(void 0,!0));return}T[f](O,$)},$)}}var I=Object.getPrototypeOf(function(){}),S=Object.setPrototypeOf((d={get stream(){return this[l]},next:function(){var T=this,O=this[o];if(O!==null)return Promise.reject(O);if(this[p])return Promise.resolve(u(void 0,!0));if(this[l].destroyed)return new Promise(function(Q,te){process$1.nextTick(function(){T[o]?te(T[o]):Q(u(void 0,!0))})});var $=this[c],K;if($)K=new Promise(b($,this));else{var ee=this[l].read();if(ee!==null)return Promise.resolve(u(ee,!1));K=new Promise(this[f])}return this[c]=K,K}},e(d,Symbol.asyncIterator,function(){return this}),e(d,"return",function(){var T=this;return new Promise(function(O,$){T[l].destroy(null,function(K){if(K){$(K);return}O(u(void 0,!0))})})}),d),I),A=function(T){var O,$=Object.create(S,(O={},e(O,l,{value:T,writable:!0}),e(O,a,{value:null,writable:!0}),e(O,n,{value:null,writable:!0}),e(O,o,{value:null,writable:!0}),e(O,p,{value:T._readableState.endEmitted,writable:!0}),e(O,f,{value:function(ee,Q){var te=$[l].read();te?($[c]=null,$[a]=null,$[n]=null,ee(u(te,!1))):($[a]=ee,$[n]=Q)},writable:!0}),O));return $[c]=null,s(T,function(K){if(K&&K.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ee=$[n];ee!==null&&($[c]=null,$[a]=null,$[n]=null,ee(K)),$[o]=K;return}var Q=$[a];Q!==null&&($[c]=null,$[a]=null,$[n]=null,Q(u(void 0,!0))),$[p]=!0}),T.on("readable",y.bind(null,$)),$};return async_iterator=A,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable$1,hasRequired_stream_readable$1;function require_stream_readable$1(){if(hasRequired_stream_readable$1)return _stream_readable$1;hasRequired_stream_readable$1=1,_stream_readable$1=Q;var d;Q.ReadableState=ee,requireEvents().EventEmitter;var e=function(H,de){return H.listeners(de).length},t=requireStreamBrowser$1(),r=require$$1$2.Buffer,s=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(z){return r.from(z)}function n(z){return r.isBuffer(z)||z instanceof s}var o=requireUtil$1(),p;o&&o.debuglog?p=o.debuglog("stream"):p=function(){};var c=requireBuffer_list(),f=requireDestroy$1(),l=requireState(),u=l.getHighWaterMark,g=requireErrorsBrowser().codes,y=g.ERR_INVALID_ARG_TYPE,b=g.ERR_STREAM_PUSH_AFTER_EOF,I=g.ERR_METHOD_NOT_IMPLEMENTED,S=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,A,k,T;requireInherits_browser()(Q,t);var O=f.errorOrDestroy,$=["error","close","destroy","pause","resume"];function K(z,H,de){if(typeof z.prependListener=="function")return z.prependListener(H,de);!z._events||!z._events[H]?z.on(H,de):Array.isArray(z._events[H])?z._events[H].unshift(de):z._events[H]=[de,z._events[H]]}function ee(z,H,de){d=d||require_stream_duplex$1(),z=z||{},typeof de!="boolean"&&(de=H instanceof d),this.objectMode=!!z.objectMode,de&&(this.objectMode=this.objectMode||!!z.readableObjectMode),this.highWaterMark=u(this,z,"readableHighWaterMark",de),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=z.emitClose!==!1,this.autoDestroy=!!z.autoDestroy,this.destroyed=!1,this.defaultEncoding=z.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,z.encoding&&(A||(A=requireString_decoder().StringDecoder),this.decoder=new A(z.encoding),this.encoding=z.encoding)}function Q(z){if(d=d||require_stream_duplex$1(),!(this instanceof Q))return new Q(z);var H=this instanceof d;this._readableState=new ee(z,this,H),this.readable=!0,z&&(typeof z.read=="function"&&(this._read=z.read),typeof z.destroy=="function"&&(this._destroy=z.destroy)),t.call(this)}Object.defineProperty(Q.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(H){this._readableState&&(this._readableState.destroyed=H)}}),Q.prototype.destroy=f.destroy,Q.prototype._undestroy=f.undestroy,Q.prototype._destroy=function(z,H){H(z)},Q.prototype.push=function(z,H){var de=this._readableState,me;return de.objectMode?me=!0:typeof z=="string"&&(H=H||de.defaultEncoding,H!==de.encoding&&(z=r.from(z,H),H=""),me=!0),te(this,z,H,!1,me)},Q.prototype.unshift=function(z){return te(this,z,null,!0,!1)};function te(z,H,de,me,we){p("readableAddChunk",H);var Pe=z._readableState;if(H===null)Pe.reading=!1,E(z,Pe);else{var ke;if(we||(ke=m(Pe,H)),ke)O(z,ke);else if(Pe.objectMode||H&&H.length>0)if(typeof H!="string"&&!Pe.objectMode&&Object.getPrototypeOf(H)!==r.prototype&&(H=a(H)),me)Pe.endEmitted?O(z,new S):N(z,Pe,H,!0);else if(Pe.ended)O(z,new b);else{if(Pe.destroyed)return!1;Pe.reading=!1,Pe.decoder&&!de?(H=Pe.decoder.write(H),Pe.objectMode||H.length!==0?N(z,Pe,H,!1):D(z,Pe)):N(z,Pe,H,!1)}else me||(Pe.reading=!1,D(z,Pe))}return!Pe.ended&&(Pe.length<Pe.highWaterMark||Pe.length===0)}function N(z,H,de,me){H.flowing&&H.length===0&&!H.sync?(H.awaitDrain=0,z.emit("data",de)):(H.length+=H.objectMode?1:de.length,me?H.buffer.unshift(de):H.buffer.push(de),H.needReadable&&M(z)),D(z,H)}function m(z,H){var de;return!n(H)&&typeof H!="string"&&H!==void 0&&!z.objectMode&&(de=new y("chunk",["string","Buffer","Uint8Array"],H)),de}Q.prototype.isPaused=function(){return this._readableState.flowing===!1},Q.prototype.setEncoding=function(z){A||(A=requireString_decoder().StringDecoder);var H=new A(z);this._readableState.decoder=H,this._readableState.encoding=this._readableState.decoder.encoding;for(var de=this._readableState.buffer.head,me="";de!==null;)me+=H.write(de.data),de=de.next;return this._readableState.buffer.clear(),me!==""&&this._readableState.buffer.push(me),this._readableState.length=me.length,this};var _=1073741824;function h(z){return z>=_?z=_:(z--,z|=z>>>1,z|=z>>>2,z|=z>>>4,z|=z>>>8,z|=z>>>16,z++),z}function v(z,H){return z<=0||H.length===0&&H.ended?0:H.objectMode?1:z!==z?H.flowing&&H.length?H.buffer.head.data.length:H.length:(z>H.highWaterMark&&(H.highWaterMark=h(z)),z<=H.length?z:H.ended?H.length:(H.needReadable=!0,0))}Q.prototype.read=function(z){p("read",z),z=parseInt(z,10);var H=this._readableState,de=z;if(z!==0&&(H.emittedReadable=!1),z===0&&H.needReadable&&((H.highWaterMark!==0?H.length>=H.highWaterMark:H.length>0)||H.ended))return p("read: emitReadable",H.length,H.ended),H.length===0&&H.ended?G(this):M(this),null;if(z=v(z,H),z===0&&H.ended)return H.length===0&&G(this),null;var me=H.needReadable;p("need readable",me),(H.length===0||H.length-z<H.highWaterMark)&&(me=!0,p("length less than watermark",me)),H.ended||H.reading?(me=!1,p("reading or ended",me)):me&&(p("do read"),H.reading=!0,H.sync=!0,H.length===0&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||(z=v(de,H)));var we;return z>0?we=L(z,H):we=null,we===null?(H.needReadable=H.length<=H.highWaterMark,z=0):(H.length-=z,H.awaitDrain=0),H.length===0&&(H.ended||(H.needReadable=!0),de!==z&&H.ended&&G(this)),we!==null&&this.emit("data",we),we};function E(z,H){if(p("onEofChunk"),!H.ended){if(H.decoder){var de=H.decoder.end();de&&de.length&&(H.buffer.push(de),H.length+=H.objectMode?1:de.length)}H.ended=!0,H.sync?M(z):(H.needReadable=!1,H.emittedReadable||(H.emittedReadable=!0,P(z)))}}function M(z){var H=z._readableState;p("emitReadable",H.needReadable,H.emittedReadable),H.needReadable=!1,H.emittedReadable||(p("emitReadable",H.flowing),H.emittedReadable=!0,process$1.nextTick(P,z))}function P(z){var H=z._readableState;p("emitReadable_",H.destroyed,H.length,H.ended),!H.destroyed&&(H.length||H.ended)&&(z.emit("readable"),H.emittedReadable=!1),H.needReadable=!H.flowing&&!H.ended&&H.length<=H.highWaterMark,J(z)}function D(z,H){H.readingMore||(H.readingMore=!0,process$1.nextTick(w,z,H))}function w(z,H){for(;!H.reading&&!H.ended&&(H.length<H.highWaterMark||H.flowing&&H.length===0);){var de=H.length;if(p("maybeReadMore read 0"),z.read(0),de===H.length)break}H.readingMore=!1}Q.prototype._read=function(z){O(this,new I("_read()"))},Q.prototype.pipe=function(z,H){var de=this,me=this._readableState;switch(me.pipesCount){case 0:me.pipes=z;break;case 1:me.pipes=[me.pipes,z];break;default:me.pipes.push(z);break}me.pipesCount+=1,p("pipe count=%d opts=%j",me.pipesCount,H);var we=(!H||H.end!==!1)&&z!==process$1.stdout&&z!==process$1.stderr,Pe=we?Ue:V;me.endEmitted?process$1.nextTick(Pe):de.once("end",Pe),z.on("unpipe",ke);function ke(W,ae){p("onunpipe"),W===de&&ae&&ae.hasUnpiped===!1&&(ae.hasUnpiped=!0,Be())}function Ue(){p("onend"),z.end()}var he=B(de);z.on("drain",he);var Ge=!1;function Be(){p("cleanup"),z.removeListener("close",be),z.removeListener("finish",Le),z.removeListener("drain",he),z.removeListener("error",Ke),z.removeListener("unpipe",ke),de.removeListener("end",Ue),de.removeListener("end",V),de.removeListener("data",He),Ge=!0,me.awaitDrain&&(!z._writableState||z._writableState.needDrain)&&he()}de.on("data",He);function He(W){p("ondata");var ae=z.write(W);p("dest.write",ae),ae===!1&&((me.pipesCount===1&&me.pipes===z||me.pipesCount>1&&fe(me.pipes,z)!==-1)&&!Ge&&(p("false write response, pause",me.awaitDrain),me.awaitDrain++),de.pause())}function Ke(W){p("onerror",W),V(),z.removeListener("error",Ke),e(z,"error")===0&&O(z,W)}K(z,"error",Ke);function be(){z.removeListener("finish",Le),V()}z.once("close",be);function Le(){p("onfinish"),z.removeListener("close",be),V()}z.once("finish",Le);function V(){p("unpipe"),de.unpipe(z)}return z.emit("pipe",de),me.flowing||(p("pipe resume"),de.resume()),z};function B(z){return function(){var de=z._readableState;p("pipeOnDrain",de.awaitDrain),de.awaitDrain&&de.awaitDrain--,de.awaitDrain===0&&e(z,"data")&&(de.flowing=!0,J(z))}}Q.prototype.unpipe=function(z){var H=this._readableState,de={hasUnpiped:!1};if(H.pipesCount===0)return this;if(H.pipesCount===1)return z&&z!==H.pipes?this:(z||(z=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,z&&z.emit("unpipe",this,de),this);if(!z){var me=H.pipes,we=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var Pe=0;Pe<we;Pe++)me[Pe].emit("unpipe",this,{hasUnpiped:!1});return this}var ke=fe(H.pipes,z);return ke===-1?this:(H.pipes.splice(ke,1),H.pipesCount-=1,H.pipesCount===1&&(H.pipes=H.pipes[0]),z.emit("unpipe",this,de),this)},Q.prototype.on=function(z,H){var de=t.prototype.on.call(this,z,H),me=this._readableState;return z==="data"?(me.readableListening=this.listenerCount("readable")>0,me.flowing!==!1&&this.resume()):z==="readable"&&!me.endEmitted&&!me.readableListening&&(me.readableListening=me.needReadable=!0,me.flowing=!1,me.emittedReadable=!1,p("on readable",me.length,me.reading),me.length?M(this):me.reading||process$1.nextTick(U,this)),de},Q.prototype.addListener=Q.prototype.on,Q.prototype.removeListener=function(z,H){var de=t.prototype.removeListener.call(this,z,H);return z==="readable"&&process$1.nextTick(x,this),de},Q.prototype.removeAllListeners=function(z){var H=t.prototype.removeAllListeners.apply(this,arguments);return(z==="readable"||z===void 0)&&process$1.nextTick(x,this),H};function x(z){var H=z._readableState;H.readableListening=z.listenerCount("readable")>0,H.resumeScheduled&&!H.paused?H.flowing=!0:z.listenerCount("data")>0&&z.resume()}function U(z){p("readable nexttick read 0"),z.read(0)}Q.prototype.resume=function(){var z=this._readableState;return z.flowing||(p("resume"),z.flowing=!z.readableListening,X(this,z)),z.paused=!1,this};function X(z,H){H.resumeScheduled||(H.resumeScheduled=!0,process$1.nextTick(se,z,H))}function se(z,H){p("resume",H.reading),H.reading||z.read(0),H.resumeScheduled=!1,z.emit("resume"),J(z),H.flowing&&!H.reading&&z.read(0)}Q.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function J(z){var H=z._readableState;for(p("flow",H.flowing);H.flowing&&z.read()!==null;);}Q.prototype.wrap=function(z){var H=this,de=this._readableState,me=!1;z.on("end",function(){if(p("wrapped end"),de.decoder&&!de.ended){var ke=de.decoder.end();ke&&ke.length&&H.push(ke)}H.push(null)}),z.on("data",function(ke){if(p("wrapped data"),de.decoder&&(ke=de.decoder.write(ke)),!(de.objectMode&&ke==null)&&!(!de.objectMode&&(!ke||!ke.length))){var Ue=H.push(ke);Ue||(me=!0,z.pause())}});for(var we in z)this[we]===void 0&&typeof z[we]=="function"&&(this[we]=function(Ue){return function(){return z[Ue].apply(z,arguments)}}(we));for(var Pe=0;Pe<$.length;Pe++)z.on($[Pe],this.emit.bind(this,$[Pe]));return this._read=function(ke){p("wrapped _read",ke),me&&(me=!1,z.resume())},this},typeof Symbol=="function"&&(Q.prototype[Symbol.asyncIterator]=function(){return k===void 0&&(k=requireAsync_iterator()),k(this)}),Object.defineProperty(Q.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Q.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Q.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(H){this._readableState&&(this._readableState.flowing=H)}}),Q._fromList=L,Object.defineProperty(Q.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function L(z,H){if(H.length===0)return null;var de;return H.objectMode?de=H.buffer.shift():!z||z>=H.length?(H.decoder?de=H.buffer.join(""):H.buffer.length===1?de=H.buffer.first():de=H.buffer.concat(H.length),H.buffer.clear()):de=H.buffer.consume(z,H.decoder),de}function G(z){var H=z._readableState;p("endReadable",H.endEmitted),H.endEmitted||(H.ended=!0,process$1.nextTick(re,H,z))}function re(z,H){if(p("endReadableNT",z.endEmitted,z.length),!z.endEmitted&&z.length===0&&(z.endEmitted=!0,H.readable=!1,H.emit("end"),z.autoDestroy)){var de=H._writableState;(!de||de.autoDestroy&&de.finished)&&H.destroy()}}typeof Symbol=="function"&&(Q.from=function(z,H){return T===void 0&&(T=requireFromBrowser()),T(Q,z,H)});function fe(z,H){for(var de=0,me=z.length;de<me;de++)if(z[de]===H)return de;return-1}return _stream_readable$1}var _stream_transform$1,hasRequired_stream_transform$1;function require_stream_transform$1(){if(hasRequired_stream_transform$1)return _stream_transform$1;hasRequired_stream_transform$1=1,_stream_transform$1=o;var d=requireErrorsBrowser().codes,e=d.ERR_METHOD_NOT_IMPLEMENTED,t=d.ERR_MULTIPLE_CALLBACK,r=d.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=d.ERR_TRANSFORM_WITH_LENGTH_0,a=require_stream_duplex$1();requireInherits_browser()(o,a);function n(f,l){var u=this._transformState;u.transforming=!1;var g=u.writecb;if(g===null)return this.emit("error",new t);u.writechunk=null,u.writecb=null,l!=null&&this.push(l),g(f);var y=this._readableState;y.reading=!1,(y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}function o(f){if(!(this instanceof o))return new o(f);a.call(this,f),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",p)}function p(){var f=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(l,u){c(f,l,u)}):c(this,null,null)}o.prototype.push=function(f,l){return this._transformState.needTransform=!1,a.prototype.push.call(this,f,l)},o.prototype._transform=function(f,l,u){u(new e("_transform()"))},o.prototype._write=function(f,l,u){var g=this._transformState;if(g.writecb=u,g.writechunk=f,g.writeencoding=l,!g.transforming){var y=this._readableState;(g.needTransform||y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}},o.prototype._read=function(f){var l=this._transformState;l.writechunk!==null&&!l.transforming?(l.transforming=!0,this._transform(l.writechunk,l.writeencoding,l.afterTransform)):l.needTransform=!0},o.prototype._destroy=function(f,l){a.prototype._destroy.call(this,f,function(u){l(u)})};function c(f,l,u){if(l)return f.emit("error",l);if(u!=null&&f.push(u),f._writableState.length)throw new s;if(f._transformState.transforming)throw new r;return f.push(null)}return _stream_transform$1}var _stream_passthrough$1,hasRequired_stream_passthrough$1;function require_stream_passthrough$1(){if(hasRequired_stream_passthrough$1)return _stream_passthrough$1;hasRequired_stream_passthrough$1=1,_stream_passthrough$1=e;var d=require_stream_transform$1();requireInherits_browser()(e,d);function e(t){if(!(this instanceof e))return new e(t);d.call(this,t)}return e.prototype._transform=function(t,r,s){s(null,t)},_stream_passthrough$1}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var d;function e(u){var g=!1;return function(){g||(g=!0,u.apply(void 0,arguments))}}var t=requireErrorsBrowser().codes,r=t.ERR_MISSING_ARGS,s=t.ERR_STREAM_DESTROYED;function a(u){if(u)throw u}function n(u){return u.setHeader&&typeof u.abort=="function"}function o(u,g,y,b){b=e(b);var I=!1;u.on("close",function(){I=!0}),d===void 0&&(d=requireEndOfStream()),d(u,{readable:g,writable:y},function(A){if(A)return b(A);I=!0,b()});var S=!1;return function(A){if(!I&&!S){if(S=!0,n(u))return u.abort();if(typeof u.destroy=="function")return u.destroy();b(A||new s("pipe"))}}}function p(u){u()}function c(u,g){return u.pipe(g)}function f(u){return!u.length||typeof u[u.length-1]!="function"?a:u.pop()}function l(){for(var u=arguments.length,g=new Array(u),y=0;y<u;y++)g[y]=arguments[y];var b=f(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new r("streams");var I,S=g.map(function(A,k){var T=k<g.length-1,O=k>0;return o(A,T,O,function($){I||(I=$),$&&S.forEach(p),!T&&(S.forEach(p),b(I))})});return g.reduce(c)}return pipeline_1=l,pipeline_1}var hasRequiredReadableBrowser$1;function requireReadableBrowser$1(){return hasRequiredReadableBrowser$1||(hasRequiredReadableBrowser$1=1,function(d,e){e=d.exports=require_stream_readable$1(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable$1(),e.Duplex=require_stream_duplex$1(),e.Transform=require_stream_transform$1(),e.PassThrough=require_stream_passthrough$1(),e.finished=requireEndOfStream(),e.pipeline=requirePipeline()}(readableBrowser$1,readableBrowser$1.exports)),readableBrowser$1.exports}var hashBase,hasRequiredHashBase;function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var d=requireSafeBuffer$1().Buffer,e=requireReadableBrowser$1().Transform,t=requireInherits_browser();function r(a,n){if(!d.isBuffer(a)&&typeof a!="string")throw new TypeError(n+" must be a string or a buffer")}function s(a){e.call(this),this._block=d.allocUnsafe(a),this._blockSize=a,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return t(s,e),s.prototype._transform=function(a,n,o){var p=null;try{this.update(a,n)}catch(c){p=c}o(p)},s.prototype._flush=function(a){var n=null;try{this.push(this.digest())}catch(o){n=o}a(n)},s.prototype.update=function(a,n){if(r(a,"Data"),this._finalized)throw new Error("Digest already called");d.isBuffer(a)||(a=d.from(a,n));for(var o=this._block,p=0;this._blockOffset+a.length-p>=this._blockSize;){for(var c=this._blockOffset;c<this._blockSize;)o[c++]=a[p++];this._update(),this._blockOffset=0}for(;p<a.length;)o[this._blockOffset++]=a[p++];for(var f=0,l=a.length*8;l>0;++f)this._length[f]+=l,l=this._length[f]/4294967296|0,l>0&&(this._length[f]-=4294967296*l);return this},s.prototype._update=function(){throw new Error("_update is not implemented")},s.prototype.digest=function(a){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var n=this._digest();a!==void 0&&(n=n.toString(a)),this._block.fill(0),this._blockOffset=0;for(var o=0;o<4;++o)this._length[o]=0;return n},s.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=s,hashBase}var md5_js,hasRequiredMd5_js;function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var d=requireInherits_browser(),e=requireHashBase(),t=requireSafeBuffer$1().Buffer,r=new Array(16);function s(){e.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}d(s,e),s.prototype._update=function(){for(var f=r,l=0;l<16;++l)f[l]=this._block.readInt32LE(l*4);var u=this._a,g=this._b,y=this._c,b=this._d;u=n(u,g,y,b,f[0],3614090360,7),b=n(b,u,g,y,f[1],3905402710,12),y=n(y,b,u,g,f[2],606105819,17),g=n(g,y,b,u,f[3],3250441966,22),u=n(u,g,y,b,f[4],4118548399,7),b=n(b,u,g,y,f[5],1200080426,12),y=n(y,b,u,g,f[6],2821735955,17),g=n(g,y,b,u,f[7],4249261313,22),u=n(u,g,y,b,f[8],1770035416,7),b=n(b,u,g,y,f[9],2336552879,12),y=n(y,b,u,g,f[10],4294925233,17),g=n(g,y,b,u,f[11],2304563134,22),u=n(u,g,y,b,f[12],1804603682,7),b=n(b,u,g,y,f[13],4254626195,12),y=n(y,b,u,g,f[14],2792965006,17),g=n(g,y,b,u,f[15],1236535329,22),u=o(u,g,y,b,f[1],4129170786,5),b=o(b,u,g,y,f[6],3225465664,9),y=o(y,b,u,g,f[11],643717713,14),g=o(g,y,b,u,f[0],3921069994,20),u=o(u,g,y,b,f[5],3593408605,5),b=o(b,u,g,y,f[10],38016083,9),y=o(y,b,u,g,f[15],3634488961,14),g=o(g,y,b,u,f[4],3889429448,20),u=o(u,g,y,b,f[9],568446438,5),b=o(b,u,g,y,f[14],3275163606,9),y=o(y,b,u,g,f[3],4107603335,14),g=o(g,y,b,u,f[8],1163531501,20),u=o(u,g,y,b,f[13],2850285829,5),b=o(b,u,g,y,f[2],4243563512,9),y=o(y,b,u,g,f[7],1735328473,14),g=o(g,y,b,u,f[12],2368359562,20),u=p(u,g,y,b,f[5],4294588738,4),b=p(b,u,g,y,f[8],2272392833,11),y=p(y,b,u,g,f[11],1839030562,16),g=p(g,y,b,u,f[14],4259657740,23),u=p(u,g,y,b,f[1],2763975236,4),b=p(b,u,g,y,f[4],1272893353,11),y=p(y,b,u,g,f[7],4139469664,16),g=p(g,y,b,u,f[10],3200236656,23),u=p(u,g,y,b,f[13],681279174,4),b=p(b,u,g,y,f[0],3936430074,11),y=p(y,b,u,g,f[3],3572445317,16),g=p(g,y,b,u,f[6],76029189,23),u=p(u,g,y,b,f[9],3654602809,4),b=p(b,u,g,y,f[12],3873151461,11),y=p(y,b,u,g,f[15],530742520,16),g=p(g,y,b,u,f[2],3299628645,23),u=c(u,g,y,b,f[0],4096336452,6),b=c(b,u,g,y,f[7],1126891415,10),y=c(y,b,u,g,f[14],2878612391,15),g=c(g,y,b,u,f[5],4237533241,21),u=c(u,g,y,b,f[12],1700485571,6),b=c(b,u,g,y,f[3],2399980690,10),y=c(y,b,u,g,f[10],4293915773,15),g=c(g,y,b,u,f[1],2240044497,21),u=c(u,g,y,b,f[8],1873313359,6),b=c(b,u,g,y,f[15],4264355552,10),y=c(y,b,u,g,f[6],2734768916,15),g=c(g,y,b,u,f[13],1309151649,21),u=c(u,g,y,b,f[4],4149444226,6),b=c(b,u,g,y,f[11],3174756917,10),y=c(y,b,u,g,f[2],718787259,15),g=c(g,y,b,u,f[9],3951481745,21),this._a=this._a+u|0,this._b=this._b+g|0,this._c=this._c+y|0,this._d=this._d+b|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var f=t.allocUnsafe(16);return f.writeInt32LE(this._a,0),f.writeInt32LE(this._b,4),f.writeInt32LE(this._c,8),f.writeInt32LE(this._d,12),f};function a(f,l){return f<<l|f>>>32-l}function n(f,l,u,g,y,b,I){return a(f+(l&u|~l&g)+y+b|0,I)+l|0}function o(f,l,u,g,y,b,I){return a(f+(l&g|u&~g)+y+b|0,I)+l|0}function p(f,l,u,g,y,b,I){return a(f+(l^u^g)+y+b|0,I)+l|0}function c(f,l,u,g,y,b,I){return a(f+(u^(l|~g))+y+b|0,I)+l|0}return md5_js=s,md5_js}var ripemd160,hasRequiredRipemd160;function requireRipemd160(){if(hasRequiredRipemd160)return ripemd160;hasRequiredRipemd160=1;var d=require$$1$2.Buffer,e=requireInherits_browser(),t=requireHashBase(),r=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],a=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],n=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],o=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],c=[1352829926,1548603684,1836072691,2053994217,0];function f(){t.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}e(f,t),f.prototype._update=function(){for(var S=r,A=0;A<16;++A)S[A]=this._block.readInt32LE(A*4);for(var k=this._a|0,T=this._b|0,O=this._c|0,$=this._d|0,K=this._e|0,ee=this._a|0,Q=this._b|0,te=this._c|0,N=this._d|0,m=this._e|0,_=0;_<80;_+=1){var h,v;_<16?(h=u(k,T,O,$,K,S[s[_]],p[0],n[_]),v=I(ee,Q,te,N,m,S[a[_]],c[0],o[_])):_<32?(h=g(k,T,O,$,K,S[s[_]],p[1],n[_]),v=b(ee,Q,te,N,m,S[a[_]],c[1],o[_])):_<48?(h=y(k,T,O,$,K,S[s[_]],p[2],n[_]),v=y(ee,Q,te,N,m,S[a[_]],c[2],o[_])):_<64?(h=b(k,T,O,$,K,S[s[_]],p[3],n[_]),v=g(ee,Q,te,N,m,S[a[_]],c[3],o[_])):(h=I(k,T,O,$,K,S[s[_]],p[4],n[_]),v=u(ee,Q,te,N,m,S[a[_]],c[4],o[_])),k=K,K=$,$=l(O,10),O=T,T=h,ee=m,m=N,N=l(te,10),te=Q,Q=v}var E=this._b+O+N|0;this._b=this._c+$+m|0,this._c=this._d+K+ee|0,this._d=this._e+k+Q|0,this._e=this._a+T+te|0,this._a=E},f.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var S=d.alloc?d.alloc(20):new d(20);return S.writeInt32LE(this._a,0),S.writeInt32LE(this._b,4),S.writeInt32LE(this._c,8),S.writeInt32LE(this._d,12),S.writeInt32LE(this._e,16),S};function l(S,A){return S<<A|S>>>32-A}function u(S,A,k,T,O,$,K,ee){return l(S+(A^k^T)+$+K|0,ee)+O|0}function g(S,A,k,T,O,$,K,ee){return l(S+(A&k|~A&T)+$+K|0,ee)+O|0}function y(S,A,k,T,O,$,K,ee){return l(S+((A|~k)^T)+$+K|0,ee)+O|0}function b(S,A,k,T,O,$,K,ee){return l(S+(A&T|k&~T)+$+K|0,ee)+O|0}function I(S,A,k,T,O,$,K,ee){return l(S+(A^(k|~T))+$+K|0,ee)+O|0}return ripemd160=f,ripemd160}var sha_js={exports:{}},hash$1,hasRequiredHash$1;function requireHash$1(){if(hasRequiredHash$1)return hash$1;hasRequiredHash$1=1;var d=requireSafeBuffer$1().Buffer;function e(t,r){this._block=d.alloc(t),this._finalSize=r,this._blockSize=t,this._len=0}return e.prototype.update=function(t,r){typeof t=="string"&&(r=r||"utf8",t=d.from(t,r));for(var s=this._block,a=this._blockSize,n=t.length,o=this._len,p=0;p<n;){for(var c=o%a,f=Math.min(n-p,a-c),l=0;l<f;l++)s[c+l]=t[p+l];o+=f,p+=f,o%a===0&&this._update(s)}return this._len+=n,this},e.prototype.digest=function(t){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var s=this._len*8;if(s<=4294967295)this._block.writeUInt32BE(s,this._blockSize-4);else{var a=(s&4294967295)>>>0,n=(s-a)/4294967296;this._block.writeUInt32BE(n,this._blockSize-8),this._block.writeUInt32BE(a,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},e.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$1=e,hash$1}var sha$1,hasRequiredSha$1;function requireSha$1(){if(hasRequiredSha$1)return sha$1;hasRequiredSha$1=1;var d=requireInherits_browser(),e=requireHash$1(),t=requireSafeBuffer$1().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function a(){this.init(),this._w=s,e.call(this,64,56)}d(a,e),a.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function n(c){return c<<5|c>>>27}function o(c){return c<<30|c>>>2}function p(c,f,l,u){return c===0?f&l|~f&u:c===2?f&l|f&u|l&u:f^l^u}return a.prototype._update=function(c){for(var f=this._w,l=this._a|0,u=this._b|0,g=this._c|0,y=this._d|0,b=this._e|0,I=0;I<16;++I)f[I]=c.readInt32BE(I*4);for(;I<80;++I)f[I]=f[I-3]^f[I-8]^f[I-14]^f[I-16];for(var S=0;S<80;++S){var A=~~(S/20),k=n(l)+p(A,u,g,y)+b+f[S]+r[A]|0;b=y,y=g,g=o(u),u=l,l=k}this._a=l+this._a|0,this._b=u+this._b|0,this._c=g+this._c|0,this._d=y+this._d|0,this._e=b+this._e|0},a.prototype._hash=function(){var c=t.allocUnsafe(20);return c.writeInt32BE(this._a|0,0),c.writeInt32BE(this._b|0,4),c.writeInt32BE(this._c|0,8),c.writeInt32BE(this._d|0,12),c.writeInt32BE(this._e|0,16),c},sha$1=a,sha$1}var sha1,hasRequiredSha1;function requireSha1(){if(hasRequiredSha1)return sha1;hasRequiredSha1=1;var d=requireInherits_browser(),e=requireHash$1(),t=requireSafeBuffer$1().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function a(){this.init(),this._w=s,e.call(this,64,56)}d(a,e),a.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function n(f){return f<<1|f>>>31}function o(f){return f<<5|f>>>27}function p(f){return f<<30|f>>>2}function c(f,l,u,g){return f===0?l&u|~l&g:f===2?l&u|l&g|u&g:l^u^g}return a.prototype._update=function(f){for(var l=this._w,u=this._a|0,g=this._b|0,y=this._c|0,b=this._d|0,I=this._e|0,S=0;S<16;++S)l[S]=f.readInt32BE(S*4);for(;S<80;++S)l[S]=n(l[S-3]^l[S-8]^l[S-14]^l[S-16]);for(var A=0;A<80;++A){var k=~~(A/20),T=o(u)+c(k,g,y,b)+I+l[A]+r[k]|0;I=b,b=y,y=p(g),g=u,u=T}this._a=u+this._a|0,this._b=g+this._b|0,this._c=y+this._c|0,this._d=b+this._d|0,this._e=I+this._e|0},a.prototype._hash=function(){var f=t.allocUnsafe(20);return f.writeInt32BE(this._a|0,0),f.writeInt32BE(this._b|0,4),f.writeInt32BE(this._c|0,8),f.writeInt32BE(this._d|0,12),f.writeInt32BE(this._e|0,16),f},sha1=a,sha1}var sha256$1,hasRequiredSha256;function requireSha256(){if(hasRequiredSha256)return sha256$1;hasRequiredSha256=1;var d=requireInherits_browser(),e=requireHash$1(),t=requireSafeBuffer$1().Buffer,r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function a(){this.init(),this._w=s,e.call(this,64,56)}d(a,e),a.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function n(u,g,y){return y^u&(g^y)}function o(u,g,y){return u&g|y&(u|g)}function p(u){return(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10)}function c(u){return(u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7)}function f(u){return(u>>>7|u<<25)^(u>>>18|u<<14)^u>>>3}function l(u){return(u>>>17|u<<15)^(u>>>19|u<<13)^u>>>10}return a.prototype._update=function(u){for(var g=this._w,y=this._a|0,b=this._b|0,I=this._c|0,S=this._d|0,A=this._e|0,k=this._f|0,T=this._g|0,O=this._h|0,$=0;$<16;++$)g[$]=u.readInt32BE($*4);for(;$<64;++$)g[$]=l(g[$-2])+g[$-7]+f(g[$-15])+g[$-16]|0;for(var K=0;K<64;++K){var ee=O+c(A)+n(A,k,T)+r[K]+g[K]|0,Q=p(y)+o(y,b,I)|0;O=T,T=k,k=A,A=S+ee|0,S=I,I=b,b=y,y=ee+Q|0}this._a=y+this._a|0,this._b=b+this._b|0,this._c=I+this._c|0,this._d=S+this._d|0,this._e=A+this._e|0,this._f=k+this._f|0,this._g=T+this._g|0,this._h=O+this._h|0},a.prototype._hash=function(){var u=t.allocUnsafe(32);return u.writeInt32BE(this._a,0),u.writeInt32BE(this._b,4),u.writeInt32BE(this._c,8),u.writeInt32BE(this._d,12),u.writeInt32BE(this._e,16),u.writeInt32BE(this._f,20),u.writeInt32BE(this._g,24),u.writeInt32BE(this._h,28),u},sha256$1=a,sha256$1}var sha224$1,hasRequiredSha224;function requireSha224(){if(hasRequiredSha224)return sha224$1;hasRequiredSha224=1;var d=requireInherits_browser(),e=requireSha256(),t=requireHash$1(),r=requireSafeBuffer$1().Buffer,s=new Array(64);function a(){this.init(),this._w=s,t.call(this,64,56)}return d(a,e),a.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},a.prototype._hash=function(){var n=r.allocUnsafe(28);return n.writeInt32BE(this._a,0),n.writeInt32BE(this._b,4),n.writeInt32BE(this._c,8),n.writeInt32BE(this._d,12),n.writeInt32BE(this._e,16),n.writeInt32BE(this._f,20),n.writeInt32BE(this._g,24),n},sha224$1=a,sha224$1}var sha512$1,hasRequiredSha512;function requireSha512(){if(hasRequiredSha512)return sha512$1;hasRequiredSha512=1;var d=requireInherits_browser(),e=requireHash$1(),t=requireSafeBuffer$1().Buffer,r=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function a(){this.init(),this._w=s,e.call(this,128,112)}d(a,e),a.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function n(b,I,S){return S^b&(I^S)}function o(b,I,S){return b&I|S&(b|I)}function p(b,I){return(b>>>28|I<<4)^(I>>>2|b<<30)^(I>>>7|b<<25)}function c(b,I){return(b>>>14|I<<18)^(b>>>18|I<<14)^(I>>>9|b<<23)}function f(b,I){return(b>>>1|I<<31)^(b>>>8|I<<24)^b>>>7}function l(b,I){return(b>>>1|I<<31)^(b>>>8|I<<24)^(b>>>7|I<<25)}function u(b,I){return(b>>>19|I<<13)^(I>>>29|b<<3)^b>>>6}function g(b,I){return(b>>>19|I<<13)^(I>>>29|b<<3)^(b>>>6|I<<26)}function y(b,I){return b>>>0<I>>>0?1:0}return a.prototype._update=function(b){for(var I=this._w,S=this._ah|0,A=this._bh|0,k=this._ch|0,T=this._dh|0,O=this._eh|0,$=this._fh|0,K=this._gh|0,ee=this._hh|0,Q=this._al|0,te=this._bl|0,N=this._cl|0,m=this._dl|0,_=this._el|0,h=this._fl|0,v=this._gl|0,E=this._hl|0,M=0;M<32;M+=2)I[M]=b.readInt32BE(M*4),I[M+1]=b.readInt32BE(M*4+4);for(;M<160;M+=2){var P=I[M-30],D=I[M-15*2+1],w=f(P,D),B=l(D,P);P=I[M-2*2],D=I[M-2*2+1];var x=u(P,D),U=g(D,P),X=I[M-7*2],se=I[M-7*2+1],J=I[M-16*2],L=I[M-16*2+1],G=B+se|0,re=w+X+y(G,B)|0;G=G+U|0,re=re+x+y(G,U)|0,G=G+L|0,re=re+J+y(G,L)|0,I[M]=re,I[M+1]=G}for(var fe=0;fe<160;fe+=2){re=I[fe],G=I[fe+1];var z=o(S,A,k),H=o(Q,te,N),de=p(S,Q),me=p(Q,S),we=c(O,_),Pe=c(_,O),ke=r[fe],Ue=r[fe+1],he=n(O,$,K),Ge=n(_,h,v),Be=E+Pe|0,He=ee+we+y(Be,E)|0;Be=Be+Ge|0,He=He+he+y(Be,Ge)|0,Be=Be+Ue|0,He=He+ke+y(Be,Ue)|0,Be=Be+G|0,He=He+re+y(Be,G)|0;var Ke=me+H|0,be=de+z+y(Ke,me)|0;ee=K,E=v,K=$,v=h,$=O,h=_,_=m+Be|0,O=T+He+y(_,m)|0,T=k,m=N,k=A,N=te,A=S,te=Q,Q=Be+Ke|0,S=He+be+y(Q,Be)|0}this._al=this._al+Q|0,this._bl=this._bl+te|0,this._cl=this._cl+N|0,this._dl=this._dl+m|0,this._el=this._el+_|0,this._fl=this._fl+h|0,this._gl=this._gl+v|0,this._hl=this._hl+E|0,this._ah=this._ah+S+y(this._al,Q)|0,this._bh=this._bh+A+y(this._bl,te)|0,this._ch=this._ch+k+y(this._cl,N)|0,this._dh=this._dh+T+y(this._dl,m)|0,this._eh=this._eh+O+y(this._el,_)|0,this._fh=this._fh+$+y(this._fl,h)|0,this._gh=this._gh+K+y(this._gl,v)|0,this._hh=this._hh+ee+y(this._hl,E)|0},a.prototype._hash=function(){var b=t.allocUnsafe(64);function I(S,A,k){b.writeInt32BE(S,k),b.writeInt32BE(A,k+4)}return I(this._ah,this._al,0),I(this._bh,this._bl,8),I(this._ch,this._cl,16),I(this._dh,this._dl,24),I(this._eh,this._el,32),I(this._fh,this._fl,40),I(this._gh,this._gl,48),I(this._hh,this._hl,56),b},sha512$1=a,sha512$1}var sha384$1,hasRequiredSha384;function requireSha384(){if(hasRequiredSha384)return sha384$1;hasRequiredSha384=1;var d=requireInherits_browser(),e=requireSha512(),t=requireHash$1(),r=requireSafeBuffer$1().Buffer,s=new Array(160);function a(){this.init(),this._w=s,t.call(this,128,112)}return d(a,e),a.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},a.prototype._hash=function(){var n=r.allocUnsafe(48);function o(p,c,f){n.writeInt32BE(p,f),n.writeInt32BE(c,f+4)}return o(this._ah,this._al,0),o(this._bh,this._bl,8),o(this._ch,this._cl,16),o(this._dh,this._dl,24),o(this._eh,this._el,32),o(this._fh,this._fl,40),n},sha384$1=a,sha384$1}var hasRequiredSha_js;function requireSha_js(){if(hasRequiredSha_js)return sha_js.exports;hasRequiredSha_js=1;var d=sha_js.exports=function(t){t=t.toLowerCase();var r=d[t];if(!r)throw new Error(t+" is not supported (we accept pull requests)");return new r};return d.sha=requireSha$1(),d.sha1=requireSha1(),d.sha224=requireSha224(),d.sha256=requireSha256(),d.sha384=requireSha384(),d.sha512=requireSha512(),sha_js.exports}var streamBrowserify,hasRequiredStreamBrowserify;function requireStreamBrowserify(){if(hasRequiredStreamBrowserify)return streamBrowserify;hasRequiredStreamBrowserify=1,streamBrowserify=t;var d=requireEvents().EventEmitter,e=requireInherits_browser();e(t,d),t.Readable=require_stream_readable$1(),t.Writable=require_stream_writable$1(),t.Duplex=require_stream_duplex$1(),t.Transform=require_stream_transform$1(),t.PassThrough=require_stream_passthrough$1(),t.finished=requireEndOfStream(),t.pipeline=requirePipeline(),t.Stream=t;function t(){d.call(this)}return t.prototype.pipe=function(r,s){var a=this;function n(g){r.writable&&r.write(g)===!1&&a.pause&&a.pause()}a.on("data",n);function o(){a.readable&&a.resume&&a.resume()}r.on("drain",o),!r._isStdio&&(!s||s.end!==!1)&&(a.on("end",c),a.on("close",f));var p=!1;function c(){p||(p=!0,r.end())}function f(){p||(p=!0,typeof r.destroy=="function"&&r.destroy())}function l(g){if(u(),d.listenerCount(this,"error")===0)throw g}a.on("error",l),r.on("error",l);function u(){a.removeListener("data",n),r.removeListener("drain",o),a.removeListener("end",c),a.removeListener("close",f),a.removeListener("error",l),r.removeListener("error",l),a.removeListener("end",u),a.removeListener("close",u),r.removeListener("close",u)}return a.on("end",u),a.on("close",u),r.on("close",u),r.emit("pipe",a),r},streamBrowserify}var cipherBase,hasRequiredCipherBase;function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var d=requireSafeBuffer$1().Buffer,e=requireStreamBrowserify().Transform,t=requireString_decoder().StringDecoder,r=requireInherits_browser();function s(a){e.call(this),this.hashMode=typeof a=="string",this.hashMode?this[a]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}return r(s,e),s.prototype.update=function(a,n,o){typeof a=="string"&&(a=d.from(a,n));var p=this._update(a);return this.hashMode?this:(o&&(p=this._toString(p,o)),p)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},s.prototype._transform=function(a,n,o){var p;try{this.hashMode?this._update(a):this.push(this._update(a))}catch(c){p=c}finally{o(p)}},s.prototype._flush=function(a){var n;try{this.push(this.__final())}catch(o){n=o}a(n)},s.prototype._finalOrDigest=function(a){var n=this.__final()||d.alloc(0);return a&&(n=this._toString(n,a,!0)),n},s.prototype._toString=function(a,n,o){if(this._decoder||(this._decoder=new t(n),this._encoding=n),this._encoding!==n)throw new Error("can't switch encodings");var p=this._decoder.write(a);return o&&(p+=this._decoder.end()),p},cipherBase=s,cipherBase}var browser$9,hasRequiredBrowser$9;function requireBrowser$9(){if(hasRequiredBrowser$9)return browser$9;hasRequiredBrowser$9=1;var d=requireInherits_browser(),e=requireMd5_js(),t=requireRipemd160(),r=requireSha_js(),s=requireCipherBase();function a(n){s.call(this,"digest"),this._hash=n}return d(a,s),a.prototype._update=function(n){this._hash.update(n)},a.prototype._final=function(){return this._hash.digest()},browser$9=function(o){return o=o.toLowerCase(),o==="md5"?new e:o==="rmd160"||o==="ripemd160"?new t:new a(r(o))},browser$9}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var d=requireInherits_browser(),e=requireSafeBuffer$1().Buffer,t=requireCipherBase(),r=e.alloc(128),s=64;function a(n,o){t.call(this,"digest"),typeof o=="string"&&(o=e.from(o)),this._alg=n,this._key=o,o.length>s?o=n(o):o.length<s&&(o=e.concat([o,r],s));for(var p=this._ipad=e.allocUnsafe(s),c=this._opad=e.allocUnsafe(s),f=0;f<s;f++)p[f]=o[f]^54,c[f]=o[f]^92;this._hash=[p]}return d(a,t),a.prototype._update=function(n){this._hash.push(n)},a.prototype._final=function(){var n=this._alg(e.concat(this._hash));return this._alg(e.concat([this._opad,n]))},legacy=a,legacy}var md5,hasRequiredMd5;function requireMd5(){if(hasRequiredMd5)return md5;hasRequiredMd5=1;var d=requireMd5_js();return md5=function(e){return new d().update(e).digest()},md5}var browser$8,hasRequiredBrowser$8;function requireBrowser$8(){if(hasRequiredBrowser$8)return browser$8;hasRequiredBrowser$8=1;var d=requireInherits_browser(),e=requireLegacy(),t=requireCipherBase(),r=requireSafeBuffer$1().Buffer,s=requireMd5(),a=requireRipemd160(),n=requireSha_js(),o=r.alloc(128);function p(c,f){t.call(this,"digest"),typeof f=="string"&&(f=r.from(f));var l=c==="sha512"||c==="sha384"?128:64;if(this._alg=c,this._key=f,f.length>l){var u=c==="rmd160"?new a:n(c);f=u.update(f).digest()}else f.length<l&&(f=r.concat([f,o],l));for(var g=this._ipad=r.allocUnsafe(l),y=this._opad=r.allocUnsafe(l),b=0;b<l;b++)g[b]=f[b]^54,y[b]=f[b]^92;this._hash=c==="rmd160"?new a:n(c),this._hash.update(g)}return d(p,t),p.prototype._update=function(c){this._hash.update(c)},p.prototype._final=function(){var c=this._hash.digest(),f=this._alg==="rmd160"?new a:n(this._alg);return f.update(this._opad).update(c).digest()},browser$8=function(f,l){return f=f.toLowerCase(),f==="rmd160"||f==="ripemd160"?new p("rmd160",l):f==="md5"?new e(s,l):new p(f,l)},browser$8}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384={sign:"ecdsa",hash:"sha384",id:""},sha512={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"};var require$$6={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256,sha224,sha384,sha512,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos||(hasRequiredAlgos=1,algos=require$$6),algos}var browser$7={},precondition,hasRequiredPrecondition;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var d=Math.pow(2,30)-1;return precondition=function(e,t){if(typeof e!="number")throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if(typeof t!="number")throw new TypeError("Key length not a number");if(t<0||t>d||t!==t)throw new TypeError("Bad key length")},precondition}var defaultEncoding_1,hasRequiredDefaultEncoding;function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;hasRequiredDefaultEncoding=1;var d;if(commonjsGlobal.process&&commonjsGlobal.process.browser)d="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){var e=parseInt(process$1.version.split(".")[0].slice(1),10);d=e>=6?"utf-8":"binary"}else d="utf-8";return defaultEncoding_1=d,defaultEncoding_1}var toBuffer,hasRequiredToBuffer;function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer;hasRequiredToBuffer=1;var d=requireSafeBuffer$1().Buffer;return toBuffer=function(e,t,r){if(d.isBuffer(e))return e;if(typeof e=="string")return d.from(e,t);if(ArrayBuffer.isView(e))return d.from(e.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")},toBuffer}var syncBrowser,hasRequiredSyncBrowser;function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var d=requireMd5(),e=requireRipemd160(),t=requireSha_js(),r=requireSafeBuffer$1().Buffer,s=requirePrecondition(),a=requireDefaultEncoding(),n=requireToBuffer(),o=r.alloc(128),p={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function c(u,g,y){var b=f(u),I=u==="sha512"||u==="sha384"?128:64;g.length>I?g=b(g):g.length<I&&(g=r.concat([g,o],I));for(var S=r.allocUnsafe(I+p[u]),A=r.allocUnsafe(I+p[u]),k=0;k<I;k++)S[k]=g[k]^54,A[k]=g[k]^92;var T=r.allocUnsafe(I+y+4);S.copy(T,0,0,I),this.ipad1=T,this.ipad2=S,this.opad=A,this.alg=u,this.blocksize=I,this.hash=b,this.size=p[u]}c.prototype.run=function(u,g){u.copy(g,this.blocksize);var y=this.hash(g);return y.copy(this.opad,this.blocksize),this.hash(this.opad)};function f(u){function g(b){return t(u).update(b).digest()}function y(b){return new e().update(b).digest()}return u==="rmd160"||u==="ripemd160"?y:u==="md5"?d:g}function l(u,g,y,b,I){s(y,b),u=n(u,a,"Password"),g=n(g,a,"Salt"),I=I||"sha1";var S=new c(I,u,g.length),A=r.allocUnsafe(b),k=r.allocUnsafe(g.length+4);g.copy(k,0,0,g.length);for(var T=0,O=p[I],$=Math.ceil(b/O),K=1;K<=$;K++){k.writeUInt32BE(K,g.length);for(var ee=S.run(k,S.ipad1),Q=ee,te=1;te<y;te++){Q=S.run(Q,S.ipad2);for(var N=0;N<O;N++)ee[N]^=Q[N]}ee.copy(A,T),T+=O}return A}return syncBrowser=l,syncBrowser}var async,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var d=requireSafeBuffer$1().Buffer,e=requirePrecondition(),t=requireDefaultEncoding(),r=requireSyncBrowser(),s=requireToBuffer(),a,n=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,o={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},p=[];function c(y){if(commonjsGlobal.process&&!commonjsGlobal.process.browser||!n||!n.importKey||!n.deriveBits)return Promise.resolve(!1);if(p[y]!==void 0)return p[y];a=a||d.alloc(8);var b=u(a,a,10,128,y).then(function(){return!0}).catch(function(){return!1});return p[y]=b,b}var f;function l(){return f||(commonjsGlobal.process&&commonjsGlobal.process.nextTick?f=commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?f=commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?f=commonjsGlobal.setImmediate:f=commonjsGlobal.setTimeout,f)}function u(y,b,I,S,A){return n.importKey("raw",y,{name:"PBKDF2"},!1,["deriveBits"]).then(function(k){return n.deriveBits({name:"PBKDF2",salt:b,iterations:I,hash:{name:A}},k,S<<3)}).then(function(k){return d.from(k)})}function g(y,b){y.then(function(I){l()(function(){b(null,I)})},function(I){l()(function(){b(I)})})}return async=function(y,b,I,S,A,k){typeof A=="function"&&(k=A,A=void 0),A=A||"sha1";var T=o[A.toLowerCase()];if(!T||typeof commonjsGlobal.Promise!="function"){l()(function(){var O;try{O=r(y,b,I,S,A)}catch($){return k($)}k(null,O)});return}if(e(I,S),y=s(y,t,"Password"),b=s(b,t,"Salt"),typeof k!="function")throw new Error("No callback provided to pbkdf2");g(c(T).then(function(O){return O?u(y,b,I,S,T):r(y,b,I,S,A)}),k)},async}var hasRequiredBrowser$7;function requireBrowser$7(){return hasRequiredBrowser$7||(hasRequiredBrowser$7=1,browser$7.pbkdf2=requireAsync(),browser$7.pbkdf2Sync=requireSyncBrowser()),browser$7}var browser$6={},des$1={},utils$3={},hasRequiredUtils$3;function requireUtils$3(){if(hasRequiredUtils$3)return utils$3;hasRequiredUtils$3=1,utils$3.readUInt32BE=function(s,a){var n=s[0+a]<<24|s[1+a]<<16|s[2+a]<<8|s[3+a];return n>>>0},utils$3.writeUInt32BE=function(s,a,n){s[0+n]=a>>>24,s[1+n]=a>>>16&255,s[2+n]=a>>>8&255,s[3+n]=a&255},utils$3.ip=function(s,a,n,o){for(var p=0,c=0,f=6;f>=0;f-=2){for(var l=0;l<=24;l+=8)p<<=1,p|=a>>>l+f&1;for(var l=0;l<=24;l+=8)p<<=1,p|=s>>>l+f&1}for(var f=6;f>=0;f-=2){for(var l=1;l<=25;l+=8)c<<=1,c|=a>>>l+f&1;for(var l=1;l<=25;l+=8)c<<=1,c|=s>>>l+f&1}n[o+0]=p>>>0,n[o+1]=c>>>0},utils$3.rip=function(s,a,n,o){for(var p=0,c=0,f=0;f<4;f++)for(var l=24;l>=0;l-=8)p<<=1,p|=a>>>l+f&1,p<<=1,p|=s>>>l+f&1;for(var f=4;f<8;f++)for(var l=24;l>=0;l-=8)c<<=1,c|=a>>>l+f&1,c<<=1,c|=s>>>l+f&1;n[o+0]=p>>>0,n[o+1]=c>>>0},utils$3.pc1=function(s,a,n,o){for(var p=0,c=0,f=7;f>=5;f--){for(var l=0;l<=24;l+=8)p<<=1,p|=a>>l+f&1;for(var l=0;l<=24;l+=8)p<<=1,p|=s>>l+f&1}for(var l=0;l<=24;l+=8)p<<=1,p|=a>>l+f&1;for(var f=1;f<=3;f++){for(var l=0;l<=24;l+=8)c<<=1,c|=a>>l+f&1;for(var l=0;l<=24;l+=8)c<<=1,c|=s>>l+f&1}for(var l=0;l<=24;l+=8)c<<=1,c|=s>>l+f&1;n[o+0]=p>>>0,n[o+1]=c>>>0},utils$3.r28shl=function(s,a){return s<<a&268435455|s>>>28-a};var d=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$3.pc2=function(s,a,n,o){for(var p=0,c=0,f=d.length>>>1,l=0;l<f;l++)p<<=1,p|=s>>>d[l]&1;for(var l=f;l<d.length;l++)c<<=1,c|=a>>>d[l]&1;n[o+0]=p>>>0,n[o+1]=c>>>0},utils$3.expand=function(s,a,n){var o=0,p=0;o=(s&1)<<5|s>>>27;for(var c=23;c>=15;c-=4)o<<=6,o|=s>>>c&63;for(var c=11;c>=3;c-=4)p|=s>>>c&63,p<<=6;p|=(s&31)<<1|s>>>31,a[n+0]=o>>>0,a[n+1]=p>>>0};var e=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$3.substitute=function(s,a){for(var n=0,o=0;o<4;o++){var p=s>>>18-o*6&63,c=e[o*64+p];n<<=4,n|=c}for(var o=0;o<4;o++){var p=a>>>18-o*6&63,c=e[4*64+o*64+p];n<<=4,n|=c}return n>>>0};var t=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$3.permute=function(s){for(var a=0,n=0;n<t.length;n++)a<<=1,a|=s>>>t[n]&1;return a>>>0},utils$3.padSplit=function(s,a,n){for(var o=s.toString(2);o.length<a;)o="0"+o;for(var p=[],c=0;c<a;c+=n)p.push(o.slice(c,c+n));return p.join(" ")},utils$3}var minimalisticAssert,hasRequiredMinimalisticAssert;function requireMinimalisticAssert(){if(hasRequiredMinimalisticAssert)return minimalisticAssert;hasRequiredMinimalisticAssert=1,minimalisticAssert=d;function d(e,t){if(!e)throw new Error(t||"Assertion failed")}return d.equal=function(t,r,s){if(t!=r)throw new Error(s||"Assertion failed: "+t+" != "+r)},minimalisticAssert}var cipher,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var d=requireMinimalisticAssert();function e(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=t.padding!==!1}return cipher=e,e.prototype._init=function(){},e.prototype.update=function(r){return r.length===0?[]:this.type==="decrypt"?this._updateDecrypt(r):this._updateEncrypt(r)},e.prototype._buffer=function(r,s){for(var a=Math.min(this.buffer.length-this.bufferOff,r.length-s),n=0;n<a;n++)this.buffer[this.bufferOff+n]=r[s+n];return this.bufferOff+=a,a},e.prototype._flushBuffer=function(r,s){return this._update(this.buffer,0,r,s),this.bufferOff=0,this.blockSize},e.prototype._updateEncrypt=function(r){var s=0,a=0,n=(this.bufferOff+r.length)/this.blockSize|0,o=new Array(n*this.blockSize);this.bufferOff!==0&&(s+=this._buffer(r,s),this.bufferOff===this.buffer.length&&(a+=this._flushBuffer(o,a)));for(var p=r.length-(r.length-s)%this.blockSize;s<p;s+=this.blockSize)this._update(r,s,o,a),a+=this.blockSize;for(;s<r.length;s++,this.bufferOff++)this.buffer[this.bufferOff]=r[s];return o},e.prototype._updateDecrypt=function(r){for(var s=0,a=0,n=Math.ceil((this.bufferOff+r.length)/this.blockSize)-1,o=new Array(n*this.blockSize);n>0;n--)s+=this._buffer(r,s),a+=this._flushBuffer(o,a);return s+=this._buffer(r,s),o},e.prototype.final=function(r){var s;r&&(s=this.update(r));var a;return this.type==="encrypt"?a=this._finalEncrypt():a=this._finalDecrypt(),s?s.concat(a):a},e.prototype._pad=function(r,s){if(s===0)return!1;for(;s<r.length;)r[s++]=0;return!0},e.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var r=new Array(this.blockSize);return this._update(this.buffer,0,r,0),r},e.prototype._unpad=function(r){return r},e.prototype._finalDecrypt=function(){d.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var r=new Array(this.blockSize);return this._flushBuffer(r,0),this._unpad(r)},cipher}var des,hasRequiredDes$1;function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var d=requireMinimalisticAssert(),e=requireInherits_browser(),t=requireUtils$3(),r=requireCipher();function s(){this.tmp=new Array(2),this.keys=null}function a(o){r.call(this,o);var p=new s;this._desState=p,this.deriveKeys(p,o.key)}e(a,r),des=a,a.create=function(p){return new a(p)};var n=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return a.prototype.deriveKeys=function(p,c){p.keys=new Array(16*2),d.equal(c.length,this.blockSize,"Invalid key length");var f=t.readUInt32BE(c,0),l=t.readUInt32BE(c,4);t.pc1(f,l,p.tmp,0),f=p.tmp[0],l=p.tmp[1];for(var u=0;u<p.keys.length;u+=2){var g=n[u>>>1];f=t.r28shl(f,g),l=t.r28shl(l,g),t.pc2(f,l,p.keys,u)}},a.prototype._update=function(p,c,f,l){var u=this._desState,g=t.readUInt32BE(p,c),y=t.readUInt32BE(p,c+4);t.ip(g,y,u.tmp,0),g=u.tmp[0],y=u.tmp[1],this.type==="encrypt"?this._encrypt(u,g,y,u.tmp,0):this._decrypt(u,g,y,u.tmp,0),g=u.tmp[0],y=u.tmp[1],t.writeUInt32BE(f,g,l),t.writeUInt32BE(f,y,l+4)},a.prototype._pad=function(p,c){if(this.padding===!1)return!1;for(var f=p.length-c,l=c;l<p.length;l++)p[l]=f;return!0},a.prototype._unpad=function(p){if(this.padding===!1)return p;for(var c=p[p.length-1],f=p.length-c;f<p.length;f++)d.equal(p[f],c);return p.slice(0,p.length-c)},a.prototype._encrypt=function(p,c,f,l,u){for(var g=c,y=f,b=0;b<p.keys.length;b+=2){var I=p.keys[b],S=p.keys[b+1];t.expand(y,p.tmp,0),I^=p.tmp[0],S^=p.tmp[1];var A=t.substitute(I,S),k=t.permute(A),T=y;y=(g^k)>>>0,g=T}t.rip(y,g,l,u)},a.prototype._decrypt=function(p,c,f,l,u){for(var g=f,y=c,b=p.keys.length-2;b>=0;b-=2){var I=p.keys[b],S=p.keys[b+1];t.expand(g,p.tmp,0),I^=p.tmp[0],S^=p.tmp[1];var A=t.substitute(I,S),k=t.permute(A),T=g;g=(y^k)>>>0,y=T}t.rip(g,y,l,u)},des}var cbc$1={},hasRequiredCbc$1;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var d=requireMinimalisticAssert(),e=requireInherits_browser(),t={};function r(a){d.equal(a.length,8,"Invalid IV length"),this.iv=new Array(8);for(var n=0;n<this.iv.length;n++)this.iv[n]=a[n]}function s(a){function n(f){a.call(this,f),this._cbcInit()}e(n,a);for(var o=Object.keys(t),p=0;p<o.length;p++){var c=o[p];n.prototype[c]=t[c]}return n.create=function(l){return new n(l)},n}return cbc$1.instantiate=s,t._cbcInit=function(){var n=new r(this.options.iv);this._cbcState=n},t._update=function(n,o,p,c){var f=this._cbcState,l=this.constructor.super_.prototype,u=f.iv;if(this.type==="encrypt"){for(var g=0;g<this.blockSize;g++)u[g]^=n[o+g];l._update.call(this,u,0,p,c);for(var g=0;g<this.blockSize;g++)u[g]=p[c+g]}else{l._update.call(this,n,o,p,c);for(var g=0;g<this.blockSize;g++)p[c+g]^=u[g];for(var g=0;g<this.blockSize;g++)u[g]=n[o+g]}},cbc$1}var ede,hasRequiredEde;function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var d=requireMinimalisticAssert(),e=requireInherits_browser(),t=requireCipher(),r=requireDes$1();function s(n,o){d.equal(o.length,24,"Invalid key length");var p=o.slice(0,8),c=o.slice(8,16),f=o.slice(16,24);n==="encrypt"?this.ciphers=[r.create({type:"encrypt",key:p}),r.create({type:"decrypt",key:c}),r.create({type:"encrypt",key:f})]:this.ciphers=[r.create({type:"decrypt",key:f}),r.create({type:"encrypt",key:c}),r.create({type:"decrypt",key:p})]}function a(n){t.call(this,n);var o=new s(this.type,this.options.key);this._edeState=o}return e(a,t),ede=a,a.create=function(o){return new a(o)},a.prototype._update=function(o,p,c,f){var l=this._edeState;l.ciphers[0]._update(o,p,c,f),l.ciphers[1]._update(c,f,c,f),l.ciphers[2]._update(c,f,c,f)},a.prototype._pad=r.prototype._pad,a.prototype._unpad=r.prototype._unpad,ede}var hasRequiredDes;function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils$3(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}var browserifyDes,hasRequiredBrowserifyDes;function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var d=requireCipherBase(),e=requireDes(),t=requireInherits_browser(),r=requireSafeBuffer$1().Buffer,s={"des-ede3-cbc":e.CBC.instantiate(e.EDE),"des-ede3":e.EDE,"des-ede-cbc":e.CBC.instantiate(e.EDE),"des-ede":e.EDE,"des-cbc":e.CBC.instantiate(e.DES),"des-ecb":e.DES};s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],browserifyDes=a,t(a,d);function a(n){d.call(this);var o=n.mode.toLowerCase(),p=s[o],c;n.decrypt?c="decrypt":c="encrypt";var f=n.key;r.isBuffer(f)||(f=r.from(f)),(o==="des-ede"||o==="des-ede-cbc")&&(f=r.concat([f,f.slice(0,8)]));var l=n.iv;r.isBuffer(l)||(l=r.from(l)),this._des=p.create({key:f,iv:l,type:c})}return a.prototype._update=function(n){return r.from(this._des.update(n))},a.prototype._final=function(){return r.from(this._des.final())},browserifyDes}var browser$5={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(d,e){return d._cipher.encryptBlock(e)},ecb.decrypt=function(d,e){return d._cipher.decryptBlock(e)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor;function requireBufferXor(){return hasRequiredBufferXor||(hasRequiredBufferXor=1,bufferXor=function(e,t){for(var r=Math.min(e.length,t.length),s=new Buffer(r),a=0;a<r;++a)s[a]=e[a]^t[a];return s}),bufferXor}var hasRequiredCbc;function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var d=requireBufferXor();return cbc.encrypt=function(e,t){var r=d(t,e._prev);return e._prev=e._cipher.encryptBlock(r),e._prev},cbc.decrypt=function(e,t){var r=e._prev;e._prev=t;var s=e._cipher.decryptBlock(t);return d(s,r)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var d=requireSafeBuffer$1().Buffer,e=requireBufferXor();function t(r,s,a){var n=s.length,o=e(s,r._cache);return r._cache=r._cache.slice(n),r._prev=d.concat([r._prev,a?s:o]),o}return cfb.encrypt=function(r,s,a){for(var n=d.allocUnsafe(0),o;s.length;)if(r._cache.length===0&&(r._cache=r._cipher.encryptBlock(r._prev),r._prev=d.allocUnsafe(0)),r._cache.length<=s.length)o=r._cache.length,n=d.concat([n,t(r,s.slice(0,o),a)]),s=s.slice(o);else{n=d.concat([n,t(r,s,a)]);break}return n},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var d=requireSafeBuffer$1().Buffer;function e(t,r,s){var a=t._cipher.encryptBlock(t._prev),n=a[0]^r;return t._prev=d.concat([t._prev.slice(1),d.from([s?r:n])]),n}return cfb8.encrypt=function(t,r,s){for(var a=r.length,n=d.allocUnsafe(a),o=-1;++o<a;)n[o]=e(t,r[o],s);return n},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var d=requireSafeBuffer$1().Buffer;function e(r,s,a){for(var n,o=-1,p=8,c=0,f,l;++o<p;)n=r._cipher.encryptBlock(r._prev),f=s&1<<7-o?128:0,l=n[0]^f,c+=(l&128)>>o%8,r._prev=t(r._prev,a?f:l);return c}function t(r,s){var a=r.length,n=-1,o=d.allocUnsafe(r.length);for(r=d.concat([r,d.from([s])]);++n<a;)o[n]=r[n]<<1|r[n+1]>>7;return o}return cfb1.encrypt=function(r,s,a){for(var n=s.length,o=d.allocUnsafe(n),p=-1;++p<n;)o[p]=e(r,s[p],a);return o},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var d=requireBufferXor();function e(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}return ofb.encrypt=function(t,r){for(;t._cache.length<r.length;)t._cache=Buffer.concat([t._cache,e(t)]);var s=t._cache.slice(0,r.length);return t._cache=t._cache.slice(r.length),d(r,s)},ofb}var ctr={},incr32_1,hasRequiredIncr32;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;hasRequiredIncr32=1;function d(e){for(var t=e.length,r;t--;)if(r=e.readUInt8(t),r===255)e.writeUInt8(0,t);else{r++,e.writeUInt8(r,t);break}}return incr32_1=d,incr32_1}var hasRequiredCtr;function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var d=requireBufferXor(),e=requireSafeBuffer$1().Buffer,t=requireIncr32();function r(a){var n=a._cipher.encryptBlockRaw(a._prev);return t(a._prev),n}var s=16;return ctr.encrypt=function(a,n){var o=Math.ceil(n.length/s),p=a._cache.length;a._cache=e.concat([a._cache,e.allocUnsafe(o*s)]);for(var c=0;c<o;c++){var f=r(a),l=p+c*s;a._cache.writeUInt32BE(f[0],l+0),a._cache.writeUInt32BE(f[1],l+4),a._cache.writeUInt32BE(f[2],l+8),a._cache.writeUInt32BE(f[3],l+12)}var u=a._cache.slice(0,n.length);return a._cache=a._cache.slice(n.length),d(n,u)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"};var require$$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var d={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},e=require$$2;for(var t in e)e[t].module=d[e[t].mode];return modes_1=e,modes_1}var aes={},hasRequiredAes;function requireAes(){if(hasRequiredAes)return aes;hasRequiredAes=1;var d=requireSafeBuffer$1().Buffer;function e(o){d.isBuffer(o)||(o=d.from(o));for(var p=o.length/4|0,c=new Array(p),f=0;f<p;f++)c[f]=o.readUInt32BE(f*4);return c}function t(o){for(var p=0;p<o.length;o++)o[p]=0}function r(o,p,c,f,l){for(var u=c[0],g=c[1],y=c[2],b=c[3],I=o[0]^p[0],S=o[1]^p[1],A=o[2]^p[2],k=o[3]^p[3],T,O,$,K,ee=4,Q=1;Q<l;Q++)T=u[I>>>24]^g[S>>>16&255]^y[A>>>8&255]^b[k&255]^p[ee++],O=u[S>>>24]^g[A>>>16&255]^y[k>>>8&255]^b[I&255]^p[ee++],$=u[A>>>24]^g[k>>>16&255]^y[I>>>8&255]^b[S&255]^p[ee++],K=u[k>>>24]^g[I>>>16&255]^y[S>>>8&255]^b[A&255]^p[ee++],I=T,S=O,A=$,k=K;return T=(f[I>>>24]<<24|f[S>>>16&255]<<16|f[A>>>8&255]<<8|f[k&255])^p[ee++],O=(f[S>>>24]<<24|f[A>>>16&255]<<16|f[k>>>8&255]<<8|f[I&255])^p[ee++],$=(f[A>>>24]<<24|f[k>>>16&255]<<16|f[I>>>8&255]<<8|f[S&255])^p[ee++],K=(f[k>>>24]<<24|f[I>>>16&255]<<16|f[S>>>8&255]<<8|f[A&255])^p[ee++],T=T>>>0,O=O>>>0,$=$>>>0,K=K>>>0,[T,O,$,K]}var s=[0,1,2,4,8,16,32,64,128,27,54],a=function(){for(var o=new Array(256),p=0;p<256;p++)p<128?o[p]=p<<1:o[p]=p<<1^283;for(var c=[],f=[],l=[[],[],[],[]],u=[[],[],[],[]],g=0,y=0,b=0;b<256;++b){var I=y^y<<1^y<<2^y<<3^y<<4;I=I>>>8^I&255^99,c[g]=I,f[I]=g;var S=o[g],A=o[S],k=o[A],T=o[I]*257^I*16843008;l[0][g]=T<<24|T>>>8,l[1][g]=T<<16|T>>>16,l[2][g]=T<<8|T>>>24,l[3][g]=T,T=k*16843009^A*65537^S*257^g*16843008,u[0][I]=T<<24|T>>>8,u[1][I]=T<<16|T>>>16,u[2][I]=T<<8|T>>>24,u[3][I]=T,g===0?g=y=1:(g=S^o[o[o[k^S]]],y^=o[o[y]])}return{SBOX:c,INV_SBOX:f,SUB_MIX:l,INV_SUB_MIX:u}}();function n(o){this._key=e(o),this._reset()}return n.blockSize=4*4,n.keySize=256/8,n.prototype.blockSize=n.blockSize,n.prototype.keySize=n.keySize,n.prototype._reset=function(){for(var o=this._key,p=o.length,c=p+6,f=(c+1)*4,l=[],u=0;u<p;u++)l[u]=o[u];for(u=p;u<f;u++){var g=l[u-1];u%p===0?(g=g<<8|g>>>24,g=a.SBOX[g>>>24]<<24|a.SBOX[g>>>16&255]<<16|a.SBOX[g>>>8&255]<<8|a.SBOX[g&255],g^=s[u/p|0]<<24):p>6&&u%p===4&&(g=a.SBOX[g>>>24]<<24|a.SBOX[g>>>16&255]<<16|a.SBOX[g>>>8&255]<<8|a.SBOX[g&255]),l[u]=l[u-p]^g}for(var y=[],b=0;b<f;b++){var I=f-b,S=l[I-(b%4?0:4)];b<4||I<=4?y[b]=S:y[b]=a.INV_SUB_MIX[0][a.SBOX[S>>>24]]^a.INV_SUB_MIX[1][a.SBOX[S>>>16&255]]^a.INV_SUB_MIX[2][a.SBOX[S>>>8&255]]^a.INV_SUB_MIX[3][a.SBOX[S&255]]}this._nRounds=c,this._keySchedule=l,this._invKeySchedule=y},n.prototype.encryptBlockRaw=function(o){return o=e(o),r(o,this._keySchedule,a.SUB_MIX,a.SBOX,this._nRounds)},n.prototype.encryptBlock=function(o){var p=this.encryptBlockRaw(o),c=d.allocUnsafe(16);return c.writeUInt32BE(p[0],0),c.writeUInt32BE(p[1],4),c.writeUInt32BE(p[2],8),c.writeUInt32BE(p[3],12),c},n.prototype.decryptBlock=function(o){o=e(o);var p=o[1];o[1]=o[3],o[3]=p;var c=r(o,this._invKeySchedule,a.INV_SUB_MIX,a.INV_SBOX,this._nRounds),f=d.allocUnsafe(16);return f.writeUInt32BE(c[0],0),f.writeUInt32BE(c[3],4),f.writeUInt32BE(c[2],8),f.writeUInt32BE(c[1],12),f},n.prototype.scrub=function(){t(this._keySchedule),t(this._invKeySchedule),t(this._key)},aes.AES=n,aes}var ghash,hasRequiredGhash;function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var d=requireSafeBuffer$1().Buffer,e=d.alloc(16,0);function t(a){return[a.readUInt32BE(0),a.readUInt32BE(4),a.readUInt32BE(8),a.readUInt32BE(12)]}function r(a){var n=d.allocUnsafe(16);return n.writeUInt32BE(a[0]>>>0,0),n.writeUInt32BE(a[1]>>>0,4),n.writeUInt32BE(a[2]>>>0,8),n.writeUInt32BE(a[3]>>>0,12),n}function s(a){this.h=a,this.state=d.alloc(16,0),this.cache=d.allocUnsafe(0)}return s.prototype.ghash=function(a){for(var n=-1;++n<a.length;)this.state[n]^=a[n];this._multiply()},s.prototype._multiply=function(){for(var a=t(this.h),n=[0,0,0,0],o,p,c,f=-1;++f<128;){for(p=(this.state[~~(f/8)]&1<<7-f%8)!==0,p&&(n[0]^=a[0],n[1]^=a[1],n[2]^=a[2],n[3]^=a[3]),c=(a[3]&1)!==0,o=3;o>0;o--)a[o]=a[o]>>>1|(a[o-1]&1)<<31;a[0]=a[0]>>>1,c&&(a[0]=a[0]^225<<24)}this.state=r(n)},s.prototype.update=function(a){this.cache=d.concat([this.cache,a]);for(var n;this.cache.length>=16;)n=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(n)},s.prototype.final=function(a,n){return this.cache.length&&this.ghash(d.concat([this.cache,e],16)),this.ghash(r([0,a,0,n])),this.state},ghash=s,ghash}var authCipher,hasRequiredAuthCipher;function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var d=requireAes(),e=requireSafeBuffer$1().Buffer,t=requireCipherBase(),r=requireInherits_browser(),s=requireGhash(),a=requireBufferXor(),n=requireIncr32();function o(f,l){var u=0;f.length!==l.length&&u++;for(var g=Math.min(f.length,l.length),y=0;y<g;++y)u+=f[y]^l[y];return u}function p(f,l,u){if(l.length===12)return f._finID=e.concat([l,e.from([0,0,0,1])]),e.concat([l,e.from([0,0,0,2])]);var g=new s(u),y=l.length,b=y%16;g.update(l),b&&(b=16-b,g.update(e.alloc(b,0))),g.update(e.alloc(8,0));var I=y*8,S=e.alloc(8);S.writeUIntBE(I,0,8),g.update(S),f._finID=g.state;var A=e.from(f._finID);return n(A),A}function c(f,l,u,g){t.call(this);var y=e.alloc(4,0);this._cipher=new d.AES(l);var b=this._cipher.encryptBlock(y);this._ghash=new s(b),u=p(this,u,b),this._prev=e.from(u),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=g,this._alen=0,this._len=0,this._mode=f,this._authTag=null,this._called=!1}return r(c,t),c.prototype._update=function(f){if(!this._called&&this._alen){var l=16-this._alen%16;l<16&&(l=e.alloc(l,0),this._ghash.update(l))}this._called=!0;var u=this._mode.encrypt(this,f);return this._decrypt?this._ghash.update(f):this._ghash.update(u),this._len+=f.length,u},c.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var f=a(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&o(f,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=f,this._cipher.scrub()},c.prototype.getAuthTag=function(){if(this._decrypt||!e.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},c.prototype.setAuthTag=function(l){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=l},c.prototype.setAAD=function(l){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(l),this._alen+=l.length},authCipher=c,authCipher}var streamCipher,hasRequiredStreamCipher;function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var d=requireAes(),e=requireSafeBuffer$1().Buffer,t=requireCipherBase(),r=requireInherits_browser();function s(a,n,o,p){t.call(this),this._cipher=new d.AES(n),this._prev=e.from(o),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=p,this._mode=a}return r(s,t),s.prototype._update=function(a){return this._mode.encrypt(this,a,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},streamCipher=s,streamCipher}var evp_bytestokey,hasRequiredEvp_bytestokey;function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var d=requireSafeBuffer$1().Buffer,e=requireMd5_js();function t(r,s,a,n){if(d.isBuffer(r)||(r=d.from(r,"binary")),s&&(d.isBuffer(s)||(s=d.from(s,"binary")),s.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var o=a/8,p=d.alloc(o),c=d.alloc(n||0),f=d.alloc(0);o>0||n>0;){var l=new e;l.update(f),l.update(r),s&&l.update(s),f=l.digest();var u=0;if(o>0){var g=p.length-o;u=Math.min(o,f.length),f.copy(p,g,0,u),o-=u}if(u<f.length&&n>0){var y=c.length-n,b=Math.min(n,f.length-u);f.copy(c,y,u,u+b),n-=b}}return f.fill(0),{key:p,iv:c}}return evp_bytestokey=t,evp_bytestokey}var hasRequiredEncrypter;function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var d=requireModes$1(),e=requireAuthCipher(),t=requireSafeBuffer$1().Buffer,r=requireStreamCipher(),s=requireCipherBase(),a=requireAes(),n=requireEvp_bytestokey(),o=requireInherits_browser();function p(g,y,b){s.call(this),this._cache=new f,this._cipher=new a.AES(y),this._prev=t.from(b),this._mode=g,this._autopadding=!0}o(p,s),p.prototype._update=function(g){this._cache.add(g);for(var y,b,I=[];y=this._cache.get();)b=this._mode.encrypt(this,y),I.push(b);return t.concat(I)};var c=t.alloc(16,16);p.prototype._final=function(){var g=this._cache.flush();if(this._autopadding)return g=this._mode.encrypt(this,g),this._cipher.scrub(),g;if(!g.equals(c))throw this._cipher.scrub(),new Error("data not multiple of block length")},p.prototype.setAutoPadding=function(g){return this._autopadding=!!g,this};function f(){this.cache=t.allocUnsafe(0)}f.prototype.add=function(g){this.cache=t.concat([this.cache,g])},f.prototype.get=function(){if(this.cache.length>15){var g=this.cache.slice(0,16);return this.cache=this.cache.slice(16),g}return null},f.prototype.flush=function(){for(var g=16-this.cache.length,y=t.allocUnsafe(g),b=-1;++b<g;)y.writeUInt8(g,b);return t.concat([this.cache,y])};function l(g,y,b){var I=d[g.toLowerCase()];if(!I)throw new TypeError("invalid suite type");if(typeof y=="string"&&(y=t.from(y)),y.length!==I.key/8)throw new TypeError("invalid key length "+y.length);if(typeof b=="string"&&(b=t.from(b)),I.mode!=="GCM"&&b.length!==I.iv)throw new TypeError("invalid iv length "+b.length);return I.type==="stream"?new r(I.module,y,b):I.type==="auth"?new e(I.module,y,b):new p(I.module,y,b)}function u(g,y){var b=d[g.toLowerCase()];if(!b)throw new TypeError("invalid suite type");var I=n(y,!1,b.key,b.iv);return l(g,I.key,I.iv)}return encrypter.createCipheriv=l,encrypter.createCipher=u,encrypter}var decrypter={},hasRequiredDecrypter;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var d=requireAuthCipher(),e=requireSafeBuffer$1().Buffer,t=requireModes$1(),r=requireStreamCipher(),s=requireCipherBase(),a=requireAes(),n=requireEvp_bytestokey(),o=requireInherits_browser();function p(g,y,b){s.call(this),this._cache=new c,this._last=void 0,this._cipher=new a.AES(y),this._prev=e.from(b),this._mode=g,this._autopadding=!0}o(p,s),p.prototype._update=function(g){this._cache.add(g);for(var y,b,I=[];y=this._cache.get(this._autopadding);)b=this._mode.decrypt(this,y),I.push(b);return e.concat(I)},p.prototype._final=function(){var g=this._cache.flush();if(this._autopadding)return f(this._mode.decrypt(this,g));if(g)throw new Error("data not multiple of block length")},p.prototype.setAutoPadding=function(g){return this._autopadding=!!g,this};function c(){this.cache=e.allocUnsafe(0)}c.prototype.add=function(g){this.cache=e.concat([this.cache,g])},c.prototype.get=function(g){var y;if(g){if(this.cache.length>16)return y=this.cache.slice(0,16),this.cache=this.cache.slice(16),y}else if(this.cache.length>=16)return y=this.cache.slice(0,16),this.cache=this.cache.slice(16),y;return null},c.prototype.flush=function(){if(this.cache.length)return this.cache};function f(g){var y=g[15];if(y<1||y>16)throw new Error("unable to decrypt data");for(var b=-1;++b<y;)if(g[b+(16-y)]!==y)throw new Error("unable to decrypt data");if(y!==16)return g.slice(0,16-y)}function l(g,y,b){var I=t[g.toLowerCase()];if(!I)throw new TypeError("invalid suite type");if(typeof b=="string"&&(b=e.from(b)),I.mode!=="GCM"&&b.length!==I.iv)throw new TypeError("invalid iv length "+b.length);if(typeof y=="string"&&(y=e.from(y)),y.length!==I.key/8)throw new TypeError("invalid key length "+y.length);return I.type==="stream"?new r(I.module,y,b,!0):I.type==="auth"?new d(I.module,y,b,!0):new p(I.module,y,b)}function u(g,y){var b=t[g.toLowerCase()];if(!b)throw new TypeError("invalid suite type");var I=n(y,!1,b.key,b.iv);return l(g,I.key,I.iv)}return decrypter.createDecipher=u,decrypter.createDecipheriv=l,decrypter}var hasRequiredBrowser$6;function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$5;hasRequiredBrowser$6=1;var d=requireEncrypter(),e=requireDecrypter(),t=require$$2;function r(){return Object.keys(t)}return browser$5.createCipher=browser$5.Cipher=d.createCipher,browser$5.createCipheriv=browser$5.Cipheriv=d.createCipheriv,browser$5.createDecipher=browser$5.Decipher=e.createDecipher,browser$5.createDecipheriv=browser$5.Decipheriv=e.createDecipheriv,browser$5.listCiphers=browser$5.getCiphers=r,browser$5}var modes={},hasRequiredModes;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,function(d){d["des-ecb"]={key:8,iv:0},d["des-cbc"]=d.des={key:8,iv:8},d["des-ede3-cbc"]=d.des3={key:24,iv:8},d["des-ede3"]={key:24,iv:0},d["des-ede-cbc"]={key:16,iv:8},d["des-ede"]={key:16,iv:0}}(modes)),modes}var hasRequiredBrowser$5;function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$6;hasRequiredBrowser$5=1;var d=requireBrowserifyDes(),e=requireBrowser$6(),t=requireModes$1(),r=requireModes(),s=requireEvp_bytestokey();function a(f,l){f=f.toLowerCase();var u,g;if(t[f])u=t[f].key,g=t[f].iv;else if(r[f])u=r[f].key*8,g=r[f].iv;else throw new TypeError("invalid suite type");var y=s(l,!1,u,g);return o(f,y.key,y.iv)}function n(f,l){f=f.toLowerCase();var u,g;if(t[f])u=t[f].key,g=t[f].iv;else if(r[f])u=r[f].key*8,g=r[f].iv;else throw new TypeError("invalid suite type");var y=s(l,!1,u,g);return p(f,y.key,y.iv)}function o(f,l,u){if(f=f.toLowerCase(),t[f])return e.createCipheriv(f,l,u);if(r[f])return new d({key:l,iv:u,mode:f});throw new TypeError("invalid suite type")}function p(f,l,u){if(f=f.toLowerCase(),t[f])return e.createDecipheriv(f,l,u);if(r[f])return new d({key:l,iv:u,mode:f,decrypt:!0});throw new TypeError("invalid suite type")}function c(){return Object.keys(r).concat(e.getCiphers())}return browser$6.createCipher=browser$6.Cipher=a,browser$6.createCipheriv=browser$6.Cipheriv=o,browser$6.createDecipher=browser$6.Decipher=n,browser$6.createDecipheriv=browser$6.Decipheriv=p,browser$6.listCiphers=browser$6.getCiphers=c,browser$6}var browser$4={},bn$1={exports:{}};bn$1.exports;var hasRequiredBn$1;function requireBn$1(){return hasRequiredBn$1||(hasRequiredBn$1=1,function(d){(function(e,t){function r(N,m){if(!N)throw new Error(m||"Assertion failed")}function s(N,m){N.super_=m;var _=function(){};_.prototype=m.prototype,N.prototype=new _,N.prototype.constructor=N}function a(N,m,_){if(a.isBN(N))return N;this.negative=0,this.words=null,this.length=0,this.red=null,N!==null&&((m==="le"||m==="be")&&(_=m,m=10),this._init(N||0,m||10,_||"be"))}typeof e=="object"?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;var n;try{typeof window<"u"&&typeof window.Buffer<"u"?n=window.Buffer:n=require$$1$2.Buffer}catch{}a.isBN=function(m){return m instanceof a?!0:m!==null&&typeof m=="object"&&m.constructor.wordSize===a.wordSize&&Array.isArray(m.words)},a.max=function(m,_){return m.cmp(_)>0?m:_},a.min=function(m,_){return m.cmp(_)<0?m:_},a.prototype._init=function(m,_,h){if(typeof m=="number")return this._initNumber(m,_,h);if(typeof m=="object")return this._initArray(m,_,h);_==="hex"&&(_=16),r(_===(_|0)&&_>=2&&_<=36),m=m.toString().replace(/\s+/g,"");var v=0;m[0]==="-"&&(v++,this.negative=1),v<m.length&&(_===16?this._parseHex(m,v,h):(this._parseBase(m,_,v),h==="le"&&this._initArray(this.toArray(),_,h)))},a.prototype._initNumber=function(m,_,h){m<0&&(this.negative=1,m=-m),m<67108864?(this.words=[m&67108863],this.length=1):m<4503599627370496?(this.words=[m&67108863,m/67108864&67108863],this.length=2):(r(m<9007199254740992),this.words=[m&67108863,m/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),_,h)},a.prototype._initArray=function(m,_,h){if(r(typeof m.length=="number"),m.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(m.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var E,M,P=0;if(h==="be")for(v=m.length-1,E=0;v>=0;v-=3)M=m[v]|m[v-1]<<8|m[v-2]<<16,this.words[E]|=M<<P&67108863,this.words[E+1]=M>>>26-P&67108863,P+=24,P>=26&&(P-=26,E++);else if(h==="le")for(v=0,E=0;v<m.length;v+=3)M=m[v]|m[v+1]<<8|m[v+2]<<16,this.words[E]|=M<<P&67108863,this.words[E+1]=M>>>26-P&67108863,P+=24,P>=26&&(P-=26,E++);return this.strip()};function o(N,m){var _=N.charCodeAt(m);return _>=65&&_<=70?_-55:_>=97&&_<=102?_-87:_-48&15}function p(N,m,_){var h=o(N,_);return _-1>=m&&(h|=o(N,_-1)<<4),h}a.prototype._parseHex=function(m,_,h){this.length=Math.ceil((m.length-_)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var E=0,M=0,P;if(h==="be")for(v=m.length-1;v>=_;v-=2)P=p(m,_,v)<<E,this.words[M]|=P&67108863,E>=18?(E-=18,M+=1,this.words[M]|=P>>>26):E+=8;else{var D=m.length-_;for(v=D%2===0?_+1:_;v<m.length;v+=2)P=p(m,_,v)<<E,this.words[M]|=P&67108863,E>=18?(E-=18,M+=1,this.words[M]|=P>>>26):E+=8}this.strip()};function c(N,m,_,h){for(var v=0,E=Math.min(N.length,_),M=m;M<E;M++){var P=N.charCodeAt(M)-48;v*=h,P>=49?v+=P-49+10:P>=17?v+=P-17+10:v+=P}return v}a.prototype._parseBase=function(m,_,h){this.words=[0],this.length=1;for(var v=0,E=1;E<=67108863;E*=_)v++;v--,E=E/_|0;for(var M=m.length-h,P=M%v,D=Math.min(M,M-P)+h,w=0,B=h;B<D;B+=v)w=c(m,B,B+v,_),this.imuln(E),this.words[0]+w<67108864?this.words[0]+=w:this._iaddn(w);if(P!==0){var x=1;for(w=c(m,B,m.length,_),B=0;B<P;B++)x*=_;this.imuln(x),this.words[0]+w<67108864?this.words[0]+=w:this._iaddn(w)}this.strip()},a.prototype.copy=function(m){m.words=new Array(this.length);for(var _=0;_<this.length;_++)m.words[_]=this.words[_];m.length=this.length,m.negative=this.negative,m.red=this.red},a.prototype.clone=function(){var m=new a(null);return this.copy(m),m},a.prototype._expand=function(m){for(;this.length<m;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(m,_){m=m||10,_=_|0||1;var h;if(m===16||m==="hex"){h="";for(var v=0,E=0,M=0;M<this.length;M++){var P=this.words[M],D=((P<<v|E)&16777215).toString(16);E=P>>>24-v&16777215,E!==0||M!==this.length-1?h=f[6-D.length]+D+h:h=D+h,v+=2,v>=26&&(v-=26,M--)}for(E!==0&&(h=E.toString(16)+h);h.length%_!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(m===(m|0)&&m>=2&&m<=36){var w=l[m],B=u[m];h="";var x=this.clone();for(x.negative=0;!x.isZero();){var U=x.modn(B).toString(m);x=x.idivn(B),x.isZero()?h=U+h:h=f[w-U.length]+U+h}for(this.isZero()&&(h="0"+h);h.length%_!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}r(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var m=this.words[0];return this.length===2?m+=this.words[1]*67108864:this.length===3&&this.words[2]===1?m+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-m:m},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(m,_){return r(typeof n<"u"),this.toArrayLike(n,m,_)},a.prototype.toArray=function(m,_){return this.toArrayLike(Array,m,_)},a.prototype.toArrayLike=function(m,_,h){var v=this.byteLength(),E=h||Math.max(1,v);r(v<=E,"byte array longer than desired length"),r(E>0,"Requested array length <= 0"),this.strip();var M=_==="le",P=new m(E),D,w,B=this.clone();if(M){for(w=0;!B.isZero();w++)D=B.andln(255),B.iushrn(8),P[w]=D;for(;w<E;w++)P[w]=0}else{for(w=0;w<E-v;w++)P[w]=0;for(w=0;!B.isZero();w++)D=B.andln(255),B.iushrn(8),P[E-w-1]=D}return P},Math.clz32?a.prototype._countBits=function(m){return 32-Math.clz32(m)}:a.prototype._countBits=function(m){var _=m,h=0;return _>=4096&&(h+=13,_>>>=13),_>=64&&(h+=7,_>>>=7),_>=8&&(h+=4,_>>>=4),_>=2&&(h+=2,_>>>=2),h+_},a.prototype._zeroBits=function(m){if(m===0)return 26;var _=m,h=0;return _&8191||(h+=13,_>>>=13),_&127||(h+=7,_>>>=7),_&15||(h+=4,_>>>=4),_&3||(h+=2,_>>>=2),_&1||h++,h},a.prototype.bitLength=function(){var m=this.words[this.length-1],_=this._countBits(m);return(this.length-1)*26+_};function g(N){for(var m=new Array(N.bitLength()),_=0;_<m.length;_++){var h=_/26|0,v=_%26;m[_]=(N.words[h]&1<<v)>>>v}return m}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var m=0,_=0;_<this.length;_++){var h=this._zeroBits(this.words[_]);if(m+=h,h!==26)break}return m},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(m){return this.negative!==0?this.abs().inotn(m).iaddn(1):this.clone()},a.prototype.fromTwos=function(m){return this.testn(m-1)?this.notn(m).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(m){for(;this.length<m.length;)this.words[this.length++]=0;for(var _=0;_<m.length;_++)this.words[_]=this.words[_]|m.words[_];return this.strip()},a.prototype.ior=function(m){return r((this.negative|m.negative)===0),this.iuor(m)},a.prototype.or=function(m){return this.length>m.length?this.clone().ior(m):m.clone().ior(this)},a.prototype.uor=function(m){return this.length>m.length?this.clone().iuor(m):m.clone().iuor(this)},a.prototype.iuand=function(m){var _;this.length>m.length?_=m:_=this;for(var h=0;h<_.length;h++)this.words[h]=this.words[h]&m.words[h];return this.length=_.length,this.strip()},a.prototype.iand=function(m){return r((this.negative|m.negative)===0),this.iuand(m)},a.prototype.and=function(m){return this.length>m.length?this.clone().iand(m):m.clone().iand(this)},a.prototype.uand=function(m){return this.length>m.length?this.clone().iuand(m):m.clone().iuand(this)},a.prototype.iuxor=function(m){var _,h;this.length>m.length?(_=this,h=m):(_=m,h=this);for(var v=0;v<h.length;v++)this.words[v]=_.words[v]^h.words[v];if(this!==_)for(;v<_.length;v++)this.words[v]=_.words[v];return this.length=_.length,this.strip()},a.prototype.ixor=function(m){return r((this.negative|m.negative)===0),this.iuxor(m)},a.prototype.xor=function(m){return this.length>m.length?this.clone().ixor(m):m.clone().ixor(this)},a.prototype.uxor=function(m){return this.length>m.length?this.clone().iuxor(m):m.clone().iuxor(this)},a.prototype.inotn=function(m){r(typeof m=="number"&&m>=0);var _=Math.ceil(m/26)|0,h=m%26;this._expand(_),h>0&&_--;for(var v=0;v<_;v++)this.words[v]=~this.words[v]&67108863;return h>0&&(this.words[v]=~this.words[v]&67108863>>26-h),this.strip()},a.prototype.notn=function(m){return this.clone().inotn(m)},a.prototype.setn=function(m,_){r(typeof m=="number"&&m>=0);var h=m/26|0,v=m%26;return this._expand(h+1),_?this.words[h]=this.words[h]|1<<v:this.words[h]=this.words[h]&~(1<<v),this.strip()},a.prototype.iadd=function(m){var _;if(this.negative!==0&&m.negative===0)return this.negative=0,_=this.isub(m),this.negative^=1,this._normSign();if(this.negative===0&&m.negative!==0)return m.negative=0,_=this.isub(m),m.negative=1,_._normSign();var h,v;this.length>m.length?(h=this,v=m):(h=m,v=this);for(var E=0,M=0;M<v.length;M++)_=(h.words[M]|0)+(v.words[M]|0)+E,this.words[M]=_&67108863,E=_>>>26;for(;E!==0&&M<h.length;M++)_=(h.words[M]|0)+E,this.words[M]=_&67108863,E=_>>>26;if(this.length=h.length,E!==0)this.words[this.length]=E,this.length++;else if(h!==this)for(;M<h.length;M++)this.words[M]=h.words[M];return this},a.prototype.add=function(m){var _;return m.negative!==0&&this.negative===0?(m.negative=0,_=this.sub(m),m.negative^=1,_):m.negative===0&&this.negative!==0?(this.negative=0,_=m.sub(this),this.negative=1,_):this.length>m.length?this.clone().iadd(m):m.clone().iadd(this)},a.prototype.isub=function(m){if(m.negative!==0){m.negative=0;var _=this.iadd(m);return m.negative=1,_._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(m),this.negative=1,this._normSign();var h=this.cmp(m);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,E;h>0?(v=this,E=m):(v=m,E=this);for(var M=0,P=0;P<E.length;P++)_=(v.words[P]|0)-(E.words[P]|0)+M,M=_>>26,this.words[P]=_&67108863;for(;M!==0&&P<v.length;P++)_=(v.words[P]|0)+M,M=_>>26,this.words[P]=_&67108863;if(M===0&&P<v.length&&v!==this)for(;P<v.length;P++)this.words[P]=v.words[P];return this.length=Math.max(this.length,P),v!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(m){return this.clone().isub(m)};function y(N,m,_){_.negative=m.negative^N.negative;var h=N.length+m.length|0;_.length=h,h=h-1|0;var v=N.words[0]|0,E=m.words[0]|0,M=v*E,P=M&67108863,D=M/67108864|0;_.words[0]=P;for(var w=1;w<h;w++){for(var B=D>>>26,x=D&67108863,U=Math.min(w,m.length-1),X=Math.max(0,w-N.length+1);X<=U;X++){var se=w-X|0;v=N.words[se]|0,E=m.words[X]|0,M=v*E+x,B+=M/67108864|0,x=M&67108863}_.words[w]=x|0,D=B|0}return D!==0?_.words[w]=D|0:_.length--,_.strip()}var b=function(m,_,h){var v=m.words,E=_.words,M=h.words,P=0,D,w,B,x=v[0]|0,U=x&8191,X=x>>>13,se=v[1]|0,J=se&8191,L=se>>>13,G=v[2]|0,re=G&8191,fe=G>>>13,z=v[3]|0,H=z&8191,de=z>>>13,me=v[4]|0,we=me&8191,Pe=me>>>13,ke=v[5]|0,Ue=ke&8191,he=ke>>>13,Ge=v[6]|0,Be=Ge&8191,He=Ge>>>13,Ke=v[7]|0,be=Ke&8191,Le=Ke>>>13,V=v[8]|0,W=V&8191,ae=V>>>13,oe=v[9]|0,F=oe&8191,C=oe>>>13,R=E[0]|0,j=R&8191,Y=R>>>13,ie=E[1]|0,pe=ie&8191,Me=ie>>>13,Ce=E[2]|0,Ee=Ce&8191,Z=Ce>>>13,ne=E[3]|0,q=ne&8191,ge=ne>>>13,ye=E[4]|0,ce=ye&8191,Ie=ye>>>13,_e=E[5]|0,Re=_e&8191,le=_e>>>13,ue=E[6]|0,Oe=ue&8191,Te=ue>>>13,ve=E[7]|0,Ne=ve&8191,Ve=ve>>>13,xe=E[8]|0,Fe=xe&8191,qe=xe>>>13,Se=E[9]|0,De=Se&8191,ze=Se>>>13;h.negative=m.negative^_.negative,h.length=19,D=Math.imul(U,j),w=Math.imul(U,Y),w=w+Math.imul(X,j)|0,B=Math.imul(X,Y);var Ae=(P+D|0)+((w&8191)<<13)|0;P=(B+(w>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,D=Math.imul(J,j),w=Math.imul(J,Y),w=w+Math.imul(L,j)|0,B=Math.imul(L,Y),D=D+Math.imul(U,pe)|0,w=w+Math.imul(U,Me)|0,w=w+Math.imul(X,pe)|0,B=B+Math.imul(X,Me)|0;var je=(P+D|0)+((w&8191)<<13)|0;P=(B+(w>>>13)|0)+(je>>>26)|0,je&=67108863,D=Math.imul(re,j),w=Math.imul(re,Y),w=w+Math.imul(fe,j)|0,B=Math.imul(fe,Y),D=D+Math.imul(J,pe)|0,w=w+Math.imul(J,Me)|0,w=w+Math.imul(L,pe)|0,B=B+Math.imul(L,Me)|0,D=D+Math.imul(U,Ee)|0,w=w+Math.imul(U,Z)|0,w=w+Math.imul(X,Ee)|0,B=B+Math.imul(X,Z)|0;var We=(P+D|0)+((w&8191)<<13)|0;P=(B+(w>>>13)|0)+(We>>>26)|0,We&=67108863,D=Math.imul(H,j),w=Math.imul(H,Y),w=w+Math.imul(de,j)|0,B=Math.imul(de,Y),D=D+Math.imul(re,pe)|0,w=w+Math.imul(re,Me)|0,w=w+Math.imul(fe,pe)|0,B=B+Math.imul(fe,Me)|0,D=D+Math.imul(J,Ee)|0,w=w+Math.imul(J,Z)|0,w=w+Math.imul(L,Ee)|0,B=B+Math.imul(L,Z)|0,D=D+Math.imul(U,q)|0,w=w+Math.imul(U,ge)|0,w=w+Math.imul(X,q)|0,B=B+Math.imul(X,ge)|0;var $e=(P+D|0)+((w&8191)<<13)|0;P=(B+(w>>>13)|0)+($e>>>26)|0,$e&=67108863,D=Math.imul(we,j),w=Math.imul(we,Y),w=w+Math.imul(Pe,j)|0,B=Math.imul(Pe,Y),D=D+Math.imul(H,pe)|0,w=w+Math.imul(H,Me)|0,w=w+Math.imul(de,pe)|0,B=B+Math.imul(de,Me)|0,D=D+Math.imul(re,Ee)|0,w=w+Math.imul(re,Z)|0,w=w+Math.imul(fe,Ee)|0,B=B+Math.imul(fe,Z)|0,D=D+Math.imul(J,q)|0,w=w+Math.imul(J,ge)|0,w=w+Math.imul(L,q)|0,B=B+Math.imul(L,ge)|0,D=D+Math.imul(U,ce)|0,w=w+Math.imul(U,Ie)|0,w=w+Math.imul(X,ce)|0,B=B+Math.imul(X,Ie)|0;var Je=(P+D|0)+((w&8191)<<13)|0;P=(B+(w>>>13)|0)+(Je>>>26)|0,Je&=67108863,D=Math.imul(Ue,j),w=Math.imul(Ue,Y),w=w+Math.imul(he,j)|0,B=Math.imul(he,Y),D=D+Math.imul(we,pe)|0,w=w+Math.imul(we,Me)|0,w=w+Math.imul(Pe,pe)|0,B=B+Math.imul(Pe,Me)|0,D=D+Math.imul(H,Ee)|0,w=w+Math.imul(H,Z)|0,w=w+Math.imul(de,Ee)|0,B=B+Math.imul(de,Z)|0,D=D+Math.imul(re,q)|0,w=w+Math.imul(re,ge)|0,w=w+Math.imul(fe,q)|0,B=B+Math.imul(fe,ge)|0,D=D+Math.imul(J,ce)|0,w=w+Math.imul(J,Ie)|0,w=w+Math.imul(L,ce)|0,B=B+Math.imul(L,Ie)|0,D=D+Math.imul(U,Re)|0,w=w+Math.imul(U,le)|0,w=w+Math.imul(X,Re)|0,B=B+Math.imul(X,le)|0;var Ye=(P+D|0)+((w&8191)<<13)|0;P=(B+(w>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,D=Math.imul(Be,j),w=Math.imul(Be,Y),w=w+Math.imul(He,j)|0,B=Math.imul(He,Y),D=D+Math.imul(Ue,pe)|0,w=w+Math.imul(Ue,Me)|0,w=w+Math.imul(he,pe)|0,B=B+Math.imul(he,Me)|0,D=D+Math.imul(we,Ee)|0,w=w+Math.imul(we,Z)|0,w=w+Math.imul(Pe,Ee)|0,B=B+Math.imul(Pe,Z)|0,D=D+Math.imul(H,q)|0,w=w+Math.imul(H,ge)|0,w=w+Math.imul(de,q)|0,B=B+Math.imul(de,ge)|0,D=D+Math.imul(re,ce)|0,w=w+Math.imul(re,Ie)|0,w=w+Math.imul(fe,ce)|0,B=B+Math.imul(fe,Ie)|0,D=D+Math.imul(J,Re)|0,w=w+Math.imul(J,le)|0,w=w+Math.imul(L,Re)|0,B=B+Math.imul(L,le)|0,D=D+Math.imul(U,Oe)|0,w=w+Math.imul(U,Te)|0,w=w+Math.imul(X,Oe)|0,B=B+Math.imul(X,Te)|0;var Xe=(P+D|0)+((w&8191)<<13)|0;P=(B+(w>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,D=Math.imul(be,j),w=Math.imul(be,Y),w=w+Math.imul(Le,j)|0,B=Math.imul(Le,Y),D=D+Math.imul(Be,pe)|0,w=w+Math.imul(Be,Me)|0,w=w+Math.imul(He,pe)|0,B=B+Math.imul(He,Me)|0,D=D+Math.imul(Ue,Ee)|0,w=w+Math.imul(Ue,Z)|0,w=w+Math.imul(he,Ee)|0,B=B+Math.imul(he,Z)|0,D=D+Math.imul(we,q)|0,w=w+Math.imul(we,ge)|0,w=w+Math.imul(Pe,q)|0,B=B+Math.imul(Pe,ge)|0,D=D+Math.imul(H,ce)|0,w=w+Math.imul(H,Ie)|0,w=w+Math.imul(de,ce)|0,B=B+Math.imul(de,Ie)|0,D=D+Math.imul(re,Re)|0,w=w+Math.imul(re,le)|0,w=w+Math.imul(fe,Re)|0,B=B+Math.imul(fe,le)|0,D=D+Math.imul(J,Oe)|0,w=w+Math.imul(J,Te)|0,w=w+Math.imul(L,Oe)|0,B=B+Math.imul(L,Te)|0,D=D+Math.imul(U,Ne)|0,w=w+Math.imul(U,Ve)|0,w=w+Math.imul(X,Ne)|0,B=B+Math.imul(X,Ve)|0;var Ze=(P+D|0)+((w&8191)<<13)|0;P=(B+(w>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,D=Math.imul(W,j),w=Math.imul(W,Y),w=w+Math.imul(ae,j)|0,B=Math.imul(ae,Y),D=D+Math.imul(be,pe)|0,w=w+Math.imul(be,Me)|0,w=w+Math.imul(Le,pe)|0,B=B+Math.imul(Le,Me)|0,D=D+Math.imul(Be,Ee)|0,w=w+Math.imul(Be,Z)|0,w=w+Math.imul(He,Ee)|0,B=B+Math.imul(He,Z)|0,D=D+Math.imul(Ue,q)|0,w=w+Math.imul(Ue,ge)|0,w=w+Math.imul(he,q)|0,B=B+Math.imul(he,ge)|0,D=D+Math.imul(we,ce)|0,w=w+Math.imul(we,Ie)|0,w=w+Math.imul(Pe,ce)|0,B=B+Math.imul(Pe,Ie)|0,D=D+Math.imul(H,Re)|0,w=w+Math.imul(H,le)|0,w=w+Math.imul(de,Re)|0,B=B+Math.imul(de,le)|0,D=D+Math.imul(re,Oe)|0,w=w+Math.imul(re,Te)|0,w=w+Math.imul(fe,Oe)|0,B=B+Math.imul(fe,Te)|0,D=D+Math.imul(J,Ne)|0,w=w+Math.imul(J,Ve)|0,w=w+Math.imul(L,Ne)|0,B=B+Math.imul(L,Ve)|0,D=D+Math.imul(U,Fe)|0,w=w+Math.imul(U,qe)|0,w=w+Math.imul(X,Fe)|0,B=B+Math.imul(X,qe)|0;var Qe=(P+D|0)+((w&8191)<<13)|0;P=(B+(w>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,D=Math.imul(F,j),w=Math.imul(F,Y),w=w+Math.imul(C,j)|0,B=Math.imul(C,Y),D=D+Math.imul(W,pe)|0,w=w+Math.imul(W,Me)|0,w=w+Math.imul(ae,pe)|0,B=B+Math.imul(ae,Me)|0,D=D+Math.imul(be,Ee)|0,w=w+Math.imul(be,Z)|0,w=w+Math.imul(Le,Ee)|0,B=B+Math.imul(Le,Z)|0,D=D+Math.imul(Be,q)|0,w=w+Math.imul(Be,ge)|0,w=w+Math.imul(He,q)|0,B=B+Math.imul(He,ge)|0,D=D+Math.imul(Ue,ce)|0,w=w+Math.imul(Ue,Ie)|0,w=w+Math.imul(he,ce)|0,B=B+Math.imul(he,Ie)|0,D=D+Math.imul(we,Re)|0,w=w+Math.imul(we,le)|0,w=w+Math.imul(Pe,Re)|0,B=B+Math.imul(Pe,le)|0,D=D+Math.imul(H,Oe)|0,w=w+Math.imul(H,Te)|0,w=w+Math.imul(de,Oe)|0,B=B+Math.imul(de,Te)|0,D=D+Math.imul(re,Ne)|0,w=w+Math.imul(re,Ve)|0,w=w+Math.imul(fe,Ne)|0,B=B+Math.imul(fe,Ve)|0,D=D+Math.imul(J,Fe)|0,w=w+Math.imul(J,qe)|0,w=w+Math.imul(L,Fe)|0,B=B+Math.imul(L,qe)|0,D=D+Math.imul(U,De)|0,w=w+Math.imul(U,ze)|0,w=w+Math.imul(X,De)|0,B=B+Math.imul(X,ze)|0;var et=(P+D|0)+((w&8191)<<13)|0;P=(B+(w>>>13)|0)+(et>>>26)|0,et&=67108863,D=Math.imul(F,pe),w=Math.imul(F,Me),w=w+Math.imul(C,pe)|0,B=Math.imul(C,Me),D=D+Math.imul(W,Ee)|0,w=w+Math.imul(W,Z)|0,w=w+Math.imul(ae,Ee)|0,B=B+Math.imul(ae,Z)|0,D=D+Math.imul(be,q)|0,w=w+Math.imul(be,ge)|0,w=w+Math.imul(Le,q)|0,B=B+Math.imul(Le,ge)|0,D=D+Math.imul(Be,ce)|0,w=w+Math.imul(Be,Ie)|0,w=w+Math.imul(He,ce)|0,B=B+Math.imul(He,Ie)|0,D=D+Math.imul(Ue,Re)|0,w=w+Math.imul(Ue,le)|0,w=w+Math.imul(he,Re)|0,B=B+Math.imul(he,le)|0,D=D+Math.imul(we,Oe)|0,w=w+Math.imul(we,Te)|0,w=w+Math.imul(Pe,Oe)|0,B=B+Math.imul(Pe,Te)|0,D=D+Math.imul(H,Ne)|0,w=w+Math.imul(H,Ve)|0,w=w+Math.imul(de,Ne)|0,B=B+Math.imul(de,Ve)|0,D=D+Math.imul(re,Fe)|0,w=w+Math.imul(re,qe)|0,w=w+Math.imul(fe,Fe)|0,B=B+Math.imul(fe,qe)|0,D=D+Math.imul(J,De)|0,w=w+Math.imul(J,ze)|0,w=w+Math.imul(L,De)|0,B=B+Math.imul(L,ze)|0;var tt=(P+D|0)+((w&8191)<<13)|0;P=(B+(w>>>13)|0)+(tt>>>26)|0,tt&=67108863,D=Math.imul(F,Ee),w=Math.imul(F,Z),w=w+Math.imul(C,Ee)|0,B=Math.imul(C,Z),D=D+Math.imul(W,q)|0,w=w+Math.imul(W,ge)|0,w=w+Math.imul(ae,q)|0,B=B+Math.imul(ae,ge)|0,D=D+Math.imul(be,ce)|0,w=w+Math.imul(be,Ie)|0,w=w+Math.imul(Le,ce)|0,B=B+Math.imul(Le,Ie)|0,D=D+Math.imul(Be,Re)|0,w=w+Math.imul(Be,le)|0,w=w+Math.imul(He,Re)|0,B=B+Math.imul(He,le)|0,D=D+Math.imul(Ue,Oe)|0,w=w+Math.imul(Ue,Te)|0,w=w+Math.imul(he,Oe)|0,B=B+Math.imul(he,Te)|0,D=D+Math.imul(we,Ne)|0,w=w+Math.imul(we,Ve)|0,w=w+Math.imul(Pe,Ne)|0,B=B+Math.imul(Pe,Ve)|0,D=D+Math.imul(H,Fe)|0,w=w+Math.imul(H,qe)|0,w=w+Math.imul(de,Fe)|0,B=B+Math.imul(de,qe)|0,D=D+Math.imul(re,De)|0,w=w+Math.imul(re,ze)|0,w=w+Math.imul(fe,De)|0,B=B+Math.imul(fe,ze)|0;var rt=(P+D|0)+((w&8191)<<13)|0;P=(B+(w>>>13)|0)+(rt>>>26)|0,rt&=67108863,D=Math.imul(F,q),w=Math.imul(F,ge),w=w+Math.imul(C,q)|0,B=Math.imul(C,ge),D=D+Math.imul(W,ce)|0,w=w+Math.imul(W,Ie)|0,w=w+Math.imul(ae,ce)|0,B=B+Math.imul(ae,Ie)|0,D=D+Math.imul(be,Re)|0,w=w+Math.imul(be,le)|0,w=w+Math.imul(Le,Re)|0,B=B+Math.imul(Le,le)|0,D=D+Math.imul(Be,Oe)|0,w=w+Math.imul(Be,Te)|0,w=w+Math.imul(He,Oe)|0,B=B+Math.imul(He,Te)|0,D=D+Math.imul(Ue,Ne)|0,w=w+Math.imul(Ue,Ve)|0,w=w+Math.imul(he,Ne)|0,B=B+Math.imul(he,Ve)|0,D=D+Math.imul(we,Fe)|0,w=w+Math.imul(we,qe)|0,w=w+Math.imul(Pe,Fe)|0,B=B+Math.imul(Pe,qe)|0,D=D+Math.imul(H,De)|0,w=w+Math.imul(H,ze)|0,w=w+Math.imul(de,De)|0,B=B+Math.imul(de,ze)|0;var at=(P+D|0)+((w&8191)<<13)|0;P=(B+(w>>>13)|0)+(at>>>26)|0,at&=67108863,D=Math.imul(F,ce),w=Math.imul(F,Ie),w=w+Math.imul(C,ce)|0,B=Math.imul(C,Ie),D=D+Math.imul(W,Re)|0,w=w+Math.imul(W,le)|0,w=w+Math.imul(ae,Re)|0,B=B+Math.imul(ae,le)|0,D=D+Math.imul(be,Oe)|0,w=w+Math.imul(be,Te)|0,w=w+Math.imul(Le,Oe)|0,B=B+Math.imul(Le,Te)|0,D=D+Math.imul(Be,Ne)|0,w=w+Math.imul(Be,Ve)|0,w=w+Math.imul(He,Ne)|0,B=B+Math.imul(He,Ve)|0,D=D+Math.imul(Ue,Fe)|0,w=w+Math.imul(Ue,qe)|0,w=w+Math.imul(he,Fe)|0,B=B+Math.imul(he,qe)|0,D=D+Math.imul(we,De)|0,w=w+Math.imul(we,ze)|0,w=w+Math.imul(Pe,De)|0,B=B+Math.imul(Pe,ze)|0;var st=(P+D|0)+((w&8191)<<13)|0;P=(B+(w>>>13)|0)+(st>>>26)|0,st&=67108863,D=Math.imul(F,Re),w=Math.imul(F,le),w=w+Math.imul(C,Re)|0,B=Math.imul(C,le),D=D+Math.imul(W,Oe)|0,w=w+Math.imul(W,Te)|0,w=w+Math.imul(ae,Oe)|0,B=B+Math.imul(ae,Te)|0,D=D+Math.imul(be,Ne)|0,w=w+Math.imul(be,Ve)|0,w=w+Math.imul(Le,Ne)|0,B=B+Math.imul(Le,Ve)|0,D=D+Math.imul(Be,Fe)|0,w=w+Math.imul(Be,qe)|0,w=w+Math.imul(He,Fe)|0,B=B+Math.imul(He,qe)|0,D=D+Math.imul(Ue,De)|0,w=w+Math.imul(Ue,ze)|0,w=w+Math.imul(he,De)|0,B=B+Math.imul(he,ze)|0;var it=(P+D|0)+((w&8191)<<13)|0;P=(B+(w>>>13)|0)+(it>>>26)|0,it&=67108863,D=Math.imul(F,Oe),w=Math.imul(F,Te),w=w+Math.imul(C,Oe)|0,B=Math.imul(C,Te),D=D+Math.imul(W,Ne)|0,w=w+Math.imul(W,Ve)|0,w=w+Math.imul(ae,Ne)|0,B=B+Math.imul(ae,Ve)|0,D=D+Math.imul(be,Fe)|0,w=w+Math.imul(be,qe)|0,w=w+Math.imul(Le,Fe)|0,B=B+Math.imul(Le,qe)|0,D=D+Math.imul(Be,De)|0,w=w+Math.imul(Be,ze)|0,w=w+Math.imul(He,De)|0,B=B+Math.imul(He,ze)|0;var nt=(P+D|0)+((w&8191)<<13)|0;P=(B+(w>>>13)|0)+(nt>>>26)|0,nt&=67108863,D=Math.imul(F,Ne),w=Math.imul(F,Ve),w=w+Math.imul(C,Ne)|0,B=Math.imul(C,Ve),D=D+Math.imul(W,Fe)|0,w=w+Math.imul(W,qe)|0,w=w+Math.imul(ae,Fe)|0,B=B+Math.imul(ae,qe)|0,D=D+Math.imul(be,De)|0,w=w+Math.imul(be,ze)|0,w=w+Math.imul(Le,De)|0,B=B+Math.imul(Le,ze)|0;var ot=(P+D|0)+((w&8191)<<13)|0;P=(B+(w>>>13)|0)+(ot>>>26)|0,ot&=67108863,D=Math.imul(F,Fe),w=Math.imul(F,qe),w=w+Math.imul(C,Fe)|0,B=Math.imul(C,qe),D=D+Math.imul(W,De)|0,w=w+Math.imul(W,ze)|0,w=w+Math.imul(ae,De)|0,B=B+Math.imul(ae,ze)|0;var ft=(P+D|0)+((w&8191)<<13)|0;P=(B+(w>>>13)|0)+(ft>>>26)|0,ft&=67108863,D=Math.imul(F,De),w=Math.imul(F,ze),w=w+Math.imul(C,De)|0,B=Math.imul(C,ze);var pt=(P+D|0)+((w&8191)<<13)|0;return P=(B+(w>>>13)|0)+(pt>>>26)|0,pt&=67108863,M[0]=Ae,M[1]=je,M[2]=We,M[3]=$e,M[4]=Je,M[5]=Ye,M[6]=Xe,M[7]=Ze,M[8]=Qe,M[9]=et,M[10]=tt,M[11]=rt,M[12]=at,M[13]=st,M[14]=it,M[15]=nt,M[16]=ot,M[17]=ft,M[18]=pt,P!==0&&(M[19]=P,h.length++),h};Math.imul||(b=y);function I(N,m,_){_.negative=m.negative^N.negative,_.length=N.length+m.length;for(var h=0,v=0,E=0;E<_.length-1;E++){var M=v;v=0;for(var P=h&67108863,D=Math.min(E,m.length-1),w=Math.max(0,E-N.length+1);w<=D;w++){var B=E-w,x=N.words[B]|0,U=m.words[w]|0,X=x*U,se=X&67108863;M=M+(X/67108864|0)|0,se=se+P|0,P=se&67108863,M=M+(se>>>26)|0,v+=M>>>26,M&=67108863}_.words[E]=P,h=M,M=v}return h!==0?_.words[E]=h:_.length--,_.strip()}function S(N,m,_){var h=new A;return h.mulp(N,m,_)}a.prototype.mulTo=function(m,_){var h,v=this.length+m.length;return this.length===10&&m.length===10?h=b(this,m,_):v<63?h=y(this,m,_):v<1024?h=I(this,m,_):h=S(this,m,_),h};function A(N,m){this.x=N,this.y=m}A.prototype.makeRBT=function(m){for(var _=new Array(m),h=a.prototype._countBits(m)-1,v=0;v<m;v++)_[v]=this.revBin(v,h,m);return _},A.prototype.revBin=function(m,_,h){if(m===0||m===h-1)return m;for(var v=0,E=0;E<_;E++)v|=(m&1)<<_-E-1,m>>=1;return v},A.prototype.permute=function(m,_,h,v,E,M){for(var P=0;P<M;P++)v[P]=_[m[P]],E[P]=h[m[P]]},A.prototype.transform=function(m,_,h,v,E,M){this.permute(M,m,_,h,v,E);for(var P=1;P<E;P<<=1)for(var D=P<<1,w=Math.cos(2*Math.PI/D),B=Math.sin(2*Math.PI/D),x=0;x<E;x+=D)for(var U=w,X=B,se=0;se<P;se++){var J=h[x+se],L=v[x+se],G=h[x+se+P],re=v[x+se+P],fe=U*G-X*re;re=U*re+X*G,G=fe,h[x+se]=J+G,v[x+se]=L+re,h[x+se+P]=J-G,v[x+se+P]=L-re,se!==D&&(fe=w*U-B*X,X=w*X+B*U,U=fe)}},A.prototype.guessLen13b=function(m,_){var h=Math.max(_,m)|1,v=h&1,E=0;for(h=h/2|0;h;h=h>>>1)E++;return 1<<E+1+v},A.prototype.conjugate=function(m,_,h){if(!(h<=1))for(var v=0;v<h/2;v++){var E=m[v];m[v]=m[h-v-1],m[h-v-1]=E,E=_[v],_[v]=-_[h-v-1],_[h-v-1]=-E}},A.prototype.normalize13b=function(m,_){for(var h=0,v=0;v<_/2;v++){var E=Math.round(m[2*v+1]/_)*8192+Math.round(m[2*v]/_)+h;m[v]=E&67108863,E<67108864?h=0:h=E/67108864|0}return m},A.prototype.convert13b=function(m,_,h,v){for(var E=0,M=0;M<_;M++)E=E+(m[M]|0),h[2*M]=E&8191,E=E>>>13,h[2*M+1]=E&8191,E=E>>>13;for(M=2*_;M<v;++M)h[M]=0;r(E===0),r((E&-8192)===0)},A.prototype.stub=function(m){for(var _=new Array(m),h=0;h<m;h++)_[h]=0;return _},A.prototype.mulp=function(m,_,h){var v=2*this.guessLen13b(m.length,_.length),E=this.makeRBT(v),M=this.stub(v),P=new Array(v),D=new Array(v),w=new Array(v),B=new Array(v),x=new Array(v),U=new Array(v),X=h.words;X.length=v,this.convert13b(m.words,m.length,P,v),this.convert13b(_.words,_.length,B,v),this.transform(P,M,D,w,v,E),this.transform(B,M,x,U,v,E);for(var se=0;se<v;se++){var J=D[se]*x[se]-w[se]*U[se];w[se]=D[se]*U[se]+w[se]*x[se],D[se]=J}return this.conjugate(D,w,v),this.transform(D,w,X,M,v,E),this.conjugate(X,M,v),this.normalize13b(X,v),h.negative=m.negative^_.negative,h.length=m.length+_.length,h.strip()},a.prototype.mul=function(m){var _=new a(null);return _.words=new Array(this.length+m.length),this.mulTo(m,_)},a.prototype.mulf=function(m){var _=new a(null);return _.words=new Array(this.length+m.length),S(this,m,_)},a.prototype.imul=function(m){return this.clone().mulTo(m,this)},a.prototype.imuln=function(m){r(typeof m=="number"),r(m<67108864);for(var _=0,h=0;h<this.length;h++){var v=(this.words[h]|0)*m,E=(v&67108863)+(_&67108863);_>>=26,_+=v/67108864|0,_+=E>>>26,this.words[h]=E&67108863}return _!==0&&(this.words[h]=_,this.length++),this},a.prototype.muln=function(m){return this.clone().imuln(m)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(m){var _=g(m);if(_.length===0)return new a(1);for(var h=this,v=0;v<_.length&&_[v]===0;v++,h=h.sqr());if(++v<_.length)for(var E=h.sqr();v<_.length;v++,E=E.sqr())_[v]!==0&&(h=h.mul(E));return h},a.prototype.iushln=function(m){r(typeof m=="number"&&m>=0);var _=m%26,h=(m-_)/26,v=67108863>>>26-_<<26-_,E;if(_!==0){var M=0;for(E=0;E<this.length;E++){var P=this.words[E]&v,D=(this.words[E]|0)-P<<_;this.words[E]=D|M,M=P>>>26-_}M&&(this.words[E]=M,this.length++)}if(h!==0){for(E=this.length-1;E>=0;E--)this.words[E+h]=this.words[E];for(E=0;E<h;E++)this.words[E]=0;this.length+=h}return this.strip()},a.prototype.ishln=function(m){return r(this.negative===0),this.iushln(m)},a.prototype.iushrn=function(m,_,h){r(typeof m=="number"&&m>=0);var v;_?v=(_-_%26)/26:v=0;var E=m%26,M=Math.min((m-E)/26,this.length),P=67108863^67108863>>>E<<E,D=h;if(v-=M,v=Math.max(0,v),D){for(var w=0;w<M;w++)D.words[w]=this.words[w];D.length=M}if(M!==0)if(this.length>M)for(this.length-=M,w=0;w<this.length;w++)this.words[w]=this.words[w+M];else this.words[0]=0,this.length=1;var B=0;for(w=this.length-1;w>=0&&(B!==0||w>=v);w--){var x=this.words[w]|0;this.words[w]=B<<26-E|x>>>E,B=x&P}return D&&B!==0&&(D.words[D.length++]=B),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(m,_,h){return r(this.negative===0),this.iushrn(m,_,h)},a.prototype.shln=function(m){return this.clone().ishln(m)},a.prototype.ushln=function(m){return this.clone().iushln(m)},a.prototype.shrn=function(m){return this.clone().ishrn(m)},a.prototype.ushrn=function(m){return this.clone().iushrn(m)},a.prototype.testn=function(m){r(typeof m=="number"&&m>=0);var _=m%26,h=(m-_)/26,v=1<<_;if(this.length<=h)return!1;var E=this.words[h];return!!(E&v)},a.prototype.imaskn=function(m){r(typeof m=="number"&&m>=0);var _=m%26,h=(m-_)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(_!==0&&h++,this.length=Math.min(h,this.length),_!==0){var v=67108863^67108863>>>_<<_;this.words[this.length-1]&=v}return this.strip()},a.prototype.maskn=function(m){return this.clone().imaskn(m)},a.prototype.iaddn=function(m){return r(typeof m=="number"),r(m<67108864),m<0?this.isubn(-m):this.negative!==0?this.length===1&&(this.words[0]|0)<m?(this.words[0]=m-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(m),this.negative=1,this):this._iaddn(m)},a.prototype._iaddn=function(m){this.words[0]+=m;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},a.prototype.isubn=function(m){if(r(typeof m=="number"),r(m<67108864),m<0)return this.iaddn(-m);if(this.negative!==0)return this.negative=0,this.iaddn(m),this.negative=1,this;if(this.words[0]-=m,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this.strip()},a.prototype.addn=function(m){return this.clone().iaddn(m)},a.prototype.subn=function(m){return this.clone().isubn(m)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(m,_,h){var v=m.length+h,E;this._expand(v);var M,P=0;for(E=0;E<m.length;E++){M=(this.words[E+h]|0)+P;var D=(m.words[E]|0)*_;M-=D&67108863,P=(M>>26)-(D/67108864|0),this.words[E+h]=M&67108863}for(;E<this.length-h;E++)M=(this.words[E+h]|0)+P,P=M>>26,this.words[E+h]=M&67108863;if(P===0)return this.strip();for(r(P===-1),P=0,E=0;E<this.length;E++)M=-(this.words[E]|0)+P,P=M>>26,this.words[E]=M&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(m,_){var h=this.length-m.length,v=this.clone(),E=m,M=E.words[E.length-1]|0,P=this._countBits(M);h=26-P,h!==0&&(E=E.ushln(h),v.iushln(h),M=E.words[E.length-1]|0);var D=v.length-E.length,w;if(_!=="mod"){w=new a(null),w.length=D+1,w.words=new Array(w.length);for(var B=0;B<w.length;B++)w.words[B]=0}var x=v.clone()._ishlnsubmul(E,1,D);x.negative===0&&(v=x,w&&(w.words[D]=1));for(var U=D-1;U>=0;U--){var X=(v.words[E.length+U]|0)*67108864+(v.words[E.length+U-1]|0);for(X=Math.min(X/M|0,67108863),v._ishlnsubmul(E,X,U);v.negative!==0;)X--,v.negative=0,v._ishlnsubmul(E,1,U),v.isZero()||(v.negative^=1);w&&(w.words[U]=X)}return w&&w.strip(),v.strip(),_!=="div"&&h!==0&&v.iushrn(h),{div:w||null,mod:v}},a.prototype.divmod=function(m,_,h){if(r(!m.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var v,E,M;return this.negative!==0&&m.negative===0?(M=this.neg().divmod(m,_),_!=="mod"&&(v=M.div.neg()),_!=="div"&&(E=M.mod.neg(),h&&E.negative!==0&&E.iadd(m)),{div:v,mod:E}):this.negative===0&&m.negative!==0?(M=this.divmod(m.neg(),_),_!=="mod"&&(v=M.div.neg()),{div:v,mod:M.mod}):this.negative&m.negative?(M=this.neg().divmod(m.neg(),_),_!=="div"&&(E=M.mod.neg(),h&&E.negative!==0&&E.isub(m)),{div:M.div,mod:E}):m.length>this.length||this.cmp(m)<0?{div:new a(0),mod:this}:m.length===1?_==="div"?{div:this.divn(m.words[0]),mod:null}:_==="mod"?{div:null,mod:new a(this.modn(m.words[0]))}:{div:this.divn(m.words[0]),mod:new a(this.modn(m.words[0]))}:this._wordDiv(m,_)},a.prototype.div=function(m){return this.divmod(m,"div",!1).div},a.prototype.mod=function(m){return this.divmod(m,"mod",!1).mod},a.prototype.umod=function(m){return this.divmod(m,"mod",!0).mod},a.prototype.divRound=function(m){var _=this.divmod(m);if(_.mod.isZero())return _.div;var h=_.div.negative!==0?_.mod.isub(m):_.mod,v=m.ushrn(1),E=m.andln(1),M=h.cmp(v);return M<0||E===1&&M===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},a.prototype.modn=function(m){r(m<=67108863);for(var _=(1<<26)%m,h=0,v=this.length-1;v>=0;v--)h=(_*h+(this.words[v]|0))%m;return h},a.prototype.idivn=function(m){r(m<=67108863);for(var _=0,h=this.length-1;h>=0;h--){var v=(this.words[h]|0)+_*67108864;this.words[h]=v/m|0,_=v%m}return this.strip()},a.prototype.divn=function(m){return this.clone().idivn(m)},a.prototype.egcd=function(m){r(m.negative===0),r(!m.isZero());var _=this,h=m.clone();_.negative!==0?_=_.umod(m):_=_.clone();for(var v=new a(1),E=new a(0),M=new a(0),P=new a(1),D=0;_.isEven()&&h.isEven();)_.iushrn(1),h.iushrn(1),++D;for(var w=h.clone(),B=_.clone();!_.isZero();){for(var x=0,U=1;!(_.words[0]&U)&&x<26;++x,U<<=1);if(x>0)for(_.iushrn(x);x-- >0;)(v.isOdd()||E.isOdd())&&(v.iadd(w),E.isub(B)),v.iushrn(1),E.iushrn(1);for(var X=0,se=1;!(h.words[0]&se)&&X<26;++X,se<<=1);if(X>0)for(h.iushrn(X);X-- >0;)(M.isOdd()||P.isOdd())&&(M.iadd(w),P.isub(B)),M.iushrn(1),P.iushrn(1);_.cmp(h)>=0?(_.isub(h),v.isub(M),E.isub(P)):(h.isub(_),M.isub(v),P.isub(E))}return{a:M,b:P,gcd:h.iushln(D)}},a.prototype._invmp=function(m){r(m.negative===0),r(!m.isZero());var _=this,h=m.clone();_.negative!==0?_=_.umod(m):_=_.clone();for(var v=new a(1),E=new a(0),M=h.clone();_.cmpn(1)>0&&h.cmpn(1)>0;){for(var P=0,D=1;!(_.words[0]&D)&&P<26;++P,D<<=1);if(P>0)for(_.iushrn(P);P-- >0;)v.isOdd()&&v.iadd(M),v.iushrn(1);for(var w=0,B=1;!(h.words[0]&B)&&w<26;++w,B<<=1);if(w>0)for(h.iushrn(w);w-- >0;)E.isOdd()&&E.iadd(M),E.iushrn(1);_.cmp(h)>=0?(_.isub(h),v.isub(E)):(h.isub(_),E.isub(v))}var x;return _.cmpn(1)===0?x=v:x=E,x.cmpn(0)<0&&x.iadd(m),x},a.prototype.gcd=function(m){if(this.isZero())return m.abs();if(m.isZero())return this.abs();var _=this.clone(),h=m.clone();_.negative=0,h.negative=0;for(var v=0;_.isEven()&&h.isEven();v++)_.iushrn(1),h.iushrn(1);do{for(;_.isEven();)_.iushrn(1);for(;h.isEven();)h.iushrn(1);var E=_.cmp(h);if(E<0){var M=_;_=h,h=M}else if(E===0||h.cmpn(1)===0)break;_.isub(h)}while(!0);return h.iushln(v)},a.prototype.invm=function(m){return this.egcd(m).a.umod(m)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(m){return this.words[0]&m},a.prototype.bincn=function(m){r(typeof m=="number");var _=m%26,h=(m-_)/26,v=1<<_;if(this.length<=h)return this._expand(h+1),this.words[h]|=v,this;for(var E=v,M=h;E!==0&&M<this.length;M++){var P=this.words[M]|0;P+=E,E=P>>>26,P&=67108863,this.words[M]=P}return E!==0&&(this.words[M]=E,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(m){var _=m<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;this.strip();var h;if(this.length>1)h=1;else{_&&(m=-m),r(m<=67108863,"Number is too big");var v=this.words[0]|0;h=v===m?0:v<m?-1:1}return this.negative!==0?-h|0:h},a.prototype.cmp=function(m){if(this.negative!==0&&m.negative===0)return-1;if(this.negative===0&&m.negative!==0)return 1;var _=this.ucmp(m);return this.negative!==0?-_|0:_},a.prototype.ucmp=function(m){if(this.length>m.length)return 1;if(this.length<m.length)return-1;for(var _=0,h=this.length-1;h>=0;h--){var v=this.words[h]|0,E=m.words[h]|0;if(v!==E){v<E?_=-1:v>E&&(_=1);break}}return _},a.prototype.gtn=function(m){return this.cmpn(m)===1},a.prototype.gt=function(m){return this.cmp(m)===1},a.prototype.gten=function(m){return this.cmpn(m)>=0},a.prototype.gte=function(m){return this.cmp(m)>=0},a.prototype.ltn=function(m){return this.cmpn(m)===-1},a.prototype.lt=function(m){return this.cmp(m)===-1},a.prototype.lten=function(m){return this.cmpn(m)<=0},a.prototype.lte=function(m){return this.cmp(m)<=0},a.prototype.eqn=function(m){return this.cmpn(m)===0},a.prototype.eq=function(m){return this.cmp(m)===0},a.red=function(m){return new Q(m)},a.prototype.toRed=function(m){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),m.convertTo(this)._forceRed(m)},a.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(m){return this.red=m,this},a.prototype.forceRed=function(m){return r(!this.red,"Already a number in reduction context"),this._forceRed(m)},a.prototype.redAdd=function(m){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,m)},a.prototype.redIAdd=function(m){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,m)},a.prototype.redSub=function(m){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,m)},a.prototype.redISub=function(m){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,m)},a.prototype.redShl=function(m){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,m)},a.prototype.redMul=function(m){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,m),this.red.mul(this,m)},a.prototype.redIMul=function(m){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,m),this.red.imul(this,m)},a.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(m){return r(this.red&&!m.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,m)};var k={k256:null,p224:null,p192:null,p25519:null};function T(N,m){this.name=N,this.p=new a(m,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}T.prototype._tmp=function(){var m=new a(null);return m.words=new Array(Math.ceil(this.n/13)),m},T.prototype.ireduce=function(m){var _=m,h;do this.split(_,this.tmp),_=this.imulK(_),_=_.iadd(this.tmp),h=_.bitLength();while(h>this.n);var v=h<this.n?-1:_.ucmp(this.p);return v===0?(_.words[0]=0,_.length=1):v>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},T.prototype.split=function(m,_){m.iushrn(this.n,0,_)},T.prototype.imulK=function(m){return m.imul(this.k)};function O(){T.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(O,T),O.prototype.split=function(m,_){for(var h=4194303,v=Math.min(m.length,9),E=0;E<v;E++)_.words[E]=m.words[E];if(_.length=v,m.length<=9){m.words[0]=0,m.length=1;return}var M=m.words[9];for(_.words[_.length++]=M&h,E=10;E<m.length;E++){var P=m.words[E]|0;m.words[E-10]=(P&h)<<4|M>>>22,M=P}M>>>=22,m.words[E-10]=M,M===0&&m.length>10?m.length-=10:m.length-=9},O.prototype.imulK=function(m){m.words[m.length]=0,m.words[m.length+1]=0,m.length+=2;for(var _=0,h=0;h<m.length;h++){var v=m.words[h]|0;_+=v*977,m.words[h]=_&67108863,_=v*64+(_/67108864|0)}return m.words[m.length-1]===0&&(m.length--,m.words[m.length-1]===0&&m.length--),m};function $(){T.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s($,T);function K(){T.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(K,T);function ee(){T.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(ee,T),ee.prototype.imulK=function(m){for(var _=0,h=0;h<m.length;h++){var v=(m.words[h]|0)*19+_,E=v&67108863;v>>>=26,m.words[h]=E,_=v}return _!==0&&(m.words[m.length++]=_),m},a._prime=function(m){if(k[m])return k[m];var _;if(m==="k256")_=new O;else if(m==="p224")_=new $;else if(m==="p192")_=new K;else if(m==="p25519")_=new ee;else throw new Error("Unknown prime "+m);return k[m]=_,_};function Q(N){if(typeof N=="string"){var m=a._prime(N);this.m=m.p,this.prime=m}else r(N.gtn(1),"modulus must be greater than 1"),this.m=N,this.prime=null}Q.prototype._verify1=function(m){r(m.negative===0,"red works only with positives"),r(m.red,"red works only with red numbers")},Q.prototype._verify2=function(m,_){r((m.negative|_.negative)===0,"red works only with positives"),r(m.red&&m.red===_.red,"red works only with red numbers")},Q.prototype.imod=function(m){return this.prime?this.prime.ireduce(m)._forceRed(this):m.umod(this.m)._forceRed(this)},Q.prototype.neg=function(m){return m.isZero()?m.clone():this.m.sub(m)._forceRed(this)},Q.prototype.add=function(m,_){this._verify2(m,_);var h=m.add(_);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},Q.prototype.iadd=function(m,_){this._verify2(m,_);var h=m.iadd(_);return h.cmp(this.m)>=0&&h.isub(this.m),h},Q.prototype.sub=function(m,_){this._verify2(m,_);var h=m.sub(_);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},Q.prototype.isub=function(m,_){this._verify2(m,_);var h=m.isub(_);return h.cmpn(0)<0&&h.iadd(this.m),h},Q.prototype.shl=function(m,_){return this._verify1(m),this.imod(m.ushln(_))},Q.prototype.imul=function(m,_){return this._verify2(m,_),this.imod(m.imul(_))},Q.prototype.mul=function(m,_){return this._verify2(m,_),this.imod(m.mul(_))},Q.prototype.isqr=function(m){return this.imul(m,m.clone())},Q.prototype.sqr=function(m){return this.mul(m,m)},Q.prototype.sqrt=function(m){if(m.isZero())return m.clone();var _=this.m.andln(3);if(r(_%2===1),_===3){var h=this.m.add(new a(1)).iushrn(2);return this.pow(m,h)}for(var v=this.m.subn(1),E=0;!v.isZero()&&v.andln(1)===0;)E++,v.iushrn(1);r(!v.isZero());var M=new a(1).toRed(this),P=M.redNeg(),D=this.m.subn(1).iushrn(1),w=this.m.bitLength();for(w=new a(2*w*w).toRed(this);this.pow(w,D).cmp(P)!==0;)w.redIAdd(P);for(var B=this.pow(w,v),x=this.pow(m,v.addn(1).iushrn(1)),U=this.pow(m,v),X=E;U.cmp(M)!==0;){for(var se=U,J=0;se.cmp(M)!==0;J++)se=se.redSqr();r(J<X);var L=this.pow(B,new a(1).iushln(X-J-1));x=x.redMul(L),B=L.redSqr(),U=U.redMul(B),X=J}return x},Q.prototype.invm=function(m){var _=m._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},Q.prototype.pow=function(m,_){if(_.isZero())return new a(1).toRed(this);if(_.cmpn(1)===0)return m.clone();var h=4,v=new Array(1<<h);v[0]=new a(1).toRed(this),v[1]=m;for(var E=2;E<v.length;E++)v[E]=this.mul(v[E-1],m);var M=v[0],P=0,D=0,w=_.bitLength()%26;for(w===0&&(w=26),E=_.length-1;E>=0;E--){for(var B=_.words[E],x=w-1;x>=0;x--){var U=B>>x&1;if(M!==v[0]&&(M=this.sqr(M)),U===0&&P===0){D=0;continue}P<<=1,P|=U,D++,!(D!==h&&(E!==0||x!==0))&&(M=this.mul(M,v[P]),D=0,P=0)}w=26}return M},Q.prototype.convertTo=function(m){var _=m.umod(this.m);return _===m?_.clone():_},Q.prototype.convertFrom=function(m){var _=m.clone();return _.red=null,_},a.mont=function(m){return new te(m)};function te(N){Q.call(this,N),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(te,Q),te.prototype.convertTo=function(m){return this.imod(m.ushln(this.shift))},te.prototype.convertFrom=function(m){var _=this.imod(m.mul(this.rinv));return _.red=null,_},te.prototype.imul=function(m,_){if(m.isZero()||_.isZero())return m.words[0]=0,m.length=1,m;var h=m.imul(_),v=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=h.isub(v).iushrn(this.shift),M=E;return E.cmp(this.m)>=0?M=E.isub(this.m):E.cmpn(0)<0&&(M=E.iadd(this.m)),M._forceRed(this)},te.prototype.mul=function(m,_){if(m.isZero()||_.isZero())return new a(0)._forceRed(this);var h=m.mul(_),v=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=h.isub(v).iushrn(this.shift),M=E;return E.cmp(this.m)>=0?M=E.isub(this.m):E.cmpn(0)<0&&(M=E.iadd(this.m)),M._forceRed(this)},te.prototype.invm=function(m){var _=this.imod(m._invmp(this.m).mul(this.r2));return _._forceRed(this)}})(d,commonjsGlobal)}(bn$1)),bn$1.exports}var brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var d;brorand.exports=function(s){return d||(d=new e(null)),d.generate(s)};function e(r){this.rand=r}if(brorand.exports.Rand=e,e.prototype.generate=function(s){return this._rand(s)},e.prototype._rand=function(s){if(this.rand.getBytes)return this.rand.getBytes(s);for(var a=new Uint8Array(s),n=0;n<a.length;n++)a[n]=this.rand.getByte();return a},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(s){var a=new Uint8Array(s);return self.crypto.getRandomValues(a),a}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(s){var a=new Uint8Array(s);return self.msCrypto.getRandomValues(a),a}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var t=requireCryptoBrowserify();if(typeof t.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(s){return t.randomBytes(s)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var d=requireBn$1(),e=requireBrorand();function t(r){this.rand=r||new e.Rand}return mr=t,t.create=function(s){return new t(s)},t.prototype._randbelow=function(s){var a=s.bitLength(),n=Math.ceil(a/8);do var o=new d(this.rand.generate(n));while(o.cmp(s)>=0);return o},t.prototype._randrange=function(s,a){var n=a.sub(s);return s.add(this._randbelow(n))},t.prototype.test=function(s,a,n){var o=s.bitLength(),p=d.mont(s),c=new d(1).toRed(p);a||(a=Math.max(1,o/48|0));for(var f=s.subn(1),l=0;!f.testn(l);l++);for(var u=s.shrn(l),g=f.toRed(p),y=!0;a>0;a--){var b=this._randrange(new d(2),f);n&&n(b);var I=b.toRed(p).redPow(u);if(!(I.cmp(c)===0||I.cmp(g)===0)){for(var S=1;S<l;S++){if(I=I.redSqr(),I.cmp(c)===0)return!1;if(I.cmp(g)===0)break}if(S===l)return!1}}return y},t.prototype.getDivisor=function(s,a){var n=s.bitLength(),o=d.mont(s),p=new d(1).toRed(o);a||(a=Math.max(1,n/48|0));for(var c=s.subn(1),f=0;!c.testn(f);f++);for(var l=s.shrn(f),u=c.toRed(o);a>0;a--){var g=this._randrange(new d(2),c),y=s.gcd(g);if(y.cmpn(1)!==0)return y;var b=g.toRed(o).redPow(l);if(!(b.cmp(p)===0||b.cmp(u)===0)){for(var I=1;I<f;I++){if(b=b.redSqr(),b.cmp(p)===0)return b.fromRed().subn(1).gcd(s);if(b.cmp(u)===0)break}if(I===f)return b=b.redSqr(),b.fromRed().subn(1).gcd(s)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var d=requireBrowser$b();generatePrime=I,I.simpleSieve=y,I.fermatTest=b;var e=requireBn$1(),t=new e(24),r=requireMr(),s=new r,a=new e(1),n=new e(2),o=new e(5);new e(16),new e(8);var p=new e(10),c=new e(3);new e(7);var f=new e(11),l=new e(4);new e(12);var u=null;function g(){if(u!==null)return u;var S=1048576,A=[];A[0]=2;for(var k=1,T=3;T<S;T+=2){for(var O=Math.ceil(Math.sqrt(T)),$=0;$<k&&A[$]<=O&&T%A[$]!==0;$++);k!==$&&A[$]<=O||(A[k++]=T)}return u=A,A}function y(S){for(var A=g(),k=0;k<A.length;k++)if(S.modn(A[k])===0)return S.cmpn(A[k])===0;return!0}function b(S){var A=e.mont(S);return n.toRed(A).redPow(S.subn(1)).fromRed().cmpn(1)===0}function I(S,A){if(S<16)return A===2||A===5?new e([140,123]):new e([140,39]);A=new e(A);for(var k,T;;){for(k=new e(d(Math.ceil(S/8)));k.bitLength()>S;)k.ishrn(1);if(k.isEven()&&k.iadd(a),k.testn(1)||k.iadd(n),A.cmp(n)){if(!A.cmp(o))for(;k.mod(p).cmp(c);)k.iadd(l)}else for(;k.mod(t).cmp(f);)k.iadd(l);if(T=k.shrn(1),y(T)&&y(k)&&b(T)&&b(k)&&s.test(T)&&s.test(k))return k}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"};var require$$1$1={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18},dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var d=requireBn$1(),e=requireMr(),t=new e,r=new d(24),s=new d(11),a=new d(10),n=new d(3),o=new d(7),p=requireGeneratePrime(),c=requireBrowser$b();dh=y;function f(I,S){return S=S||"utf8",Buffer.isBuffer(I)||(I=new Buffer(I,S)),this._pub=new d(I),this}function l(I,S){return S=S||"utf8",Buffer.isBuffer(I)||(I=new Buffer(I,S)),this._priv=new d(I),this}var u={};function g(I,S){var A=S.toString("hex"),k=[A,I.toString(16)].join("_");if(k in u)return u[k];var T=0;if(I.isEven()||!p.simpleSieve||!p.fermatTest(I)||!t.test(I))return T+=1,A==="02"||A==="05"?T+=8:T+=4,u[k]=T,T;t.test(I.shrn(1))||(T+=2);var O;switch(A){case"02":I.mod(r).cmp(s)&&(T+=8);break;case"05":O=I.mod(a),O.cmp(n)&&O.cmp(o)&&(T+=8);break;default:T+=4}return u[k]=T,T}function y(I,S,A){this.setGenerator(S),this.__prime=new d(I),this._prime=d.mont(this.__prime),this._primeLen=I.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,A?(this.setPublicKey=f,this.setPrivateKey=l):this._primeCode=8}Object.defineProperty(y.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=g(this.__prime,this.__gen)),this._primeCode}}),y.prototype.generateKeys=function(){return this._priv||(this._priv=new d(c(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},y.prototype.computeSecret=function(I){I=new d(I),I=I.toRed(this._prime);var S=I.redPow(this._priv).fromRed(),A=new Buffer(S.toArray()),k=this.getPrime();if(A.length<k.length){var T=new Buffer(k.length-A.length);T.fill(0),A=Buffer.concat([T,A])}return A},y.prototype.getPublicKey=function(S){return b(this._pub,S)},y.prototype.getPrivateKey=function(S){return b(this._priv,S)},y.prototype.getPrime=function(I){return b(this.__prime,I)},y.prototype.getGenerator=function(I){return b(this._gen,I)},y.prototype.setGenerator=function(I,S){return S=S||"utf8",Buffer.isBuffer(I)||(I=new Buffer(I,S)),this.__gen=I,this._gen=new d(I),this};function b(I,S){var A=new Buffer(I.toArray());return S?A.toString(S):A}return dh}var hasRequiredBrowser$4;function requireBrowser$4(){if(hasRequiredBrowser$4)return browser$4;hasRequiredBrowser$4=1;var d=requireGeneratePrime(),e=require$$1$1,t=requireDh();function r(n){var o=new Buffer(e[n].prime,"hex"),p=new Buffer(e[n].gen,"hex");return new t(o,p)}var s={binary:!0,hex:!0,base64:!0};function a(n,o,p,c){return Buffer.isBuffer(o)||s[o]===void 0?a(n,"binary",o,p):(o=o||"binary",c=c||"binary",p=p||new Buffer([2]),Buffer.isBuffer(p)||(p=new Buffer(p,c)),typeof n=="number"?new t(d(n,p),p,!0):(Buffer.isBuffer(n)||(n=new Buffer(n,o)),new t(n,p,!0)))}return browser$4.DiffieHellmanGroup=browser$4.createDiffieHellmanGroup=browser$4.getDiffieHellman=r,browser$4.createDiffieHellman=browser$4.DiffieHellman=a,browser$4}var readableBrowser={exports:{}},processNextickArgs={exports:{}},hasRequiredProcessNextickArgs;function requireProcessNextickArgs(){if(hasRequiredProcessNextickArgs)return processNextickArgs.exports;hasRequiredProcessNextickArgs=1,typeof process$1>"u"||!process$1.version||process$1.version.indexOf("v0.")===0||process$1.version.indexOf("v1.")===0&&process$1.version.indexOf("v1.8.")!==0?processNextickArgs.exports={nextTick:d}:processNextickArgs.exports=process$1;function d(e,t,r,s){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var a=arguments.length,n,o;switch(a){case 0:case 1:return process$1.nextTick(e);case 2:return process$1.nextTick(function(){e.call(null,t)});case 3:return process$1.nextTick(function(){e.call(null,t,r)});case 4:return process$1.nextTick(function(){e.call(null,t,r,s)});default:for(n=new Array(a-1),o=0;o<n.length;)n[o++]=arguments[o];return process$1.nextTick(function(){e.apply(null,n)})}}return processNextickArgs.exports}var isarray,hasRequiredIsarray;function requireIsarray(){if(hasRequiredIsarray)return isarray;hasRequiredIsarray=1;var d={}.toString;return isarray=Array.isArray||function(e){return d.call(e)=="[object Array]"},isarray}var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=requireEvents().EventEmitter),streamBrowser}var safeBuffer={exports:{}},hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(d,e){var t=require$$1$2,r=t.Buffer;function s(n,o){for(var p in n)o[p]=n[p]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?d.exports=t:(s(t,e),e.Buffer=a);function a(n,o,p){return r(n,o,p)}s(r,a),a.from=function(n,o,p){if(typeof n=="number")throw new TypeError("Argument must not be a number");return r(n,o,p)},a.alloc=function(n,o,p){if(typeof n!="number")throw new TypeError("Argument must be a number");var c=r(n);return o!==void 0?typeof p=="string"?c.fill(o,p):c.fill(o):c.fill(0),c},a.allocUnsafe=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return r(n)},a.allocUnsafeSlow=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(n)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var util={},hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1;function d(b){return Array.isArray?Array.isArray(b):y(b)==="[object Array]"}util.isArray=d;function e(b){return typeof b=="boolean"}util.isBoolean=e;function t(b){return b===null}util.isNull=t;function r(b){return b==null}util.isNullOrUndefined=r;function s(b){return typeof b=="number"}util.isNumber=s;function a(b){return typeof b=="string"}util.isString=a;function n(b){return typeof b=="symbol"}util.isSymbol=n;function o(b){return b===void 0}util.isUndefined=o;function p(b){return y(b)==="[object RegExp]"}util.isRegExp=p;function c(b){return typeof b=="object"&&b!==null}util.isObject=c;function f(b){return y(b)==="[object Date]"}util.isDate=f;function l(b){return y(b)==="[object Error]"||b instanceof Error}util.isError=l;function u(b){return typeof b=="function"}util.isFunction=u;function g(b){return b===null||typeof b=="boolean"||typeof b=="number"||typeof b=="string"||typeof b=="symbol"||typeof b>"u"}util.isPrimitive=g,util.isBuffer=require$$1$2.Buffer.isBuffer;function y(b){return Object.prototype.toString.call(b)}return util}var BufferList={exports:{}},hasRequiredBufferList;function requireBufferList(){return hasRequiredBufferList||(hasRequiredBufferList=1,function(d){function e(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}var t=requireSafeBuffer().Buffer,r=requireUtil$1();function s(a,n,o){a.copy(n,o)}d.exports=function(){function a(){e(this,a),this.head=null,this.tail=null,this.length=0}return a.prototype.push=function(o){var p={data:o,next:null};this.length>0?this.tail.next=p:this.head=p,this.tail=p,++this.length},a.prototype.unshift=function(o){var p={data:o,next:this.head};this.length===0&&(this.tail=p),this.head=p,++this.length},a.prototype.shift=function(){if(this.length!==0){var o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}},a.prototype.clear=function(){this.head=this.tail=null,this.length=0},a.prototype.join=function(o){if(this.length===0)return"";for(var p=this.head,c=""+p.data;p=p.next;)c+=o+p.data;return c},a.prototype.concat=function(o){if(this.length===0)return t.alloc(0);for(var p=t.allocUnsafe(o>>>0),c=this.head,f=0;c;)s(c.data,p,f),f+=c.data.length,c=c.next;return p},a}(),r&&r.inspect&&r.inspect.custom&&(d.exports.prototype[r.inspect.custom]=function(){var a=r.inspect({length:this.length});return this.constructor.name+" "+a})}(BufferList)),BufferList.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;var d=requireProcessNextickArgs();function e(s,a){var n=this,o=this._readableState&&this._readableState.destroyed,p=this._writableState&&this._writableState.destroyed;return o||p?(a?a(s):s&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,d.nextTick(r,this,s)):d.nextTick(r,this,s)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(s||null,function(c){!a&&c?n._writableState?n._writableState.errorEmitted||(n._writableState.errorEmitted=!0,d.nextTick(r,n,c)):d.nextTick(r,n,c):a&&a(c)}),this)}function t(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function r(s,a){s.emit("error",a)}return destroy_1={destroy:e,undestroy:t},destroy_1}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1;var d=requireProcessNextickArgs();_stream_writable=b;function e(M){var P=this;this.next=null,this.entry=null,this.finish=function(){E(P,M)}}var t=!process$1.browser&&["v0.10","v0.9."].indexOf(process$1.version.slice(0,5))>-1?setImmediate:d.nextTick,r;b.WritableState=g;var s=Object.create(requireUtil());s.inherits=requireInherits_browser();var a={deprecate:requireBrowser$a()},n=requireStreamBrowser(),o=requireSafeBuffer().Buffer,p=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function c(M){return o.from(M)}function f(M){return o.isBuffer(M)||M instanceof p}var l=requireDestroy();s.inherits(b,n);function u(){}function g(M,P){r=r||require_stream_duplex(),M=M||{};var D=P instanceof r;this.objectMode=!!M.objectMode,D&&(this.objectMode=this.objectMode||!!M.writableObjectMode);var w=M.highWaterMark,B=M.writableHighWaterMark,x=this.objectMode?16:16*1024;w||w===0?this.highWaterMark=w:D&&(B||B===0)?this.highWaterMark=B:this.highWaterMark=x,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var U=M.decodeStrings===!1;this.decodeStrings=!U,this.defaultEncoding=M.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(X){K(P,X)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}g.prototype.getBuffer=function(){for(var P=this.bufferedRequest,D=[];P;)D.push(P),P=P.next;return D},function(){try{Object.defineProperty(g.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var y;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(M){return y.call(this,M)?!0:this!==b?!1:M&&M._writableState instanceof g}})):y=function(M){return M instanceof this};function b(M){if(r=r||require_stream_duplex(),!y.call(b,this)&&!(this instanceof r))return new b(M);this._writableState=new g(M,this),this.writable=!0,M&&(typeof M.write=="function"&&(this._write=M.write),typeof M.writev=="function"&&(this._writev=M.writev),typeof M.destroy=="function"&&(this._destroy=M.destroy),typeof M.final=="function"&&(this._final=M.final)),n.call(this)}b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function I(M,P){var D=new Error("write after end");M.emit("error",D),d.nextTick(P,D)}function S(M,P,D,w){var B=!0,x=!1;return D===null?x=new TypeError("May not write null values to stream"):typeof D!="string"&&D!==void 0&&!P.objectMode&&(x=new TypeError("Invalid non-string/buffer chunk")),x&&(M.emit("error",x),d.nextTick(w,x),B=!1),B}b.prototype.write=function(M,P,D){var w=this._writableState,B=!1,x=!w.objectMode&&f(M);return x&&!o.isBuffer(M)&&(M=c(M)),typeof P=="function"&&(D=P,P=null),x?P="buffer":P||(P=w.defaultEncoding),typeof D!="function"&&(D=u),w.ended?I(this,D):(x||S(this,w,M,D))&&(w.pendingcb++,B=k(this,w,x,M,P,D)),B},b.prototype.cork=function(){var M=this._writableState;M.corked++},b.prototype.uncork=function(){var M=this._writableState;M.corked&&(M.corked--,!M.writing&&!M.corked&&!M.bufferProcessing&&M.bufferedRequest&&te(this,M))},b.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+P);return this._writableState.defaultEncoding=P,this};function A(M,P,D){return!M.objectMode&&M.decodeStrings!==!1&&typeof P=="string"&&(P=o.from(P,D)),P}Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function k(M,P,D,w,B,x){if(!D){var U=A(P,w,B);w!==U&&(D=!0,B="buffer",w=U)}var X=P.objectMode?1:w.length;P.length+=X;var se=P.length<P.highWaterMark;if(se||(P.needDrain=!0),P.writing||P.corked){var J=P.lastBufferedRequest;P.lastBufferedRequest={chunk:w,encoding:B,isBuf:D,callback:x,next:null},J?J.next=P.lastBufferedRequest:P.bufferedRequest=P.lastBufferedRequest,P.bufferedRequestCount+=1}else T(M,P,!1,X,w,B,x);return se}function T(M,P,D,w,B,x,U){P.writelen=w,P.writecb=U,P.writing=!0,P.sync=!0,D?M._writev(B,P.onwrite):M._write(B,x,P.onwrite),P.sync=!1}function O(M,P,D,w,B){--P.pendingcb,D?(d.nextTick(B,w),d.nextTick(h,M,P),M._writableState.errorEmitted=!0,M.emit("error",w)):(B(w),M._writableState.errorEmitted=!0,M.emit("error",w),h(M,P))}function $(M){M.writing=!1,M.writecb=null,M.length-=M.writelen,M.writelen=0}function K(M,P){var D=M._writableState,w=D.sync,B=D.writecb;if($(D),P)O(M,D,w,P,B);else{var x=N(D);!x&&!D.corked&&!D.bufferProcessing&&D.bufferedRequest&&te(M,D),w?t(ee,M,D,x,B):ee(M,D,x,B)}}function ee(M,P,D,w){D||Q(M,P),P.pendingcb--,w(),h(M,P)}function Q(M,P){P.length===0&&P.needDrain&&(P.needDrain=!1,M.emit("drain"))}function te(M,P){P.bufferProcessing=!0;var D=P.bufferedRequest;if(M._writev&&D&&D.next){var w=P.bufferedRequestCount,B=new Array(w),x=P.corkedRequestsFree;x.entry=D;for(var U=0,X=!0;D;)B[U]=D,D.isBuf||(X=!1),D=D.next,U+=1;B.allBuffers=X,T(M,P,!0,P.length,B,"",x.finish),P.pendingcb++,P.lastBufferedRequest=null,x.next?(P.corkedRequestsFree=x.next,x.next=null):P.corkedRequestsFree=new e(P),P.bufferedRequestCount=0}else{for(;D;){var se=D.chunk,J=D.encoding,L=D.callback,G=P.objectMode?1:se.length;if(T(M,P,!1,G,se,J,L),D=D.next,P.bufferedRequestCount--,P.writing)break}D===null&&(P.lastBufferedRequest=null)}P.bufferedRequest=D,P.bufferProcessing=!1}b.prototype._write=function(M,P,D){D(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(M,P,D){var w=this._writableState;typeof M=="function"?(D=M,M=null,P=null):typeof P=="function"&&(D=P,P=null),M!=null&&this.write(M,P),w.corked&&(w.corked=1,this.uncork()),w.ending||v(this,w,D)};function N(M){return M.ending&&M.length===0&&M.bufferedRequest===null&&!M.finished&&!M.writing}function m(M,P){M._final(function(D){P.pendingcb--,D&&M.emit("error",D),P.prefinished=!0,M.emit("prefinish"),h(M,P)})}function _(M,P){!P.prefinished&&!P.finalCalled&&(typeof M._final=="function"?(P.pendingcb++,P.finalCalled=!0,d.nextTick(m,M,P)):(P.prefinished=!0,M.emit("prefinish")))}function h(M,P){var D=N(P);return D&&(_(M,P),P.pendingcb===0&&(P.finished=!0,M.emit("finish"))),D}function v(M,P,D){P.ending=!0,h(M,P),D&&(P.finished?d.nextTick(D):M.once("finish",D)),P.ended=!0,M.writable=!1}function E(M,P,D){var w=M.entry;for(M.entry=null;w;){var B=w.callback;P.pendingcb--,B(D),w=w.next}P.corkedRequestsFree.next=M}return Object.defineProperty(b.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(M){this._writableState&&(this._writableState.destroyed=M)}}),b.prototype.destroy=l.destroy,b.prototype._undestroy=l.undestroy,b.prototype._destroy=function(M,P){this.end(),P(M)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var d=requireProcessNextickArgs(),e=Object.keys||function(l){var u=[];for(var g in l)u.push(g);return u};_stream_duplex=p;var t=Object.create(requireUtil());t.inherits=requireInherits_browser();var r=require_stream_readable(),s=require_stream_writable();t.inherits(p,r);for(var a=e(s.prototype),n=0;n<a.length;n++){var o=a[n];p.prototype[o]||(p.prototype[o]=s.prototype[o])}function p(l){if(!(this instanceof p))return new p(l);r.call(this,l),s.call(this,l),l&&l.readable===!1&&(this.readable=!1),l&&l.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,l&&l.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",c)}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function c(){this.allowHalfOpen||this._writableState.ended||d.nextTick(f,this)}function f(l){l.end()}return Object.defineProperty(p.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(l){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=l,this._writableState.destroyed=l)}}),p.prototype._destroy=function(l,u){this.push(null),this.end(),d.nextTick(u,l)},_stream_duplex}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1;var d=requireProcessNextickArgs();_stream_readable=A;var e=requireIsarray(),t;A.ReadableState=S,requireEvents().EventEmitter;var r=function(L,G){return L.listeners(G).length},s=requireStreamBrowser(),a=requireSafeBuffer().Buffer,n=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(L){return a.from(L)}function p(L){return a.isBuffer(L)||L instanceof n}var c=Object.create(requireUtil());c.inherits=requireInherits_browser();var f=requireUtil$1(),l=void 0;f&&f.debuglog?l=f.debuglog("stream"):l=function(){};var u=requireBufferList(),g=requireDestroy(),y;c.inherits(A,s);var b=["error","close","destroy","pause","resume"];function I(L,G,re){if(typeof L.prependListener=="function")return L.prependListener(G,re);!L._events||!L._events[G]?L.on(G,re):e(L._events[G])?L._events[G].unshift(re):L._events[G]=[re,L._events[G]]}function S(L,G){t=t||require_stream_duplex(),L=L||{};var re=G instanceof t;this.objectMode=!!L.objectMode,re&&(this.objectMode=this.objectMode||!!L.readableObjectMode);var fe=L.highWaterMark,z=L.readableHighWaterMark,H=this.objectMode?16:16*1024;fe||fe===0?this.highWaterMark=fe:re&&(z||z===0)?this.highWaterMark=z:this.highWaterMark=H,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=L.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,L.encoding&&(y||(y=requireString_decoder().StringDecoder),this.decoder=new y(L.encoding),this.encoding=L.encoding)}function A(L){if(t=t||require_stream_duplex(),!(this instanceof A))return new A(L);this._readableState=new S(L,this),this.readable=!0,L&&(typeof L.read=="function"&&(this._read=L.read),typeof L.destroy=="function"&&(this._destroy=L.destroy)),s.call(this)}Object.defineProperty(A.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(L){this._readableState&&(this._readableState.destroyed=L)}}),A.prototype.destroy=g.destroy,A.prototype._undestroy=g.undestroy,A.prototype._destroy=function(L,G){this.push(null),G(L)},A.prototype.push=function(L,G){var re=this._readableState,fe;return re.objectMode?fe=!0:typeof L=="string"&&(G=G||re.defaultEncoding,G!==re.encoding&&(L=a.from(L,G),G=""),fe=!0),k(this,L,G,!1,fe)},A.prototype.unshift=function(L){return k(this,L,null,!0,!1)};function k(L,G,re,fe,z){var H=L._readableState;if(G===null)H.reading=!1,te(L,H);else{var de;z||(de=O(H,G)),de?L.emit("error",de):H.objectMode||G&&G.length>0?(typeof G!="string"&&!H.objectMode&&Object.getPrototypeOf(G)!==a.prototype&&(G=o(G)),fe?H.endEmitted?L.emit("error",new Error("stream.unshift() after end event")):T(L,H,G,!0):H.ended?L.emit("error",new Error("stream.push() after EOF")):(H.reading=!1,H.decoder&&!re?(G=H.decoder.write(G),H.objectMode||G.length!==0?T(L,H,G,!1):_(L,H)):T(L,H,G,!1))):fe||(H.reading=!1)}return $(H)}function T(L,G,re,fe){G.flowing&&G.length===0&&!G.sync?(L.emit("data",re),L.read(0)):(G.length+=G.objectMode?1:re.length,fe?G.buffer.unshift(re):G.buffer.push(re),G.needReadable&&N(L)),_(L,G)}function O(L,G){var re;return!p(G)&&typeof G!="string"&&G!==void 0&&!L.objectMode&&(re=new TypeError("Invalid non-string/buffer chunk")),re}function $(L){return!L.ended&&(L.needReadable||L.length<L.highWaterMark||L.length===0)}A.prototype.isPaused=function(){return this._readableState.flowing===!1},A.prototype.setEncoding=function(L){return y||(y=requireString_decoder().StringDecoder),this._readableState.decoder=new y(L),this._readableState.encoding=L,this};var K=8388608;function ee(L){return L>=K?L=K:(L--,L|=L>>>1,L|=L>>>2,L|=L>>>4,L|=L>>>8,L|=L>>>16,L++),L}function Q(L,G){return L<=0||G.length===0&&G.ended?0:G.objectMode?1:L!==L?G.flowing&&G.length?G.buffer.head.data.length:G.length:(L>G.highWaterMark&&(G.highWaterMark=ee(L)),L<=G.length?L:G.ended?G.length:(G.needReadable=!0,0))}A.prototype.read=function(L){l("read",L),L=parseInt(L,10);var G=this._readableState,re=L;if(L!==0&&(G.emittedReadable=!1),L===0&&G.needReadable&&(G.length>=G.highWaterMark||G.ended))return l("read: emitReadable",G.length,G.ended),G.length===0&&G.ended?X(this):N(this),null;if(L=Q(L,G),L===0&&G.ended)return G.length===0&&X(this),null;var fe=G.needReadable;l("need readable",fe),(G.length===0||G.length-L<G.highWaterMark)&&(fe=!0,l("length less than watermark",fe)),G.ended||G.reading?(fe=!1,l("reading or ended",fe)):fe&&(l("do read"),G.reading=!0,G.sync=!0,G.length===0&&(G.needReadable=!0),this._read(G.highWaterMark),G.sync=!1,G.reading||(L=Q(re,G)));var z;return L>0?z=w(L,G):z=null,z===null?(G.needReadable=!0,L=0):G.length-=L,G.length===0&&(G.ended||(G.needReadable=!0),re!==L&&G.ended&&X(this)),z!==null&&this.emit("data",z),z};function te(L,G){if(!G.ended){if(G.decoder){var re=G.decoder.end();re&&re.length&&(G.buffer.push(re),G.length+=G.objectMode?1:re.length)}G.ended=!0,N(L)}}function N(L){var G=L._readableState;G.needReadable=!1,G.emittedReadable||(l("emitReadable",G.flowing),G.emittedReadable=!0,G.sync?d.nextTick(m,L):m(L))}function m(L){l("emit readable"),L.emit("readable"),D(L)}function _(L,G){G.readingMore||(G.readingMore=!0,d.nextTick(h,L,G))}function h(L,G){for(var re=G.length;!G.reading&&!G.flowing&&!G.ended&&G.length<G.highWaterMark&&(l("maybeReadMore read 0"),L.read(0),re!==G.length);)re=G.length;G.readingMore=!1}A.prototype._read=function(L){this.emit("error",new Error("_read() is not implemented"))},A.prototype.pipe=function(L,G){var re=this,fe=this._readableState;switch(fe.pipesCount){case 0:fe.pipes=L;break;case 1:fe.pipes=[fe.pipes,L];break;default:fe.pipes.push(L);break}fe.pipesCount+=1,l("pipe count=%d opts=%j",fe.pipesCount,G);var z=(!G||G.end!==!1)&&L!==process$1.stdout&&L!==process$1.stderr,H=z?me:Ke;fe.endEmitted?d.nextTick(H):re.once("end",H),L.on("unpipe",de);function de(be,Le){l("onunpipe"),be===re&&Le&&Le.hasUnpiped===!1&&(Le.hasUnpiped=!0,ke())}function me(){l("onend"),L.end()}var we=v(re);L.on("drain",we);var Pe=!1;function ke(){l("cleanup"),L.removeListener("close",Be),L.removeListener("finish",He),L.removeListener("drain",we),L.removeListener("error",Ge),L.removeListener("unpipe",de),re.removeListener("end",me),re.removeListener("end",Ke),re.removeListener("data",he),Pe=!0,fe.awaitDrain&&(!L._writableState||L._writableState.needDrain)&&we()}var Ue=!1;re.on("data",he);function he(be){l("ondata"),Ue=!1;var Le=L.write(be);Le===!1&&!Ue&&((fe.pipesCount===1&&fe.pipes===L||fe.pipesCount>1&&J(fe.pipes,L)!==-1)&&!Pe&&(l("false write response, pause",fe.awaitDrain),fe.awaitDrain++,Ue=!0),re.pause())}function Ge(be){l("onerror",be),Ke(),L.removeListener("error",Ge),r(L,"error")===0&&L.emit("error",be)}I(L,"error",Ge);function Be(){L.removeListener("finish",He),Ke()}L.once("close",Be);function He(){l("onfinish"),L.removeListener("close",Be),Ke()}L.once("finish",He);function Ke(){l("unpipe"),re.unpipe(L)}return L.emit("pipe",re),fe.flowing||(l("pipe resume"),re.resume()),L};function v(L){return function(){var G=L._readableState;l("pipeOnDrain",G.awaitDrain),G.awaitDrain&&G.awaitDrain--,G.awaitDrain===0&&r(L,"data")&&(G.flowing=!0,D(L))}}A.prototype.unpipe=function(L){var G=this._readableState,re={hasUnpiped:!1};if(G.pipesCount===0)return this;if(G.pipesCount===1)return L&&L!==G.pipes?this:(L||(L=G.pipes),G.pipes=null,G.pipesCount=0,G.flowing=!1,L&&L.emit("unpipe",this,re),this);if(!L){var fe=G.pipes,z=G.pipesCount;G.pipes=null,G.pipesCount=0,G.flowing=!1;for(var H=0;H<z;H++)fe[H].emit("unpipe",this,{hasUnpiped:!1});return this}var de=J(G.pipes,L);return de===-1?this:(G.pipes.splice(de,1),G.pipesCount-=1,G.pipesCount===1&&(G.pipes=G.pipes[0]),L.emit("unpipe",this,re),this)},A.prototype.on=function(L,G){var re=s.prototype.on.call(this,L,G);if(L==="data")this._readableState.flowing!==!1&&this.resume();else if(L==="readable"){var fe=this._readableState;!fe.endEmitted&&!fe.readableListening&&(fe.readableListening=fe.needReadable=!0,fe.emittedReadable=!1,fe.reading?fe.length&&N(this):d.nextTick(E,this))}return re},A.prototype.addListener=A.prototype.on;function E(L){l("readable nexttick read 0"),L.read(0)}A.prototype.resume=function(){var L=this._readableState;return L.flowing||(l("resume"),L.flowing=!0,M(this,L)),this};function M(L,G){G.resumeScheduled||(G.resumeScheduled=!0,d.nextTick(P,L,G))}function P(L,G){G.reading||(l("resume read 0"),L.read(0)),G.resumeScheduled=!1,G.awaitDrain=0,L.emit("resume"),D(L),G.flowing&&!G.reading&&L.read(0)}A.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function D(L){var G=L._readableState;for(l("flow",G.flowing);G.flowing&&L.read()!==null;);}A.prototype.wrap=function(L){var G=this,re=this._readableState,fe=!1;L.on("end",function(){if(l("wrapped end"),re.decoder&&!re.ended){var de=re.decoder.end();de&&de.length&&G.push(de)}G.push(null)}),L.on("data",function(de){if(l("wrapped data"),re.decoder&&(de=re.decoder.write(de)),!(re.objectMode&&de==null)&&!(!re.objectMode&&(!de||!de.length))){var me=G.push(de);me||(fe=!0,L.pause())}});for(var z in L)this[z]===void 0&&typeof L[z]=="function"&&(this[z]=function(de){return function(){return L[de].apply(L,arguments)}}(z));for(var H=0;H<b.length;H++)L.on(b[H],this.emit.bind(this,b[H]));return this._read=function(de){l("wrapped _read",de),fe&&(fe=!1,L.resume())},this},Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),A._fromList=w;function w(L,G){if(G.length===0)return null;var re;return G.objectMode?re=G.buffer.shift():!L||L>=G.length?(G.decoder?re=G.buffer.join(""):G.buffer.length===1?re=G.buffer.head.data:re=G.buffer.concat(G.length),G.buffer.clear()):re=B(L,G.buffer,G.decoder),re}function B(L,G,re){var fe;return L<G.head.data.length?(fe=G.head.data.slice(0,L),G.head.data=G.head.data.slice(L)):L===G.head.data.length?fe=G.shift():fe=re?x(L,G):U(L,G),fe}function x(L,G){var re=G.head,fe=1,z=re.data;for(L-=z.length;re=re.next;){var H=re.data,de=L>H.length?H.length:L;if(de===H.length?z+=H:z+=H.slice(0,L),L-=de,L===0){de===H.length?(++fe,re.next?G.head=re.next:G.head=G.tail=null):(G.head=re,re.data=H.slice(de));break}++fe}return G.length-=fe,z}function U(L,G){var re=a.allocUnsafe(L),fe=G.head,z=1;for(fe.data.copy(re),L-=fe.data.length;fe=fe.next;){var H=fe.data,de=L>H.length?H.length:L;if(H.copy(re,re.length-L,0,de),L-=de,L===0){de===H.length?(++z,fe.next?G.head=fe.next:G.head=G.tail=null):(G.head=fe,fe.data=H.slice(de));break}++z}return G.length-=z,re}function X(L){var G=L._readableState;if(G.length>0)throw new Error('"endReadable()" called on non-empty stream');G.endEmitted||(G.ended=!0,d.nextTick(se,G,L))}function se(L,G){!L.endEmitted&&L.length===0&&(L.endEmitted=!0,G.readable=!1,G.emit("end"))}function J(L,G){for(var re=0,fe=L.length;re<fe;re++)if(L[re]===G)return re;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=r;var d=require_stream_duplex(),e=Object.create(requireUtil());e.inherits=requireInherits_browser(),e.inherits(r,d);function t(n,o){var p=this._transformState;p.transforming=!1;var c=p.writecb;if(!c)return this.emit("error",new Error("write callback called multiple times"));p.writechunk=null,p.writecb=null,o!=null&&this.push(o),c(n);var f=this._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}function r(n){if(!(this instanceof r))return new r(n);d.call(this,n),this._transformState={afterTransform:t.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.on("prefinish",s)}function s(){var n=this;typeof this._flush=="function"?this._flush(function(o,p){a(n,o,p)}):a(this,null,null)}r.prototype.push=function(n,o){return this._transformState.needTransform=!1,d.prototype.push.call(this,n,o)},r.prototype._transform=function(n,o,p){throw new Error("_transform() is not implemented")},r.prototype._write=function(n,o,p){var c=this._transformState;if(c.writecb=p,c.writechunk=n,c.writeencoding=o,!c.transforming){var f=this._readableState;(c.needTransform||f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}},r.prototype._read=function(n){var o=this._transformState;o.writechunk!==null&&o.writecb&&!o.transforming?(o.transforming=!0,this._transform(o.writechunk,o.writeencoding,o.afterTransform)):o.needTransform=!0},r.prototype._destroy=function(n,o){var p=this;d.prototype._destroy.call(this,n,function(c){o(c),p.emit("close")})};function a(n,o,p){if(o)return n.emit("error",o);if(p!=null&&n.push(p),n._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(n._transformState.transforming)throw new Error("Calling transform done when still transforming");return n.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=t;var d=require_stream_transform(),e=Object.create(requireUtil());e.inherits=requireInherits_browser(),e.inherits(t,d);function t(r){if(!(this instanceof t))return new t(r);d.call(this,r)}return t.prototype._transform=function(r,s,a){a(null,r)},_stream_passthrough}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,function(d,e){e=d.exports=require_stream_readable(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable(),e.Duplex=require_stream_duplex(),e.Transform=require_stream_transform(),e.PassThrough=require_stream_passthrough()}(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var sign={exports:{}},bn={exports:{}};bn.exports;var hasRequiredBn;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,function(d){(function(e,t){function r(_,h){if(!_)throw new Error(h||"Assertion failed")}function s(_,h){_.super_=h;var v=function(){};v.prototype=h.prototype,_.prototype=new v,_.prototype.constructor=_}function a(_,h,v){if(a.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,_!==null&&((h==="le"||h==="be")&&(v=h,h=10),this._init(_||0,h||10,v||"be"))}typeof e=="object"?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;var n;try{typeof window<"u"&&typeof window.Buffer<"u"?n=window.Buffer:n=require$$1$2.Buffer}catch{}a.isBN=function(h){return h instanceof a?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===a.wordSize&&Array.isArray(h.words)},a.max=function(h,v){return h.cmp(v)>0?h:v},a.min=function(h,v){return h.cmp(v)<0?h:v},a.prototype._init=function(h,v,E){if(typeof h=="number")return this._initNumber(h,v,E);if(typeof h=="object")return this._initArray(h,v,E);v==="hex"&&(v=16),r(v===(v|0)&&v>=2&&v<=36),h=h.toString().replace(/\s+/g,"");var M=0;h[0]==="-"&&(M++,this.negative=1),M<h.length&&(v===16?this._parseHex(h,M,E):(this._parseBase(h,v,M),E==="le"&&this._initArray(this.toArray(),v,E)))},a.prototype._initNumber=function(h,v,E){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(r(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),E==="le"&&this._initArray(this.toArray(),v,E)},a.prototype._initArray=function(h,v,E){if(r(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var P,D,w=0;if(E==="be")for(M=h.length-1,P=0;M>=0;M-=3)D=h[M]|h[M-1]<<8|h[M-2]<<16,this.words[P]|=D<<w&67108863,this.words[P+1]=D>>>26-w&67108863,w+=24,w>=26&&(w-=26,P++);else if(E==="le")for(M=0,P=0;M<h.length;M+=3)D=h[M]|h[M+1]<<8|h[M+2]<<16,this.words[P]|=D<<w&67108863,this.words[P+1]=D>>>26-w&67108863,w+=24,w>=26&&(w-=26,P++);return this._strip()};function o(_,h){var v=_.charCodeAt(h);if(v>=48&&v<=57)return v-48;if(v>=65&&v<=70)return v-55;if(v>=97&&v<=102)return v-87;r(!1,"Invalid character in "+_)}function p(_,h,v){var E=o(_,v);return v-1>=h&&(E|=o(_,v-1)<<4),E}a.prototype._parseHex=function(h,v,E){this.length=Math.ceil((h.length-v)/6),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var P=0,D=0,w;if(E==="be")for(M=h.length-1;M>=v;M-=2)w=p(h,v,M)<<P,this.words[D]|=w&67108863,P>=18?(P-=18,D+=1,this.words[D]|=w>>>26):P+=8;else{var B=h.length-v;for(M=B%2===0?v+1:v;M<h.length;M+=2)w=p(h,v,M)<<P,this.words[D]|=w&67108863,P>=18?(P-=18,D+=1,this.words[D]|=w>>>26):P+=8}this._strip()};function c(_,h,v,E){for(var M=0,P=0,D=Math.min(_.length,v),w=h;w<D;w++){var B=_.charCodeAt(w)-48;M*=E,B>=49?P=B-49+10:B>=17?P=B-17+10:P=B,r(B>=0&&P<E,"Invalid character"),M+=P}return M}a.prototype._parseBase=function(h,v,E){this.words=[0],this.length=1;for(var M=0,P=1;P<=67108863;P*=v)M++;M--,P=P/v|0;for(var D=h.length-E,w=D%M,B=Math.min(D,D-w)+E,x=0,U=E;U<B;U+=M)x=c(h,U,U+M,v),this.imuln(P),this.words[0]+x<67108864?this.words[0]+=x:this._iaddn(x);if(w!==0){var X=1;for(x=c(h,U,h.length,v),U=0;U<w;U++)X*=v;this.imuln(X),this.words[0]+x<67108864?this.words[0]+=x:this._iaddn(x)}this._strip()},a.prototype.copy=function(h){h.words=new Array(this.length);for(var v=0;v<this.length;v++)h.words[v]=this.words[v];h.length=this.length,h.negative=this.negative,h.red=this.red};function f(_,h){_.words=h.words,_.length=h.length,_.negative=h.negative,_.red=h.red}if(a.prototype._move=function(h){f(h,this)},a.prototype.clone=function(){var h=new a(null);return this.copy(h),h},a.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch{a.prototype.inspect=l}else a.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(h,v){h=h||10,v=v|0||1;var E;if(h===16||h==="hex"){E="";for(var M=0,P=0,D=0;D<this.length;D++){var w=this.words[D],B=((w<<M|P)&16777215).toString(16);P=w>>>24-M&16777215,M+=2,M>=26&&(M-=26,D--),P!==0||D!==this.length-1?E=u[6-B.length]+B+E:E=B+E}for(P!==0&&(E=P.toString(16)+E);E.length%v!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}if(h===(h|0)&&h>=2&&h<=36){var x=g[h],U=y[h];E="";var X=this.clone();for(X.negative=0;!X.isZero();){var se=X.modrn(U).toString(h);X=X.idivn(U),X.isZero()?E=se+E:E=u[x-se.length]+se+E}for(this.isZero()&&(E="0"+E);E.length%v!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}r(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},a.prototype.toJSON=function(){return this.toString(16,2)},n&&(a.prototype.toBuffer=function(h,v){return this.toArrayLike(n,h,v)}),a.prototype.toArray=function(h,v){return this.toArrayLike(Array,h,v)};var b=function(h,v){return h.allocUnsafe?h.allocUnsafe(v):new h(v)};a.prototype.toArrayLike=function(h,v,E){this._strip();var M=this.byteLength(),P=E||Math.max(1,M);r(M<=P,"byte array longer than desired length"),r(P>0,"Requested array length <= 0");var D=b(h,P),w=v==="le"?"LE":"BE";return this["_toArrayLike"+w](D,M),D},a.prototype._toArrayLikeLE=function(h,v){for(var E=0,M=0,P=0,D=0;P<this.length;P++){var w=this.words[P]<<D|M;h[E++]=w&255,E<h.length&&(h[E++]=w>>8&255),E<h.length&&(h[E++]=w>>16&255),D===6?(E<h.length&&(h[E++]=w>>24&255),M=0,D=0):(M=w>>>24,D+=2)}if(E<h.length)for(h[E++]=M;E<h.length;)h[E++]=0},a.prototype._toArrayLikeBE=function(h,v){for(var E=h.length-1,M=0,P=0,D=0;P<this.length;P++){var w=this.words[P]<<D|M;h[E--]=w&255,E>=0&&(h[E--]=w>>8&255),E>=0&&(h[E--]=w>>16&255),D===6?(E>=0&&(h[E--]=w>>24&255),M=0,D=0):(M=w>>>24,D+=2)}if(E>=0)for(h[E--]=M;E>=0;)h[E--]=0},Math.clz32?a.prototype._countBits=function(h){return 32-Math.clz32(h)}:a.prototype._countBits=function(h){var v=h,E=0;return v>=4096&&(E+=13,v>>>=13),v>=64&&(E+=7,v>>>=7),v>=8&&(E+=4,v>>>=4),v>=2&&(E+=2,v>>>=2),E+v},a.prototype._zeroBits=function(h){if(h===0)return 26;var v=h,E=0;return v&8191||(E+=13,v>>>=13),v&127||(E+=7,v>>>=7),v&15||(E+=4,v>>>=4),v&3||(E+=2,v>>>=2),v&1||E++,E},a.prototype.bitLength=function(){var h=this.words[this.length-1],v=this._countBits(h);return(this.length-1)*26+v};function I(_){for(var h=new Array(_.bitLength()),v=0;v<h.length;v++){var E=v/26|0,M=v%26;h[v]=_.words[E]>>>M&1}return h}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,v=0;v<this.length;v++){var E=this._zeroBits(this.words[v]);if(h+=E,E!==26)break}return h},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},a.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var v=0;v<h.length;v++)this.words[v]=this.words[v]|h.words[v];return this._strip()},a.prototype.ior=function(h){return r((this.negative|h.negative)===0),this.iuor(h)},a.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},a.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},a.prototype.iuand=function(h){var v;this.length>h.length?v=h:v=this;for(var E=0;E<v.length;E++)this.words[E]=this.words[E]&h.words[E];return this.length=v.length,this._strip()},a.prototype.iand=function(h){return r((this.negative|h.negative)===0),this.iuand(h)},a.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},a.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},a.prototype.iuxor=function(h){var v,E;this.length>h.length?(v=this,E=h):(v=h,E=this);for(var M=0;M<E.length;M++)this.words[M]=v.words[M]^E.words[M];if(this!==v)for(;M<v.length;M++)this.words[M]=v.words[M];return this.length=v.length,this._strip()},a.prototype.ixor=function(h){return r((this.negative|h.negative)===0),this.iuxor(h)},a.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},a.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},a.prototype.inotn=function(h){r(typeof h=="number"&&h>=0);var v=Math.ceil(h/26)|0,E=h%26;this._expand(v),E>0&&v--;for(var M=0;M<v;M++)this.words[M]=~this.words[M]&67108863;return E>0&&(this.words[M]=~this.words[M]&67108863>>26-E),this._strip()},a.prototype.notn=function(h){return this.clone().inotn(h)},a.prototype.setn=function(h,v){r(typeof h=="number"&&h>=0);var E=h/26|0,M=h%26;return this._expand(E+1),v?this.words[E]=this.words[E]|1<<M:this.words[E]=this.words[E]&~(1<<M),this._strip()},a.prototype.iadd=function(h){var v;if(this.negative!==0&&h.negative===0)return this.negative=0,v=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,v=this.isub(h),h.negative=1,v._normSign();var E,M;this.length>h.length?(E=this,M=h):(E=h,M=this);for(var P=0,D=0;D<M.length;D++)v=(E.words[D]|0)+(M.words[D]|0)+P,this.words[D]=v&67108863,P=v>>>26;for(;P!==0&&D<E.length;D++)v=(E.words[D]|0)+P,this.words[D]=v&67108863,P=v>>>26;if(this.length=E.length,P!==0)this.words[this.length]=P,this.length++;else if(E!==this)for(;D<E.length;D++)this.words[D]=E.words[D];return this},a.prototype.add=function(h){var v;return h.negative!==0&&this.negative===0?(h.negative=0,v=this.sub(h),h.negative^=1,v):h.negative===0&&this.negative!==0?(this.negative=0,v=h.sub(this),this.negative=1,v):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},a.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var v=this.iadd(h);return h.negative=1,v._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var E=this.cmp(h);if(E===0)return this.negative=0,this.length=1,this.words[0]=0,this;var M,P;E>0?(M=this,P=h):(M=h,P=this);for(var D=0,w=0;w<P.length;w++)v=(M.words[w]|0)-(P.words[w]|0)+D,D=v>>26,this.words[w]=v&67108863;for(;D!==0&&w<M.length;w++)v=(M.words[w]|0)+D,D=v>>26,this.words[w]=v&67108863;if(D===0&&w<M.length&&M!==this)for(;w<M.length;w++)this.words[w]=M.words[w];return this.length=Math.max(this.length,w),M!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(h){return this.clone().isub(h)};function S(_,h,v){v.negative=h.negative^_.negative;var E=_.length+h.length|0;v.length=E,E=E-1|0;var M=_.words[0]|0,P=h.words[0]|0,D=M*P,w=D&67108863,B=D/67108864|0;v.words[0]=w;for(var x=1;x<E;x++){for(var U=B>>>26,X=B&67108863,se=Math.min(x,h.length-1),J=Math.max(0,x-_.length+1);J<=se;J++){var L=x-J|0;M=_.words[L]|0,P=h.words[J]|0,D=M*P+X,U+=D/67108864|0,X=D&67108863}v.words[x]=X|0,B=U|0}return B!==0?v.words[x]=B|0:v.length--,v._strip()}var A=function(h,v,E){var M=h.words,P=v.words,D=E.words,w=0,B,x,U,X=M[0]|0,se=X&8191,J=X>>>13,L=M[1]|0,G=L&8191,re=L>>>13,fe=M[2]|0,z=fe&8191,H=fe>>>13,de=M[3]|0,me=de&8191,we=de>>>13,Pe=M[4]|0,ke=Pe&8191,Ue=Pe>>>13,he=M[5]|0,Ge=he&8191,Be=he>>>13,He=M[6]|0,Ke=He&8191,be=He>>>13,Le=M[7]|0,V=Le&8191,W=Le>>>13,ae=M[8]|0,oe=ae&8191,F=ae>>>13,C=M[9]|0,R=C&8191,j=C>>>13,Y=P[0]|0,ie=Y&8191,pe=Y>>>13,Me=P[1]|0,Ce=Me&8191,Ee=Me>>>13,Z=P[2]|0,ne=Z&8191,q=Z>>>13,ge=P[3]|0,ye=ge&8191,ce=ge>>>13,Ie=P[4]|0,_e=Ie&8191,Re=Ie>>>13,le=P[5]|0,ue=le&8191,Oe=le>>>13,Te=P[6]|0,ve=Te&8191,Ne=Te>>>13,Ve=P[7]|0,xe=Ve&8191,Fe=Ve>>>13,qe=P[8]|0,Se=qe&8191,De=qe>>>13,ze=P[9]|0,Ae=ze&8191,je=ze>>>13;E.negative=h.negative^v.negative,E.length=19,B=Math.imul(se,ie),x=Math.imul(se,pe),x=x+Math.imul(J,ie)|0,U=Math.imul(J,pe);var We=(w+B|0)+((x&8191)<<13)|0;w=(U+(x>>>13)|0)+(We>>>26)|0,We&=67108863,B=Math.imul(G,ie),x=Math.imul(G,pe),x=x+Math.imul(re,ie)|0,U=Math.imul(re,pe),B=B+Math.imul(se,Ce)|0,x=x+Math.imul(se,Ee)|0,x=x+Math.imul(J,Ce)|0,U=U+Math.imul(J,Ee)|0;var $e=(w+B|0)+((x&8191)<<13)|0;w=(U+(x>>>13)|0)+($e>>>26)|0,$e&=67108863,B=Math.imul(z,ie),x=Math.imul(z,pe),x=x+Math.imul(H,ie)|0,U=Math.imul(H,pe),B=B+Math.imul(G,Ce)|0,x=x+Math.imul(G,Ee)|0,x=x+Math.imul(re,Ce)|0,U=U+Math.imul(re,Ee)|0,B=B+Math.imul(se,ne)|0,x=x+Math.imul(se,q)|0,x=x+Math.imul(J,ne)|0,U=U+Math.imul(J,q)|0;var Je=(w+B|0)+((x&8191)<<13)|0;w=(U+(x>>>13)|0)+(Je>>>26)|0,Je&=67108863,B=Math.imul(me,ie),x=Math.imul(me,pe),x=x+Math.imul(we,ie)|0,U=Math.imul(we,pe),B=B+Math.imul(z,Ce)|0,x=x+Math.imul(z,Ee)|0,x=x+Math.imul(H,Ce)|0,U=U+Math.imul(H,Ee)|0,B=B+Math.imul(G,ne)|0,x=x+Math.imul(G,q)|0,x=x+Math.imul(re,ne)|0,U=U+Math.imul(re,q)|0,B=B+Math.imul(se,ye)|0,x=x+Math.imul(se,ce)|0,x=x+Math.imul(J,ye)|0,U=U+Math.imul(J,ce)|0;var Ye=(w+B|0)+((x&8191)<<13)|0;w=(U+(x>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,B=Math.imul(ke,ie),x=Math.imul(ke,pe),x=x+Math.imul(Ue,ie)|0,U=Math.imul(Ue,pe),B=B+Math.imul(me,Ce)|0,x=x+Math.imul(me,Ee)|0,x=x+Math.imul(we,Ce)|0,U=U+Math.imul(we,Ee)|0,B=B+Math.imul(z,ne)|0,x=x+Math.imul(z,q)|0,x=x+Math.imul(H,ne)|0,U=U+Math.imul(H,q)|0,B=B+Math.imul(G,ye)|0,x=x+Math.imul(G,ce)|0,x=x+Math.imul(re,ye)|0,U=U+Math.imul(re,ce)|0,B=B+Math.imul(se,_e)|0,x=x+Math.imul(se,Re)|0,x=x+Math.imul(J,_e)|0,U=U+Math.imul(J,Re)|0;var Xe=(w+B|0)+((x&8191)<<13)|0;w=(U+(x>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,B=Math.imul(Ge,ie),x=Math.imul(Ge,pe),x=x+Math.imul(Be,ie)|0,U=Math.imul(Be,pe),B=B+Math.imul(ke,Ce)|0,x=x+Math.imul(ke,Ee)|0,x=x+Math.imul(Ue,Ce)|0,U=U+Math.imul(Ue,Ee)|0,B=B+Math.imul(me,ne)|0,x=x+Math.imul(me,q)|0,x=x+Math.imul(we,ne)|0,U=U+Math.imul(we,q)|0,B=B+Math.imul(z,ye)|0,x=x+Math.imul(z,ce)|0,x=x+Math.imul(H,ye)|0,U=U+Math.imul(H,ce)|0,B=B+Math.imul(G,_e)|0,x=x+Math.imul(G,Re)|0,x=x+Math.imul(re,_e)|0,U=U+Math.imul(re,Re)|0,B=B+Math.imul(se,ue)|0,x=x+Math.imul(se,Oe)|0,x=x+Math.imul(J,ue)|0,U=U+Math.imul(J,Oe)|0;var Ze=(w+B|0)+((x&8191)<<13)|0;w=(U+(x>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,B=Math.imul(Ke,ie),x=Math.imul(Ke,pe),x=x+Math.imul(be,ie)|0,U=Math.imul(be,pe),B=B+Math.imul(Ge,Ce)|0,x=x+Math.imul(Ge,Ee)|0,x=x+Math.imul(Be,Ce)|0,U=U+Math.imul(Be,Ee)|0,B=B+Math.imul(ke,ne)|0,x=x+Math.imul(ke,q)|0,x=x+Math.imul(Ue,ne)|0,U=U+Math.imul(Ue,q)|0,B=B+Math.imul(me,ye)|0,x=x+Math.imul(me,ce)|0,x=x+Math.imul(we,ye)|0,U=U+Math.imul(we,ce)|0,B=B+Math.imul(z,_e)|0,x=x+Math.imul(z,Re)|0,x=x+Math.imul(H,_e)|0,U=U+Math.imul(H,Re)|0,B=B+Math.imul(G,ue)|0,x=x+Math.imul(G,Oe)|0,x=x+Math.imul(re,ue)|0,U=U+Math.imul(re,Oe)|0,B=B+Math.imul(se,ve)|0,x=x+Math.imul(se,Ne)|0,x=x+Math.imul(J,ve)|0,U=U+Math.imul(J,Ne)|0;var Qe=(w+B|0)+((x&8191)<<13)|0;w=(U+(x>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,B=Math.imul(V,ie),x=Math.imul(V,pe),x=x+Math.imul(W,ie)|0,U=Math.imul(W,pe),B=B+Math.imul(Ke,Ce)|0,x=x+Math.imul(Ke,Ee)|0,x=x+Math.imul(be,Ce)|0,U=U+Math.imul(be,Ee)|0,B=B+Math.imul(Ge,ne)|0,x=x+Math.imul(Ge,q)|0,x=x+Math.imul(Be,ne)|0,U=U+Math.imul(Be,q)|0,B=B+Math.imul(ke,ye)|0,x=x+Math.imul(ke,ce)|0,x=x+Math.imul(Ue,ye)|0,U=U+Math.imul(Ue,ce)|0,B=B+Math.imul(me,_e)|0,x=x+Math.imul(me,Re)|0,x=x+Math.imul(we,_e)|0,U=U+Math.imul(we,Re)|0,B=B+Math.imul(z,ue)|0,x=x+Math.imul(z,Oe)|0,x=x+Math.imul(H,ue)|0,U=U+Math.imul(H,Oe)|0,B=B+Math.imul(G,ve)|0,x=x+Math.imul(G,Ne)|0,x=x+Math.imul(re,ve)|0,U=U+Math.imul(re,Ne)|0,B=B+Math.imul(se,xe)|0,x=x+Math.imul(se,Fe)|0,x=x+Math.imul(J,xe)|0,U=U+Math.imul(J,Fe)|0;var et=(w+B|0)+((x&8191)<<13)|0;w=(U+(x>>>13)|0)+(et>>>26)|0,et&=67108863,B=Math.imul(oe,ie),x=Math.imul(oe,pe),x=x+Math.imul(F,ie)|0,U=Math.imul(F,pe),B=B+Math.imul(V,Ce)|0,x=x+Math.imul(V,Ee)|0,x=x+Math.imul(W,Ce)|0,U=U+Math.imul(W,Ee)|0,B=B+Math.imul(Ke,ne)|0,x=x+Math.imul(Ke,q)|0,x=x+Math.imul(be,ne)|0,U=U+Math.imul(be,q)|0,B=B+Math.imul(Ge,ye)|0,x=x+Math.imul(Ge,ce)|0,x=x+Math.imul(Be,ye)|0,U=U+Math.imul(Be,ce)|0,B=B+Math.imul(ke,_e)|0,x=x+Math.imul(ke,Re)|0,x=x+Math.imul(Ue,_e)|0,U=U+Math.imul(Ue,Re)|0,B=B+Math.imul(me,ue)|0,x=x+Math.imul(me,Oe)|0,x=x+Math.imul(we,ue)|0,U=U+Math.imul(we,Oe)|0,B=B+Math.imul(z,ve)|0,x=x+Math.imul(z,Ne)|0,x=x+Math.imul(H,ve)|0,U=U+Math.imul(H,Ne)|0,B=B+Math.imul(G,xe)|0,x=x+Math.imul(G,Fe)|0,x=x+Math.imul(re,xe)|0,U=U+Math.imul(re,Fe)|0,B=B+Math.imul(se,Se)|0,x=x+Math.imul(se,De)|0,x=x+Math.imul(J,Se)|0,U=U+Math.imul(J,De)|0;var tt=(w+B|0)+((x&8191)<<13)|0;w=(U+(x>>>13)|0)+(tt>>>26)|0,tt&=67108863,B=Math.imul(R,ie),x=Math.imul(R,pe),x=x+Math.imul(j,ie)|0,U=Math.imul(j,pe),B=B+Math.imul(oe,Ce)|0,x=x+Math.imul(oe,Ee)|0,x=x+Math.imul(F,Ce)|0,U=U+Math.imul(F,Ee)|0,B=B+Math.imul(V,ne)|0,x=x+Math.imul(V,q)|0,x=x+Math.imul(W,ne)|0,U=U+Math.imul(W,q)|0,B=B+Math.imul(Ke,ye)|0,x=x+Math.imul(Ke,ce)|0,x=x+Math.imul(be,ye)|0,U=U+Math.imul(be,ce)|0,B=B+Math.imul(Ge,_e)|0,x=x+Math.imul(Ge,Re)|0,x=x+Math.imul(Be,_e)|0,U=U+Math.imul(Be,Re)|0,B=B+Math.imul(ke,ue)|0,x=x+Math.imul(ke,Oe)|0,x=x+Math.imul(Ue,ue)|0,U=U+Math.imul(Ue,Oe)|0,B=B+Math.imul(me,ve)|0,x=x+Math.imul(me,Ne)|0,x=x+Math.imul(we,ve)|0,U=U+Math.imul(we,Ne)|0,B=B+Math.imul(z,xe)|0,x=x+Math.imul(z,Fe)|0,x=x+Math.imul(H,xe)|0,U=U+Math.imul(H,Fe)|0,B=B+Math.imul(G,Se)|0,x=x+Math.imul(G,De)|0,x=x+Math.imul(re,Se)|0,U=U+Math.imul(re,De)|0,B=B+Math.imul(se,Ae)|0,x=x+Math.imul(se,je)|0,x=x+Math.imul(J,Ae)|0,U=U+Math.imul(J,je)|0;var rt=(w+B|0)+((x&8191)<<13)|0;w=(U+(x>>>13)|0)+(rt>>>26)|0,rt&=67108863,B=Math.imul(R,Ce),x=Math.imul(R,Ee),x=x+Math.imul(j,Ce)|0,U=Math.imul(j,Ee),B=B+Math.imul(oe,ne)|0,x=x+Math.imul(oe,q)|0,x=x+Math.imul(F,ne)|0,U=U+Math.imul(F,q)|0,B=B+Math.imul(V,ye)|0,x=x+Math.imul(V,ce)|0,x=x+Math.imul(W,ye)|0,U=U+Math.imul(W,ce)|0,B=B+Math.imul(Ke,_e)|0,x=x+Math.imul(Ke,Re)|0,x=x+Math.imul(be,_e)|0,U=U+Math.imul(be,Re)|0,B=B+Math.imul(Ge,ue)|0,x=x+Math.imul(Ge,Oe)|0,x=x+Math.imul(Be,ue)|0,U=U+Math.imul(Be,Oe)|0,B=B+Math.imul(ke,ve)|0,x=x+Math.imul(ke,Ne)|0,x=x+Math.imul(Ue,ve)|0,U=U+Math.imul(Ue,Ne)|0,B=B+Math.imul(me,xe)|0,x=x+Math.imul(me,Fe)|0,x=x+Math.imul(we,xe)|0,U=U+Math.imul(we,Fe)|0,B=B+Math.imul(z,Se)|0,x=x+Math.imul(z,De)|0,x=x+Math.imul(H,Se)|0,U=U+Math.imul(H,De)|0,B=B+Math.imul(G,Ae)|0,x=x+Math.imul(G,je)|0,x=x+Math.imul(re,Ae)|0,U=U+Math.imul(re,je)|0;var at=(w+B|0)+((x&8191)<<13)|0;w=(U+(x>>>13)|0)+(at>>>26)|0,at&=67108863,B=Math.imul(R,ne),x=Math.imul(R,q),x=x+Math.imul(j,ne)|0,U=Math.imul(j,q),B=B+Math.imul(oe,ye)|0,x=x+Math.imul(oe,ce)|0,x=x+Math.imul(F,ye)|0,U=U+Math.imul(F,ce)|0,B=B+Math.imul(V,_e)|0,x=x+Math.imul(V,Re)|0,x=x+Math.imul(W,_e)|0,U=U+Math.imul(W,Re)|0,B=B+Math.imul(Ke,ue)|0,x=x+Math.imul(Ke,Oe)|0,x=x+Math.imul(be,ue)|0,U=U+Math.imul(be,Oe)|0,B=B+Math.imul(Ge,ve)|0,x=x+Math.imul(Ge,Ne)|0,x=x+Math.imul(Be,ve)|0,U=U+Math.imul(Be,Ne)|0,B=B+Math.imul(ke,xe)|0,x=x+Math.imul(ke,Fe)|0,x=x+Math.imul(Ue,xe)|0,U=U+Math.imul(Ue,Fe)|0,B=B+Math.imul(me,Se)|0,x=x+Math.imul(me,De)|0,x=x+Math.imul(we,Se)|0,U=U+Math.imul(we,De)|0,B=B+Math.imul(z,Ae)|0,x=x+Math.imul(z,je)|0,x=x+Math.imul(H,Ae)|0,U=U+Math.imul(H,je)|0;var st=(w+B|0)+((x&8191)<<13)|0;w=(U+(x>>>13)|0)+(st>>>26)|0,st&=67108863,B=Math.imul(R,ye),x=Math.imul(R,ce),x=x+Math.imul(j,ye)|0,U=Math.imul(j,ce),B=B+Math.imul(oe,_e)|0,x=x+Math.imul(oe,Re)|0,x=x+Math.imul(F,_e)|0,U=U+Math.imul(F,Re)|0,B=B+Math.imul(V,ue)|0,x=x+Math.imul(V,Oe)|0,x=x+Math.imul(W,ue)|0,U=U+Math.imul(W,Oe)|0,B=B+Math.imul(Ke,ve)|0,x=x+Math.imul(Ke,Ne)|0,x=x+Math.imul(be,ve)|0,U=U+Math.imul(be,Ne)|0,B=B+Math.imul(Ge,xe)|0,x=x+Math.imul(Ge,Fe)|0,x=x+Math.imul(Be,xe)|0,U=U+Math.imul(Be,Fe)|0,B=B+Math.imul(ke,Se)|0,x=x+Math.imul(ke,De)|0,x=x+Math.imul(Ue,Se)|0,U=U+Math.imul(Ue,De)|0,B=B+Math.imul(me,Ae)|0,x=x+Math.imul(me,je)|0,x=x+Math.imul(we,Ae)|0,U=U+Math.imul(we,je)|0;var it=(w+B|0)+((x&8191)<<13)|0;w=(U+(x>>>13)|0)+(it>>>26)|0,it&=67108863,B=Math.imul(R,_e),x=Math.imul(R,Re),x=x+Math.imul(j,_e)|0,U=Math.imul(j,Re),B=B+Math.imul(oe,ue)|0,x=x+Math.imul(oe,Oe)|0,x=x+Math.imul(F,ue)|0,U=U+Math.imul(F,Oe)|0,B=B+Math.imul(V,ve)|0,x=x+Math.imul(V,Ne)|0,x=x+Math.imul(W,ve)|0,U=U+Math.imul(W,Ne)|0,B=B+Math.imul(Ke,xe)|0,x=x+Math.imul(Ke,Fe)|0,x=x+Math.imul(be,xe)|0,U=U+Math.imul(be,Fe)|0,B=B+Math.imul(Ge,Se)|0,x=x+Math.imul(Ge,De)|0,x=x+Math.imul(Be,Se)|0,U=U+Math.imul(Be,De)|0,B=B+Math.imul(ke,Ae)|0,x=x+Math.imul(ke,je)|0,x=x+Math.imul(Ue,Ae)|0,U=U+Math.imul(Ue,je)|0;var nt=(w+B|0)+((x&8191)<<13)|0;w=(U+(x>>>13)|0)+(nt>>>26)|0,nt&=67108863,B=Math.imul(R,ue),x=Math.imul(R,Oe),x=x+Math.imul(j,ue)|0,U=Math.imul(j,Oe),B=B+Math.imul(oe,ve)|0,x=x+Math.imul(oe,Ne)|0,x=x+Math.imul(F,ve)|0,U=U+Math.imul(F,Ne)|0,B=B+Math.imul(V,xe)|0,x=x+Math.imul(V,Fe)|0,x=x+Math.imul(W,xe)|0,U=U+Math.imul(W,Fe)|0,B=B+Math.imul(Ke,Se)|0,x=x+Math.imul(Ke,De)|0,x=x+Math.imul(be,Se)|0,U=U+Math.imul(be,De)|0,B=B+Math.imul(Ge,Ae)|0,x=x+Math.imul(Ge,je)|0,x=x+Math.imul(Be,Ae)|0,U=U+Math.imul(Be,je)|0;var ot=(w+B|0)+((x&8191)<<13)|0;w=(U+(x>>>13)|0)+(ot>>>26)|0,ot&=67108863,B=Math.imul(R,ve),x=Math.imul(R,Ne),x=x+Math.imul(j,ve)|0,U=Math.imul(j,Ne),B=B+Math.imul(oe,xe)|0,x=x+Math.imul(oe,Fe)|0,x=x+Math.imul(F,xe)|0,U=U+Math.imul(F,Fe)|0,B=B+Math.imul(V,Se)|0,x=x+Math.imul(V,De)|0,x=x+Math.imul(W,Se)|0,U=U+Math.imul(W,De)|0,B=B+Math.imul(Ke,Ae)|0,x=x+Math.imul(Ke,je)|0,x=x+Math.imul(be,Ae)|0,U=U+Math.imul(be,je)|0;var ft=(w+B|0)+((x&8191)<<13)|0;w=(U+(x>>>13)|0)+(ft>>>26)|0,ft&=67108863,B=Math.imul(R,xe),x=Math.imul(R,Fe),x=x+Math.imul(j,xe)|0,U=Math.imul(j,Fe),B=B+Math.imul(oe,Se)|0,x=x+Math.imul(oe,De)|0,x=x+Math.imul(F,Se)|0,U=U+Math.imul(F,De)|0,B=B+Math.imul(V,Ae)|0,x=x+Math.imul(V,je)|0,x=x+Math.imul(W,Ae)|0,U=U+Math.imul(W,je)|0;var pt=(w+B|0)+((x&8191)<<13)|0;w=(U+(x>>>13)|0)+(pt>>>26)|0,pt&=67108863,B=Math.imul(R,Se),x=Math.imul(R,De),x=x+Math.imul(j,Se)|0,U=Math.imul(j,De),B=B+Math.imul(oe,Ae)|0,x=x+Math.imul(oe,je)|0,x=x+Math.imul(F,Ae)|0,U=U+Math.imul(F,je)|0;var gt=(w+B|0)+((x&8191)<<13)|0;w=(U+(x>>>13)|0)+(gt>>>26)|0,gt&=67108863,B=Math.imul(R,Ae),x=Math.imul(R,je),x=x+Math.imul(j,Ae)|0,U=Math.imul(j,je);var mt=(w+B|0)+((x&8191)<<13)|0;return w=(U+(x>>>13)|0)+(mt>>>26)|0,mt&=67108863,D[0]=We,D[1]=$e,D[2]=Je,D[3]=Ye,D[4]=Xe,D[5]=Ze,D[6]=Qe,D[7]=et,D[8]=tt,D[9]=rt,D[10]=at,D[11]=st,D[12]=it,D[13]=nt,D[14]=ot,D[15]=ft,D[16]=pt,D[17]=gt,D[18]=mt,w!==0&&(D[19]=w,E.length++),E};Math.imul||(A=S);function k(_,h,v){v.negative=h.negative^_.negative,v.length=_.length+h.length;for(var E=0,M=0,P=0;P<v.length-1;P++){var D=M;M=0;for(var w=E&67108863,B=Math.min(P,h.length-1),x=Math.max(0,P-_.length+1);x<=B;x++){var U=P-x,X=_.words[U]|0,se=h.words[x]|0,J=X*se,L=J&67108863;D=D+(J/67108864|0)|0,L=L+w|0,w=L&67108863,D=D+(L>>>26)|0,M+=D>>>26,D&=67108863}v.words[P]=w,E=D,D=M}return E!==0?v.words[P]=E:v.length--,v._strip()}function T(_,h,v){return k(_,h,v)}a.prototype.mulTo=function(h,v){var E,M=this.length+h.length;return this.length===10&&h.length===10?E=A(this,h,v):M<63?E=S(this,h,v):M<1024?E=k(this,h,v):E=T(this,h,v),E},a.prototype.mul=function(h){var v=new a(null);return v.words=new Array(this.length+h.length),this.mulTo(h,v)},a.prototype.mulf=function(h){var v=new a(null);return v.words=new Array(this.length+h.length),T(this,h,v)},a.prototype.imul=function(h){return this.clone().mulTo(h,this)},a.prototype.imuln=function(h){var v=h<0;v&&(h=-h),r(typeof h=="number"),r(h<67108864);for(var E=0,M=0;M<this.length;M++){var P=(this.words[M]|0)*h,D=(P&67108863)+(E&67108863);E>>=26,E+=P/67108864|0,E+=D>>>26,this.words[M]=D&67108863}return E!==0&&(this.words[M]=E,this.length++),v?this.ineg():this},a.prototype.muln=function(h){return this.clone().imuln(h)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(h){var v=I(h);if(v.length===0)return new a(1);for(var E=this,M=0;M<v.length&&v[M]===0;M++,E=E.sqr());if(++M<v.length)for(var P=E.sqr();M<v.length;M++,P=P.sqr())v[M]!==0&&(E=E.mul(P));return E},a.prototype.iushln=function(h){r(typeof h=="number"&&h>=0);var v=h%26,E=(h-v)/26,M=67108863>>>26-v<<26-v,P;if(v!==0){var D=0;for(P=0;P<this.length;P++){var w=this.words[P]&M,B=(this.words[P]|0)-w<<v;this.words[P]=B|D,D=w>>>26-v}D&&(this.words[P]=D,this.length++)}if(E!==0){for(P=this.length-1;P>=0;P--)this.words[P+E]=this.words[P];for(P=0;P<E;P++)this.words[P]=0;this.length+=E}return this._strip()},a.prototype.ishln=function(h){return r(this.negative===0),this.iushln(h)},a.prototype.iushrn=function(h,v,E){r(typeof h=="number"&&h>=0);var M;v?M=(v-v%26)/26:M=0;var P=h%26,D=Math.min((h-P)/26,this.length),w=67108863^67108863>>>P<<P,B=E;if(M-=D,M=Math.max(0,M),B){for(var x=0;x<D;x++)B.words[x]=this.words[x];B.length=D}if(D!==0)if(this.length>D)for(this.length-=D,x=0;x<this.length;x++)this.words[x]=this.words[x+D];else this.words[0]=0,this.length=1;var U=0;for(x=this.length-1;x>=0&&(U!==0||x>=M);x--){var X=this.words[x]|0;this.words[x]=U<<26-P|X>>>P,U=X&w}return B&&U!==0&&(B.words[B.length++]=U),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(h,v,E){return r(this.negative===0),this.iushrn(h,v,E)},a.prototype.shln=function(h){return this.clone().ishln(h)},a.prototype.ushln=function(h){return this.clone().iushln(h)},a.prototype.shrn=function(h){return this.clone().ishrn(h)},a.prototype.ushrn=function(h){return this.clone().iushrn(h)},a.prototype.testn=function(h){r(typeof h=="number"&&h>=0);var v=h%26,E=(h-v)/26,M=1<<v;if(this.length<=E)return!1;var P=this.words[E];return!!(P&M)},a.prototype.imaskn=function(h){r(typeof h=="number"&&h>=0);var v=h%26,E=(h-v)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=E)return this;if(v!==0&&E++,this.length=Math.min(E,this.length),v!==0){var M=67108863^67108863>>>v<<v;this.words[this.length-1]&=M}return this._strip()},a.prototype.maskn=function(h){return this.clone().imaskn(h)},a.prototype.iaddn=function(h){return r(typeof h=="number"),r(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<=h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},a.prototype._iaddn=function(h){this.words[0]+=h;for(var v=0;v<this.length&&this.words[v]>=67108864;v++)this.words[v]-=67108864,v===this.length-1?this.words[v+1]=1:this.words[v+1]++;return this.length=Math.max(this.length,v+1),this},a.prototype.isubn=function(h){if(r(typeof h=="number"),r(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var v=0;v<this.length&&this.words[v]<0;v++)this.words[v]+=67108864,this.words[v+1]-=1;return this._strip()},a.prototype.addn=function(h){return this.clone().iaddn(h)},a.prototype.subn=function(h){return this.clone().isubn(h)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(h,v,E){var M=h.length+E,P;this._expand(M);var D,w=0;for(P=0;P<h.length;P++){D=(this.words[P+E]|0)+w;var B=(h.words[P]|0)*v;D-=B&67108863,w=(D>>26)-(B/67108864|0),this.words[P+E]=D&67108863}for(;P<this.length-E;P++)D=(this.words[P+E]|0)+w,w=D>>26,this.words[P+E]=D&67108863;if(w===0)return this._strip();for(r(w===-1),w=0,P=0;P<this.length;P++)D=-(this.words[P]|0)+w,w=D>>26,this.words[P]=D&67108863;return this.negative=1,this._strip()},a.prototype._wordDiv=function(h,v){var E=this.length-h.length,M=this.clone(),P=h,D=P.words[P.length-1]|0,w=this._countBits(D);E=26-w,E!==0&&(P=P.ushln(E),M.iushln(E),D=P.words[P.length-1]|0);var B=M.length-P.length,x;if(v!=="mod"){x=new a(null),x.length=B+1,x.words=new Array(x.length);for(var U=0;U<x.length;U++)x.words[U]=0}var X=M.clone()._ishlnsubmul(P,1,B);X.negative===0&&(M=X,x&&(x.words[B]=1));for(var se=B-1;se>=0;se--){var J=(M.words[P.length+se]|0)*67108864+(M.words[P.length+se-1]|0);for(J=Math.min(J/D|0,67108863),M._ishlnsubmul(P,J,se);M.negative!==0;)J--,M.negative=0,M._ishlnsubmul(P,1,se),M.isZero()||(M.negative^=1);x&&(x.words[se]=J)}return x&&x._strip(),M._strip(),v!=="div"&&E!==0&&M.iushrn(E),{div:x||null,mod:M}},a.prototype.divmod=function(h,v,E){if(r(!h.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var M,P,D;return this.negative!==0&&h.negative===0?(D=this.neg().divmod(h,v),v!=="mod"&&(M=D.div.neg()),v!=="div"&&(P=D.mod.neg(),E&&P.negative!==0&&P.iadd(h)),{div:M,mod:P}):this.negative===0&&h.negative!==0?(D=this.divmod(h.neg(),v),v!=="mod"&&(M=D.div.neg()),{div:M,mod:D.mod}):this.negative&h.negative?(D=this.neg().divmod(h.neg(),v),v!=="div"&&(P=D.mod.neg(),E&&P.negative!==0&&P.isub(h)),{div:D.div,mod:P}):h.length>this.length||this.cmp(h)<0?{div:new a(0),mod:this}:h.length===1?v==="div"?{div:this.divn(h.words[0]),mod:null}:v==="mod"?{div:null,mod:new a(this.modrn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new a(this.modrn(h.words[0]))}:this._wordDiv(h,v)},a.prototype.div=function(h){return this.divmod(h,"div",!1).div},a.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},a.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},a.prototype.divRound=function(h){var v=this.divmod(h);if(v.mod.isZero())return v.div;var E=v.div.negative!==0?v.mod.isub(h):v.mod,M=h.ushrn(1),P=h.andln(1),D=E.cmp(M);return D<0||P===1&&D===0?v.div:v.div.negative!==0?v.div.isubn(1):v.div.iaddn(1)},a.prototype.modrn=function(h){var v=h<0;v&&(h=-h),r(h<=67108863);for(var E=(1<<26)%h,M=0,P=this.length-1;P>=0;P--)M=(E*M+(this.words[P]|0))%h;return v?-M:M},a.prototype.modn=function(h){return this.modrn(h)},a.prototype.idivn=function(h){var v=h<0;v&&(h=-h),r(h<=67108863);for(var E=0,M=this.length-1;M>=0;M--){var P=(this.words[M]|0)+E*67108864;this.words[M]=P/h|0,E=P%h}return this._strip(),v?this.ineg():this},a.prototype.divn=function(h){return this.clone().idivn(h)},a.prototype.egcd=function(h){r(h.negative===0),r(!h.isZero());var v=this,E=h.clone();v.negative!==0?v=v.umod(h):v=v.clone();for(var M=new a(1),P=new a(0),D=new a(0),w=new a(1),B=0;v.isEven()&&E.isEven();)v.iushrn(1),E.iushrn(1),++B;for(var x=E.clone(),U=v.clone();!v.isZero();){for(var X=0,se=1;!(v.words[0]&se)&&X<26;++X,se<<=1);if(X>0)for(v.iushrn(X);X-- >0;)(M.isOdd()||P.isOdd())&&(M.iadd(x),P.isub(U)),M.iushrn(1),P.iushrn(1);for(var J=0,L=1;!(E.words[0]&L)&&J<26;++J,L<<=1);if(J>0)for(E.iushrn(J);J-- >0;)(D.isOdd()||w.isOdd())&&(D.iadd(x),w.isub(U)),D.iushrn(1),w.iushrn(1);v.cmp(E)>=0?(v.isub(E),M.isub(D),P.isub(w)):(E.isub(v),D.isub(M),w.isub(P))}return{a:D,b:w,gcd:E.iushln(B)}},a.prototype._invmp=function(h){r(h.negative===0),r(!h.isZero());var v=this,E=h.clone();v.negative!==0?v=v.umod(h):v=v.clone();for(var M=new a(1),P=new a(0),D=E.clone();v.cmpn(1)>0&&E.cmpn(1)>0;){for(var w=0,B=1;!(v.words[0]&B)&&w<26;++w,B<<=1);if(w>0)for(v.iushrn(w);w-- >0;)M.isOdd()&&M.iadd(D),M.iushrn(1);for(var x=0,U=1;!(E.words[0]&U)&&x<26;++x,U<<=1);if(x>0)for(E.iushrn(x);x-- >0;)P.isOdd()&&P.iadd(D),P.iushrn(1);v.cmp(E)>=0?(v.isub(E),M.isub(P)):(E.isub(v),P.isub(M))}var X;return v.cmpn(1)===0?X=M:X=P,X.cmpn(0)<0&&X.iadd(h),X},a.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var v=this.clone(),E=h.clone();v.negative=0,E.negative=0;for(var M=0;v.isEven()&&E.isEven();M++)v.iushrn(1),E.iushrn(1);do{for(;v.isEven();)v.iushrn(1);for(;E.isEven();)E.iushrn(1);var P=v.cmp(E);if(P<0){var D=v;v=E,E=D}else if(P===0||E.cmpn(1)===0)break;v.isub(E)}while(!0);return E.iushln(M)},a.prototype.invm=function(h){return this.egcd(h).a.umod(h)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(h){return this.words[0]&h},a.prototype.bincn=function(h){r(typeof h=="number");var v=h%26,E=(h-v)/26,M=1<<v;if(this.length<=E)return this._expand(E+1),this.words[E]|=M,this;for(var P=M,D=E;P!==0&&D<this.length;D++){var w=this.words[D]|0;w+=P,P=w>>>26,w&=67108863,this.words[D]=w}return P!==0&&(this.words[D]=P,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(h){var v=h<0;if(this.negative!==0&&!v)return-1;if(this.negative===0&&v)return 1;this._strip();var E;if(this.length>1)E=1;else{v&&(h=-h),r(h<=67108863,"Number is too big");var M=this.words[0]|0;E=M===h?0:M<h?-1:1}return this.negative!==0?-E|0:E},a.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var v=this.ucmp(h);return this.negative!==0?-v|0:v},a.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var v=0,E=this.length-1;E>=0;E--){var M=this.words[E]|0,P=h.words[E]|0;if(M!==P){M<P?v=-1:M>P&&(v=1);break}}return v},a.prototype.gtn=function(h){return this.cmpn(h)===1},a.prototype.gt=function(h){return this.cmp(h)===1},a.prototype.gten=function(h){return this.cmpn(h)>=0},a.prototype.gte=function(h){return this.cmp(h)>=0},a.prototype.ltn=function(h){return this.cmpn(h)===-1},a.prototype.lt=function(h){return this.cmp(h)===-1},a.prototype.lten=function(h){return this.cmpn(h)<=0},a.prototype.lte=function(h){return this.cmp(h)<=0},a.prototype.eqn=function(h){return this.cmpn(h)===0},a.prototype.eq=function(h){return this.cmp(h)===0},a.red=function(h){return new N(h)},a.prototype.toRed=function(h){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},a.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(h){return this.red=h,this},a.prototype.forceRed=function(h){return r(!this.red,"Already a number in reduction context"),this._forceRed(h)},a.prototype.redAdd=function(h){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},a.prototype.redIAdd=function(h){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},a.prototype.redSub=function(h){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},a.prototype.redISub=function(h){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},a.prototype.redShl=function(h){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},a.prototype.redMul=function(h){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},a.prototype.redIMul=function(h){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},a.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(h){return r(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var O={k256:null,p224:null,p192:null,p25519:null};function $(_,h){this.name=_,this.p=new a(h,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}$.prototype._tmp=function(){var h=new a(null);return h.words=new Array(Math.ceil(this.n/13)),h},$.prototype.ireduce=function(h){var v=h,E;do this.split(v,this.tmp),v=this.imulK(v),v=v.iadd(this.tmp),E=v.bitLength();while(E>this.n);var M=E<this.n?-1:v.ucmp(this.p);return M===0?(v.words[0]=0,v.length=1):M>0?v.isub(this.p):v.strip!==void 0?v.strip():v._strip(),v},$.prototype.split=function(h,v){h.iushrn(this.n,0,v)},$.prototype.imulK=function(h){return h.imul(this.k)};function K(){$.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(K,$),K.prototype.split=function(h,v){for(var E=4194303,M=Math.min(h.length,9),P=0;P<M;P++)v.words[P]=h.words[P];if(v.length=M,h.length<=9){h.words[0]=0,h.length=1;return}var D=h.words[9];for(v.words[v.length++]=D&E,P=10;P<h.length;P++){var w=h.words[P]|0;h.words[P-10]=(w&E)<<4|D>>>22,D=w}D>>>=22,h.words[P-10]=D,D===0&&h.length>10?h.length-=10:h.length-=9},K.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var v=0,E=0;E<h.length;E++){var M=h.words[E]|0;v+=M*977,h.words[E]=v&67108863,v=M*64+(v/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function ee(){$.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ee,$);function Q(){$.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(Q,$);function te(){$.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(te,$),te.prototype.imulK=function(h){for(var v=0,E=0;E<h.length;E++){var M=(h.words[E]|0)*19+v,P=M&67108863;M>>>=26,h.words[E]=P,v=M}return v!==0&&(h.words[h.length++]=v),h},a._prime=function(h){if(O[h])return O[h];var v;if(h==="k256")v=new K;else if(h==="p224")v=new ee;else if(h==="p192")v=new Q;else if(h==="p25519")v=new te;else throw new Error("Unknown prime "+h);return O[h]=v,v};function N(_){if(typeof _=="string"){var h=a._prime(_);this.m=h.p,this.prime=h}else r(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}N.prototype._verify1=function(h){r(h.negative===0,"red works only with positives"),r(h.red,"red works only with red numbers")},N.prototype._verify2=function(h,v){r((h.negative|v.negative)===0,"red works only with positives"),r(h.red&&h.red===v.red,"red works only with red numbers")},N.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):(f(h,h.umod(this.m)._forceRed(this)),h)},N.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},N.prototype.add=function(h,v){this._verify2(h,v);var E=h.add(v);return E.cmp(this.m)>=0&&E.isub(this.m),E._forceRed(this)},N.prototype.iadd=function(h,v){this._verify2(h,v);var E=h.iadd(v);return E.cmp(this.m)>=0&&E.isub(this.m),E},N.prototype.sub=function(h,v){this._verify2(h,v);var E=h.sub(v);return E.cmpn(0)<0&&E.iadd(this.m),E._forceRed(this)},N.prototype.isub=function(h,v){this._verify2(h,v);var E=h.isub(v);return E.cmpn(0)<0&&E.iadd(this.m),E},N.prototype.shl=function(h,v){return this._verify1(h),this.imod(h.ushln(v))},N.prototype.imul=function(h,v){return this._verify2(h,v),this.imod(h.imul(v))},N.prototype.mul=function(h,v){return this._verify2(h,v),this.imod(h.mul(v))},N.prototype.isqr=function(h){return this.imul(h,h.clone())},N.prototype.sqr=function(h){return this.mul(h,h)},N.prototype.sqrt=function(h){if(h.isZero())return h.clone();var v=this.m.andln(3);if(r(v%2===1),v===3){var E=this.m.add(new a(1)).iushrn(2);return this.pow(h,E)}for(var M=this.m.subn(1),P=0;!M.isZero()&&M.andln(1)===0;)P++,M.iushrn(1);r(!M.isZero());var D=new a(1).toRed(this),w=D.redNeg(),B=this.m.subn(1).iushrn(1),x=this.m.bitLength();for(x=new a(2*x*x).toRed(this);this.pow(x,B).cmp(w)!==0;)x.redIAdd(w);for(var U=this.pow(x,M),X=this.pow(h,M.addn(1).iushrn(1)),se=this.pow(h,M),J=P;se.cmp(D)!==0;){for(var L=se,G=0;L.cmp(D)!==0;G++)L=L.redSqr();r(G<J);var re=this.pow(U,new a(1).iushln(J-G-1));X=X.redMul(re),U=re.redSqr(),se=se.redMul(U),J=G}return X},N.prototype.invm=function(h){var v=h._invmp(this.m);return v.negative!==0?(v.negative=0,this.imod(v).redNeg()):this.imod(v)},N.prototype.pow=function(h,v){if(v.isZero())return new a(1).toRed(this);if(v.cmpn(1)===0)return h.clone();var E=4,M=new Array(1<<E);M[0]=new a(1).toRed(this),M[1]=h;for(var P=2;P<M.length;P++)M[P]=this.mul(M[P-1],h);var D=M[0],w=0,B=0,x=v.bitLength()%26;for(x===0&&(x=26),P=v.length-1;P>=0;P--){for(var U=v.words[P],X=x-1;X>=0;X--){var se=U>>X&1;if(D!==M[0]&&(D=this.sqr(D)),se===0&&w===0){B=0;continue}w<<=1,w|=se,B++,!(B!==E&&(P!==0||X!==0))&&(D=this.mul(D,M[w]),B=0,w=0)}x=26}return D},N.prototype.convertTo=function(h){var v=h.umod(this.m);return v===h?v.clone():v},N.prototype.convertFrom=function(h){var v=h.clone();return v.red=null,v},a.mont=function(h){return new m(h)};function m(_){N.call(this,_),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(m,N),m.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},m.prototype.convertFrom=function(h){var v=this.imod(h.mul(this.rinv));return v.red=null,v},m.prototype.imul=function(h,v){if(h.isZero()||v.isZero())return h.words[0]=0,h.length=1,h;var E=h.imul(v),M=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),P=E.isub(M).iushrn(this.shift),D=P;return P.cmp(this.m)>=0?D=P.isub(this.m):P.cmpn(0)<0&&(D=P.iadd(this.m)),D._forceRed(this)},m.prototype.mul=function(h,v){if(h.isZero()||v.isZero())return new a(0)._forceRed(this);var E=h.mul(v),M=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),P=E.isub(M).iushrn(this.shift),D=P;return P.cmp(this.m)>=0?D=P.isub(this.m):P.cmpn(0)<0&&(D=P.iadd(this.m)),D._forceRed(this)},m.prototype.invm=function(h){var v=this.imod(h._invmp(this.m).mul(this.r2));return v._forceRed(this)}})(d,commonjsGlobal)}(bn)),bn.exports}var browserifyRsa,hasRequiredBrowserifyRsa;function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var d=requireBn(),e=requireBrowser$b();function t(a){var n=r(a),o=n.toRed(d.mont(a.modulus)).redPow(new d(a.publicExponent)).fromRed();return{blinder:o,unblinder:n.invm(a.modulus)}}function r(a){var n=a.modulus.byteLength(),o;do o=new d(e(n));while(o.cmp(a.modulus)>=0||!o.umod(a.prime1)||!o.umod(a.prime2));return o}function s(a,n){var o=t(n),p=n.modulus.byteLength(),c=new d(a).mul(o.blinder).umod(n.modulus),f=c.toRed(d.mont(n.prime1)),l=c.toRed(d.mont(n.prime2)),u=n.coefficient,g=n.prime1,y=n.prime2,b=f.redPow(n.exponent1).fromRed(),I=l.redPow(n.exponent2).fromRed(),S=b.isub(I).imul(u).umod(g).imul(y);return I.iadd(S).imul(o.unblinder).umod(n.modulus).toArrayLike(Buffer,"be",p)}return s.getr=r,browserifyRsa=s,browserifyRsa}var elliptic={};const name="elliptic",version="6.5.5",description="EC cryptography",main="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"};var require$$0={name,version,description,main,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies},utils$2={},utils$1={},hasRequiredUtils$2;function requireUtils$2(){return hasRequiredUtils$2||(hasRequiredUtils$2=1,function(d){var e=d;function t(a,n){if(Array.isArray(a))return a.slice();if(!a)return[];var o=[];if(typeof a!="string"){for(var p=0;p<a.length;p++)o[p]=a[p]|0;return o}if(n==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var p=0;p<a.length;p+=2)o.push(parseInt(a[p]+a[p+1],16))}else for(var p=0;p<a.length;p++){var c=a.charCodeAt(p),f=c>>8,l=c&255;f?o.push(f,l):o.push(l)}return o}e.toArray=t;function r(a){return a.length===1?"0"+a:a}e.zero2=r;function s(a){for(var n="",o=0;o<a.length;o++)n+=r(a[o].toString(16));return n}e.toHex=s,e.encode=function(n,o){return o==="hex"?s(n):n}}(utils$1)),utils$1}var hasRequiredUtils$1;function requireUtils$1(){return hasRequiredUtils$1||(hasRequiredUtils$1=1,function(d){var e=d,t=requireBn$1(),r=requireMinimalisticAssert(),s=requireUtils$2();e.assert=r,e.toArray=s.toArray,e.zero2=s.zero2,e.toHex=s.toHex,e.encode=s.encode;function a(f,l,u){var g=new Array(Math.max(f.bitLength(),u)+1),y;for(y=0;y<g.length;y+=1)g[y]=0;var b=1<<l+1,I=f.clone();for(y=0;y<g.length;y++){var S,A=I.andln(b-1);I.isOdd()?(A>(b>>1)-1?S=(b>>1)-A:S=A,I.isubn(S)):S=0,g[y]=S,I.iushrn(1)}return g}e.getNAF=a;function n(f,l){var u=[[],[]];f=f.clone(),l=l.clone();for(var g=0,y=0,b;f.cmpn(-g)>0||l.cmpn(-y)>0;){var I=f.andln(3)+g&3,S=l.andln(3)+y&3;I===3&&(I=-1),S===3&&(S=-1);var A;I&1?(b=f.andln(7)+g&7,(b===3||b===5)&&S===2?A=-I:A=I):A=0,u[0].push(A);var k;S&1?(b=l.andln(7)+y&7,(b===3||b===5)&&I===2?k=-S:k=S):k=0,u[1].push(k),2*g===A+1&&(g=1-g),2*y===k+1&&(y=1-y),f.iushrn(1),l.iushrn(1)}return u}e.getJSF=n;function o(f,l,u){var g="_"+l;f.prototype[l]=function(){return this[g]!==void 0?this[g]:this[g]=u.call(this)}}e.cachedProperty=o;function p(f){return typeof f=="string"?e.toArray(f,"hex"):f}e.parseBytes=p;function c(f){return new t(f,"hex","le")}e.intFromLE=c}(utils$2)),utils$2}var curve={},base$1,hasRequiredBase$1;function requireBase$1(){if(hasRequiredBase$1)return base$1;hasRequiredBase$1=1;var d=requireBn$1(),e=requireUtils$1(),t=e.getNAF,r=e.getJSF,s=e.assert;function a(o,p){this.type=o,this.p=new d(p.p,16),this.red=p.prime?d.red(p.prime):d.mont(this.p),this.zero=new d(0).toRed(this.red),this.one=new d(1).toRed(this.red),this.two=new d(2).toRed(this.red),this.n=p.n&&new d(p.n,16),this.g=p.g&&this.pointFromJSON(p.g,p.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var c=this.n&&this.p.div(this.n);!c||c.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}base$1=a,a.prototype.point=function(){throw new Error("Not implemented")},a.prototype.validate=function(){throw new Error("Not implemented")},a.prototype._fixedNafMul=function(p,c){s(p.precomputed);var f=p._getDoubles(),l=t(c,1,this._bitLength),u=(1<<f.step+1)-(f.step%2===0?2:1);u/=3;var g=[],y,b;for(y=0;y<l.length;y+=f.step){b=0;for(var I=y+f.step-1;I>=y;I--)b=(b<<1)+l[I];g.push(b)}for(var S=this.jpoint(null,null,null),A=this.jpoint(null,null,null),k=u;k>0;k--){for(y=0;y<g.length;y++)b=g[y],b===k?A=A.mixedAdd(f.points[y]):b===-k&&(A=A.mixedAdd(f.points[y].neg()));S=S.add(A)}return S.toP()},a.prototype._wnafMul=function(p,c){var f=4,l=p._getNAFPoints(f);f=l.wnd;for(var u=l.points,g=t(c,f,this._bitLength),y=this.jpoint(null,null,null),b=g.length-1;b>=0;b--){for(var I=0;b>=0&&g[b]===0;b--)I++;if(b>=0&&I++,y=y.dblp(I),b<0)break;var S=g[b];s(S!==0),p.type==="affine"?S>0?y=y.mixedAdd(u[S-1>>1]):y=y.mixedAdd(u[-S-1>>1].neg()):S>0?y=y.add(u[S-1>>1]):y=y.add(u[-S-1>>1].neg())}return p.type==="affine"?y.toP():y},a.prototype._wnafMulAdd=function(p,c,f,l,u){var g=this._wnafT1,y=this._wnafT2,b=this._wnafT3,I=0,S,A,k;for(S=0;S<l;S++){k=c[S];var T=k._getNAFPoints(p);g[S]=T.wnd,y[S]=T.points}for(S=l-1;S>=1;S-=2){var O=S-1,$=S;if(g[O]!==1||g[$]!==1){b[O]=t(f[O],g[O],this._bitLength),b[$]=t(f[$],g[$],this._bitLength),I=Math.max(b[O].length,I),I=Math.max(b[$].length,I);continue}var K=[c[O],null,null,c[$]];c[O].y.cmp(c[$].y)===0?(K[1]=c[O].add(c[$]),K[2]=c[O].toJ().mixedAdd(c[$].neg())):c[O].y.cmp(c[$].y.redNeg())===0?(K[1]=c[O].toJ().mixedAdd(c[$]),K[2]=c[O].add(c[$].neg())):(K[1]=c[O].toJ().mixedAdd(c[$]),K[2]=c[O].toJ().mixedAdd(c[$].neg()));var ee=[-3,-1,-5,-7,0,7,5,1,3],Q=r(f[O],f[$]);for(I=Math.max(Q[0].length,I),b[O]=new Array(I),b[$]=new Array(I),A=0;A<I;A++){var te=Q[0][A]|0,N=Q[1][A]|0;b[O][A]=ee[(te+1)*3+(N+1)],b[$][A]=0,y[O]=K}}var m=this.jpoint(null,null,null),_=this._wnafT4;for(S=I;S>=0;S--){for(var h=0;S>=0;){var v=!0;for(A=0;A<l;A++)_[A]=b[A][S]|0,_[A]!==0&&(v=!1);if(!v)break;h++,S--}if(S>=0&&h++,m=m.dblp(h),S<0)break;for(A=0;A<l;A++){var E=_[A];E!==0&&(E>0?k=y[A][E-1>>1]:E<0&&(k=y[A][-E-1>>1].neg()),k.type==="affine"?m=m.mixedAdd(k):m=m.add(k))}}for(S=0;S<l;S++)y[S]=null;return u?m:m.toP()};function n(o,p){this.curve=o,this.type=p,this.precomputed=null}return a.BasePoint=n,n.prototype.eq=function(){throw new Error("Not implemented")},n.prototype.validate=function(){return this.curve.validate(this)},a.prototype.decodePoint=function(p,c){p=e.toArray(p,c);var f=this.p.byteLength();if((p[0]===4||p[0]===6||p[0]===7)&&p.length-1===2*f){p[0]===6?s(p[p.length-1]%2===0):p[0]===7&&s(p[p.length-1]%2===1);var l=this.point(p.slice(1,1+f),p.slice(1+f,1+2*f));return l}else if((p[0]===2||p[0]===3)&&p.length-1===f)return this.pointFromX(p.slice(1,1+f),p[0]===3);throw new Error("Unknown point format")},n.prototype.encodeCompressed=function(p){return this.encode(p,!0)},n.prototype._encode=function(p){var c=this.curve.p.byteLength(),f=this.getX().toArray("be",c);return p?[this.getY().isEven()?2:3].concat(f):[4].concat(f,this.getY().toArray("be",c))},n.prototype.encode=function(p,c){return e.encode(this._encode(c),p)},n.prototype.precompute=function(p){if(this.precomputed)return this;var c={doubles:null,naf:null,beta:null};return c.naf=this._getNAFPoints(8),c.doubles=this._getDoubles(4,p),c.beta=this._getBeta(),this.precomputed=c,this},n.prototype._hasDoubles=function(p){if(!this.precomputed)return!1;var c=this.precomputed.doubles;return c?c.points.length>=Math.ceil((p.bitLength()+1)/c.step):!1},n.prototype._getDoubles=function(p,c){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var f=[this],l=this,u=0;u<c;u+=p){for(var g=0;g<p;g++)l=l.dbl();f.push(l)}return{step:p,points:f}},n.prototype._getNAFPoints=function(p){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var c=[this],f=(1<<p)-1,l=f===1?null:this.dbl(),u=1;u<f;u++)c[u]=c[u-1].add(l);return{wnd:p,points:c}},n.prototype._getBeta=function(){return null},n.prototype.dblp=function(p){for(var c=this,f=0;f<p;f++)c=c.dbl();return c},base$1}var short,hasRequiredShort;function requireShort(){if(hasRequiredShort)return short;hasRequiredShort=1;var d=requireUtils$1(),e=requireBn$1(),t=requireInherits_browser(),r=requireBase$1(),s=d.assert;function a(p){r.call(this,"short",p),this.a=new e(p.a,16).toRed(this.red),this.b=new e(p.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(p),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}t(a,r),short=a,a.prototype._getEndomorphism=function(c){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var f,l;if(c.beta)f=new e(c.beta,16).toRed(this.red);else{var u=this._getEndoRoots(this.p);f=u[0].cmp(u[1])<0?u[0]:u[1],f=f.toRed(this.red)}if(c.lambda)l=new e(c.lambda,16);else{var g=this._getEndoRoots(this.n);this.g.mul(g[0]).x.cmp(this.g.x.redMul(f))===0?l=g[0]:(l=g[1],s(this.g.mul(l).x.cmp(this.g.x.redMul(f))===0))}var y;return c.basis?y=c.basis.map(function(b){return{a:new e(b.a,16),b:new e(b.b,16)}}):y=this._getEndoBasis(l),{beta:f,lambda:l,basis:y}}},a.prototype._getEndoRoots=function(c){var f=c===this.p?this.red:e.mont(c),l=new e(2).toRed(f).redInvm(),u=l.redNeg(),g=new e(3).toRed(f).redNeg().redSqrt().redMul(l),y=u.redAdd(g).fromRed(),b=u.redSub(g).fromRed();return[y,b]},a.prototype._getEndoBasis=function(c){for(var f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=c,u=this.n.clone(),g=new e(1),y=new e(0),b=new e(0),I=new e(1),S,A,k,T,O,$,K,ee=0,Q,te;l.cmpn(0)!==0;){var N=u.div(l);Q=u.sub(N.mul(l)),te=b.sub(N.mul(g));var m=I.sub(N.mul(y));if(!k&&Q.cmp(f)<0)S=K.neg(),A=g,k=Q.neg(),T=te;else if(k&&++ee===2)break;K=Q,u=l,l=Q,b=g,g=te,I=y,y=m}O=Q.neg(),$=te;var _=k.sqr().add(T.sqr()),h=O.sqr().add($.sqr());return h.cmp(_)>=0&&(O=S,$=A),k.negative&&(k=k.neg(),T=T.neg()),O.negative&&(O=O.neg(),$=$.neg()),[{a:k,b:T},{a:O,b:$}]},a.prototype._endoSplit=function(c){var f=this.endo.basis,l=f[0],u=f[1],g=u.b.mul(c).divRound(this.n),y=l.b.neg().mul(c).divRound(this.n),b=g.mul(l.a),I=y.mul(u.a),S=g.mul(l.b),A=y.mul(u.b),k=c.sub(b).sub(I),T=S.add(A).neg();return{k1:k,k2:T}},a.prototype.pointFromX=function(c,f){c=new e(c,16),c.red||(c=c.toRed(this.red));var l=c.redSqr().redMul(c).redIAdd(c.redMul(this.a)).redIAdd(this.b),u=l.redSqrt();if(u.redSqr().redSub(l).cmp(this.zero)!==0)throw new Error("invalid point");var g=u.fromRed().isOdd();return(f&&!g||!f&&g)&&(u=u.redNeg()),this.point(c,u)},a.prototype.validate=function(c){if(c.inf)return!0;var f=c.x,l=c.y,u=this.a.redMul(f),g=f.redSqr().redMul(f).redIAdd(u).redIAdd(this.b);return l.redSqr().redISub(g).cmpn(0)===0},a.prototype._endoWnafMulAdd=function(c,f,l){for(var u=this._endoWnafT1,g=this._endoWnafT2,y=0;y<c.length;y++){var b=this._endoSplit(f[y]),I=c[y],S=I._getBeta();b.k1.negative&&(b.k1.ineg(),I=I.neg(!0)),b.k2.negative&&(b.k2.ineg(),S=S.neg(!0)),u[y*2]=I,u[y*2+1]=S,g[y*2]=b.k1,g[y*2+1]=b.k2}for(var A=this._wnafMulAdd(1,u,g,y*2,l),k=0;k<y*2;k++)u[k]=null,g[k]=null;return A};function n(p,c,f,l){r.BasePoint.call(this,p,"affine"),c===null&&f===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new e(c,16),this.y=new e(f,16),l&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}t(n,r.BasePoint),a.prototype.point=function(c,f,l){return new n(this,c,f,l)},a.prototype.pointFromJSON=function(c,f){return n.fromJSON(this,c,f)},n.prototype._getBeta=function(){if(this.curve.endo){var c=this.precomputed;if(c&&c.beta)return c.beta;var f=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(c){var l=this.curve,u=function(g){return l.point(g.x.redMul(l.endo.beta),g.y)};c.beta=f,f.precomputed={beta:null,naf:c.naf&&{wnd:c.naf.wnd,points:c.naf.points.map(u)},doubles:c.doubles&&{step:c.doubles.step,points:c.doubles.points.map(u)}}}return f}},n.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},n.fromJSON=function(c,f,l){typeof f=="string"&&(f=JSON.parse(f));var u=c.point(f[0],f[1],l);if(!f[2])return u;function g(b){return c.point(b[0],b[1],l)}var y=f[2];return u.precomputed={beta:null,doubles:y.doubles&&{step:y.doubles.step,points:[u].concat(y.doubles.points.map(g))},naf:y.naf&&{wnd:y.naf.wnd,points:[u].concat(y.naf.points.map(g))}},u},n.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},n.prototype.isInfinity=function(){return this.inf},n.prototype.add=function(c){if(this.inf)return c;if(c.inf)return this;if(this.eq(c))return this.dbl();if(this.neg().eq(c))return this.curve.point(null,null);if(this.x.cmp(c.x)===0)return this.curve.point(null,null);var f=this.y.redSub(c.y);f.cmpn(0)!==0&&(f=f.redMul(this.x.redSub(c.x).redInvm()));var l=f.redSqr().redISub(this.x).redISub(c.x),u=f.redMul(this.x.redSub(l)).redISub(this.y);return this.curve.point(l,u)},n.prototype.dbl=function(){if(this.inf)return this;var c=this.y.redAdd(this.y);if(c.cmpn(0)===0)return this.curve.point(null,null);var f=this.curve.a,l=this.x.redSqr(),u=c.redInvm(),g=l.redAdd(l).redIAdd(l).redIAdd(f).redMul(u),y=g.redSqr().redISub(this.x.redAdd(this.x)),b=g.redMul(this.x.redSub(y)).redISub(this.y);return this.curve.point(y,b)},n.prototype.getX=function(){return this.x.fromRed()},n.prototype.getY=function(){return this.y.fromRed()},n.prototype.mul=function(c){return c=new e(c,16),this.isInfinity()?this:this._hasDoubles(c)?this.curve._fixedNafMul(this,c):this.curve.endo?this.curve._endoWnafMulAdd([this],[c]):this.curve._wnafMul(this,c)},n.prototype.mulAdd=function(c,f,l){var u=[this,f],g=[c,l];return this.curve.endo?this.curve._endoWnafMulAdd(u,g):this.curve._wnafMulAdd(1,u,g,2)},n.prototype.jmulAdd=function(c,f,l){var u=[this,f],g=[c,l];return this.curve.endo?this.curve._endoWnafMulAdd(u,g,!0):this.curve._wnafMulAdd(1,u,g,2,!0)},n.prototype.eq=function(c){return this===c||this.inf===c.inf&&(this.inf||this.x.cmp(c.x)===0&&this.y.cmp(c.y)===0)},n.prototype.neg=function(c){if(this.inf)return this;var f=this.curve.point(this.x,this.y.redNeg());if(c&&this.precomputed){var l=this.precomputed,u=function(g){return g.neg()};f.precomputed={naf:l.naf&&{wnd:l.naf.wnd,points:l.naf.points.map(u)},doubles:l.doubles&&{step:l.doubles.step,points:l.doubles.points.map(u)}}}return f},n.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var c=this.curve.jpoint(this.x,this.y,this.curve.one);return c};function o(p,c,f,l){r.BasePoint.call(this,p,"jacobian"),c===null&&f===null&&l===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new e(0)):(this.x=new e(c,16),this.y=new e(f,16),this.z=new e(l,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return t(o,r.BasePoint),a.prototype.jpoint=function(c,f,l){return new o(this,c,f,l)},o.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var c=this.z.redInvm(),f=c.redSqr(),l=this.x.redMul(f),u=this.y.redMul(f).redMul(c);return this.curve.point(l,u)},o.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},o.prototype.add=function(c){if(this.isInfinity())return c;if(c.isInfinity())return this;var f=c.z.redSqr(),l=this.z.redSqr(),u=this.x.redMul(f),g=c.x.redMul(l),y=this.y.redMul(f.redMul(c.z)),b=c.y.redMul(l.redMul(this.z)),I=u.redSub(g),S=y.redSub(b);if(I.cmpn(0)===0)return S.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var A=I.redSqr(),k=A.redMul(I),T=u.redMul(A),O=S.redSqr().redIAdd(k).redISub(T).redISub(T),$=S.redMul(T.redISub(O)).redISub(y.redMul(k)),K=this.z.redMul(c.z).redMul(I);return this.curve.jpoint(O,$,K)},o.prototype.mixedAdd=function(c){if(this.isInfinity())return c.toJ();if(c.isInfinity())return this;var f=this.z.redSqr(),l=this.x,u=c.x.redMul(f),g=this.y,y=c.y.redMul(f).redMul(this.z),b=l.redSub(u),I=g.redSub(y);if(b.cmpn(0)===0)return I.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var S=b.redSqr(),A=S.redMul(b),k=l.redMul(S),T=I.redSqr().redIAdd(A).redISub(k).redISub(k),O=I.redMul(k.redISub(T)).redISub(g.redMul(A)),$=this.z.redMul(b);return this.curve.jpoint(T,O,$)},o.prototype.dblp=function(c){if(c===0)return this;if(this.isInfinity())return this;if(!c)return this.dbl();var f;if(this.curve.zeroA||this.curve.threeA){var l=this;for(f=0;f<c;f++)l=l.dbl();return l}var u=this.curve.a,g=this.curve.tinv,y=this.x,b=this.y,I=this.z,S=I.redSqr().redSqr(),A=b.redAdd(b);for(f=0;f<c;f++){var k=y.redSqr(),T=A.redSqr(),O=T.redSqr(),$=k.redAdd(k).redIAdd(k).redIAdd(u.redMul(S)),K=y.redMul(T),ee=$.redSqr().redISub(K.redAdd(K)),Q=K.redISub(ee),te=$.redMul(Q);te=te.redIAdd(te).redISub(O);var N=A.redMul(I);f+1<c&&(S=S.redMul(O)),y=ee,I=N,A=te}return this.curve.jpoint(y,A.redMul(g),I)},o.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},o.prototype._zeroDbl=function(){var c,f,l;if(this.zOne){var u=this.x.redSqr(),g=this.y.redSqr(),y=g.redSqr(),b=this.x.redAdd(g).redSqr().redISub(u).redISub(y);b=b.redIAdd(b);var I=u.redAdd(u).redIAdd(u),S=I.redSqr().redISub(b).redISub(b),A=y.redIAdd(y);A=A.redIAdd(A),A=A.redIAdd(A),c=S,f=I.redMul(b.redISub(S)).redISub(A),l=this.y.redAdd(this.y)}else{var k=this.x.redSqr(),T=this.y.redSqr(),O=T.redSqr(),$=this.x.redAdd(T).redSqr().redISub(k).redISub(O);$=$.redIAdd($);var K=k.redAdd(k).redIAdd(k),ee=K.redSqr(),Q=O.redIAdd(O);Q=Q.redIAdd(Q),Q=Q.redIAdd(Q),c=ee.redISub($).redISub($),f=K.redMul($.redISub(c)).redISub(Q),l=this.y.redMul(this.z),l=l.redIAdd(l)}return this.curve.jpoint(c,f,l)},o.prototype._threeDbl=function(){var c,f,l;if(this.zOne){var u=this.x.redSqr(),g=this.y.redSqr(),y=g.redSqr(),b=this.x.redAdd(g).redSqr().redISub(u).redISub(y);b=b.redIAdd(b);var I=u.redAdd(u).redIAdd(u).redIAdd(this.curve.a),S=I.redSqr().redISub(b).redISub(b);c=S;var A=y.redIAdd(y);A=A.redIAdd(A),A=A.redIAdd(A),f=I.redMul(b.redISub(S)).redISub(A),l=this.y.redAdd(this.y)}else{var k=this.z.redSqr(),T=this.y.redSqr(),O=this.x.redMul(T),$=this.x.redSub(k).redMul(this.x.redAdd(k));$=$.redAdd($).redIAdd($);var K=O.redIAdd(O);K=K.redIAdd(K);var ee=K.redAdd(K);c=$.redSqr().redISub(ee),l=this.y.redAdd(this.z).redSqr().redISub(T).redISub(k);var Q=T.redSqr();Q=Q.redIAdd(Q),Q=Q.redIAdd(Q),Q=Q.redIAdd(Q),f=$.redMul(K.redISub(c)).redISub(Q)}return this.curve.jpoint(c,f,l)},o.prototype._dbl=function(){var c=this.curve.a,f=this.x,l=this.y,u=this.z,g=u.redSqr().redSqr(),y=f.redSqr(),b=l.redSqr(),I=y.redAdd(y).redIAdd(y).redIAdd(c.redMul(g)),S=f.redAdd(f);S=S.redIAdd(S);var A=S.redMul(b),k=I.redSqr().redISub(A.redAdd(A)),T=A.redISub(k),O=b.redSqr();O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O);var $=I.redMul(T).redISub(O),K=l.redAdd(l).redMul(u);return this.curve.jpoint(k,$,K)},o.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var c=this.x.redSqr(),f=this.y.redSqr(),l=this.z.redSqr(),u=f.redSqr(),g=c.redAdd(c).redIAdd(c),y=g.redSqr(),b=this.x.redAdd(f).redSqr().redISub(c).redISub(u);b=b.redIAdd(b),b=b.redAdd(b).redIAdd(b),b=b.redISub(y);var I=b.redSqr(),S=u.redIAdd(u);S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var A=g.redIAdd(b).redSqr().redISub(y).redISub(I).redISub(S),k=f.redMul(A);k=k.redIAdd(k),k=k.redIAdd(k);var T=this.x.redMul(I).redISub(k);T=T.redIAdd(T),T=T.redIAdd(T);var O=this.y.redMul(A.redMul(S.redISub(A)).redISub(b.redMul(I)));O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O);var $=this.z.redAdd(b).redSqr().redISub(l).redISub(I);return this.curve.jpoint(T,O,$)},o.prototype.mul=function(c,f){return c=new e(c,f),this.curve._wnafMul(this,c)},o.prototype.eq=function(c){if(c.type==="affine")return this.eq(c.toJ());if(this===c)return!0;var f=this.z.redSqr(),l=c.z.redSqr();if(this.x.redMul(l).redISub(c.x.redMul(f)).cmpn(0)!==0)return!1;var u=f.redMul(this.z),g=l.redMul(c.z);return this.y.redMul(g).redISub(c.y.redMul(u)).cmpn(0)===0},o.prototype.eqXToP=function(c){var f=this.z.redSqr(),l=c.toRed(this.curve.red).redMul(f);if(this.x.cmp(l)===0)return!0;for(var u=c.clone(),g=this.curve.redN.redMul(f);;){if(u.iadd(this.curve.n),u.cmp(this.curve.p)>=0)return!1;if(l.redIAdd(g),this.x.cmp(l)===0)return!0}},o.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},o.prototype.isInfinity=function(){return this.z.cmpn(0)===0},short}var mont,hasRequiredMont;function requireMont(){if(hasRequiredMont)return mont;hasRequiredMont=1;var d=requireBn$1(),e=requireInherits_browser(),t=requireBase$1(),r=requireUtils$1();function s(n){t.call(this,"mont",n),this.a=new d(n.a,16).toRed(this.red),this.b=new d(n.b,16).toRed(this.red),this.i4=new d(4).toRed(this.red).redInvm(),this.two=new d(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}e(s,t),mont=s,s.prototype.validate=function(o){var p=o.normalize().x,c=p.redSqr(),f=c.redMul(p).redAdd(c.redMul(this.a)).redAdd(p),l=f.redSqrt();return l.redSqr().cmp(f)===0};function a(n,o,p){t.BasePoint.call(this,n,"projective"),o===null&&p===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new d(o,16),this.z=new d(p,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return e(a,t.BasePoint),s.prototype.decodePoint=function(o,p){return this.point(r.toArray(o,p),1)},s.prototype.point=function(o,p){return new a(this,o,p)},s.prototype.pointFromJSON=function(o){return a.fromJSON(this,o)},a.prototype.precompute=function(){},a.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},a.fromJSON=function(o,p){return new a(o,p[0],p[1]||o.one)},a.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},a.prototype.isInfinity=function(){return this.z.cmpn(0)===0},a.prototype.dbl=function(){var o=this.x.redAdd(this.z),p=o.redSqr(),c=this.x.redSub(this.z),f=c.redSqr(),l=p.redSub(f),u=p.redMul(f),g=l.redMul(f.redAdd(this.curve.a24.redMul(l)));return this.curve.point(u,g)},a.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},a.prototype.diffAdd=function(o,p){var c=this.x.redAdd(this.z),f=this.x.redSub(this.z),l=o.x.redAdd(o.z),u=o.x.redSub(o.z),g=u.redMul(c),y=l.redMul(f),b=p.z.redMul(g.redAdd(y).redSqr()),I=p.x.redMul(g.redISub(y).redSqr());return this.curve.point(b,I)},a.prototype.mul=function(o){for(var p=o.clone(),c=this,f=this.curve.point(null,null),l=this,u=[];p.cmpn(0)!==0;p.iushrn(1))u.push(p.andln(1));for(var g=u.length-1;g>=0;g--)u[g]===0?(c=c.diffAdd(f,l),f=f.dbl()):(f=c.diffAdd(f,l),c=c.dbl());return f},a.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},a.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},a.prototype.eq=function(o){return this.getX().cmp(o.getX())===0},a.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},a.prototype.getX=function(){return this.normalize(),this.x.fromRed()},mont}var edwards,hasRequiredEdwards;function requireEdwards(){if(hasRequiredEdwards)return edwards;hasRequiredEdwards=1;var d=requireUtils$1(),e=requireBn$1(),t=requireInherits_browser(),r=requireBase$1(),s=d.assert;function a(o){this.twisted=(o.a|0)!==1,this.mOneA=this.twisted&&(o.a|0)===-1,this.extended=this.mOneA,r.call(this,"edwards",o),this.a=new e(o.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new e(o.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new e(o.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(o.c|0)===1}t(a,r),edwards=a,a.prototype._mulA=function(p){return this.mOneA?p.redNeg():this.a.redMul(p)},a.prototype._mulC=function(p){return this.oneC?p:this.c.redMul(p)},a.prototype.jpoint=function(p,c,f,l){return this.point(p,c,f,l)},a.prototype.pointFromX=function(p,c){p=new e(p,16),p.red||(p=p.toRed(this.red));var f=p.redSqr(),l=this.c2.redSub(this.a.redMul(f)),u=this.one.redSub(this.c2.redMul(this.d).redMul(f)),g=l.redMul(u.redInvm()),y=g.redSqrt();if(y.redSqr().redSub(g).cmp(this.zero)!==0)throw new Error("invalid point");var b=y.fromRed().isOdd();return(c&&!b||!c&&b)&&(y=y.redNeg()),this.point(p,y)},a.prototype.pointFromY=function(p,c){p=new e(p,16),p.red||(p=p.toRed(this.red));var f=p.redSqr(),l=f.redSub(this.c2),u=f.redMul(this.d).redMul(this.c2).redSub(this.a),g=l.redMul(u.redInvm());if(g.cmp(this.zero)===0){if(c)throw new Error("invalid point");return this.point(this.zero,p)}var y=g.redSqrt();if(y.redSqr().redSub(g).cmp(this.zero)!==0)throw new Error("invalid point");return y.fromRed().isOdd()!==c&&(y=y.redNeg()),this.point(y,p)},a.prototype.validate=function(p){if(p.isInfinity())return!0;p.normalize();var c=p.x.redSqr(),f=p.y.redSqr(),l=c.redMul(this.a).redAdd(f),u=this.c2.redMul(this.one.redAdd(this.d.redMul(c).redMul(f)));return l.cmp(u)===0};function n(o,p,c,f,l){r.BasePoint.call(this,o,"projective"),p===null&&c===null&&f===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new e(p,16),this.y=new e(c,16),this.z=f?new e(f,16):this.curve.one,this.t=l&&new e(l,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return t(n,r.BasePoint),a.prototype.pointFromJSON=function(p){return n.fromJSON(this,p)},a.prototype.point=function(p,c,f,l){return new n(this,p,c,f,l)},n.fromJSON=function(p,c){return new n(p,c[0],c[1],c[2])},n.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},n.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},n.prototype._extDbl=function(){var p=this.x.redSqr(),c=this.y.redSqr(),f=this.z.redSqr();f=f.redIAdd(f);var l=this.curve._mulA(p),u=this.x.redAdd(this.y).redSqr().redISub(p).redISub(c),g=l.redAdd(c),y=g.redSub(f),b=l.redSub(c),I=u.redMul(y),S=g.redMul(b),A=u.redMul(b),k=y.redMul(g);return this.curve.point(I,S,k,A)},n.prototype._projDbl=function(){var p=this.x.redAdd(this.y).redSqr(),c=this.x.redSqr(),f=this.y.redSqr(),l,u,g,y,b,I;if(this.curve.twisted){y=this.curve._mulA(c);var S=y.redAdd(f);this.zOne?(l=p.redSub(c).redSub(f).redMul(S.redSub(this.curve.two)),u=S.redMul(y.redSub(f)),g=S.redSqr().redSub(S).redSub(S)):(b=this.z.redSqr(),I=S.redSub(b).redISub(b),l=p.redSub(c).redISub(f).redMul(I),u=S.redMul(y.redSub(f)),g=S.redMul(I))}else y=c.redAdd(f),b=this.curve._mulC(this.z).redSqr(),I=y.redSub(b).redSub(b),l=this.curve._mulC(p.redISub(y)).redMul(I),u=this.curve._mulC(y).redMul(c.redISub(f)),g=y.redMul(I);return this.curve.point(l,u,g)},n.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},n.prototype._extAdd=function(p){var c=this.y.redSub(this.x).redMul(p.y.redSub(p.x)),f=this.y.redAdd(this.x).redMul(p.y.redAdd(p.x)),l=this.t.redMul(this.curve.dd).redMul(p.t),u=this.z.redMul(p.z.redAdd(p.z)),g=f.redSub(c),y=u.redSub(l),b=u.redAdd(l),I=f.redAdd(c),S=g.redMul(y),A=b.redMul(I),k=g.redMul(I),T=y.redMul(b);return this.curve.point(S,A,T,k)},n.prototype._projAdd=function(p){var c=this.z.redMul(p.z),f=c.redSqr(),l=this.x.redMul(p.x),u=this.y.redMul(p.y),g=this.curve.d.redMul(l).redMul(u),y=f.redSub(g),b=f.redAdd(g),I=this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(l).redISub(u),S=c.redMul(y).redMul(I),A,k;return this.curve.twisted?(A=c.redMul(b).redMul(u.redSub(this.curve._mulA(l))),k=y.redMul(b)):(A=c.redMul(b).redMul(u.redSub(l)),k=this.curve._mulC(y).redMul(b)),this.curve.point(S,A,k)},n.prototype.add=function(p){return this.isInfinity()?p:p.isInfinity()?this:this.curve.extended?this._extAdd(p):this._projAdd(p)},n.prototype.mul=function(p){return this._hasDoubles(p)?this.curve._fixedNafMul(this,p):this.curve._wnafMul(this,p)},n.prototype.mulAdd=function(p,c,f){return this.curve._wnafMulAdd(1,[this,c],[p,f],2,!1)},n.prototype.jmulAdd=function(p,c,f){return this.curve._wnafMulAdd(1,[this,c],[p,f],2,!0)},n.prototype.normalize=function(){if(this.zOne)return this;var p=this.z.redInvm();return this.x=this.x.redMul(p),this.y=this.y.redMul(p),this.t&&(this.t=this.t.redMul(p)),this.z=this.curve.one,this.zOne=!0,this},n.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},n.prototype.getX=function(){return this.normalize(),this.x.fromRed()},n.prototype.getY=function(){return this.normalize(),this.y.fromRed()},n.prototype.eq=function(p){return this===p||this.getX().cmp(p.getX())===0&&this.getY().cmp(p.getY())===0},n.prototype.eqXToP=function(p){var c=p.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(c)===0)return!0;for(var f=p.clone(),l=this.curve.redN.redMul(this.z);;){if(f.iadd(this.curve.n),f.cmp(this.curve.p)>=0)return!1;if(c.redIAdd(l),this.x.cmp(c)===0)return!0}},n.prototype.toP=n.prototype.normalize,n.prototype.mixedAdd=n.prototype.add,edwards}var hasRequiredCurve;function requireCurve(){return hasRequiredCurve||(hasRequiredCurve=1,function(d){var e=d;e.base=requireBase$1(),e.short=requireShort(),e.mont=requireMont(),e.edwards=requireEdwards()}(curve)),curve}var curves={},hash={},utils={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;var d=requireMinimalisticAssert(),e=requireInherits_browser();utils.inherits=e;function t(m,_){return(m.charCodeAt(_)&64512)!==55296||_<0||_+1>=m.length?!1:(m.charCodeAt(_+1)&64512)===56320}function r(m,_){if(Array.isArray(m))return m.slice();if(!m)return[];var h=[];if(typeof m=="string")if(_){if(_==="hex")for(m=m.replace(/[^a-z0-9]+/ig,""),m.length%2!==0&&(m="0"+m),E=0;E<m.length;E+=2)h.push(parseInt(m[E]+m[E+1],16))}else for(var v=0,E=0;E<m.length;E++){var M=m.charCodeAt(E);M<128?h[v++]=M:M<2048?(h[v++]=M>>6|192,h[v++]=M&63|128):t(m,E)?(M=65536+((M&1023)<<10)+(m.charCodeAt(++E)&1023),h[v++]=M>>18|240,h[v++]=M>>12&63|128,h[v++]=M>>6&63|128,h[v++]=M&63|128):(h[v++]=M>>12|224,h[v++]=M>>6&63|128,h[v++]=M&63|128)}else for(E=0;E<m.length;E++)h[E]=m[E]|0;return h}utils.toArray=r;function s(m){for(var _="",h=0;h<m.length;h++)_+=o(m[h].toString(16));return _}utils.toHex=s;function a(m){var _=m>>>24|m>>>8&65280|m<<8&16711680|(m&255)<<24;return _>>>0}utils.htonl=a;function n(m,_){for(var h="",v=0;v<m.length;v++){var E=m[v];_==="little"&&(E=a(E)),h+=p(E.toString(16))}return h}utils.toHex32=n;function o(m){return m.length===1?"0"+m:m}utils.zero2=o;function p(m){return m.length===7?"0"+m:m.length===6?"00"+m:m.length===5?"000"+m:m.length===4?"0000"+m:m.length===3?"00000"+m:m.length===2?"000000"+m:m.length===1?"0000000"+m:m}utils.zero8=p;function c(m,_,h,v){var E=h-_;d(E%4===0);for(var M=new Array(E/4),P=0,D=_;P<M.length;P++,D+=4){var w;v==="big"?w=m[D]<<24|m[D+1]<<16|m[D+2]<<8|m[D+3]:w=m[D+3]<<24|m[D+2]<<16|m[D+1]<<8|m[D],M[P]=w>>>0}return M}utils.join32=c;function f(m,_){for(var h=new Array(m.length*4),v=0,E=0;v<m.length;v++,E+=4){var M=m[v];_==="big"?(h[E]=M>>>24,h[E+1]=M>>>16&255,h[E+2]=M>>>8&255,h[E+3]=M&255):(h[E+3]=M>>>24,h[E+2]=M>>>16&255,h[E+1]=M>>>8&255,h[E]=M&255)}return h}utils.split32=f;function l(m,_){return m>>>_|m<<32-_}utils.rotr32=l;function u(m,_){return m<<_|m>>>32-_}utils.rotl32=u;function g(m,_){return m+_>>>0}utils.sum32=g;function y(m,_,h){return m+_+h>>>0}utils.sum32_3=y;function b(m,_,h,v){return m+_+h+v>>>0}utils.sum32_4=b;function I(m,_,h,v,E){return m+_+h+v+E>>>0}utils.sum32_5=I;function S(m,_,h,v){var E=m[_],M=m[_+1],P=v+M>>>0,D=(P<v?1:0)+h+E;m[_]=D>>>0,m[_+1]=P}utils.sum64=S;function A(m,_,h,v){var E=_+v>>>0,M=(E<_?1:0)+m+h;return M>>>0}utils.sum64_hi=A;function k(m,_,h,v){var E=_+v;return E>>>0}utils.sum64_lo=k;function T(m,_,h,v,E,M,P,D){var w=0,B=_;B=B+v>>>0,w+=B<_?1:0,B=B+M>>>0,w+=B<M?1:0,B=B+D>>>0,w+=B<D?1:0;var x=m+h+E+P+w;return x>>>0}utils.sum64_4_hi=T;function O(m,_,h,v,E,M,P,D){var w=_+v+M+D;return w>>>0}utils.sum64_4_lo=O;function $(m,_,h,v,E,M,P,D,w,B){var x=0,U=_;U=U+v>>>0,x+=U<_?1:0,U=U+M>>>0,x+=U<M?1:0,U=U+D>>>0,x+=U<D?1:0,U=U+B>>>0,x+=U<B?1:0;var X=m+h+E+P+w+x;return X>>>0}utils.sum64_5_hi=$;function K(m,_,h,v,E,M,P,D,w,B){var x=_+v+M+D+B;return x>>>0}utils.sum64_5_lo=K;function ee(m,_,h){var v=_<<32-h|m>>>h;return v>>>0}utils.rotr64_hi=ee;function Q(m,_,h){var v=m<<32-h|_>>>h;return v>>>0}utils.rotr64_lo=Q;function te(m,_,h){return m>>>h}utils.shr64_hi=te;function N(m,_,h){var v=m<<32-h|_>>>h;return v>>>0}return utils.shr64_lo=N,utils}var common$1={},hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$1;hasRequiredCommon$1=1;var d=requireUtils(),e=requireMinimalisticAssert();function t(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return common$1.BlockHash=t,t.prototype.update=function(s,a){if(s=d.toArray(s,a),this.pending?this.pending=this.pending.concat(s):this.pending=s,this.pendingTotal+=s.length,this.pending.length>=this._delta8){s=this.pending;var n=s.length%this._delta8;this.pending=s.slice(s.length-n,s.length),this.pending.length===0&&(this.pending=null),s=d.join32(s,0,s.length-n,this.endian);for(var o=0;o<s.length;o+=this._delta32)this._update(s,o,o+this._delta32)}return this},t.prototype.digest=function(s){return this.update(this._pad()),e(this.pending===null),this._digest(s)},t.prototype._pad=function(){var s=this.pendingTotal,a=this._delta8,n=a-(s+this.padLength)%a,o=new Array(n+this.padLength);o[0]=128;for(var p=1;p<n;p++)o[p]=0;if(s<<=3,this.endian==="big"){for(var c=8;c<this.padLength;c++)o[p++]=0;o[p++]=0,o[p++]=0,o[p++]=0,o[p++]=0,o[p++]=s>>>24&255,o[p++]=s>>>16&255,o[p++]=s>>>8&255,o[p++]=s&255}else for(o[p++]=s&255,o[p++]=s>>>8&255,o[p++]=s>>>16&255,o[p++]=s>>>24&255,o[p++]=0,o[p++]=0,o[p++]=0,o[p++]=0,c=8;c<this.padLength;c++)o[p++]=0;return o},common$1}var sha={},common={},hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;var d=requireUtils(),e=d.rotr32;function t(f,l,u,g){if(f===0)return r(l,u,g);if(f===1||f===3)return a(l,u,g);if(f===2)return s(l,u,g)}common.ft_1=t;function r(f,l,u){return f&l^~f&u}common.ch32=r;function s(f,l,u){return f&l^f&u^l&u}common.maj32=s;function a(f,l,u){return f^l^u}common.p32=a;function n(f){return e(f,2)^e(f,13)^e(f,22)}common.s0_256=n;function o(f){return e(f,6)^e(f,11)^e(f,25)}common.s1_256=o;function p(f){return e(f,7)^e(f,18)^f>>>3}common.g0_256=p;function c(f){return e(f,17)^e(f,19)^f>>>10}return common.g1_256=c,common}var _1,hasRequired_1;function require_1(){if(hasRequired_1)return _1;hasRequired_1=1;var d=requireUtils(),e=requireCommon$1(),t=requireCommon(),r=d.rotl32,s=d.sum32,a=d.sum32_5,n=t.ft_1,o=e.BlockHash,p=[1518500249,1859775393,2400959708,3395469782];function c(){if(!(this instanceof c))return new c;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return d.inherits(c,o),_1=c,c.blockSize=512,c.outSize=160,c.hmacStrength=80,c.padLength=64,c.prototype._update=function(l,u){for(var g=this.W,y=0;y<16;y++)g[y]=l[u+y];for(;y<g.length;y++)g[y]=r(g[y-3]^g[y-8]^g[y-14]^g[y-16],1);var b=this.h[0],I=this.h[1],S=this.h[2],A=this.h[3],k=this.h[4];for(y=0;y<g.length;y++){var T=~~(y/20),O=a(r(b,5),n(T,I,S,A),k,g[y],p[T]);k=A,A=S,S=r(I,30),I=b,b=O}this.h[0]=s(this.h[0],b),this.h[1]=s(this.h[1],I),this.h[2]=s(this.h[2],S),this.h[3]=s(this.h[3],A),this.h[4]=s(this.h[4],k)},c.prototype._digest=function(l){return l==="hex"?d.toHex32(this.h,"big"):d.split32(this.h,"big")},_1}var _256,hasRequired_256;function require_256(){if(hasRequired_256)return _256;hasRequired_256=1;var d=requireUtils(),e=requireCommon$1(),t=requireCommon(),r=requireMinimalisticAssert(),s=d.sum32,a=d.sum32_4,n=d.sum32_5,o=t.ch32,p=t.maj32,c=t.s0_256,f=t.s1_256,l=t.g0_256,u=t.g1_256,g=e.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function b(){if(!(this instanceof b))return new b;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}return d.inherits(b,g),_256=b,b.blockSize=512,b.outSize=256,b.hmacStrength=192,b.padLength=64,b.prototype._update=function(S,A){for(var k=this.W,T=0;T<16;T++)k[T]=S[A+T];for(;T<k.length;T++)k[T]=a(u(k[T-2]),k[T-7],l(k[T-15]),k[T-16]);var O=this.h[0],$=this.h[1],K=this.h[2],ee=this.h[3],Q=this.h[4],te=this.h[5],N=this.h[6],m=this.h[7];for(r(this.k.length===k.length),T=0;T<k.length;T++){var _=n(m,f(Q),o(Q,te,N),this.k[T],k[T]),h=s(c(O),p(O,$,K));m=N,N=te,te=Q,Q=s(ee,_),ee=K,K=$,$=O,O=s(_,h)}this.h[0]=s(this.h[0],O),this.h[1]=s(this.h[1],$),this.h[2]=s(this.h[2],K),this.h[3]=s(this.h[3],ee),this.h[4]=s(this.h[4],Q),this.h[5]=s(this.h[5],te),this.h[6]=s(this.h[6],N),this.h[7]=s(this.h[7],m)},b.prototype._digest=function(S){return S==="hex"?d.toHex32(this.h,"big"):d.split32(this.h,"big")},_256}var _224,hasRequired_224;function require_224(){if(hasRequired_224)return _224;hasRequired_224=1;var d=requireUtils(),e=require_256();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return d.inherits(t,e),_224=t,t.blockSize=512,t.outSize=224,t.hmacStrength=192,t.padLength=64,t.prototype._digest=function(s){return s==="hex"?d.toHex32(this.h.slice(0,7),"big"):d.split32(this.h.slice(0,7),"big")},_224}var _512,hasRequired_512;function require_512(){if(hasRequired_512)return _512;hasRequired_512=1;var d=requireUtils(),e=requireCommon$1(),t=requireMinimalisticAssert(),r=d.rotr64_hi,s=d.rotr64_lo,a=d.shr64_hi,n=d.shr64_lo,o=d.sum64,p=d.sum64_hi,c=d.sum64_lo,f=d.sum64_4_hi,l=d.sum64_4_lo,u=d.sum64_5_hi,g=d.sum64_5_lo,y=e.BlockHash,b=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function I(){if(!(this instanceof I))return new I;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=b,this.W=new Array(160)}d.inherits(I,y),_512=I,I.blockSize=1024,I.outSize=512,I.hmacStrength=192,I.padLength=128,I.prototype._prepareBlock=function(h,v){for(var E=this.W,M=0;M<32;M++)E[M]=h[v+M];for(;M<E.length;M+=2){var P=N(E[M-4],E[M-3]),D=m(E[M-4],E[M-3]),w=E[M-14],B=E[M-13],x=Q(E[M-30],E[M-29]),U=te(E[M-30],E[M-29]),X=E[M-32],se=E[M-31];E[M]=f(P,D,w,B,x,U,X,se),E[M+1]=l(P,D,w,B,x,U,X,se)}},I.prototype._update=function(h,v){this._prepareBlock(h,v);var E=this.W,M=this.h[0],P=this.h[1],D=this.h[2],w=this.h[3],B=this.h[4],x=this.h[5],U=this.h[6],X=this.h[7],se=this.h[8],J=this.h[9],L=this.h[10],G=this.h[11],re=this.h[12],fe=this.h[13],z=this.h[14],H=this.h[15];t(this.k.length===E.length);for(var de=0;de<E.length;de+=2){var me=z,we=H,Pe=K(se,J),ke=ee(se,J),Ue=S(se,J,L,G,re),he=A(se,J,L,G,re,fe),Ge=this.k[de],Be=this.k[de+1],He=E[de],Ke=E[de+1],be=u(me,we,Pe,ke,Ue,he,Ge,Be,He,Ke),Le=g(me,we,Pe,ke,Ue,he,Ge,Be,He,Ke);me=O(M,P),we=$(M,P),Pe=k(M,P,D,w,B),ke=T(M,P,D,w,B,x);var V=p(me,we,Pe,ke),W=c(me,we,Pe,ke);z=re,H=fe,re=L,fe=G,L=se,G=J,se=p(U,X,be,Le),J=c(X,X,be,Le),U=B,X=x,B=D,x=w,D=M,w=P,M=p(be,Le,V,W),P=c(be,Le,V,W)}o(this.h,0,M,P),o(this.h,2,D,w),o(this.h,4,B,x),o(this.h,6,U,X),o(this.h,8,se,J),o(this.h,10,L,G),o(this.h,12,re,fe),o(this.h,14,z,H)},I.prototype._digest=function(h){return h==="hex"?d.toHex32(this.h,"big"):d.split32(this.h,"big")};function S(_,h,v,E,M){var P=_&v^~_&M;return P<0&&(P+=4294967296),P}function A(_,h,v,E,M,P){var D=h&E^~h&P;return D<0&&(D+=4294967296),D}function k(_,h,v,E,M){var P=_&v^_&M^v&M;return P<0&&(P+=4294967296),P}function T(_,h,v,E,M,P){var D=h&E^h&P^E&P;return D<0&&(D+=4294967296),D}function O(_,h){var v=r(_,h,28),E=r(h,_,2),M=r(h,_,7),P=v^E^M;return P<0&&(P+=4294967296),P}function $(_,h){var v=s(_,h,28),E=s(h,_,2),M=s(h,_,7),P=v^E^M;return P<0&&(P+=4294967296),P}function K(_,h){var v=r(_,h,14),E=r(_,h,18),M=r(h,_,9),P=v^E^M;return P<0&&(P+=4294967296),P}function ee(_,h){var v=s(_,h,14),E=s(_,h,18),M=s(h,_,9),P=v^E^M;return P<0&&(P+=4294967296),P}function Q(_,h){var v=r(_,h,1),E=r(_,h,8),M=a(_,h,7),P=v^E^M;return P<0&&(P+=4294967296),P}function te(_,h){var v=s(_,h,1),E=s(_,h,8),M=n(_,h,7),P=v^E^M;return P<0&&(P+=4294967296),P}function N(_,h){var v=r(_,h,19),E=r(h,_,29),M=a(_,h,6),P=v^E^M;return P<0&&(P+=4294967296),P}function m(_,h){var v=s(_,h,19),E=s(h,_,29),M=n(_,h,6),P=v^E^M;return P<0&&(P+=4294967296),P}return _512}var _384,hasRequired_384;function require_384(){if(hasRequired_384)return _384;hasRequired_384=1;var d=requireUtils(),e=require_512();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return d.inherits(t,e),_384=t,t.blockSize=1024,t.outSize=384,t.hmacStrength=192,t.padLength=128,t.prototype._digest=function(s){return s==="hex"?d.toHex32(this.h.slice(0,12),"big"):d.split32(this.h.slice(0,12),"big")},_384}var hasRequiredSha;function requireSha(){return hasRequiredSha||(hasRequiredSha=1,sha.sha1=require_1(),sha.sha224=require_224(),sha.sha256=require_256(),sha.sha384=require_384(),sha.sha512=require_512()),sha}var ripemd={},hasRequiredRipemd;function requireRipemd(){if(hasRequiredRipemd)return ripemd;hasRequiredRipemd=1;var d=requireUtils(),e=requireCommon$1(),t=d.rotl32,r=d.sum32,s=d.sum32_3,a=d.sum32_4,n=e.BlockHash;function o(){if(!(this instanceof o))return new o;n.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}d.inherits(o,n),ripemd.ripemd160=o,o.blockSize=512,o.outSize=160,o.hmacStrength=192,o.padLength=64,o.prototype._update=function(I,S){for(var A=this.h[0],k=this.h[1],T=this.h[2],O=this.h[3],$=this.h[4],K=A,ee=k,Q=T,te=O,N=$,m=0;m<80;m++){var _=r(t(a(A,p(m,k,T,O),I[l[m]+S],c(m)),g[m]),$);A=$,$=O,O=t(T,10),T=k,k=_,_=r(t(a(K,p(79-m,ee,Q,te),I[u[m]+S],f(m)),y[m]),N),K=N,N=te,te=t(Q,10),Q=ee,ee=_}_=s(this.h[1],T,te),this.h[1]=s(this.h[2],O,N),this.h[2]=s(this.h[3],$,K),this.h[3]=s(this.h[4],A,ee),this.h[4]=s(this.h[0],k,Q),this.h[0]=_},o.prototype._digest=function(I){return I==="hex"?d.toHex32(this.h,"little"):d.split32(this.h,"little")};function p(b,I,S,A){return b<=15?I^S^A:b<=31?I&S|~I&A:b<=47?(I|~S)^A:b<=63?I&A|S&~A:I^(S|~A)}function c(b){return b<=15?0:b<=31?1518500249:b<=47?1859775393:b<=63?2400959708:2840853838}function f(b){return b<=15?1352829926:b<=31?1548603684:b<=47?1836072691:b<=63?2053994217:0}var l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return ripemd}var hmac,hasRequiredHmac;function requireHmac(){if(hasRequiredHmac)return hmac;hasRequiredHmac=1;var d=requireUtils(),e=requireMinimalisticAssert();function t(r,s,a){if(!(this instanceof t))return new t(r,s,a);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(d.toArray(s,a))}return hmac=t,t.prototype._init=function(s){s.length>this.blockSize&&(s=new this.Hash().update(s).digest()),e(s.length<=this.blockSize);for(var a=s.length;a<this.blockSize;a++)s.push(0);for(a=0;a<s.length;a++)s[a]^=54;for(this.inner=new this.Hash().update(s),a=0;a<s.length;a++)s[a]^=106;this.outer=new this.Hash().update(s)},t.prototype.update=function(s,a){return this.inner.update(s,a),this},t.prototype.digest=function(s){return this.outer.update(this.inner.digest()),this.outer.digest(s)},hmac}var hasRequiredHash;function requireHash(){return hasRequiredHash||(hasRequiredHash=1,function(d){var e=d;e.utils=requireUtils(),e.common=requireCommon$1(),e.sha=requireSha(),e.ripemd=requireRipemd(),e.hmac=requireHmac(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(hash)),hash}var secp256k1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1}var hasRequiredCurves;function requireCurves(){return hasRequiredCurves||(hasRequiredCurves=1,function(d){var e=d,t=requireHash(),r=requireCurve(),s=requireUtils$1(),a=s.assert;function n(c){c.type==="short"?this.curve=new r.short(c):c.type==="edwards"?this.curve=new r.edwards(c):this.curve=new r.mont(c),this.g=this.curve.g,this.n=this.curve.n,this.hash=c.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=n;function o(c,f){Object.defineProperty(e,c,{configurable:!0,enumerable:!0,get:function(){var l=new n(f);return Object.defineProperty(e,c,{configurable:!0,enumerable:!0,value:l}),l}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:t.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:t.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:t.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:t.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:t.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var p;try{p=requireSecp256k1()}catch{p=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:t.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",p]})}(curves)),curves}var hmacDrbg,hasRequiredHmacDrbg;function requireHmacDrbg(){if(hasRequiredHmacDrbg)return hmacDrbg;hasRequiredHmacDrbg=1;var d=requireHash(),e=requireUtils$2(),t=requireMinimalisticAssert();function r(s){if(!(this instanceof r))return new r(s);this.hash=s.hash,this.predResist=!!s.predResist,this.outLen=this.hash.outSize,this.minEntropy=s.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var a=e.toArray(s.entropy,s.entropyEnc||"hex"),n=e.toArray(s.nonce,s.nonceEnc||"hex"),o=e.toArray(s.pers,s.persEnc||"hex");t(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(a,n,o)}return hmacDrbg=r,r.prototype._init=function(a,n,o){var p=a.concat(n).concat(o);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var c=0;c<this.V.length;c++)this.K[c]=0,this.V[c]=1;this._update(p),this._reseed=1,this.reseedInterval=281474976710656},r.prototype._hmac=function(){return new d.hmac(this.hash,this.K)},r.prototype._update=function(a){var n=this._hmac().update(this.V).update([0]);a&&(n=n.update(a)),this.K=n.digest(),this.V=this._hmac().update(this.V).digest(),a&&(this.K=this._hmac().update(this.V).update([1]).update(a).digest(),this.V=this._hmac().update(this.V).digest())},r.prototype.reseed=function(a,n,o,p){typeof n!="string"&&(p=o,o=n,n=null),a=e.toArray(a,n),o=e.toArray(o,p),t(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(a.concat(o||[])),this._reseed=1},r.prototype.generate=function(a,n,o,p){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof n!="string"&&(p=o,o=n,n=null),o&&(o=e.toArray(o,p||"hex"),this._update(o));for(var c=[];c.length<a;)this.V=this._hmac().update(this.V).digest(),c=c.concat(this.V);var f=c.slice(0,a);return this._update(o),this._reseed++,e.encode(f,n)},hmacDrbg}var key$1,hasRequiredKey$1;function requireKey$1(){if(hasRequiredKey$1)return key$1;hasRequiredKey$1=1;var d=requireBn$1(),e=requireUtils$1(),t=e.assert;function r(s,a){this.ec=s,this.priv=null,this.pub=null,a.priv&&this._importPrivate(a.priv,a.privEnc),a.pub&&this._importPublic(a.pub,a.pubEnc)}return key$1=r,r.fromPublic=function(a,n,o){return n instanceof r?n:new r(a,{pub:n,pubEnc:o})},r.fromPrivate=function(a,n,o){return n instanceof r?n:new r(a,{priv:n,privEnc:o})},r.prototype.validate=function(){var a=this.getPublic();return a.isInfinity()?{result:!1,reason:"Invalid public key"}:a.validate()?a.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},r.prototype.getPublic=function(a,n){return typeof a=="string"&&(n=a,a=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),n?this.pub.encode(n,a):this.pub},r.prototype.getPrivate=function(a){return a==="hex"?this.priv.toString(16,2):this.priv},r.prototype._importPrivate=function(a,n){this.priv=new d(a,n||16),this.priv=this.priv.umod(this.ec.curve.n)},r.prototype._importPublic=function(a,n){if(a.x||a.y){this.ec.curve.type==="mont"?t(a.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&t(a.x&&a.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(a.x,a.y);return}this.pub=this.ec.curve.decodePoint(a,n)},r.prototype.derive=function(a){return a.validate()||t(a.validate(),"public point not validated"),a.mul(this.priv).getX()},r.prototype.sign=function(a,n,o){return this.ec.sign(a,this,n,o)},r.prototype.verify=function(a,n){return this.ec.verify(a,n,this)},r.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},key$1}var signature$1,hasRequiredSignature$1;function requireSignature$1(){if(hasRequiredSignature$1)return signature$1;hasRequiredSignature$1=1;var d=requireBn$1(),e=requireUtils$1(),t=e.assert;function r(p,c){if(p instanceof r)return p;this._importDER(p,c)||(t(p.r&&p.s,"Signature without r or s"),this.r=new d(p.r,16),this.s=new d(p.s,16),p.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=p.recoveryParam)}signature$1=r;function s(){this.place=0}function a(p,c){var f=p[c.place++];if(!(f&128))return f;var l=f&15;if(l===0||l>4)return!1;for(var u=0,g=0,y=c.place;g<l;g++,y++)u<<=8,u|=p[y],u>>>=0;return u<=127?!1:(c.place=y,u)}function n(p){for(var c=0,f=p.length-1;!p[c]&&!(p[c+1]&128)&&c<f;)c++;return c===0?p:p.slice(c)}r.prototype._importDER=function(c,f){c=e.toArray(c,f);var l=new s;if(c[l.place++]!==48)return!1;var u=a(c,l);if(u===!1||u+l.place!==c.length||c[l.place++]!==2)return!1;var g=a(c,l);if(g===!1)return!1;var y=c.slice(l.place,g+l.place);if(l.place+=g,c[l.place++]!==2)return!1;var b=a(c,l);if(b===!1||c.length!==b+l.place)return!1;var I=c.slice(l.place,b+l.place);if(y[0]===0)if(y[1]&128)y=y.slice(1);else return!1;if(I[0]===0)if(I[1]&128)I=I.slice(1);else return!1;return this.r=new d(y),this.s=new d(I),this.recoveryParam=null,!0};function o(p,c){if(c<128){p.push(c);return}var f=1+(Math.log(c)/Math.LN2>>>3);for(p.push(f|128);--f;)p.push(c>>>(f<<3)&255);p.push(c)}return r.prototype.toDER=function(c){var f=this.r.toArray(),l=this.s.toArray();for(f[0]&128&&(f=[0].concat(f)),l[0]&128&&(l=[0].concat(l)),f=n(f),l=n(l);!l[0]&&!(l[1]&128);)l=l.slice(1);var u=[2];o(u,f.length),u=u.concat(f),u.push(2),o(u,l.length);var g=u.concat(l),y=[48];return o(y,g.length),y=y.concat(g),e.encode(y,c)},signature$1}var ec,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec;hasRequiredEc=1;var d=requireBn$1(),e=requireHmacDrbg(),t=requireUtils$1(),r=requireCurves(),s=requireBrorand(),a=t.assert,n=requireKey$1(),o=requireSignature$1();function p(c){if(!(this instanceof p))return new p(c);typeof c=="string"&&(a(Object.prototype.hasOwnProperty.call(r,c),"Unknown curve "+c),c=r[c]),c instanceof r.PresetCurve&&(c={curve:c}),this.curve=c.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=c.curve.g,this.g.precompute(c.curve.n.bitLength()+1),this.hash=c.hash||c.curve.hash}return ec=p,p.prototype.keyPair=function(f){return new n(this,f)},p.prototype.keyFromPrivate=function(f,l){return n.fromPrivate(this,f,l)},p.prototype.keyFromPublic=function(f,l){return n.fromPublic(this,f,l)},p.prototype.genKeyPair=function(f){f||(f={});for(var l=new e({hash:this.hash,pers:f.pers,persEnc:f.persEnc||"utf8",entropy:f.entropy||s(this.hash.hmacStrength),entropyEnc:f.entropy&&f.entropyEnc||"utf8",nonce:this.n.toArray()}),u=this.n.byteLength(),g=this.n.sub(new d(2));;){var y=new d(l.generate(u));if(!(y.cmp(g)>0))return y.iaddn(1),this.keyFromPrivate(y)}},p.prototype._truncateToN=function(f,l){var u=f.byteLength()*8-this.n.bitLength();return u>0&&(f=f.ushrn(u)),!l&&f.cmp(this.n)>=0?f.sub(this.n):f},p.prototype.sign=function(f,l,u,g){typeof u=="object"&&(g=u,u=null),g||(g={}),l=this.keyFromPrivate(l,u),f=this._truncateToN(new d(f,16));for(var y=this.n.byteLength(),b=l.getPrivate().toArray("be",y),I=f.toArray("be",y),S=new e({hash:this.hash,entropy:b,nonce:I,pers:g.pers,persEnc:g.persEnc||"utf8"}),A=this.n.sub(new d(1)),k=0;;k++){var T=g.k?g.k(k):new d(S.generate(this.n.byteLength()));if(T=this._truncateToN(T,!0),!(T.cmpn(1)<=0||T.cmp(A)>=0)){var O=this.g.mul(T);if(!O.isInfinity()){var $=O.getX(),K=$.umod(this.n);if(K.cmpn(0)!==0){var ee=T.invm(this.n).mul(K.mul(l.getPrivate()).iadd(f));if(ee=ee.umod(this.n),ee.cmpn(0)!==0){var Q=(O.getY().isOdd()?1:0)|($.cmp(K)!==0?2:0);return g.canonical&&ee.cmp(this.nh)>0&&(ee=this.n.sub(ee),Q^=1),new o({r:K,s:ee,recoveryParam:Q})}}}}}},p.prototype.verify=function(f,l,u,g){f=this._truncateToN(new d(f,16)),u=this.keyFromPublic(u,g),l=new o(l,"hex");var y=l.r,b=l.s;if(y.cmpn(1)<0||y.cmp(this.n)>=0||b.cmpn(1)<0||b.cmp(this.n)>=0)return!1;var I=b.invm(this.n),S=I.mul(f).umod(this.n),A=I.mul(y).umod(this.n),k;return this.curve._maxwellTrick?(k=this.g.jmulAdd(S,u.getPublic(),A),k.isInfinity()?!1:k.eqXToP(y)):(k=this.g.mulAdd(S,u.getPublic(),A),k.isInfinity()?!1:k.getX().umod(this.n).cmp(y)===0)},p.prototype.recoverPubKey=function(c,f,l,u){a((3&l)===l,"The recovery param is more than two bits"),f=new o(f,u);var g=this.n,y=new d(c),b=f.r,I=f.s,S=l&1,A=l>>1;if(b.cmp(this.curve.p.umod(this.curve.n))>=0&&A)throw new Error("Unable to find sencond key candinate");A?b=this.curve.pointFromX(b.add(this.curve.n),S):b=this.curve.pointFromX(b,S);var k=f.r.invm(g),T=g.sub(y).mul(k).umod(g),O=I.mul(k).umod(g);return this.g.mulAdd(T,b,O)},p.prototype.getKeyRecoveryParam=function(c,f,l,u){if(f=new o(f,u),f.recoveryParam!==null)return f.recoveryParam;for(var g=0;g<4;g++){var y;try{y=this.recoverPubKey(c,f,g)}catch{continue}if(y.eq(l))return g}throw new Error("Unable to find valid recovery factor")},ec}var key,hasRequiredKey;function requireKey(){if(hasRequiredKey)return key;hasRequiredKey=1;var d=requireUtils$1(),e=d.assert,t=d.parseBytes,r=d.cachedProperty;function s(a,n){this.eddsa=a,this._secret=t(n.secret),a.isPoint(n.pub)?this._pub=n.pub:this._pubBytes=t(n.pub)}return s.fromPublic=function(n,o){return o instanceof s?o:new s(n,{pub:o})},s.fromSecret=function(n,o){return o instanceof s?o:new s(n,{secret:o})},s.prototype.secret=function(){return this._secret},r(s,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),r(s,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),r(s,"privBytes",function(){var n=this.eddsa,o=this.hash(),p=n.encodingLength-1,c=o.slice(0,n.encodingLength);return c[0]&=248,c[p]&=127,c[p]|=64,c}),r(s,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),r(s,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),r(s,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),s.prototype.sign=function(n){return e(this._secret,"KeyPair can only verify"),this.eddsa.sign(n,this)},s.prototype.verify=function(n,o){return this.eddsa.verify(n,o,this)},s.prototype.getSecret=function(n){return e(this._secret,"KeyPair is public only"),d.encode(this.secret(),n)},s.prototype.getPublic=function(n){return d.encode(this.pubBytes(),n)},key=s,key}var signature,hasRequiredSignature;function requireSignature(){if(hasRequiredSignature)return signature;hasRequiredSignature=1;var d=requireBn$1(),e=requireUtils$1(),t=e.assert,r=e.cachedProperty,s=e.parseBytes;function a(n,o){this.eddsa=n,typeof o!="object"&&(o=s(o)),Array.isArray(o)&&(o={R:o.slice(0,n.encodingLength),S:o.slice(n.encodingLength)}),t(o.R&&o.S,"Signature without R or S"),n.isPoint(o.R)&&(this._R=o.R),o.S instanceof d&&(this._S=o.S),this._Rencoded=Array.isArray(o.R)?o.R:o.Rencoded,this._Sencoded=Array.isArray(o.S)?o.S:o.Sencoded}return r(a,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),r(a,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),r(a,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),r(a,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),a.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},a.prototype.toHex=function(){return e.encode(this.toBytes(),"hex").toUpperCase()},signature=a,signature}var eddsa,hasRequiredEddsa;function requireEddsa(){if(hasRequiredEddsa)return eddsa;hasRequiredEddsa=1;var d=requireHash(),e=requireCurves(),t=requireUtils$1(),r=t.assert,s=t.parseBytes,a=requireKey(),n=requireSignature();function o(p){if(r(p==="ed25519","only tested with ed25519 so far"),!(this instanceof o))return new o(p);p=e[p].curve,this.curve=p,this.g=p.g,this.g.precompute(p.n.bitLength()+1),this.pointClass=p.point().constructor,this.encodingLength=Math.ceil(p.n.bitLength()/8),this.hash=d.sha512}return eddsa=o,o.prototype.sign=function(c,f){c=s(c);var l=this.keyFromSecret(f),u=this.hashInt(l.messagePrefix(),c),g=this.g.mul(u),y=this.encodePoint(g),b=this.hashInt(y,l.pubBytes(),c).mul(l.priv()),I=u.add(b).umod(this.curve.n);return this.makeSignature({R:g,S:I,Rencoded:y})},o.prototype.verify=function(c,f,l){c=s(c),f=this.makeSignature(f);var u=this.keyFromPublic(l),g=this.hashInt(f.Rencoded(),u.pubBytes(),c),y=this.g.mul(f.S()),b=f.R().add(u.pub().mul(g));return b.eq(y)},o.prototype.hashInt=function(){for(var c=this.hash(),f=0;f<arguments.length;f++)c.update(arguments[f]);return t.intFromLE(c.digest()).umod(this.curve.n)},o.prototype.keyFromPublic=function(c){return a.fromPublic(this,c)},o.prototype.keyFromSecret=function(c){return a.fromSecret(this,c)},o.prototype.makeSignature=function(c){return c instanceof n?c:new n(this,c)},o.prototype.encodePoint=function(c){var f=c.getY().toArray("le",this.encodingLength);return f[this.encodingLength-1]|=c.getX().isOdd()?128:0,f},o.prototype.decodePoint=function(c){c=t.parseBytes(c);var f=c.length-1,l=c.slice(0,f).concat(c[f]&-129),u=(c[f]&128)!==0,g=t.intFromLE(l);return this.curve.pointFromY(g,u)},o.prototype.encodeInt=function(c){return c.toArray("le",this.encodingLength)},o.prototype.decodeInt=function(c){return t.intFromLE(c)},o.prototype.isPoint=function(c){return c instanceof this.pointClass},eddsa}var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(d){var e=d;e.version=require$$0.version,e.utils=requireUtils$1(),e.rand=requireBrorand(),e.curve=requireCurve(),e.curves=requireCurves(),e.ec=requireEc(),e.eddsa=requireEddsa()}(elliptic)),elliptic}var asn1$1={},asn1={},api={},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(d,e){if(d.indexOf)return d.indexOf(e);for(var t=0;t<d.length;t++)if(d[t]===e)return t;return-1},Object_keys=function(d){if(Object.keys)return Object.keys(d);var e=[];for(var t in d)e.push(t);return e},forEach=function(d,e){if(d.forEach)return d.forEach(e);for(var t=0;t<d.length;t++)e(d[t],t,d)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(d,e,t){Object.defineProperty(d,e,{writable:!0,enumerable:!1,configurable:!0,value:t})}}catch{return function(e,t,r){e[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(d){if(!(d instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var t=e.contentWindow,r=t.eval,s=t.execScript;!r&&s&&(s.call(t,"null"),r=t.eval),forEach(Object_keys(d),function(o){t[o]=d[o]}),forEach(globals,function(o){d[o]&&(t[o]=d[o])});var a=Object_keys(t),n=r.call(t,this.code);return forEach(Object_keys(t),function(o){(o in d||indexOf(a,o)===-1)&&(d[o]=t[o])}),forEach(globals,function(o){o in d||defineProp(d,o,t[o])}),document.body.removeChild(e),n},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(d){var e=Script.createContext(d),t=this.runInContext(e);return d&&forEach(Object_keys(e),function(r){d[r]=e[r]}),t},forEach(Object_keys(Script.prototype),function(d){exports[d]=Script[d]=function(e){var t=Script(e);return t[d].apply(t,[].slice.call(arguments,1))}}),exports.isContext=function(d){return d instanceof Context},exports.createScript=function(d){return exports.Script(d)},exports.createContext=Script.createContext=function(d){var e=new Context;return typeof d=="object"&&forEach(Object_keys(d),function(t){e[t]=d[t]}),e}}(vmBrowserify)),vmBrowserify}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(d){var e=requireAsn1$1(),t=requireInherits_browser(),r=d;r.define=function(n,o){return new s(n,o)};function s(a,n){this.name=a,this.body=n,this.decoders={},this.encoders={}}s.prototype._createNamed=function(n){var o;try{o=requireVmBrowserify().runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{o=function(c){this._initNamed(c)}}return t(o,n),o.prototype._initNamed=function(c){n.call(this,c)},new o(this)},s.prototype._getDecoder=function(n){return n=n||"der",this.decoders.hasOwnProperty(n)||(this.decoders[n]=this._createNamed(e.decoders[n])),this.decoders[n]},s.prototype.decode=function(n,o,p){return this._getDecoder(o).decode(n,p)},s.prototype._getEncoder=function(n){return n=n||"der",this.encoders.hasOwnProperty(n)||(this.encoders[n]=this._createNamed(e.encoders[n])),this.encoders[n]},s.prototype.encode=function(n,o,p){return this._getEncoder(o).encode(n,p)}}(api)),api}var base={},reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;var d=requireInherits_browser();function e(r){this._reporterState={obj:null,path:[],options:r||{},errors:[]}}reporter.Reporter=e,e.prototype.isError=function(s){return s instanceof t},e.prototype.save=function(){var s=this._reporterState;return{obj:s.obj,pathLen:s.path.length}},e.prototype.restore=function(s){var a=this._reporterState;a.obj=s.obj,a.path=a.path.slice(0,s.pathLen)},e.prototype.enterKey=function(s){return this._reporterState.path.push(s)},e.prototype.exitKey=function(s){var a=this._reporterState;a.path=a.path.slice(0,s-1)},e.prototype.leaveKey=function(s,a,n){var o=this._reporterState;this.exitKey(s),o.obj!==null&&(o.obj[a]=n)},e.prototype.path=function(){return this._reporterState.path.join("/")},e.prototype.enterObject=function(){var s=this._reporterState,a=s.obj;return s.obj={},a},e.prototype.leaveObject=function(s){var a=this._reporterState,n=a.obj;return a.obj=s,n},e.prototype.error=function(s){var a,n=this._reporterState,o=s instanceof t;if(o?a=s:a=new t(n.path.map(function(p){return"["+JSON.stringify(p)+"]"}).join(""),s.message||s,s.stack),!n.options.partial)throw a;return o||n.errors.push(a),a},e.prototype.wrapResult=function(s){var a=this._reporterState;return a.options.partial?{result:this.isError(s)?null:s,errors:a.errors}:s};function t(r,s){this.path=r,this.rethrow(s)}return d(t,Error),t.prototype.rethrow=function(s){if(this.message=s+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,t),!this.stack)try{throw new Error(this.message)}catch(a){this.stack=a.stack}return this},reporter}var buffer={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer;hasRequiredBuffer=1;var d=requireInherits_browser(),e=requireBase().Reporter,t=require$$1$2.Buffer;function r(a,n){if(e.call(this,n),!t.isBuffer(a)){this.error("Input not Buffer");return}this.base=a,this.offset=0,this.length=a.length}d(r,e),buffer.DecoderBuffer=r,r.prototype.save=function(){return{offset:this.offset,reporter:e.prototype.save.call(this)}},r.prototype.restore=function(n){var o=new r(this.base);return o.offset=n.offset,o.length=this.offset,this.offset=n.offset,e.prototype.restore.call(this,n.reporter),o},r.prototype.isEmpty=function(){return this.offset===this.length},r.prototype.readUInt8=function(n){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(n||"DecoderBuffer overrun")},r.prototype.skip=function(n,o){if(!(this.offset+n<=this.length))return this.error(o||"DecoderBuffer overrun");var p=new r(this.base);return p._reporterState=this._reporterState,p.offset=this.offset,p.length=this.offset+n,this.offset+=n,p},r.prototype.raw=function(n){return this.base.slice(n?n.offset:this.offset,this.length)};function s(a,n){if(Array.isArray(a))this.length=0,this.value=a.map(function(o){return o instanceof s||(o=new s(o,n)),this.length+=o.length,o},this);else if(typeof a=="number"){if(!(0<=a&&a<=255))return n.error("non-byte EncoderBuffer value");this.value=a,this.length=1}else if(typeof a=="string")this.value=a,this.length=t.byteLength(a);else if(t.isBuffer(a))this.value=a,this.length=a.length;else return n.error("Unsupported type: "+typeof a)}return buffer.EncoderBuffer=s,s.prototype.join=function(n,o){return n||(n=new t(this.length)),o||(o=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(p){p.join(n,o),o+=p.length}):(typeof this.value=="number"?n[o]=this.value:typeof this.value=="string"?n.write(this.value,o):t.isBuffer(this.value)&&this.value.copy(n,o),o+=this.length)),n},buffer}var node,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;var d=requireBase().Reporter,e=requireBase().EncoderBuffer,t=requireBase().DecoderBuffer,r=requireMinimalisticAssert(),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],a=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s),n=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function o(c,f){var l={};this._baseState=l,l.enc=c,l.parent=f||null,l.children=null,l.tag=null,l.args=null,l.reverseArgs=null,l.choice=null,l.optional=!1,l.any=!1,l.obj=!1,l.use=null,l.useDecoder=null,l.key=null,l.default=null,l.explicit=null,l.implicit=null,l.contains=null,l.parent||(l.children=[],this._wrap())}node=o;var p=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return o.prototype.clone=function(){var f=this._baseState,l={};p.forEach(function(g){l[g]=f[g]});var u=new this.constructor(l.parent);return u._baseState=l,u},o.prototype._wrap=function(){var f=this._baseState;a.forEach(function(l){this[l]=function(){var g=new this.constructor(this);return f.children.push(g),g[l].apply(g,arguments)}},this)},o.prototype._init=function(f){var l=this._baseState;r(l.parent===null),f.call(this),l.children=l.children.filter(function(u){return u._baseState.parent===this},this),r.equal(l.children.length,1,"Root node can have only one child")},o.prototype._useArgs=function(f){var l=this._baseState,u=f.filter(function(g){return g instanceof this.constructor},this);f=f.filter(function(g){return!(g instanceof this.constructor)},this),u.length!==0&&(r(l.children===null),l.children=u,u.forEach(function(g){g._baseState.parent=this},this)),f.length!==0&&(r(l.args===null),l.args=f,l.reverseArgs=f.map(function(g){if(typeof g!="object"||g.constructor!==Object)return g;var y={};return Object.keys(g).forEach(function(b){b==(b|0)&&(b|=0);var I=g[b];y[I]=b}),y}))},n.forEach(function(c){o.prototype[c]=function(){var l=this._baseState;throw new Error(c+" not implemented for encoding: "+l.enc)}}),s.forEach(function(c){o.prototype[c]=function(){var l=this._baseState,u=Array.prototype.slice.call(arguments);return r(l.tag===null),l.tag=c,this._useArgs(u),this}}),o.prototype.use=function(f){r(f);var l=this._baseState;return r(l.use===null),l.use=f,this},o.prototype.optional=function(){var f=this._baseState;return f.optional=!0,this},o.prototype.def=function(f){var l=this._baseState;return r(l.default===null),l.default=f,l.optional=!0,this},o.prototype.explicit=function(f){var l=this._baseState;return r(l.explicit===null&&l.implicit===null),l.explicit=f,this},o.prototype.implicit=function(f){var l=this._baseState;return r(l.explicit===null&&l.implicit===null),l.implicit=f,this},o.prototype.obj=function(){var f=this._baseState,l=Array.prototype.slice.call(arguments);return f.obj=!0,l.length!==0&&this._useArgs(l),this},o.prototype.key=function(f){var l=this._baseState;return r(l.key===null),l.key=f,this},o.prototype.any=function(){var f=this._baseState;return f.any=!0,this},o.prototype.choice=function(f){var l=this._baseState;return r(l.choice===null),l.choice=f,this._useArgs(Object.keys(f).map(function(u){return f[u]})),this},o.prototype.contains=function(f){var l=this._baseState;return r(l.use===null),l.contains=f,this},o.prototype._decode=function(f,l){var u=this._baseState;if(u.parent===null)return f.wrapResult(u.children[0]._decode(f,l));var g=u.default,y=!0,b=null;if(u.key!==null&&(b=f.enterKey(u.key)),u.optional){var I=null;if(u.explicit!==null?I=u.explicit:u.implicit!==null?I=u.implicit:u.tag!==null&&(I=u.tag),I===null&&!u.any){var S=f.save();try{u.choice===null?this._decodeGeneric(u.tag,f,l):this._decodeChoice(f,l),y=!0}catch{y=!1}f.restore(S)}else if(y=this._peekTag(f,I,u.any),f.isError(y))return y}var A;if(u.obj&&y&&(A=f.enterObject()),y){if(u.explicit!==null){var k=this._decodeTag(f,u.explicit);if(f.isError(k))return k;f=k}var T=f.offset;if(u.use===null&&u.choice===null){if(u.any)var S=f.save();var O=this._decodeTag(f,u.implicit!==null?u.implicit:u.tag,u.any);if(f.isError(O))return O;u.any?g=f.raw(S):f=O}if(l&&l.track&&u.tag!==null&&l.track(f.path(),T,f.length,"tagged"),l&&l.track&&u.tag!==null&&l.track(f.path(),f.offset,f.length,"content"),u.any?g=g:u.choice===null?g=this._decodeGeneric(u.tag,f,l):g=this._decodeChoice(f,l),f.isError(g))return g;if(!u.any&&u.choice===null&&u.children!==null&&u.children.forEach(function(ee){ee._decode(f,l)}),u.contains&&(u.tag==="octstr"||u.tag==="bitstr")){var $=new t(g);g=this._getUse(u.contains,f._reporterState.obj)._decode($,l)}}return u.obj&&y&&(g=f.leaveObject(A)),u.key!==null&&(g!==null||y===!0)?f.leaveKey(b,u.key,g):b!==null&&f.exitKey(b),g},o.prototype._decodeGeneric=function(f,l,u){var g=this._baseState;return f==="seq"||f==="set"?null:f==="seqof"||f==="setof"?this._decodeList(l,f,g.args[0],u):/str$/.test(f)?this._decodeStr(l,f,u):f==="objid"&&g.args?this._decodeObjid(l,g.args[0],g.args[1],u):f==="objid"?this._decodeObjid(l,null,null,u):f==="gentime"||f==="utctime"?this._decodeTime(l,f,u):f==="null_"?this._decodeNull(l,u):f==="bool"?this._decodeBool(l,u):f==="objDesc"?this._decodeStr(l,f,u):f==="int"||f==="enum"?this._decodeInt(l,g.args&&g.args[0],u):g.use!==null?this._getUse(g.use,l._reporterState.obj)._decode(l,u):l.error("unknown tag: "+f)},o.prototype._getUse=function(f,l){var u=this._baseState;return u.useDecoder=this._use(f,l),r(u.useDecoder._baseState.parent===null),u.useDecoder=u.useDecoder._baseState.children[0],u.implicit!==u.useDecoder._baseState.implicit&&(u.useDecoder=u.useDecoder.clone(),u.useDecoder._baseState.implicit=u.implicit),u.useDecoder},o.prototype._decodeChoice=function(f,l){var u=this._baseState,g=null,y=!1;return Object.keys(u.choice).some(function(b){var I=f.save(),S=u.choice[b];try{var A=S._decode(f,l);if(f.isError(A))return!1;g={type:b,value:A},y=!0}catch{return f.restore(I),!1}return!0},this),y?g:f.error("Choice not matched")},o.prototype._createEncoderBuffer=function(f){return new e(f,this.reporter)},o.prototype._encode=function(f,l,u){var g=this._baseState;if(!(g.default!==null&&g.default===f)){var y=this._encodeValue(f,l,u);if(y!==void 0&&!this._skipDefault(y,l,u))return y}},o.prototype._encodeValue=function(f,l,u){var g=this._baseState;if(g.parent===null)return g.children[0]._encode(f,l||new d);var S=null;if(this.reporter=l,g.optional&&f===void 0)if(g.default!==null)f=g.default;else return;var y=null,b=!1;if(g.any)S=this._createEncoderBuffer(f);else if(g.choice)S=this._encodeChoice(f,l);else if(g.contains)y=this._getUse(g.contains,u)._encode(f,l),b=!0;else if(g.children)y=g.children.map(function(T){if(T._baseState.tag==="null_")return T._encode(null,l,f);if(T._baseState.key===null)return l.error("Child should have a key");var O=l.enterKey(T._baseState.key);if(typeof f!="object")return l.error("Child expected, but input is not object");var $=T._encode(f[T._baseState.key],l,f);return l.leaveKey(O),$},this).filter(function(T){return T}),y=this._createEncoderBuffer(y);else if(g.tag==="seqof"||g.tag==="setof"){if(!(g.args&&g.args.length===1))return l.error("Too many args for : "+g.tag);if(!Array.isArray(f))return l.error("seqof/setof, but data is not Array");var I=this.clone();I._baseState.implicit=null,y=this._createEncoderBuffer(f.map(function(T){var O=this._baseState;return this._getUse(O.args[0],f)._encode(T,l)},I))}else g.use!==null?S=this._getUse(g.use,u)._encode(f,l):(y=this._encodePrimitive(g.tag,f),b=!0);var S;if(!g.any&&g.choice===null){var A=g.implicit!==null?g.implicit:g.tag,k=g.implicit===null?"universal":"context";A===null?g.use===null&&l.error("Tag could be omitted only for .use()"):g.use===null&&(S=this._encodeComposite(A,b,k,y))}return g.explicit!==null&&(S=this._encodeComposite(g.explicit,!1,"context",S)),S},o.prototype._encodeChoice=function(f,l){var u=this._baseState,g=u.choice[f.type];return g||r(!1,f.type+" not found in "+JSON.stringify(Object.keys(u.choice))),g._encode(f.value,l)},o.prototype._encodePrimitive=function(f,l){var u=this._baseState;if(/str$/.test(f))return this._encodeStr(l,f);if(f==="objid"&&u.args)return this._encodeObjid(l,u.reverseArgs[0],u.args[1]);if(f==="objid")return this._encodeObjid(l,null,null);if(f==="gentime"||f==="utctime")return this._encodeTime(l,f);if(f==="null_")return this._encodeNull();if(f==="int"||f==="enum")return this._encodeInt(l,u.args&&u.reverseArgs[0]);if(f==="bool")return this._encodeBool(l);if(f==="objDesc")return this._encodeStr(l,f);throw new Error("Unsupported tag: "+f)},o.prototype._isNumstr=function(f){return/^[0-9 ]*$/.test(f)},o.prototype._isPrintstr=function(f){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(f)},node}var hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,function(d){var e=d;e.Reporter=requireReporter().Reporter,e.DecoderBuffer=requireBuffer().DecoderBuffer,e.EncoderBuffer=requireBuffer().EncoderBuffer,e.Node=requireNode()}(base)),base}var constants={},der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,function(d){var e=requireConstants();d.tagClass={0:"universal",1:"application",2:"context",3:"private"},d.tagClassByName=e._reverse(d.tagClass),d.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},d.tagByName=e._reverse(d.tag)}(der)),der}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,function(d){var e=d;e._reverse=function(r){var s={};return Object.keys(r).forEach(function(a){(a|0)==a&&(a=a|0);var n=r[a];s[n]=a}),s},e.der=requireDer$2()}(constants)),constants}var decoders={},der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;var d=requireInherits_browser(),e=requireAsn1$1(),t=e.base,r=e.bignum,s=e.constants.der;function a(c){this.enc="der",this.name=c.name,this.entity=c,this.tree=new n,this.tree._init(c.body)}der_1$1=a,a.prototype.decode=function(f,l){return f instanceof t.DecoderBuffer||(f=new t.DecoderBuffer(f,l)),this.tree._decode(f,l)};function n(c){t.Node.call(this,"der",c)}d(n,t.Node),n.prototype._peekTag=function(f,l,u){if(f.isEmpty())return!1;var g=f.save(),y=o(f,'Failed to peek tag: "'+l+'"');return f.isError(y)?y:(f.restore(g),y.tag===l||y.tagStr===l||y.tagStr+"of"===l||u)},n.prototype._decodeTag=function(f,l,u){var g=o(f,'Failed to decode tag of "'+l+'"');if(f.isError(g))return g;var y=p(f,g.primitive,'Failed to get length of "'+l+'"');if(f.isError(y))return y;if(!u&&g.tag!==l&&g.tagStr!==l&&g.tagStr+"of"!==l)return f.error('Failed to match tag: "'+l+'"');if(g.primitive||y!==null)return f.skip(y,'Failed to match body of: "'+l+'"');var b=f.save(),I=this._skipUntilEnd(f,'Failed to skip indefinite length body: "'+this.tag+'"');return f.isError(I)?I:(y=f.offset-b.offset,f.restore(b),f.skip(y,'Failed to match body of: "'+l+'"'))},n.prototype._skipUntilEnd=function(f,l){for(;;){var u=o(f,l);if(f.isError(u))return u;var g=p(f,u.primitive,l);if(f.isError(g))return g;var y;if(u.primitive||g!==null?y=f.skip(g):y=this._skipUntilEnd(f,l),f.isError(y))return y;if(u.tagStr==="end")break}},n.prototype._decodeList=function(f,l,u,g){for(var y=[];!f.isEmpty();){var b=this._peekTag(f,"end");if(f.isError(b))return b;var I=u.decode(f,"der",g);if(f.isError(I)&&b)break;y.push(I)}return y},n.prototype._decodeStr=function(f,l){if(l==="bitstr"){var u=f.readUInt8();return f.isError(u)?u:{unused:u,data:f.raw()}}else if(l==="bmpstr"){var g=f.raw();if(g.length%2===1)return f.error("Decoding of string type: bmpstr length mismatch");for(var y="",b=0;b<g.length/2;b++)y+=String.fromCharCode(g.readUInt16BE(b*2));return y}else if(l==="numstr"){var I=f.raw().toString("ascii");return this._isNumstr(I)?I:f.error("Decoding of string type: numstr unsupported characters")}else{if(l==="octstr")return f.raw();if(l==="objDesc")return f.raw();if(l==="printstr"){var S=f.raw().toString("ascii");return this._isPrintstr(S)?S:f.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(l)?f.raw().toString():f.error("Decoding of string type: "+l+" unsupported")}},n.prototype._decodeObjid=function(f,l,u){for(var g,y=[],b=0;!f.isEmpty();){var I=f.readUInt8();b<<=7,b|=I&127,I&128||(y.push(b),b=0)}I&128&&y.push(b);var S=y[0]/40|0,A=y[0]%40;if(u?g=y:g=[S,A].concat(y.slice(1)),l){var k=l[g.join(" ")];k===void 0&&(k=l[g.join(".")]),k!==void 0&&(g=k)}return g},n.prototype._decodeTime=function(f,l){var u=f.raw().toString();if(l==="gentime")var g=u.slice(0,4)|0,y=u.slice(4,6)|0,b=u.slice(6,8)|0,I=u.slice(8,10)|0,S=u.slice(10,12)|0,A=u.slice(12,14)|0;else if(l==="utctime"){var g=u.slice(0,2)|0,y=u.slice(2,4)|0,b=u.slice(4,6)|0,I=u.slice(6,8)|0,S=u.slice(8,10)|0,A=u.slice(10,12)|0;g<70?g=2e3+g:g=1900+g}else return f.error("Decoding "+l+" time is not supported yet");return Date.UTC(g,y-1,b,I,S,A,0)},n.prototype._decodeNull=function(f){return null},n.prototype._decodeBool=function(f){var l=f.readUInt8();return f.isError(l)?l:l!==0},n.prototype._decodeInt=function(f,l){var u=f.raw(),g=new r(u);return l&&(g=l[g.toString(10)]||g),g},n.prototype._use=function(f,l){return typeof f=="function"&&(f=f(l)),f._getDecoder("der").tree};function o(c,f){var l=c.readUInt8(f);if(c.isError(l))return l;var u=s.tagClass[l>>6],g=(l&32)===0;if((l&31)===31){var y=l;for(l=0;(y&128)===128;){if(y=c.readUInt8(f),c.isError(y))return y;l<<=7,l|=y&127}}else l&=31;var b=s.tag[l];return{cls:u,primitive:g,tag:l,tagStr:b}}function p(c,f,l){var u=c.readUInt8(l);if(c.isError(u))return u;if(!f&&u===128)return null;if(!(u&128))return u;var g=u&127;if(g>4)return c.error("length octect is too long");u=0;for(var y=0;y<g;y++){u<<=8;var b=c.readUInt8(l);if(c.isError(b))return b;u|=b}return u}return der_1$1}var pem$1,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$1;hasRequiredPem$1=1;var d=requireInherits_browser(),e=require$$1$2.Buffer,t=requireDer$1();function r(s){t.call(this,s),this.enc="pem"}return d(r,t),pem$1=r,r.prototype.decode=function(a,n){for(var o=a.toString().split(/[\r\n]+/g),p=n.label.toUpperCase(),c=/^-----(BEGIN|END) ([^-]+)-----$/,f=-1,l=-1,u=0;u<o.length;u++){var g=o[u].match(c);if(g!==null&&g[2]===p)if(f===-1){if(g[1]!=="BEGIN")break;f=u}else{if(g[1]!=="END")break;l=u;break}}if(f===-1||l===-1)throw new Error("PEM section not found for: "+p);var y=o.slice(f+1,l).join("");y.replace(/[^a-z0-9\+\/=]+/gi,"");var b=new e(y,"base64");return t.prototype.decode.call(this,b,n)},pem$1}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,function(d){var e=d;e.der=requireDer$1(),e.pem=requirePem$1()}(decoders)),decoders}var encoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;var d=requireInherits_browser(),e=require$$1$2.Buffer,t=requireAsn1$1(),r=t.base,s=t.constants.der;function a(c){this.enc="der",this.name=c.name,this.entity=c,this.tree=new n,this.tree._init(c.body)}der_1=a,a.prototype.encode=function(f,l){return this.tree._encode(f,l).join()};function n(c){r.Node.call(this,"der",c)}d(n,r.Node),n.prototype._encodeComposite=function(f,l,u,g){var y=p(f,l,u,this.reporter);if(g.length<128){var S=new e(2);return S[0]=y,S[1]=g.length,this._createEncoderBuffer([S,g])}for(var b=1,I=g.length;I>=256;I>>=8)b++;var S=new e(2+b);S[0]=y,S[1]=128|b;for(var I=1+b,A=g.length;A>0;I--,A>>=8)S[I]=A&255;return this._createEncoderBuffer([S,g])},n.prototype._encodeStr=function(f,l){if(l==="bitstr")return this._createEncoderBuffer([f.unused|0,f.data]);if(l==="bmpstr"){for(var u=new e(f.length*2),g=0;g<f.length;g++)u.writeUInt16BE(f.charCodeAt(g),g*2);return this._createEncoderBuffer(u)}else return l==="numstr"?this._isNumstr(f)?this._createEncoderBuffer(f):this.reporter.error("Encoding of string type: numstr supports only digits and space"):l==="printstr"?this._isPrintstr(f)?this._createEncoderBuffer(f):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(l)?this._createEncoderBuffer(f):l==="objDesc"?this._createEncoderBuffer(f):this.reporter.error("Encoding of string type: "+l+" unsupported")},n.prototype._encodeObjid=function(f,l,u){if(typeof f=="string"){if(!l)return this.reporter.error("string objid given, but no values map found");if(!l.hasOwnProperty(f))return this.reporter.error("objid not found in values map");f=l[f].split(/[\s\.]+/g);for(var g=0;g<f.length;g++)f[g]|=0}else if(Array.isArray(f)){f=f.slice();for(var g=0;g<f.length;g++)f[g]|=0}if(!Array.isArray(f))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(f));if(!u){if(f[1]>=40)return this.reporter.error("Second objid identifier OOB");f.splice(0,2,f[0]*40+f[1])}for(var y=0,g=0;g<f.length;g++){var b=f[g];for(y++;b>=128;b>>=7)y++}for(var I=new e(y),S=I.length-1,g=f.length-1;g>=0;g--){var b=f[g];for(I[S--]=b&127;(b>>=7)>0;)I[S--]=128|b&127}return this._createEncoderBuffer(I)};function o(c){return c<10?"0"+c:c}n.prototype._encodeTime=function(f,l){var u,g=new Date(f);return l==="gentime"?u=[o(g.getFullYear()),o(g.getUTCMonth()+1),o(g.getUTCDate()),o(g.getUTCHours()),o(g.getUTCMinutes()),o(g.getUTCSeconds()),"Z"].join(""):l==="utctime"?u=[o(g.getFullYear()%100),o(g.getUTCMonth()+1),o(g.getUTCDate()),o(g.getUTCHours()),o(g.getUTCMinutes()),o(g.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+l+" time is not supported yet"),this._encodeStr(u,"octstr")},n.prototype._encodeNull=function(){return this._createEncoderBuffer("")},n.prototype._encodeInt=function(f,l){if(typeof f=="string"){if(!l)return this.reporter.error("String int or enum given, but no values map");if(!l.hasOwnProperty(f))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(f));f=l[f]}if(typeof f!="number"&&!e.isBuffer(f)){var u=f.toArray();!f.sign&&u[0]&128&&u.unshift(0),f=new e(u)}if(e.isBuffer(f)){var g=f.length;f.length===0&&g++;var b=new e(g);return f.copy(b),f.length===0&&(b[0]=0),this._createEncoderBuffer(b)}if(f<128)return this._createEncoderBuffer(f);if(f<256)return this._createEncoderBuffer([0,f]);for(var g=1,y=f;y>=256;y>>=8)g++;for(var b=new Array(g),y=b.length-1;y>=0;y--)b[y]=f&255,f>>=8;return b[0]&128&&b.unshift(0),this._createEncoderBuffer(new e(b))},n.prototype._encodeBool=function(f){return this._createEncoderBuffer(f?255:0)},n.prototype._use=function(f,l){return typeof f=="function"&&(f=f(l)),f._getEncoder("der").tree},n.prototype._skipDefault=function(f,l,u){var g=this._baseState,y;if(g.default===null)return!1;var b=f.join();if(g.defaultBuffer===void 0&&(g.defaultBuffer=this._encodeValue(g.default,l,u).join()),b.length!==g.defaultBuffer.length)return!1;for(y=0;y<b.length;y++)if(b[y]!==g.defaultBuffer[y])return!1;return!0};function p(c,f,l,u){var g;if(c==="seqof"?c="seq":c==="setof"&&(c="set"),s.tagByName.hasOwnProperty(c))g=s.tagByName[c];else if(typeof c=="number"&&(c|0)===c)g=c;else return u.error("Unknown tag: "+c);return g>=31?u.error("Multi-octet tag encoding unsupported"):(f||(g|=32),g|=s.tagClassByName[l||"universal"]<<6,g)}return der_1}var pem,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem;hasRequiredPem=1;var d=requireInherits_browser(),e=requireDer();function t(r){e.call(this,r),this.enc="pem"}return d(t,e),pem=t,t.prototype.encode=function(s,a){for(var n=e.prototype.encode.call(this,s),o=n.toString("base64"),p=["-----BEGIN "+a.label+"-----"],c=0;c<o.length;c+=64)p.push(o.slice(c,c+64));return p.push("-----END "+a.label+"-----"),p.join(`
`)},pem}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,function(d){var e=d;e.der=requireDer(),e.pem=requirePem()}(encoders)),encoders}var hasRequiredAsn1$1;function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,function(d){var e=d;e.bignum=requireBn$1(),e.define=requireApi().define,e.base=requireBase(),e.constants=requireConstants(),e.decoders=requireDecoders(),e.encoders=requireEncoders()}(asn1)),asn1}var certificate,hasRequiredCertificate;function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1;var d=requireAsn1$1(),e=d.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),t=d.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),r=d.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),s=d.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(r),this.key("subjectPublicKey").bitstr())}),a=d.define("RelativeDistinguishedName",function(){this.setof(t)}),n=d.define("RDNSequence",function(){this.seqof(a)}),o=d.define("Name",function(){this.choice({rdnSequence:this.use(n)})}),p=d.define("Validity",function(){this.seq().obj(this.key("notBefore").use(e),this.key("notAfter").use(e))}),c=d.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),f=d.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(r),this.key("issuer").use(o),this.key("validity").use(p),this.key("subject").use(o),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(c).optional())}),l=d.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(f),this.key("signatureAlgorithm").use(r),this.key("signatureValue").bitstr())});return certificate=l,certificate}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1$1;hasRequiredAsn1=1;var d=requireAsn1$1();asn1$1.certificate=requireCertificate();var e=d.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$1.RSAPrivateKey=e;var t=d.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$1.RSAPublicKey=t;var r=d.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),s=d.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(r),this.key("subjectPublicKey").bitstr())});asn1$1.PublicKey=s;var a=d.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(r),this.key("subjectPrivateKey").octstr())});asn1$1.PrivateKey=a;var n=d.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$1.EncryptedPrivateKey=n;var o=d.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$1.DSAPrivateKey=o,asn1$1.DSAparam=d.define("DSAparam",function(){this.int()});var p=d.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),c=d.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(p),this.key("publicKey").optional().explicit(1).bitstr())});return asn1$1.ECPrivateKey=c,asn1$1.signature=d.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$1}var require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},fixProc,hasRequiredFixProc;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var d=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,e=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,t=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,r=requireEvp_bytestokey(),s=requireBrowser$6(),a=requireSafeBuffer$1().Buffer;return fixProc=function(n,o){var p=n.toString(),c=p.match(d),f;if(c){var u="aes"+c[1],g=a.from(c[2],"hex"),y=a.from(c[3].replace(/[\r\n]/g,""),"base64"),b=r(o,g.slice(0,8),parseInt(c[1],10)).key,I=[],S=s.createDecipheriv(u,b,g);I.push(S.update(y)),I.push(S.final()),f=a.concat(I)}else{var l=p.match(t);f=a.from(l[2].replace(/[\r\n]/g,""),"base64")}var A=p.match(e)[1];return{tag:A,data:f}},fixProc}var parseAsn1,hasRequiredParseAsn1;function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var d=requireAsn1(),e=require$$1,t=requireFixProc(),r=requireBrowser$6(),s=requireBrowser$7(),a=requireSafeBuffer$1().Buffer;function n(p,c){var f=p.algorithm.decrypt.kde.kdeparams.salt,l=parseInt(p.algorithm.decrypt.kde.kdeparams.iters.toString(),10),u=e[p.algorithm.decrypt.cipher.algo.join(".")],g=p.algorithm.decrypt.cipher.iv,y=p.subjectPrivateKey,b=parseInt(u.split("-")[1],10)/8,I=s.pbkdf2Sync(c,f,l,b,"sha1"),S=r.createDecipheriv(u,I,g),A=[];return A.push(S.update(y)),A.push(S.final()),a.concat(A)}function o(p){var c;typeof p=="object"&&!a.isBuffer(p)&&(c=p.passphrase,p=p.key),typeof p=="string"&&(p=a.from(p));var f=t(p,c),l=f.tag,u=f.data,g,y;switch(l){case"CERTIFICATE":y=d.certificate.decode(u,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(y||(y=d.PublicKey.decode(u,"der")),g=y.algorithm.algorithm.join("."),g){case"1.2.840.113549.1.1.1":return d.RSAPublicKey.decode(y.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return y.subjectPrivateKey=y.subjectPublicKey,{type:"ec",data:y};case"1.2.840.10040.4.1":return y.algorithm.params.pub_key=d.DSAparam.decode(y.subjectPublicKey.data,"der"),{type:"dsa",data:y.algorithm.params};default:throw new Error("unknown key id "+g)}case"ENCRYPTED PRIVATE KEY":u=d.EncryptedPrivateKey.decode(u,"der"),u=n(u,c);case"PRIVATE KEY":switch(y=d.PrivateKey.decode(u,"der"),g=y.algorithm.algorithm.join("."),g){case"1.2.840.113549.1.1.1":return d.RSAPrivateKey.decode(y.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:y.algorithm.curve,privateKey:d.ECPrivateKey.decode(y.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return y.algorithm.params.priv_key=d.DSAparam.decode(y.subjectPrivateKey,"der"),{type:"dsa",params:y.algorithm.params};default:throw new Error("unknown key id "+g)}case"RSA PUBLIC KEY":return d.RSAPublicKey.decode(u,"der");case"RSA PRIVATE KEY":return d.RSAPrivateKey.decode(u,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:d.DSAPrivateKey.decode(u,"der")};case"EC PRIVATE KEY":return u=d.ECPrivateKey.decode(u,"der"),{curve:u.parameters.value,privateKey:u.privateKey};default:throw new Error("unknown key type "+l)}}return o.signature=d.signature,parseAsn1=o,parseAsn1}var require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign.exports;hasRequiredSign=1;var d=requireSafeBuffer$1().Buffer,e=requireBrowser$8(),t=requireBrowserifyRsa(),r=requireElliptic().ec,s=requireBn(),a=requireParseAsn1(),n=require$$4,o=1;function p(S,A,k,T,O){var $=a(A);if($.curve){if(T!=="ecdsa"&&T!=="ecdsa/rsa")throw new Error("wrong private key type");return c(S,$)}else if($.type==="dsa"){if(T!=="dsa")throw new Error("wrong private key type");return f(S,$,k)}if(T!=="rsa"&&T!=="ecdsa/rsa")throw new Error("wrong private key type");if(A.padding!==void 0&&A.padding!==o)throw new Error("illegal or unsupported padding mode");S=d.concat([O,S]);for(var K=$.modulus.byteLength(),ee=[0,1];S.length+ee.length+1<K;)ee.push(255);ee.push(0);for(var Q=-1;++Q<S.length;)ee.push(S[Q]);var te=t(ee,$);return te}function c(S,A){var k=n[A.curve.join(".")];if(!k)throw new Error("unknown curve "+A.curve.join("."));var T=new r(k),O=T.keyFromPrivate(A.privateKey),$=O.sign(S);return d.from($.toDER())}function f(S,A,k){for(var T=A.params.priv_key,O=A.params.p,$=A.params.q,K=A.params.g,ee=new s(0),Q,te=g(S,$).mod($),N=!1,m=u(T,$,S,k);N===!1;)Q=b($,m,k),ee=I(K,Q,O,$),N=Q.invm($).imul(te.add(T.mul(ee))).mod($),N.cmpn(0)===0&&(N=!1,ee=new s(0));return l(ee,N)}function l(S,A){S=S.toArray(),A=A.toArray(),S[0]&128&&(S=[0].concat(S)),A[0]&128&&(A=[0].concat(A));var k=S.length+A.length+4,T=[48,k,2,S.length];return T=T.concat(S,[2,A.length],A),d.from(T)}function u(S,A,k,T){if(S=d.from(S.toArray()),S.length<A.byteLength()){var O=d.alloc(A.byteLength()-S.length);S=d.concat([O,S])}var $=k.length,K=y(k,A),ee=d.alloc($);ee.fill(1);var Q=d.alloc($);return Q=e(T,Q).update(ee).update(d.from([0])).update(S).update(K).digest(),ee=e(T,Q).update(ee).digest(),Q=e(T,Q).update(ee).update(d.from([1])).update(S).update(K).digest(),ee=e(T,Q).update(ee).digest(),{k:Q,v:ee}}function g(S,A){var k=new s(S),T=(S.length<<3)-A.bitLength();return T>0&&k.ishrn(T),k}function y(S,A){S=g(S,A),S=S.mod(A);var k=d.from(S.toArray());if(k.length<A.byteLength()){var T=d.alloc(A.byteLength()-k.length);k=d.concat([T,k])}return k}function b(S,A,k){var T,O;do{for(T=d.alloc(0);T.length*8<S.bitLength();)A.v=e(k,A.k).update(A.v).digest(),T=d.concat([T,A.v]);O=g(T,S),A.k=e(k,A.k).update(A.v).update(d.from([0])).digest(),A.v=e(k,A.k).update(A.v).digest()}while(O.cmp(S)!==-1);return O}function I(S,A,k,T){return S.toRed(s.mont(k)).redPow(A).fromRed().mod(T)}return sign.exports=p,sign.exports.getKey=u,sign.exports.makeKey=b,sign.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var d=requireSafeBuffer$1().Buffer,e=requireBn(),t=requireElliptic().ec,r=requireParseAsn1(),s=require$$4;function a(c,f,l,u,g){var y=r(l);if(y.type==="ec"){if(u!=="ecdsa"&&u!=="ecdsa/rsa")throw new Error("wrong public key type");return n(c,f,y)}else if(y.type==="dsa"){if(u!=="dsa")throw new Error("wrong public key type");return o(c,f,y)}if(u!=="rsa"&&u!=="ecdsa/rsa")throw new Error("wrong public key type");f=d.concat([g,f]);for(var b=y.modulus.byteLength(),I=[1],S=0;f.length+I.length+2<b;)I.push(255),S+=1;I.push(0);for(var A=-1;++A<f.length;)I.push(f[A]);I=d.from(I);var k=e.mont(y.modulus);c=new e(c).toRed(k),c=c.redPow(new e(y.publicExponent)),c=d.from(c.fromRed().toArray());var T=S<8?1:0;for(b=Math.min(c.length,I.length),c.length!==I.length&&(T=1),A=-1;++A<b;)T|=c[A]^I[A];return T===0}function n(c,f,l){var u=s[l.data.algorithm.curve.join(".")];if(!u)throw new Error("unknown curve "+l.data.algorithm.curve.join("."));var g=new t(u),y=l.data.subjectPrivateKey.data;return g.verify(f,c,y)}function o(c,f,l){var u=l.data.p,g=l.data.q,y=l.data.g,b=l.data.pub_key,I=r.signature.decode(c,"der"),S=I.s,A=I.r;p(S,g),p(A,g);var k=e.mont(u),T=S.invm(g),O=y.toRed(k).redPow(new e(f).mul(T).mod(g)).fromRed().mul(b.toRed(k).redPow(A.mul(T).mod(g)).fromRed()).mod(u).mod(g);return O.cmp(A)===0}function p(c,f){if(c.cmpn(0)<=0)throw new Error("invalid sig");if(c.cmp(f)>=0)throw new Error("invalid sig")}return verify_1=a,verify_1}var browser$3,hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$3;hasRequiredBrowser$3=1;var d=requireSafeBuffer$1().Buffer,e=requireBrowser$9(),t=requireReadableBrowser(),r=requireInherits_browser(),s=requireSign(),a=requireVerify(),n=require$$6;Object.keys(n).forEach(function(l){n[l].id=d.from(n[l].id,"hex"),n[l.toLowerCase()]=n[l]});function o(l){t.Writable.call(this);var u=n[l];if(!u)throw new Error("Unknown message digest");this._hashType=u.hash,this._hash=e(u.hash),this._tag=u.id,this._signType=u.sign}r(o,t.Writable),o.prototype._write=function(u,g,y){this._hash.update(u),y()},o.prototype.update=function(u,g){return this._hash.update(typeof u=="string"?d.from(u,g):u),this},o.prototype.sign=function(u,g){this.end();var y=this._hash.digest(),b=s(y,u,this._hashType,this._signType,this._tag);return g?b.toString(g):b};function p(l){t.Writable.call(this);var u=n[l];if(!u)throw new Error("Unknown message digest");this._hash=e(u.hash),this._tag=u.id,this._signType=u.sign}r(p,t.Writable),p.prototype._write=function(u,g,y){this._hash.update(u),y()},p.prototype.update=function(u,g){return this._hash.update(typeof u=="string"?d.from(u,g):u),this},p.prototype.verify=function(u,g,y){var b=typeof g=="string"?d.from(g,y):g;this.end();var I=this._hash.digest();return a(b,I,u,this._signType,this._tag)};function c(l){return new o(l)}function f(l){return new p(l)}return browser$3={Sign:c,Verify:f,createSign:c,createVerify:f},browser$3}var browser$2,hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$2;hasRequiredBrowser$2=1;var d=requireElliptic(),e=requireBn$1();browser$2=function(n){return new r(n)};var t={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};t.p224=t.secp224r1,t.p256=t.secp256r1=t.prime256v1,t.p192=t.secp192r1=t.prime192v1,t.p384=t.secp384r1,t.p521=t.secp521r1;function r(a){this.curveType=t[a],this.curveType||(this.curveType={name:a}),this.curve=new d.ec(this.curveType.name),this.keys=void 0}r.prototype.generateKeys=function(a,n){return this.keys=this.curve.genKeyPair(),this.getPublicKey(a,n)},r.prototype.computeSecret=function(a,n,o){n=n||"utf8",Buffer.isBuffer(a)||(a=new Buffer(a,n));var p=this.curve.keyFromPublic(a).getPublic(),c=p.mul(this.keys.getPrivate()).getX();return s(c,o,this.curveType.byteLength)},r.prototype.getPublicKey=function(a,n){var o=this.keys.getPublic(n==="compressed",!0);return n==="hybrid"&&(o[o.length-1]%2?o[0]=7:o[0]=6),s(o,a)},r.prototype.getPrivateKey=function(a){return s(this.keys.getPrivate(),a)},r.prototype.setPublicKey=function(a,n){return n=n||"utf8",Buffer.isBuffer(a)||(a=new Buffer(a,n)),this.keys._importPublic(a),this},r.prototype.setPrivateKey=function(a,n){n=n||"utf8",Buffer.isBuffer(a)||(a=new Buffer(a,n));var o=new e(a);return o=o.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(o),this};function s(a,n,o){Array.isArray(a)||(a=a.toArray());var p=new Buffer(a);if(o&&p.length<o){var c=new Buffer(o-p.length);c.fill(0),p=Buffer.concat([c,p])}return n?p.toString(n):p}return browser$2}var browser$1={},mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var d=requireBrowser$9(),e=requireSafeBuffer$1().Buffer;mgf=function(r,s){for(var a=e.alloc(0),n=0,o;a.length<s;)o=t(n++),a=e.concat([a,d("sha1").update(r).update(o).digest()]);return a.slice(0,s)};function t(r){var s=e.allocUnsafe(4);return s.writeUInt32BE(r,0),s}return mgf}var xor,hasRequiredXor;function requireXor(){return hasRequiredXor||(hasRequiredXor=1,xor=function(e,t){for(var r=e.length,s=-1;++s<r;)e[s]^=t[s];return e}),xor}var withPublic_1,hasRequiredWithPublic;function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var d=requireBn$1(),e=requireSafeBuffer$1().Buffer;function t(r,s){return e.from(r.toRed(d.mont(s.modulus)).redPow(new d(s.publicExponent)).fromRed().toArray())}return withPublic_1=t,withPublic_1}var publicEncrypt,hasRequiredPublicEncrypt;function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var d=requireParseAsn1(),e=requireBrowser$b(),t=requireBrowser$9(),r=requireMgf(),s=requireXor(),a=requireBn$1(),n=requireWithPublic(),o=requireBrowserifyRsa(),p=requireSafeBuffer$1().Buffer;publicEncrypt=function(g,y,b){var I;g.padding?I=g.padding:b?I=1:I=4;var S=d(g),A;if(I===4)A=c(S,y);else if(I===1)A=f(S,y,b);else if(I===3){if(A=new a(y),A.cmp(S.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return b?o(A,S):n(A,S)};function c(u,g){var y=u.modulus.byteLength(),b=g.length,I=t("sha1").update(p.alloc(0)).digest(),S=I.length,A=2*S;if(b>y-A-2)throw new Error("message too long");var k=p.alloc(y-b-A-2),T=y-S-1,O=e(S),$=s(p.concat([I,k,p.alloc(1,1),g],T),r(O,T)),K=s(O,r($,S));return new a(p.concat([p.alloc(1),K,$],y))}function f(u,g,y){var b=g.length,I=u.modulus.byteLength();if(b>I-11)throw new Error("message too long");var S;return y?S=p.alloc(I-b-3,255):S=l(I-b-3),new a(p.concat([p.from([0,y?1:2]),S,p.alloc(1),g],I))}function l(u){for(var g=p.allocUnsafe(u),y=0,b=e(u*2),I=0,S;y<u;)I===b.length&&(b=e(u*2),I=0),S=b[I++],S&&(g[y++]=S);return g}return publicEncrypt}var privateDecrypt,hasRequiredPrivateDecrypt;function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var d=requireParseAsn1(),e=requireMgf(),t=requireXor(),r=requireBn$1(),s=requireBrowserifyRsa(),a=requireBrowser$9(),n=requireWithPublic(),o=requireSafeBuffer$1().Buffer;privateDecrypt=function(u,g,y){var b;u.padding?b=u.padding:y?b=1:b=4;var I=d(u),S=I.modulus.byteLength();if(g.length>S||new r(g).cmp(I.modulus)>=0)throw new Error("decryption error");var A;y?A=n(new r(g),I):A=s(g,I);var k=o.alloc(S-A.length);if(A=o.concat([k,A],S),b===4)return p(I,A);if(b===1)return c(I,A,y);if(b===3)return A;throw new Error("unknown padding")};function p(l,u){var g=l.modulus.byteLength(),y=a("sha1").update(o.alloc(0)).digest(),b=y.length;if(u[0]!==0)throw new Error("decryption error");var I=u.slice(1,b+1),S=u.slice(b+1),A=t(I,e(S,b)),k=t(S,e(A,g-b-1));if(f(y,k.slice(0,b)))throw new Error("decryption error");for(var T=b;k[T]===0;)T++;if(k[T++]!==1)throw new Error("decryption error");return k.slice(T)}function c(l,u,g){for(var y=u.slice(0,2),b=2,I=0;u[b++]!==0;)if(b>=u.length){I++;break}var S=u.slice(2,b-1);if((y.toString("hex")!=="0002"&&!g||y.toString("hex")!=="0001"&&g)&&I++,S.length<8&&I++,I)throw new Error("decryption error");return u.slice(b)}function f(l,u){l=o.from(l),u=o.from(u);var g=0,y=l.length;l.length!==u.length&&(g++,y=Math.min(l.length,u.length));for(var b=-1;++b<y;)g+=l[b]^u[b];return g}return privateDecrypt}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(d){d.publicEncrypt=requirePublicEncrypt(),d.privateDecrypt=requirePrivateDecrypt(),d.privateEncrypt=function(t,r){return d.publicEncrypt(t,r,!0)},d.publicDecrypt=function(t,r){return d.privateDecrypt(t,r,!0)}}(browser$1)),browser$1}var browser={},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser;hasRequiredBrowser=1;function d(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var e=requireSafeBuffer$1(),t=requireBrowser$b(),r=e.Buffer,s=e.kMaxLength,a=commonjsGlobal.crypto||commonjsGlobal.msCrypto,n=Math.pow(2,32)-1;function o(u,g){if(typeof u!="number"||u!==u)throw new TypeError("offset must be a number");if(u>n||u<0)throw new TypeError("offset must be a uint32");if(u>s||u>g)throw new RangeError("offset out of range")}function p(u,g,y){if(typeof u!="number"||u!==u)throw new TypeError("size must be a number");if(u>n||u<0)throw new TypeError("size must be a uint32");if(u+g>y||u>s)throw new RangeError("buffer too small")}a&&a.getRandomValues||!process$1.browser?(browser.randomFill=c,browser.randomFillSync=l):(browser.randomFill=d,browser.randomFillSync=d);function c(u,g,y,b){if(!r.isBuffer(u)&&!(u instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof g=="function")b=g,g=0,y=u.length;else if(typeof y=="function")b=y,y=u.length-g;else if(typeof b!="function")throw new TypeError('"cb" argument must be a function');return o(g,u.length),p(y,g,u.length),f(u,g,y,b)}function f(u,g,y,b){if(process$1.browser){var I=u.buffer,S=new Uint8Array(I,g,y);if(a.getRandomValues(S),b){process$1.nextTick(function(){b(null,u)});return}return u}if(b){t(y,function(k,T){if(k)return b(k);T.copy(u,g),b(null,u)});return}var A=t(y);return A.copy(u,g),u}function l(u,g,y){if(typeof g>"u"&&(g=0),!r.isBuffer(u)&&!(u instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return o(g,u.length),y===void 0&&(y=u.length-g),p(y,g,u.length),f(u,g,y)}return browser}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$b(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$9(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$8();var d=requireAlgos(),e=Object.keys(d),t=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(e);cryptoBrowserify.getHashes=function(){return t};var r=requireBrowser$7();cryptoBrowserify.pbkdf2=r.pbkdf2,cryptoBrowserify.pbkdf2Sync=r.pbkdf2Sync;var s=requireBrowser$5();cryptoBrowserify.Cipher=s.Cipher,cryptoBrowserify.createCipher=s.createCipher,cryptoBrowserify.Cipheriv=s.Cipheriv,cryptoBrowserify.createCipheriv=s.createCipheriv,cryptoBrowserify.Decipher=s.Decipher,cryptoBrowserify.createDecipher=s.createDecipher,cryptoBrowserify.Decipheriv=s.Decipheriv,cryptoBrowserify.createDecipheriv=s.createDecipheriv,cryptoBrowserify.getCiphers=s.getCiphers,cryptoBrowserify.listCiphers=s.listCiphers;var a=requireBrowser$4();cryptoBrowserify.DiffieHellmanGroup=a.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=a.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=a.getDiffieHellman,cryptoBrowserify.createDiffieHellman=a.createDiffieHellman,cryptoBrowserify.DiffieHellman=a.DiffieHellman;var n=requireBrowser$3();cryptoBrowserify.createSign=n.createSign,cryptoBrowserify.Sign=n.Sign,cryptoBrowserify.createVerify=n.createVerify,cryptoBrowserify.Verify=n.Verify,cryptoBrowserify.createECDH=requireBrowser$2();var o=requireBrowser$1();cryptoBrowserify.publicEncrypt=o.publicEncrypt,cryptoBrowserify.privateEncrypt=o.privateEncrypt,cryptoBrowserify.publicDecrypt=o.publicDecrypt,cryptoBrowserify.privateDecrypt=o.privateDecrypt;var p=requireBrowser();return cryptoBrowserify.randomFill=p.randomFill,cryptoBrowserify.randomFillSync=p.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}(function(d){(function(){var e="input is invalid type",t="finalize already called",r=typeof window=="object",s=r?window:{};s.JS_MD5_NO_WINDOW&&(r=!1);var a=!r&&typeof self=="object",n=!s.JS_MD5_NO_NODE_JS&&typeof process$1=="object"&&process$1.versions&&process$1.versions.node;n?s=commonjsGlobal:a&&(s=self);var o=!s.JS_MD5_NO_COMMON_JS&&!0&&d.exports,p=!s.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",c="0123456789abcdef".split(""),f=[128,32768,8388608,-2147483648],l=[0,8,16,24],u=["hex","array","digest","buffer","arrayBuffer","base64"],g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),y=[],b;if(p){var I=new ArrayBuffer(68);b=new Uint8Array(I),y=new Uint32Array(I)}var S=Array.isArray;(s.JS_MD5_NO_NODE_JS||!S)&&(S=function(m){return Object.prototype.toString.call(m)==="[object Array]"});var A=ArrayBuffer.isView;p&&(s.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!A)&&(A=function(m){return typeof m=="object"&&m.buffer&&m.buffer.constructor===ArrayBuffer});var k=function(m){var _=typeof m;if(_==="string")return[m,!0];if(_!=="object"||m===null)throw new Error(e);if(p&&m.constructor===ArrayBuffer)return[new Uint8Array(m),!1];if(!S(m)&&!A(m))throw new Error(e);return[m,!1]},T=function(m){return function(_){return new Q(!0).update(_)[m]()}},O=function(){var m=T("hex");n&&(m=$(m)),m.create=function(){return new Q},m.update=function(v){return m.create().update(v)};for(var _=0;_<u.length;++_){var h=u[_];m[h]=T(h)}return m},$=function(m){var _=requireCryptoBrowserify(),h=require$$1$2.Buffer,v;h.from&&!s.JS_MD5_NO_BUFFER_FROM?v=h.from:v=function(M){return new h(M)};var E=function(M){if(typeof M=="string")return _.createHash("md5").update(M,"utf8").digest("hex");if(M==null)throw new Error(e);return M.constructor===ArrayBuffer&&(M=new Uint8Array(M)),S(M)||A(M)||M.constructor===h?_.createHash("md5").update(v(M)).digest("hex"):m(M)};return E},K=function(m){return function(_,h){return new te(_,!0).update(h)[m]()}},ee=function(){var m=K("hex");m.create=function(v){return new te(v)},m.update=function(v,E){return m.create(v).update(E)};for(var _=0;_<u.length;++_){var h=u[_];m[h]=K(h)}return m};function Q(m){if(m)y[0]=y[16]=y[1]=y[2]=y[3]=y[4]=y[5]=y[6]=y[7]=y[8]=y[9]=y[10]=y[11]=y[12]=y[13]=y[14]=y[15]=0,this.blocks=y,this.buffer8=b;else if(p){var _=new ArrayBuffer(68);this.buffer8=new Uint8Array(_),this.blocks=new Uint32Array(_)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Q.prototype.update=function(m){if(this.finalized)throw new Error(t);var _=k(m);m=_[0];for(var h=_[1],v,E=0,M,P=m.length,D=this.blocks,w=this.buffer8;E<P;){if(this.hashed&&(this.hashed=!1,D[0]=D[16],D[16]=D[1]=D[2]=D[3]=D[4]=D[5]=D[6]=D[7]=D[8]=D[9]=D[10]=D[11]=D[12]=D[13]=D[14]=D[15]=0),h)if(p)for(M=this.start;E<P&&M<64;++E)v=m.charCodeAt(E),v<128?w[M++]=v:v<2048?(w[M++]=192|v>>>6,w[M++]=128|v&63):v<55296||v>=57344?(w[M++]=224|v>>>12,w[M++]=128|v>>>6&63,w[M++]=128|v&63):(v=65536+((v&1023)<<10|m.charCodeAt(++E)&1023),w[M++]=240|v>>>18,w[M++]=128|v>>>12&63,w[M++]=128|v>>>6&63,w[M++]=128|v&63);else for(M=this.start;E<P&&M<64;++E)v=m.charCodeAt(E),v<128?D[M>>>2]|=v<<l[M++&3]:v<2048?(D[M>>>2]|=(192|v>>>6)<<l[M++&3],D[M>>>2]|=(128|v&63)<<l[M++&3]):v<55296||v>=57344?(D[M>>>2]|=(224|v>>>12)<<l[M++&3],D[M>>>2]|=(128|v>>>6&63)<<l[M++&3],D[M>>>2]|=(128|v&63)<<l[M++&3]):(v=65536+((v&1023)<<10|m.charCodeAt(++E)&1023),D[M>>>2]|=(240|v>>>18)<<l[M++&3],D[M>>>2]|=(128|v>>>12&63)<<l[M++&3],D[M>>>2]|=(128|v>>>6&63)<<l[M++&3],D[M>>>2]|=(128|v&63)<<l[M++&3]);else if(p)for(M=this.start;E<P&&M<64;++E)w[M++]=m[E];else for(M=this.start;E<P&&M<64;++E)D[M>>>2]|=m[E]<<l[M++&3];this.lastByteIndex=M,this.bytes+=M-this.start,M>=64?(this.start=M-64,this.hash(),this.hashed=!0):this.start=M}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this},Q.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var m=this.blocks,_=this.lastByteIndex;m[_>>>2]|=f[_&3],_>=56&&(this.hashed||this.hash(),m[0]=m[16],m[16]=m[1]=m[2]=m[3]=m[4]=m[5]=m[6]=m[7]=m[8]=m[9]=m[10]=m[11]=m[12]=m[13]=m[14]=m[15]=0),m[14]=this.bytes<<3,m[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Q.prototype.hash=function(){var m,_,h,v,E,M,P=this.blocks;this.first?(m=P[0]-680876937,m=(m<<7|m>>>25)-271733879<<0,v=(-1732584194^m&2004318071)+P[1]-117830708,v=(v<<12|v>>>20)+m<<0,h=(-271733879^v&(m^-271733879))+P[2]-1126478375,h=(h<<17|h>>>15)+v<<0,_=(m^h&(v^m))+P[3]-1316259209,_=(_<<22|_>>>10)+h<<0):(m=this.h0,_=this.h1,h=this.h2,v=this.h3,m+=(v^_&(h^v))+P[0]-680876936,m=(m<<7|m>>>25)+_<<0,v+=(h^m&(_^h))+P[1]-389564586,v=(v<<12|v>>>20)+m<<0,h+=(_^v&(m^_))+P[2]+606105819,h=(h<<17|h>>>15)+v<<0,_+=(m^h&(v^m))+P[3]-1044525330,_=(_<<22|_>>>10)+h<<0),m+=(v^_&(h^v))+P[4]-176418897,m=(m<<7|m>>>25)+_<<0,v+=(h^m&(_^h))+P[5]+1200080426,v=(v<<12|v>>>20)+m<<0,h+=(_^v&(m^_))+P[6]-1473231341,h=(h<<17|h>>>15)+v<<0,_+=(m^h&(v^m))+P[7]-45705983,_=(_<<22|_>>>10)+h<<0,m+=(v^_&(h^v))+P[8]+1770035416,m=(m<<7|m>>>25)+_<<0,v+=(h^m&(_^h))+P[9]-1958414417,v=(v<<12|v>>>20)+m<<0,h+=(_^v&(m^_))+P[10]-42063,h=(h<<17|h>>>15)+v<<0,_+=(m^h&(v^m))+P[11]-1990404162,_=(_<<22|_>>>10)+h<<0,m+=(v^_&(h^v))+P[12]+1804603682,m=(m<<7|m>>>25)+_<<0,v+=(h^m&(_^h))+P[13]-40341101,v=(v<<12|v>>>20)+m<<0,h+=(_^v&(m^_))+P[14]-1502002290,h=(h<<17|h>>>15)+v<<0,_+=(m^h&(v^m))+P[15]+1236535329,_=(_<<22|_>>>10)+h<<0,m+=(h^v&(_^h))+P[1]-165796510,m=(m<<5|m>>>27)+_<<0,v+=(_^h&(m^_))+P[6]-1069501632,v=(v<<9|v>>>23)+m<<0,h+=(m^_&(v^m))+P[11]+643717713,h=(h<<14|h>>>18)+v<<0,_+=(v^m&(h^v))+P[0]-373897302,_=(_<<20|_>>>12)+h<<0,m+=(h^v&(_^h))+P[5]-701558691,m=(m<<5|m>>>27)+_<<0,v+=(_^h&(m^_))+P[10]+38016083,v=(v<<9|v>>>23)+m<<0,h+=(m^_&(v^m))+P[15]-660478335,h=(h<<14|h>>>18)+v<<0,_+=(v^m&(h^v))+P[4]-405537848,_=(_<<20|_>>>12)+h<<0,m+=(h^v&(_^h))+P[9]+568446438,m=(m<<5|m>>>27)+_<<0,v+=(_^h&(m^_))+P[14]-1019803690,v=(v<<9|v>>>23)+m<<0,h+=(m^_&(v^m))+P[3]-187363961,h=(h<<14|h>>>18)+v<<0,_+=(v^m&(h^v))+P[8]+1163531501,_=(_<<20|_>>>12)+h<<0,m+=(h^v&(_^h))+P[13]-1444681467,m=(m<<5|m>>>27)+_<<0,v+=(_^h&(m^_))+P[2]-51403784,v=(v<<9|v>>>23)+m<<0,h+=(m^_&(v^m))+P[7]+1735328473,h=(h<<14|h>>>18)+v<<0,_+=(v^m&(h^v))+P[12]-1926607734,_=(_<<20|_>>>12)+h<<0,E=_^h,m+=(E^v)+P[5]-378558,m=(m<<4|m>>>28)+_<<0,v+=(E^m)+P[8]-2022574463,v=(v<<11|v>>>21)+m<<0,M=v^m,h+=(M^_)+P[11]+1839030562,h=(h<<16|h>>>16)+v<<0,_+=(M^h)+P[14]-35309556,_=(_<<23|_>>>9)+h<<0,E=_^h,m+=(E^v)+P[1]-1530992060,m=(m<<4|m>>>28)+_<<0,v+=(E^m)+P[4]+1272893353,v=(v<<11|v>>>21)+m<<0,M=v^m,h+=(M^_)+P[7]-155497632,h=(h<<16|h>>>16)+v<<0,_+=(M^h)+P[10]-1094730640,_=(_<<23|_>>>9)+h<<0,E=_^h,m+=(E^v)+P[13]+681279174,m=(m<<4|m>>>28)+_<<0,v+=(E^m)+P[0]-358537222,v=(v<<11|v>>>21)+m<<0,M=v^m,h+=(M^_)+P[3]-722521979,h=(h<<16|h>>>16)+v<<0,_+=(M^h)+P[6]+76029189,_=(_<<23|_>>>9)+h<<0,E=_^h,m+=(E^v)+P[9]-640364487,m=(m<<4|m>>>28)+_<<0,v+=(E^m)+P[12]-421815835,v=(v<<11|v>>>21)+m<<0,M=v^m,h+=(M^_)+P[15]+530742520,h=(h<<16|h>>>16)+v<<0,_+=(M^h)+P[2]-995338651,_=(_<<23|_>>>9)+h<<0,m+=(h^(_|~v))+P[0]-198630844,m=(m<<6|m>>>26)+_<<0,v+=(_^(m|~h))+P[7]+1126891415,v=(v<<10|v>>>22)+m<<0,h+=(m^(v|~_))+P[14]-1416354905,h=(h<<15|h>>>17)+v<<0,_+=(v^(h|~m))+P[5]-57434055,_=(_<<21|_>>>11)+h<<0,m+=(h^(_|~v))+P[12]+1700485571,m=(m<<6|m>>>26)+_<<0,v+=(_^(m|~h))+P[3]-1894986606,v=(v<<10|v>>>22)+m<<0,h+=(m^(v|~_))+P[10]-1051523,h=(h<<15|h>>>17)+v<<0,_+=(v^(h|~m))+P[1]-2054922799,_=(_<<21|_>>>11)+h<<0,m+=(h^(_|~v))+P[8]+1873313359,m=(m<<6|m>>>26)+_<<0,v+=(_^(m|~h))+P[15]-30611744,v=(v<<10|v>>>22)+m<<0,h+=(m^(v|~_))+P[6]-1560198380,h=(h<<15|h>>>17)+v<<0,_+=(v^(h|~m))+P[13]+1309151649,_=(_<<21|_>>>11)+h<<0,m+=(h^(_|~v))+P[4]-145523070,m=(m<<6|m>>>26)+_<<0,v+=(_^(m|~h))+P[11]-1120210379,v=(v<<10|v>>>22)+m<<0,h+=(m^(v|~_))+P[2]+718787259,h=(h<<15|h>>>17)+v<<0,_+=(v^(h|~m))+P[9]-343485551,_=(_<<21|_>>>11)+h<<0,this.first?(this.h0=m+1732584193<<0,this.h1=_-271733879<<0,this.h2=h-1732584194<<0,this.h3=v+271733878<<0,this.first=!1):(this.h0=this.h0+m<<0,this.h1=this.h1+_<<0,this.h2=this.h2+h<<0,this.h3=this.h3+v<<0)},Q.prototype.hex=function(){this.finalize();var m=this.h0,_=this.h1,h=this.h2,v=this.h3;return c[m>>>4&15]+c[m&15]+c[m>>>12&15]+c[m>>>8&15]+c[m>>>20&15]+c[m>>>16&15]+c[m>>>28&15]+c[m>>>24&15]+c[_>>>4&15]+c[_&15]+c[_>>>12&15]+c[_>>>8&15]+c[_>>>20&15]+c[_>>>16&15]+c[_>>>28&15]+c[_>>>24&15]+c[h>>>4&15]+c[h&15]+c[h>>>12&15]+c[h>>>8&15]+c[h>>>20&15]+c[h>>>16&15]+c[h>>>28&15]+c[h>>>24&15]+c[v>>>4&15]+c[v&15]+c[v>>>12&15]+c[v>>>8&15]+c[v>>>20&15]+c[v>>>16&15]+c[v>>>28&15]+c[v>>>24&15]},Q.prototype.toString=Q.prototype.hex,Q.prototype.digest=function(){this.finalize();var m=this.h0,_=this.h1,h=this.h2,v=this.h3;return[m&255,m>>>8&255,m>>>16&255,m>>>24&255,_&255,_>>>8&255,_>>>16&255,_>>>24&255,h&255,h>>>8&255,h>>>16&255,h>>>24&255,v&255,v>>>8&255,v>>>16&255,v>>>24&255]},Q.prototype.array=Q.prototype.digest,Q.prototype.arrayBuffer=function(){this.finalize();var m=new ArrayBuffer(16),_=new Uint32Array(m);return _[0]=this.h0,_[1]=this.h1,_[2]=this.h2,_[3]=this.h3,m},Q.prototype.buffer=Q.prototype.arrayBuffer,Q.prototype.base64=function(){for(var m,_,h,v="",E=this.array(),M=0;M<15;)m=E[M++],_=E[M++],h=E[M++],v+=g[m>>>2]+g[(m<<4|_>>>4)&63]+g[(_<<2|h>>>6)&63]+g[h&63];return m=E[M],v+=g[m>>>2]+g[m<<4&63]+"==",v};function te(m,_){var h,v=k(m);if(m=v[0],v[1]){var E=[],M=m.length,P=0,D;for(h=0;h<M;++h)D=m.charCodeAt(h),D<128?E[P++]=D:D<2048?(E[P++]=192|D>>>6,E[P++]=128|D&63):D<55296||D>=57344?(E[P++]=224|D>>>12,E[P++]=128|D>>>6&63,E[P++]=128|D&63):(D=65536+((D&1023)<<10|m.charCodeAt(++h)&1023),E[P++]=240|D>>>18,E[P++]=128|D>>>12&63,E[P++]=128|D>>>6&63,E[P++]=128|D&63);m=E}m.length>64&&(m=new Q(!0).update(m).array());var w=[],B=[];for(h=0;h<64;++h){var x=m[h]||0;w[h]=92^x,B[h]=54^x}Q.call(this,_),this.update(B),this.oKeyPad=w,this.inner=!0,this.sharedMemory=_}te.prototype=new Q,te.prototype.finalize=function(){if(Q.prototype.finalize.call(this),this.inner){this.inner=!1;var m=this.array();Q.call(this,this.sharedMemory),this.update(this.oKeyPad),this.update(m),Q.prototype.finalize.call(this)}};var N=O();N.md5=N,N.md5.hmac=ee(),o?d.exports=N:s.md5=N})()})(md5$1);var md5Exports=md5$1.exports,BigInteger={exports:{}};(function(d){var e=function(t){var r=1e7,s=7,a=9007199254740992,n=y(a),o="0123456789abcdefghijklmnopqrstuvwxyz",p=typeof BigInt=="function";function c(V,W,ae,oe){return typeof V>"u"?c[0]:typeof W<"u"?+W==10&&!ae?be(V):ke(V,W,ae,oe):be(V)}function f(V,W){this.value=V,this.sign=W,this.isSmall=!1}f.prototype=Object.create(c.prototype);function l(V){this.value=V,this.sign=V<0,this.isSmall=!0}l.prototype=Object.create(c.prototype);function u(V){this.value=V}u.prototype=Object.create(c.prototype);function g(V){return-a<V&&V<a}function y(V){return V<1e7?[V]:V<1e14?[V%1e7,Math.floor(V/1e7)]:[V%1e7,Math.floor(V/1e7)%1e7,Math.floor(V/1e14)]}function b(V){I(V);var W=V.length;if(W<4&&w(V,n)<0)switch(W){case 0:return 0;case 1:return V[0];case 2:return V[0]+V[1]*r;default:return V[0]+(V[1]+V[2]*r)*r}return V}function I(V){for(var W=V.length;V[--W]===0;);V.length=W+1}function S(V){for(var W=new Array(V),ae=-1;++ae<V;)W[ae]=0;return W}function A(V){return V>0?Math.floor(V):Math.ceil(V)}function k(V,W){var ae=V.length,oe=W.length,F=new Array(ae),C=0,R=r,j,Y;for(Y=0;Y<oe;Y++)j=V[Y]+W[Y]+C,C=j>=R?1:0,F[Y]=j-C*R;for(;Y<ae;)j=V[Y]+C,C=j===R?1:0,F[Y++]=j-C*R;return C>0&&F.push(C),F}function T(V,W){return V.length>=W.length?k(V,W):k(W,V)}function O(V,W){var ae=V.length,oe=new Array(ae),F=r,C,R;for(R=0;R<ae;R++)C=V[R]-F+W,W=Math.floor(C/F),oe[R]=C-W*F,W+=1;for(;W>0;)oe[R++]=W%F,W=Math.floor(W/F);return oe}f.prototype.add=function(V){var W=be(V);if(this.sign!==W.sign)return this.subtract(W.negate());var ae=this.value,oe=W.value;return W.isSmall?new f(O(ae,Math.abs(oe)),this.sign):new f(T(ae,oe),this.sign)},f.prototype.plus=f.prototype.add,l.prototype.add=function(V){var W=be(V),ae=this.value;if(ae<0!==W.sign)return this.subtract(W.negate());var oe=W.value;if(W.isSmall){if(g(ae+oe))return new l(ae+oe);oe=y(Math.abs(oe))}return new f(O(oe,Math.abs(ae)),ae<0)},l.prototype.plus=l.prototype.add,u.prototype.add=function(V){return new u(this.value+be(V).value)},u.prototype.plus=u.prototype.add;function $(V,W){var ae=V.length,oe=W.length,F=new Array(ae),C=0,R=r,j,Y;for(j=0;j<oe;j++)Y=V[j]-C-W[j],Y<0?(Y+=R,C=1):C=0,F[j]=Y;for(j=oe;j<ae;j++){if(Y=V[j]-C,Y<0)Y+=R;else{F[j++]=Y;break}F[j]=Y}for(;j<ae;j++)F[j]=V[j];return I(F),F}function K(V,W,ae){var oe;return w(V,W)>=0?oe=$(V,W):(oe=$(W,V),ae=!ae),oe=b(oe),typeof oe=="number"?(ae&&(oe=-oe),new l(oe)):new f(oe,ae)}function ee(V,W,ae){var oe=V.length,F=new Array(oe),C=-W,R=r,j,Y;for(j=0;j<oe;j++)Y=V[j]+C,C=Math.floor(Y/R),Y%=R,F[j]=Y<0?Y+R:Y;return F=b(F),typeof F=="number"?(ae&&(F=-F),new l(F)):new f(F,ae)}f.prototype.subtract=function(V){var W=be(V);if(this.sign!==W.sign)return this.add(W.negate());var ae=this.value,oe=W.value;return W.isSmall?ee(ae,Math.abs(oe),this.sign):K(ae,oe,this.sign)},f.prototype.minus=f.prototype.subtract,l.prototype.subtract=function(V){var W=be(V),ae=this.value;if(ae<0!==W.sign)return this.add(W.negate());var oe=W.value;return W.isSmall?new l(ae-oe):ee(oe,Math.abs(ae),ae>=0)},l.prototype.minus=l.prototype.subtract,u.prototype.subtract=function(V){return new u(this.value-be(V).value)},u.prototype.minus=u.prototype.subtract,f.prototype.negate=function(){return new f(this.value,!this.sign)},l.prototype.negate=function(){var V=this.sign,W=new l(-this.value);return W.sign=!V,W},u.prototype.negate=function(){return new u(-this.value)},f.prototype.abs=function(){return new f(this.value,!1)},l.prototype.abs=function(){return new l(Math.abs(this.value))},u.prototype.abs=function(){return new u(this.value>=0?this.value:-this.value)};function Q(V,W){var ae=V.length,oe=W.length,F=ae+oe,C=S(F),R=r,j,Y,ie,pe,Me;for(ie=0;ie<ae;++ie){pe=V[ie];for(var Ce=0;Ce<oe;++Ce)Me=W[Ce],j=pe*Me+C[ie+Ce],Y=Math.floor(j/R),C[ie+Ce]=j-Y*R,C[ie+Ce+1]+=Y}return I(C),C}function te(V,W){var ae=V.length,oe=new Array(ae),F=r,C=0,R,j;for(j=0;j<ae;j++)R=V[j]*W+C,C=Math.floor(R/F),oe[j]=R-C*F;for(;C>0;)oe[j++]=C%F,C=Math.floor(C/F);return oe}function N(V,W){for(var ae=[];W-- >0;)ae.push(0);return ae.concat(V)}function m(V,W){var ae=Math.max(V.length,W.length);if(ae<=30)return Q(V,W);ae=Math.ceil(ae/2);var oe=V.slice(ae),F=V.slice(0,ae),C=W.slice(ae),R=W.slice(0,ae),j=m(F,R),Y=m(oe,C),ie=m(T(F,oe),T(R,C)),pe=T(T(j,N($($(ie,j),Y),ae)),N(Y,2*ae));return I(pe),pe}function _(V,W){return-.012*V-.012*W+15e-6*V*W>0}f.prototype.multiply=function(V){var W=be(V),ae=this.value,oe=W.value,F=this.sign!==W.sign,C;if(W.isSmall){if(oe===0)return c[0];if(oe===1)return this;if(oe===-1)return this.negate();if(C=Math.abs(oe),C<r)return new f(te(ae,C),F);oe=y(C)}return _(ae.length,oe.length)?new f(m(ae,oe),F):new f(Q(ae,oe),F)},f.prototype.times=f.prototype.multiply;function h(V,W,ae){return V<r?new f(te(W,V),ae):new f(Q(W,y(V)),ae)}l.prototype._multiplyBySmall=function(V){return g(V.value*this.value)?new l(V.value*this.value):h(Math.abs(V.value),y(Math.abs(this.value)),this.sign!==V.sign)},f.prototype._multiplyBySmall=function(V){return V.value===0?c[0]:V.value===1?this:V.value===-1?this.negate():h(Math.abs(V.value),this.value,this.sign!==V.sign)},l.prototype.multiply=function(V){return be(V)._multiplyBySmall(this)},l.prototype.times=l.prototype.multiply,u.prototype.multiply=function(V){return new u(this.value*be(V).value)},u.prototype.times=u.prototype.multiply;function v(V){var W=V.length,ae=S(W+W),oe=r,F,C,R,j,Y;for(R=0;R<W;R++){j=V[R],C=0-j*j;for(var ie=R;ie<W;ie++)Y=V[ie],F=2*(j*Y)+ae[R+ie]+C,C=Math.floor(F/oe),ae[R+ie]=F-C*oe;ae[R+W]=C}return I(ae),ae}f.prototype.square=function(){return new f(v(this.value),!1)},l.prototype.square=function(){var V=this.value*this.value;return g(V)?new l(V):new f(v(y(Math.abs(this.value))),!1)},u.prototype.square=function(V){return new u(this.value*this.value)};function E(V,W){var ae=V.length,oe=W.length,F=r,C=S(W.length),R=W[oe-1],j=Math.ceil(F/(2*R)),Y=te(V,j),ie=te(W,j),pe,Me,Ce,Ee,Z,ne,q;for(Y.length<=ae&&Y.push(0),ie.push(0),R=ie[oe-1],Me=ae-oe;Me>=0;Me--){for(pe=F-1,Y[Me+oe]!==R&&(pe=Math.floor((Y[Me+oe]*F+Y[Me+oe-1])/R)),Ce=0,Ee=0,ne=ie.length,Z=0;Z<ne;Z++)Ce+=pe*ie[Z],q=Math.floor(Ce/F),Ee+=Y[Me+Z]-(Ce-q*F),Ce=q,Ee<0?(Y[Me+Z]=Ee+F,Ee=-1):(Y[Me+Z]=Ee,Ee=0);for(;Ee!==0;){for(pe-=1,Ce=0,Z=0;Z<ne;Z++)Ce+=Y[Me+Z]-F+ie[Z],Ce<0?(Y[Me+Z]=Ce+F,Ce=0):(Y[Me+Z]=Ce,Ce=1);Ee+=Ce}C[Me]=pe}return Y=P(Y,j)[0],[b(C),b(Y)]}function M(V,W){for(var ae=V.length,oe=W.length,F=[],C=[],R=r,j,Y,ie,pe,Me;ae;){if(C.unshift(V[--ae]),I(C),w(C,W)<0){F.push(0);continue}Y=C.length,ie=C[Y-1]*R+C[Y-2],pe=W[oe-1]*R+W[oe-2],Y>oe&&(ie=(ie+1)*R),j=Math.ceil(ie/pe);do{if(Me=te(W,j),w(Me,C)<=0)break;j--}while(j);F.push(j),C=$(C,Me)}return F.reverse(),[b(F),b(C)]}function P(V,W){var ae=V.length,oe=S(ae),F=r,C,R,j,Y;for(j=0,C=ae-1;C>=0;--C)Y=j*F+V[C],R=A(Y/W),j=Y-R*W,oe[C]=R|0;return[oe,j|0]}function D(V,W){var ae,oe=be(W);if(p)return[new u(V.value/oe.value),new u(V.value%oe.value)];var F=V.value,C=oe.value,R;if(C===0)throw new Error("Cannot divide by zero");if(V.isSmall)return oe.isSmall?[new l(A(F/C)),new l(F%C)]:[c[0],V];if(oe.isSmall){if(C===1)return[V,c[0]];if(C==-1)return[V.negate(),c[0]];var j=Math.abs(C);if(j<r){ae=P(F,j),R=b(ae[0]);var Y=ae[1];return V.sign&&(Y=-Y),typeof R=="number"?(V.sign!==oe.sign&&(R=-R),[new l(R),new l(Y)]):[new f(R,V.sign!==oe.sign),new l(Y)]}C=y(j)}var ie=w(F,C);if(ie===-1)return[c[0],V];if(ie===0)return[c[V.sign===oe.sign?1:-1],c[0]];F.length+C.length<=200?ae=E(F,C):ae=M(F,C),R=ae[0];var pe=V.sign!==oe.sign,Me=ae[1],Ce=V.sign;return typeof R=="number"?(pe&&(R=-R),R=new l(R)):R=new f(R,pe),typeof Me=="number"?(Ce&&(Me=-Me),Me=new l(Me)):Me=new f(Me,Ce),[R,Me]}f.prototype.divmod=function(V){var W=D(this,V);return{quotient:W[0],remainder:W[1]}},u.prototype.divmod=l.prototype.divmod=f.prototype.divmod,f.prototype.divide=function(V){return D(this,V)[0]},u.prototype.over=u.prototype.divide=function(V){return new u(this.value/be(V).value)},l.prototype.over=l.prototype.divide=f.prototype.over=f.prototype.divide,f.prototype.mod=function(V){return D(this,V)[1]},u.prototype.mod=u.prototype.remainder=function(V){return new u(this.value%be(V).value)},l.prototype.remainder=l.prototype.mod=f.prototype.remainder=f.prototype.mod,f.prototype.pow=function(V){var W=be(V),ae=this.value,oe=W.value,F,C,R;if(oe===0)return c[1];if(ae===0)return c[0];if(ae===1)return c[1];if(ae===-1)return W.isEven()?c[1]:c[-1];if(W.sign)return c[0];if(!W.isSmall)throw new Error("The exponent "+W.toString()+" is too large.");if(this.isSmall&&g(F=Math.pow(ae,oe)))return new l(A(F));for(C=this,R=c[1];oe&!0&&(R=R.times(C),--oe),oe!==0;)oe/=2,C=C.square();return R},l.prototype.pow=f.prototype.pow,u.prototype.pow=function(V){var W=be(V),ae=this.value,oe=W.value,F=BigInt(0),C=BigInt(1),R=BigInt(2);if(oe===F)return c[1];if(ae===F)return c[0];if(ae===C)return c[1];if(ae===BigInt(-1))return W.isEven()?c[1]:c[-1];if(W.isNegative())return new u(F);for(var j=this,Y=c[1];(oe&C)===C&&(Y=Y.times(j),--oe),oe!==F;)oe/=R,j=j.square();return Y},f.prototype.modPow=function(V,W){if(V=be(V),W=be(W),W.isZero())throw new Error("Cannot take modPow with modulus 0");var ae=c[1],oe=this.mod(W);for(V.isNegative()&&(V=V.multiply(c[-1]),oe=oe.modInv(W));V.isPositive();){if(oe.isZero())return c[0];V.isOdd()&&(ae=ae.multiply(oe).mod(W)),V=V.divide(2),oe=oe.square().mod(W)}return ae},u.prototype.modPow=l.prototype.modPow=f.prototype.modPow;function w(V,W){if(V.length!==W.length)return V.length>W.length?1:-1;for(var ae=V.length-1;ae>=0;ae--)if(V[ae]!==W[ae])return V[ae]>W[ae]?1:-1;return 0}f.prototype.compareAbs=function(V){var W=be(V),ae=this.value,oe=W.value;return W.isSmall?1:w(ae,oe)},l.prototype.compareAbs=function(V){var W=be(V),ae=Math.abs(this.value),oe=W.value;return W.isSmall?(oe=Math.abs(oe),ae===oe?0:ae>oe?1:-1):-1},u.prototype.compareAbs=function(V){var W=this.value,ae=be(V).value;return W=W>=0?W:-W,ae=ae>=0?ae:-ae,W===ae?0:W>ae?1:-1},f.prototype.compare=function(V){if(V===1/0)return-1;if(V===-1/0)return 1;var W=be(V),ae=this.value,oe=W.value;return this.sign!==W.sign?W.sign?1:-1:W.isSmall?this.sign?-1:1:w(ae,oe)*(this.sign?-1:1)},f.prototype.compareTo=f.prototype.compare,l.prototype.compare=function(V){if(V===1/0)return-1;if(V===-1/0)return 1;var W=be(V),ae=this.value,oe=W.value;return W.isSmall?ae==oe?0:ae>oe?1:-1:ae<0!==W.sign?ae<0?-1:1:ae<0?1:-1},l.prototype.compareTo=l.prototype.compare,u.prototype.compare=function(V){if(V===1/0)return-1;if(V===-1/0)return 1;var W=this.value,ae=be(V).value;return W===ae?0:W>ae?1:-1},u.prototype.compareTo=u.prototype.compare,f.prototype.equals=function(V){return this.compare(V)===0},u.prototype.eq=u.prototype.equals=l.prototype.eq=l.prototype.equals=f.prototype.eq=f.prototype.equals,f.prototype.notEquals=function(V){return this.compare(V)!==0},u.prototype.neq=u.prototype.notEquals=l.prototype.neq=l.prototype.notEquals=f.prototype.neq=f.prototype.notEquals,f.prototype.greater=function(V){return this.compare(V)>0},u.prototype.gt=u.prototype.greater=l.prototype.gt=l.prototype.greater=f.prototype.gt=f.prototype.greater,f.prototype.lesser=function(V){return this.compare(V)<0},u.prototype.lt=u.prototype.lesser=l.prototype.lt=l.prototype.lesser=f.prototype.lt=f.prototype.lesser,f.prototype.greaterOrEquals=function(V){return this.compare(V)>=0},u.prototype.geq=u.prototype.greaterOrEquals=l.prototype.geq=l.prototype.greaterOrEquals=f.prototype.geq=f.prototype.greaterOrEquals,f.prototype.lesserOrEquals=function(V){return this.compare(V)<=0},u.prototype.leq=u.prototype.lesserOrEquals=l.prototype.leq=l.prototype.lesserOrEquals=f.prototype.leq=f.prototype.lesserOrEquals,f.prototype.isEven=function(){return(this.value[0]&1)===0},l.prototype.isEven=function(){return(this.value&1)===0},u.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},f.prototype.isOdd=function(){return(this.value[0]&1)===1},l.prototype.isOdd=function(){return(this.value&1)===1},u.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},f.prototype.isPositive=function(){return!this.sign},l.prototype.isPositive=function(){return this.value>0},u.prototype.isPositive=l.prototype.isPositive,f.prototype.isNegative=function(){return this.sign},l.prototype.isNegative=function(){return this.value<0},u.prototype.isNegative=l.prototype.isNegative,f.prototype.isUnit=function(){return!1},l.prototype.isUnit=function(){return Math.abs(this.value)===1},u.prototype.isUnit=function(){return this.abs().value===BigInt(1)},f.prototype.isZero=function(){return!1},l.prototype.isZero=function(){return this.value===0},u.prototype.isZero=function(){return this.value===BigInt(0)},f.prototype.isDivisibleBy=function(V){var W=be(V);return W.isZero()?!1:W.isUnit()?!0:W.compareAbs(2)===0?this.isEven():this.mod(W).isZero()},u.prototype.isDivisibleBy=l.prototype.isDivisibleBy=f.prototype.isDivisibleBy;function B(V){var W=V.abs();if(W.isUnit())return!1;if(W.equals(2)||W.equals(3)||W.equals(5))return!0;if(W.isEven()||W.isDivisibleBy(3)||W.isDivisibleBy(5))return!1;if(W.lesser(49))return!0}function x(V,W){for(var ae=V.prev(),oe=ae,F=0,C,R,j;oe.isEven();)oe=oe.divide(2),F++;e:for(R=0;R<W.length;R++)if(!V.lesser(W[R])&&(j=e(W[R]).modPow(oe,V),!(j.isUnit()||j.equals(ae)))){for(C=F-1;C!=0;C--){if(j=j.square().mod(V),j.isUnit())return!1;if(j.equals(ae))continue e}return!1}return!0}f.prototype.isPrime=function(V){var W=B(this);if(W!==t)return W;var ae=this.abs(),oe=ae.bitLength();if(oe<=64)return x(ae,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var F=Math.log(2)*oe.toJSNumber(),C=Math.ceil(V===!0?2*Math.pow(F,2):F),R=[],j=0;j<C;j++)R.push(e(j+2));return x(ae,R)},u.prototype.isPrime=l.prototype.isPrime=f.prototype.isPrime,f.prototype.isProbablePrime=function(V,W){var ae=B(this);if(ae!==t)return ae;for(var oe=this.abs(),F=V===t?5:V,C=[],R=0;R<F;R++)C.push(e.randBetween(2,oe.minus(2),W));return x(oe,C)},u.prototype.isProbablePrime=l.prototype.isProbablePrime=f.prototype.isProbablePrime,f.prototype.modInv=function(V){for(var W=e.zero,ae=e.one,oe=be(V),F=this.abs(),C,R,j;!F.isZero();)C=oe.divide(F),R=W,j=oe,W=ae,oe=F,ae=R.subtract(C.multiply(ae)),F=j.subtract(C.multiply(F));if(!oe.isUnit())throw new Error(this.toString()+" and "+V.toString()+" are not co-prime");return W.compare(0)===-1&&(W=W.add(V)),this.isNegative()?W.negate():W},u.prototype.modInv=l.prototype.modInv=f.prototype.modInv,f.prototype.next=function(){var V=this.value;return this.sign?ee(V,1,this.sign):new f(O(V,1),this.sign)},l.prototype.next=function(){var V=this.value;return V+1<a?new l(V+1):new f(n,!1)},u.prototype.next=function(){return new u(this.value+BigInt(1))},f.prototype.prev=function(){var V=this.value;return this.sign?new f(O(V,1),!0):ee(V,1,this.sign)},l.prototype.prev=function(){var V=this.value;return V-1>-a?new l(V-1):new f(n,!0)},u.prototype.prev=function(){return new u(this.value-BigInt(1))};for(var U=[1];2*U[U.length-1]<=r;)U.push(2*U[U.length-1]);var X=U.length,se=U[X-1];function J(V){return Math.abs(V)<=r}f.prototype.shiftLeft=function(V){var W=be(V).toJSNumber();if(!J(W))throw new Error(String(W)+" is too large for shifting.");if(W<0)return this.shiftRight(-W);var ae=this;if(ae.isZero())return ae;for(;W>=X;)ae=ae.multiply(se),W-=X-1;return ae.multiply(U[W])},u.prototype.shiftLeft=l.prototype.shiftLeft=f.prototype.shiftLeft,f.prototype.shiftRight=function(V){var W,ae=be(V).toJSNumber();if(!J(ae))throw new Error(String(ae)+" is too large for shifting.");if(ae<0)return this.shiftLeft(-ae);for(var oe=this;ae>=X;){if(oe.isZero()||oe.isNegative()&&oe.isUnit())return oe;W=D(oe,se),oe=W[1].isNegative()?W[0].prev():W[0],ae-=X-1}return W=D(oe,U[ae]),W[1].isNegative()?W[0].prev():W[0]},u.prototype.shiftRight=l.prototype.shiftRight=f.prototype.shiftRight;function L(V,W,ae){W=be(W);for(var oe=V.isNegative(),F=W.isNegative(),C=oe?V.not():V,R=F?W.not():W,j=0,Y=0,ie=null,pe=null,Me=[];!C.isZero()||!R.isZero();)ie=D(C,se),j=ie[1].toJSNumber(),oe&&(j=se-1-j),pe=D(R,se),Y=pe[1].toJSNumber(),F&&(Y=se-1-Y),C=ie[0],R=pe[0],Me.push(ae(j,Y));for(var Ce=ae(oe?1:0,F?1:0)!==0?e(-1):e(0),Ee=Me.length-1;Ee>=0;Ee-=1)Ce=Ce.multiply(se).add(e(Me[Ee]));return Ce}f.prototype.not=function(){return this.negate().prev()},u.prototype.not=l.prototype.not=f.prototype.not,f.prototype.and=function(V){return L(this,V,function(W,ae){return W&ae})},u.prototype.and=l.prototype.and=f.prototype.and,f.prototype.or=function(V){return L(this,V,function(W,ae){return W|ae})},u.prototype.or=l.prototype.or=f.prototype.or,f.prototype.xor=function(V){return L(this,V,function(W,ae){return W^ae})},u.prototype.xor=l.prototype.xor=f.prototype.xor;var G=1<<30,re=(r&-r)*(r&-r)|G;function fe(V){var W=V.value,ae=typeof W=="number"?W|G:typeof W=="bigint"?W|BigInt(G):W[0]+W[1]*r|re;return ae&-ae}function z(V,W){if(W.compareTo(V)<=0){var ae=z(V,W.square(W)),oe=ae.p,F=ae.e,C=oe.multiply(W);return C.compareTo(V)<=0?{p:C,e:F*2+1}:{p:oe,e:F*2}}return{p:e(1),e:0}}f.prototype.bitLength=function(){var V=this;return V.compareTo(e(0))<0&&(V=V.negate().subtract(e(1))),V.compareTo(e(0))===0?e(0):e(z(V,e(2)).e).add(e(1))},u.prototype.bitLength=l.prototype.bitLength=f.prototype.bitLength;function H(V,W){return V=be(V),W=be(W),V.greater(W)?V:W}function de(V,W){return V=be(V),W=be(W),V.lesser(W)?V:W}function me(V,W){if(V=be(V).abs(),W=be(W).abs(),V.equals(W))return V;if(V.isZero())return W;if(W.isZero())return V;for(var ae=c[1],oe,F;V.isEven()&&W.isEven();)oe=de(fe(V),fe(W)),V=V.divide(oe),W=W.divide(oe),ae=ae.multiply(oe);for(;V.isEven();)V=V.divide(fe(V));do{for(;W.isEven();)W=W.divide(fe(W));V.greater(W)&&(F=W,W=V,V=F),W=W.subtract(V)}while(!W.isZero());return ae.isUnit()?V:V.multiply(ae)}function we(V,W){return V=be(V).abs(),W=be(W).abs(),V.divide(me(V,W)).multiply(W)}function Pe(V,W,ae){V=be(V),W=be(W);var oe=ae||Math.random,F=de(V,W),C=H(V,W),R=C.subtract(F).add(1);if(R.isSmall)return F.add(Math.floor(oe()*R));for(var j=Ge(R,r).value,Y=[],ie=!0,pe=0;pe<j.length;pe++){var Me=ie?j[pe]+(pe+1<j.length?j[pe+1]/r:0):r,Ce=A(oe()*Me);Y.push(Ce),Ce<j[pe]&&(ie=!1)}return F.add(c.fromArray(Y,r,!1))}var ke=function(V,W,ae,oe){ae=ae||o,V=String(V),oe||(V=V.toLowerCase(),ae=ae.toLowerCase());var F=V.length,C,R=Math.abs(W),j={};for(C=0;C<ae.length;C++)j[ae[C]]=C;for(C=0;C<F;C++){var Y=V[C];if(Y!=="-"&&Y in j&&j[Y]>=R){if(Y==="1"&&R===1)continue;throw new Error(Y+" is not a valid digit in base "+W+".")}}W=be(W);var ie=[],pe=V[0]==="-";for(C=pe?1:0;C<V.length;C++){var Y=V[C];if(Y in j)ie.push(be(j[Y]));else if(Y==="<"){var Me=C;do C++;while(V[C]!==">"&&C<V.length);ie.push(be(V.slice(Me+1,C)))}else throw new Error(Y+" is not a valid character")}return Ue(ie,W,pe)};function Ue(V,W,ae){var oe=c[0],F=c[1],C;for(C=V.length-1;C>=0;C--)oe=oe.add(V[C].times(F)),F=F.times(W);return ae?oe.negate():oe}function he(V,W){return W=W||o,V<W.length?W[V]:"<"+V+">"}function Ge(V,W){if(W=e(W),W.isZero()){if(V.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(W.equals(-1)){if(V.isZero())return{value:[0],isNegative:!1};if(V.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-V.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var ae=Array.apply(null,Array(V.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return ae.unshift([1]),{value:[].concat.apply([],ae),isNegative:!1}}var oe=!1;if(V.isNegative()&&W.isPositive()&&(oe=!0,V=V.abs()),W.isUnit())return V.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(V.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:oe};for(var F=[],C=V,R;C.isNegative()||C.compareAbs(W)>=0;){R=C.divmod(W),C=R.quotient;var j=R.remainder;j.isNegative()&&(j=W.minus(j).abs(),C=C.next()),F.push(j.toJSNumber())}return F.push(C.toJSNumber()),{value:F.reverse(),isNegative:oe}}function Be(V,W,ae){var oe=Ge(V,W);return(oe.isNegative?"-":"")+oe.value.map(function(F){return he(F,ae)}).join("")}f.prototype.toArray=function(V){return Ge(this,V)},l.prototype.toArray=function(V){return Ge(this,V)},u.prototype.toArray=function(V){return Ge(this,V)},f.prototype.toString=function(V,W){if(V===t&&(V=10),V!==10||W)return Be(this,V,W);for(var ae=this.value,oe=ae.length,F=String(ae[--oe]),C="0000000",R;--oe>=0;)R=String(ae[oe]),F+=C.slice(R.length)+R;var j=this.sign?"-":"";return j+F},l.prototype.toString=function(V,W){return V===t&&(V=10),V!=10||W?Be(this,V,W):String(this.value)},u.prototype.toString=l.prototype.toString,u.prototype.toJSON=f.prototype.toJSON=l.prototype.toJSON=function(){return this.toString()},f.prototype.valueOf=function(){return parseInt(this.toString(),10)},f.prototype.toJSNumber=f.prototype.valueOf,l.prototype.valueOf=function(){return this.value},l.prototype.toJSNumber=l.prototype.valueOf,u.prototype.valueOf=u.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function He(V){if(g(+V)){var W=+V;if(W===A(W))return p?new u(BigInt(W)):new l(W);throw new Error("Invalid integer: "+V)}var ae=V[0]==="-";ae&&(V=V.slice(1));var oe=V.split(/e/i);if(oe.length>2)throw new Error("Invalid integer: "+oe.join("e"));if(oe.length===2){var F=oe[1];if(F[0]==="+"&&(F=F.slice(1)),F=+F,F!==A(F)||!g(F))throw new Error("Invalid integer: "+F+" is not a valid exponent.");var C=oe[0],R=C.indexOf(".");if(R>=0&&(F-=C.length-R-1,C=C.slice(0,R)+C.slice(R+1)),F<0)throw new Error("Cannot include negative exponent part for integers");C+=new Array(F+1).join("0"),V=C}var j=/^([0-9][0-9]*)$/.test(V);if(!j)throw new Error("Invalid integer: "+V);if(p)return new u(BigInt(ae?"-"+V:V));for(var Y=[],ie=V.length,pe=s,Me=ie-pe;ie>0;)Y.push(+V.slice(Me,ie)),Me-=pe,Me<0&&(Me=0),ie-=pe;return I(Y),new f(Y,ae)}function Ke(V){if(p)return new u(BigInt(V));if(g(V)){if(V!==A(V))throw new Error(V+" is not an integer.");return new l(V)}return He(V.toString())}function be(V){return typeof V=="number"?Ke(V):typeof V=="string"?He(V):typeof V=="bigint"?new u(V):V}for(var Le=0;Le<1e3;Le++)c[Le]=be(Le),Le>0&&(c[-Le]=be(-Le));return c.one=c[1],c.zero=c[0],c.minusOne=c[-1],c.max=H,c.min=de,c.gcd=me,c.lcm=we,c.isInstance=function(V){return V instanceof f||V instanceof l||V instanceof u},c.randBetween=Pe,c.fromArray=function(V,W,ae){return Ue(V.map(be),be(W||10),ae)},c}();d.hasOwnProperty("exports")&&(d.exports=e)})(BigInteger);var BigIntegerExports=BigInteger.exports,bigInt=getDefaultExportFromCjs(BigIntegerExports);const safeBigInt=bigInt(Number.MAX_SAFE_INTEGER),ulongBigInt=bigInt(bigInt[2]).pow(64),longBigInt=ulongBigInt.divide(bigInt[2]);function bigIntFromBytes(d,e=256){return bigInt.fromArray(d instanceof Uint8Array?[...d]:d,e)}function bigIntToBytes(d){return new Uint8Array(d.toArray(256).value)}function bigIntToSigned(d){return d.greater(longBigInt)?d.minus(ulongBigInt):d}function bigIntToUnsigned(d){return d.isNegative()?ulongBigInt.add(d):d}const SAVE_DOC_KEYS=["static_icon","appear_animation","select_animation","activate_animation","effect_animation","around_animation","center_icon"],REFERENCE_CONTEXT={type:"reactions"},REFRESH_TAGS_INTERVAL=10*6e4;class AppReactionsManager extends AppManager{constructor(){super(...arguments),this.clear=(e=!1)=>{e&&(this.sendReactionPromises=new Map,this.lastSendingTimes=new Map,this.reactions={}),this.savedReactionsTags=new Map}}after(){this.clear(!0),this.rootScope.addEventListener("user_auth",()=>{setTimeout(()=>{Promise.resolve(this.getAvailableReactions()).then(async e=>{const t=["around_animation","static_icon","appear_animation","center_icon"];for(let r=0,s=Math.min(7,e.length);r<s;++r){const a=e[r],n=t.map(o=>a[o]&&this.apiFileManager.downloadMedia({media:a[o]}));await Promise.all(n),await pause(1e3)}}),this.getTopReactions()},7500),this.getSavedReactionTags()}),this.apiUpdatesManager.addMultipleEventsListeners({updateSavedReactionTags:({tags:e,savedPeerId:t})=>{if(!e){this.savedReactionsTags.get(t)&&Promise.resolve(this.getSavedReactionTags(t,!0)).then(r=>{this.apiUpdatesManager.processLocalUpdate({_:"updateSavedReactionTags",tags:r,savedPeerId:t})});return}this.setSavedReactionTags(t,e)}}),this.rootScope.addEventListener("messages_reactions",e=>{for(const t of e)this.processMessageReactionsChanges(t)}),setInterval(()=>{this.savedReactionsTags.size&&(this.savedReactionsTags.clear(),this.rootScope.dispatchEvent("saved_tags_clear"))},REFRESH_TAGS_INTERVAL)}resetAvailableReactions(){this.availableReactions=void 0,this.getAvailableReactions()}getAvailableReactions(){return this.availableReactions?this.availableReactions:this.apiManager.invokeApiSingleProcess({method:"messages.getAvailableReactions",processResult:e=>{const t=this.availableReactions=e.reactions;for(const r of t)for(const s of SAVE_DOC_KEYS)r[s]&&(r[s]=this.appDocsManager.saveDoc(r[s],REFERENCE_CONTEXT));return MTProtoMessagePort.getInstance().invokeVoid("mirror",{name:"availableReactions",value:t}),t},params:{hash:0}})}getActiveAvailableReactions(){return callbackify(this.getAvailableReactions(),e=>e.filter(t=>!t.pFlags.inactive))}getAvailableReactionsForPeer(e,t){const r=this.getActiveAvailableReactions(),s=this.getTopReactions(),a=this.getQuickReaction();if(e.isUser())return callbackifyAll([s,a],([o,p])=>{const c={type:"chatReactionsAll",reactions:o};return t&&this.unshiftQuickReactionInner(c,p),c});const n=this.appProfileManager.getChatFull(e.toChatId());return callbackifyAll([r,n,a,s],([o,p,c,f])=>{let l=p.available_reactions??{_:"chatReactionsNone"};l._==="chatReactionsAll"&&!l.pFlags.allow_custom&&(l={_:"chatReactionsSome",reactions:o.map(availableReactionToReaction)});let u=[];if(l._==="chatReactionsAll")u=f;else if(l._==="chatReactionsSome"){const y=l.reactions.map(I=>o.find(S=>S.reaction===I.emoticon)||I).filter(Boolean),b=new Map(o.map((I,S)=>[I.reaction,S]));y.sort((I,S)=>(b.get(I.reaction)||0)-(b.get(S.reaction)||0)),u=y.map(I=>I._==="availableReaction"?availableReactionToReaction(I):I)}const g={type:l._,reactions:u};return l._==="chatReactionsAll"&&t&&this.unshiftQuickReactionInner(g,c),g})}getReactions(e){if(this.reactions[e])return this.reactions[e];let t;return e==="recent"?t="messages.getRecentReactions":e==="top"?t="messages.getTopReactions":t="messages.getDefaultTagReactions",this.apiManager.invokeApiHashable({method:t,params:{limit:75},processResult:r=>this.reactions[e]=r.reactions})}getTopReactions(){return this.getReactions("top")}getRecentReactions(){return this.getReactions("recent")}getTagReactions(e){return callbackifyAll([this.getReactions("tags"),this.getSavedReactionTags(e)],([t,r])=>(t=t.slice(),forEachReverse(r,s=>{const a=findAndSplice(t,n=>reactionsEqual(n,s.reaction));a&&t.unshift(a)}),t))}unshiftQuickReactionInner(e,t){return t._==="availableReaction"&&(t=availableReactionToReaction(t)),e.reactions=e.reactions.slice(),findAndSplice(e.reactions,r=>reactionsEqual(r,t)),e.reactions.unshift(t),e}getAvailableReactionsByMessage(e,t){let r;if(e?r=e.fwd_from?.channel_post&&this.appPeersManager.isMegagroup(e.peerId)&&e.fromId===e.fwdFromId&&e.fromId||e.peerId:r=NULL_PEER_ID,r===this.appPeersManager.peerId){const{reactions:s}=e;if(!s||s.pFlags.reactions_as_tags)return callbackify(this.getTagReactions(),a=>({type:"chatReactionsAll",reactions:a}))}return this.getAvailableReactionsForPeer(r,t)}getQuickReaction(){return callbackifyAll([this.apiManager.getConfig(),this.getAvailableReactions()],([e,t])=>{const r=e.reactions_default;return r?._==="reactionEmoji"?t.find(s=>s.reaction===r.emoticon):r})}getReactionCached(e){return this.availableReactions.find(t=>t.reaction===e)}getReaction(e){return callbackify(this.getAvailableReactions(),()=>this.getReactionCached(e))}getMessagesReactions(e,t){return this.apiManager.invokeApiSingleProcess({method:"messages.getMessagesReactions",params:{id:t.map(r=>getServerMessageId(r)),peer:this.appPeersManager.getInputPeerById(e)},processResult:r=>{this.apiUpdatesManager.processUpdateMessage(r)}})}getMessageReactionsList(e,t,r,s,a){return this.apiManager.invokeApiSingleProcess({method:"messages.getMessageReactionsList",params:{peer:this.appPeersManager.getInputPeerById(e),id:getServerMessageId(t),limit:r,reaction:s,offset:a},processResult:n=>(this.appUsersManager.saveApiUsers(n.users),n)})}setDefaultReaction(e){return this.apiManager.invokeApi("messages.setDefaultReaction",{reaction:e}).then(async t=>{if(t){const r=await this.apiManager.getConfig();r&&(r.reactions_default=e),this.rootScope.dispatchEvent("quick_reaction",e)}return t})}async sendReaction({message:e,reaction:t,onlyLocal:r,sendAsPeerId:s}){e=this.appMessagesManager.getMessageByPeer(e.peerId,e.mid),t._==="availableReaction"&&(t={_:"reactionEmoji",emoticon:t.reaction});const a=await this.apiManager.getLimit("reactions"),n=e.peerId+"_"+e.mid;if(this.lastSendingTimes.get(n))return;this.lastSendingTimes.set(n,Date.now()),setTimeout(()=>{this.lastSendingTimes.delete(n)},333);const{peerId:p,mid:c}=e;let f;s?f=this.appPeersManager.getOutputPeer(s):f=this.appMessagesManager.generateFromId(p)??this.appPeersManager.getOutputPeer(p);const l=this.appPeersManager.getPeerId(f),u=K=>{--K.count,delete K.chosen_order,reactionsEqual(t,K.reaction)&&(t=void 0),K.count||indexOfAndSplice(y.results,K),y.recent_reactions&&findAndSplice(y.recent_reactions,ee=>reactionsEqual(ee.reaction,K.reaction)&&this.appPeersManager.getPeerId(ee.peer_id)===l),y.results.length||(y=void 0)},g=e.reactions?.pFlags?.can_see_list||!this.appPeersManager.isBroadcast(e.peerId)||e.peerId.isUser();e.reactions||(e.reactions={_:"messageReactions",results:[],recent_reactions:g?[]:void 0,pFlags:{can_see_list:g||void 0}});let y=r?e.reactions:copy(e.reactions);const b=y.results.filter(K=>K.chosen_order!==void 0);b.sort((K,ee)=>ee.chosen_order-K.chosen_order);const I=[],S=b.findIndex(K=>reactionsEqual(K.reaction,t));S!==-1&&I.push(...b.splice(S,1)),I.push(...b.splice(a-+(S===-1))),I.forEach(K=>{b.forEach(ee=>{ee.chosen_order>K.chosen_order&&--ee.chosen_order}),u(K)});const A=b.length;if(b.forEach((K,ee)=>{K.chosen_order=A-1-ee}),t){y||(y={_:"messageReactions",results:[],pFlags:{}},g&&(y.pFlags.can_see_list=!0)),!y.results.length&&p===this.appPeersManager.peerId&&(y.pFlags.reactions_as_tags=!0);let K=y.results.findIndex(Q=>reactionsEqual(Q.reaction,t)),ee=K!==-1&&y.results[K];if(ee||(ee={_:"reactionCount",count:0,reaction:t},K=y.results.push(ee)-1),++ee.count,ee.chosen_order=b.length?b[0].chosen_order+1:0,b.unshift(ee),!y.recent_reactions&&g&&(y.recent_reactions=[]),y.recent_reactions){const Q={_:"messagePeerReaction",reaction:t,peer_id:f,pFlags:{},date:tsNow(!0)};this.appPeersManager.isMegagroup(p),y.recent_reactions.unshift(Q),y.recent_reactions=y.recent_reactions.slice(0,3)}}const k=this.availableReactions;if(y&&k?.length){const K=new Map;k.forEach((ee,Q)=>{K.set(ee.reaction,Q)}),y.results.sort((ee,Q)=>{const te=ee.reaction.document_id||ee.reaction.emoticon,N=Q.reaction.document_id||Q.reaction.emoticon;return Q.count-ee.count||(K.get(te)??0)-(K.get(N)??0)})}if(r)return e.reactions=y,this.rootScope.dispatchEvent("messages_reactions",[{message:e,changedResults:[],removedResults:[]}]),Promise.resolve();this.apiUpdatesManager.processLocalUpdate({_:"updateMessageReactions",peer:e.peer_id,msg_id:e.id,reactions:y,local:!0});const T=[p,c].join("-"),O=getServerMessageId(c),$=this.apiManager.invokeApi("messages.sendReaction",{peer:this.appPeersManager.getInputPeerById(p),msg_id:O,reaction:b.map(K=>K.reaction).reverse()}).then(K=>{const ee=K.updates.findIndex(Q=>Q._==="updateEditMessage"||Q._==="updateEditChannelMessage");if(ee!==-1){const Q=K.updates[ee];K.updates[ee]={_:"updateMessageReactions",msg_id:O,peer:this.appPeersManager.getOutputPeer(p),reactions:Q.message.reactions,pts:Q.pts,pts_count:Q.pts_count}}this.apiUpdatesManager.processUpdateMessage(K)}).catch(K=>{K.type==="REACTION_INVALID"&&this.sendReactionPromises.get(T)===$&&this.sendReaction({message:e,reaction:b[0]?.reaction,onlyLocal:!0,sendAsPeerId:s})}).finally(()=>{this.sendReactionPromises.get(T)===$&&this.sendReactionPromises.delete(T)});return this.sendReactionPromises.set(T,$),$}getRandomGenericAnimation(){return callbackify(this.appStickersManager.getLocalStickerSet("inputStickerSetEmojiGenericAnimations"),e=>{const t=e.documents.length;return t?e.documents[Math.floor(Math.random()*t)]:void 0})}setSavedReactionTags(e,t){this.savedReactionsTags.set(e,t),this.rootScope.dispatchEvent("saved_tags",{savedPeerId:e,tags:t})}getSavedReactionTags(e,t){const{savedReactionsTags:r}=this,s=r.get(e);if(s&&!t)return s;const a=this.apiManager.invokeApi("messages.getSavedReactionTags",{peer:e?this.appPeersManager.getInputPeerById(e):void 0,hash:0}).then(n=>{const o=n.tags||[];return r.get(e)===a&&this.setSavedReactionTags(e,o),this.getSavedReactionTags(e)});return r.set(e,a),a}async updateSavedReactionTag(e,t){await this.apiManager.invokeApi("messages.updateSavedReactionTag",{reaction:e,title:t});const r=await this.getSavedReactionTags(),s=r.find(a=>reactionsEqual(a.reaction,e));t?s.title=t:delete s.title,this.apiUpdatesManager.processLocalUpdate({_:"updateSavedReactionTags",tags:r})}processMessageReactionsChanges({message:e,changedResults:t,removedResults:r,savedPeerId:s}){if(e.peerId!==this.appPeersManager.peerId)return;const{reactions:a}=e;if(a&&!a.pFlags.reactions_as_tags)return;s===void 0&&this.processMessageReactionsChanges({message:e,changedResults:t,removedResults:r,savedPeerId:this.appPeersManager.getPeerId(e.saved_peer_id)});const n=this.savedReactionsTags.get(s);if(!n)return;if(n instanceof Promise){this.apiUpdatesManager.processLocalUpdate({_:"updateSavedReactionTags",savedPeerId:s});return}const o=c=>{const f=c.reaction.document_id;return f?bigInt(""+f,10):bigIntFromBytes(bytesFromHex(md5Exports.md5(c.reaction.emoticon).slice(0,16)))},p=c=>{insertInDescendSortedArray(n,c,l=>l,void 0,(l,u)=>{const g=l.count-u.count;if(g)return g;const y=o(l),b=o(u);return y.compare(b)})};for(const c of r){const f=n.findIndex(u=>reactionsEqual(u.reaction,c.reaction)),l=n[f];l&&(--l.count?p(l):n.splice(f,1))}for(const c of t){let f=n.find(l=>reactionsEqual(l.reaction,c.reaction));f||(f={_:"savedReactionTag",count:0,reaction:c.reaction}),++f.count,p(f)}this.apiUpdatesManager.processLocalUpdate({_:"updateSavedReactionTags",tags:n,savedPeerId:s})}}function fixBase64String(d,e){return d.replace(/-/g,"+").replace(/_/g,"/")}const CACHE_TIME=36e5,LOCAL_IDS={EMOJI:"inputStickerSetAnimatedEmoji",EMOJI_ANIMATIONS:"inputStickerSetAnimatedEmojiAnimations",PREMIUM_GIFTS:"inputStickerSetPremiumGifts",GENERIC_ANIMATIONS:"inputStickerSetEmojiGenericAnimations",DEFAULT_STATUSES:"inputStickerSetEmojiDefaultStatuses",DEFAULT_TOPIC_ICONS:"inputStickerSetEmojiDefaultTopicIcons"},LOCAL_IDS_SET=new Set(Object.values(LOCAL_IDS));class AppStickersManager extends AppManager{constructor(){super(...arguments),this.storage=new AppStorage(DATABASE_STATE,"stickerSets"),this.clear=e=>{this.getStickerSetPromises={},this.getStickersByEmoticonsPromises={},this.sounds={},this.names={},this.indexes={}},this.processAllStickersResult=e=>e,this.onPreloadStickerSetsResult=e=>{const t=e.sets;return Promise.all(t.map(r=>this.getStickerSet(r,{useCache:!0})))}}after(){this.clear(!0),this.rootScope.addEventListener("user_auth",()=>{setTimeout(()=>{this.getAnimatedEmojiStickerSet(),Promise.resolve(this.getLocalStickerSet(LOCAL_IDS.GENERIC_ANIMATIONS)).then(async e=>{for(const t of e.documents)await this.apiFileManager.downloadMedia({media:t})})},1e3),this.getGreetingStickersPromise||(this.getGreetingStickersTimeout??(this.getGreetingStickersTimeout=ctx.setTimeout(()=>{this.getGreetingStickersTimeout=void 0,this.getGreetingSticker(!0)},5e3))),this.rootScope.addEventListener("app_config",()=>this.onStickersUpdated("faved",!0))}),this.apiUpdatesManager.addMultipleEventsListeners({updateNewStickerSet:e=>{const t=e.stickerset;this.saveStickerSet(t,t.set.id),this.rootScope.dispatchEvent("stickers_installed",t.set)},updateRecentStickers:()=>this.onStickersUpdated("recent",!0),updateFavedStickers:()=>this.onStickersUpdated("faved",!0),updateMoveStickerSetToTop:e=>{this.rootScope.dispatchEvent("stickers_top",e.stickerset)},updateStickerSetsOrder:e=>{this.rootScope.dispatchEvent("stickers_order",{type:e.pFlags.emojis?"emojis":e.pFlags.masks?"masks":"stickers",order:e.order})}})}async onStickersUpdated(e,t){const r=await(e==="faved"?this.getFavedStickersStickers(t):this.getRecentStickersStickers(t));this.rootScope.dispatchEvent("stickers_updated",{type:e,stickers:r})}getGreetingSticker(e=!1){return this.getGreetingStickersTimeout&&(clearTimeout(this.getGreetingStickersTimeout),this.getGreetingStickersTimeout=void 0),this.getGreetingStickersPromise||(this.getGreetingStickersPromise=this.getStickersByEmoticon({emoticon:"👋⭐️",includeServerStickers:!0}).then(t=>{if(!t.length)throw"NO_STICKERS";this.greetingStickers=t.slice(),this.greetingStickers.sort((r,s)=>Math.random()-Math.random())})),this.getGreetingStickersPromise.then(()=>{let t;return e||(t=this.greetingStickers.shift(),this.greetingStickers.push(t)),this.apiFileManager.downloadMedia({media:this.greetingStickers[0]}),t})}saveStickers(e){!e||e.saved||(e.saved=!0,forEachReverse(e,(t,r)=>{t=this.appDocsManager.saveDoc(t),t?e[r]=t:e.splice(r,1)}))}canUseStickerSetCache(e,t){return e&&e.documents?.length&&(Date.now()-e.refreshTime<CACHE_TIME||t)}getStickerSet(e,t={}){let{id:r}=e;if(e.access_hash||(e=this.names[r]||e,r=e.id),this.getStickerSetPromises[r])return this.getStickerSetPromises[r];if(!t.overwrite){const a=this.storage.getFromCache(r);if(this.canUseStickerSetCache(a,t.useCache))return a}const s=this.getStickerSetPromises[r]=new Promise(async a=>{if(!t.overwrite){const n=await this.storage.get(r);if(this.canUseStickerSetCache(n,t.useCache)){delete n.documents.saved,this.saveStickerSetLocal(n),a(n),this.getStickerSetPromises[r]===s&&delete this.getStickerSetPromises[r];return}}try{const n=await this.apiManager.invokeApi("messages.getStickerSet",{stickerset:this.getStickerSetInput(e),hash:0}),o=t.saveById?r:n.set.id;this.saveStickerSet(n,o),a(n)}catch{a(null)}this.getStickerSetPromises[r]===s&&delete this.getStickerSetPromises[r]});return s}getLocalStickerSet(e){return this.getStickerSet({id:e},{saveById:!0})}getAnimatedEmojiStickerSet(){return Promise.all([this.getLocalStickerSet(LOCAL_IDS.EMOJI),this.getLocalStickerSet(LOCAL_IDS.EMOJI_ANIMATIONS),this.getAnimatedEmojiSounds(),this.getLocalStickerSet(LOCAL_IDS.GENERIC_ANIMATIONS)]).then(([e,t])=>({emoji:e,animations:t}))}getAnimatedEmojiSounds(e){if(this.getAnimatedEmojiSoundsPromise&&!e)return this.getAnimatedEmojiSoundsPromise;const t=this.getAnimatedEmojiSoundsPromise=Promise.all([this.apiManager.getAppConfig(e),this.apiManager.getConfig()]).then(([r,s])=>{if(this.getAnimatedEmojiSoundsPromise===t)for(const a in r.emojies_sounds){const n=r.emojies_sounds[a],o=atob(fixBase64String(n.file_reference_base64)),p=new Uint8Array(o.length);for(let f=0,l=p.length;f<l;++f)p[f]=o[f].charCodeAt(0);const c=this.appDocsManager.saveDoc({_:"document",pFlags:{},id:n.id,access_hash:n.access_hash,attributes:[{_:"documentAttributeAudio",duration:1,pFlags:{voice:!0}}],date:0,dc_id:s.this_dc,file_reference:p,mime_type:"audio/ogg"},{type:"emojiesSounds"});this.sounds[a]=c}});return t}async getRecentStickers(e){return await this.apiManager.invokeApiHashable({method:"messages.getRecentStickers",processResult:r=>(this.recentStickers=r.stickers,this.saveStickers(r.stickers),r),overwrite:e})}getRecentStickersStickers(e){if(e)this.recentStickers=void 0;else if(this.recentStickers)return this.recentStickers;return this.getRecentStickers(e).then(()=>this.recentStickers)}async saveRecentSticker(e,t,r){await this.getRecentStickersStickers();const s=this.appDocsManager.getDoc(e);if(findAndSplice(this.recentStickers,a=>a.id===e),!t){this.recentStickers.unshift(s);const a=fixEmoji(s.stickerEmojiRaw);for(const n in this.getStickersByEmoticonsPromises)this.getStickersByEmoticonsPromises[n].then(p=>{const c=findAndSplice(p,f=>f.id===s.id);c?p.unshift(c):n.includes(a)&&p.unshift(s)})}return this.rootScope.dispatchEvent("sticker_updated",{type:"recent",faved:!t,document:s}),t&&this.onStickersUpdated("recent",!1),this.apiManager.invokeApi("messages.saveRecentSticker",{id:getDocumentInput(s),unsave:t,attached:r})}cleanEmoji(e){return e.replace(/\ufe0f/g,"").replace(/🏻|🏼|🏽|🏾|🏿/g,"")}getAnimatedEmojiSticker(e,t){const r=t?LOCAL_IDS.EMOJI_ANIMATIONS:LOCAL_IDS.EMOJI,s=this.storage.getFromCache(r);if(!s?.documents)return;t&&["🧡","💛","💚","💙","💜","🖤","🤍","🤎"].includes(e)&&(e="❤️"),e=this.cleanEmoji(e);const a=s.packs.find(n=>n.emoticon===e);return a?this.appDocsManager.getDoc(a.documents[0]):void 0}getAnimatedEmojiSoundDocument(e){return this.sounds[this.cleanEmoji(e)]}preloadAnimatedEmojiSticker(e){const t=this.getAnimatedEmojiStickerSet().then(()=>this.getAnimatedEmojiSticker(e));return Promise.all([t,this.preloadAnimatedEmojiStickerAnimation(e)]).then(([r,s])=>({doc:r,animation:s?.doc,sound:s?.sound}))}preloadAnimatedEmojiStickerAnimation(e){return this.getAnimatedEmojiStickerSet().then(()=>this.getAnimatedEmojiSticker(e,!0)).then(t=>{if(!t)return;const r=this.getAnimatedEmojiSoundDocument(e);return Promise.all([this.preloadSticker(t.id),r?this.preloadSticker(r.id):void 0]).then(()=>({doc:t,sound:r}))})}preloadSticker(e,t){const r=this.appDocsManager.getDoc(e);return this.apiFileManager.downloadMedia({media:r,thumb:t?r.video_thumbs?.[0]:void 0})}getEmojisSearchIndex(){return this.indexes.emojis}indexStickerSet(e){var n,o;const t=e.set.pFlags.emojis,r=(n=this.indexes)[o=t?"emojis":"stickers"]??(n[o]=new SearchIndex({minChars:2,fullWords:!0})),s=new Map;e.keywords.forEach(p=>{s.set(p.document_id,p.keyword.slice())}),e.packs.forEach(p=>{const c=fixEmoji(p.emoticon);p.documents.forEach(f=>{let l=s.get(f);l||s.set(f,l=[]),l.push(c)})});const a=!e.set.installed_date;s.forEach((p,c)=>{r.indexObjectArray(c,a?[]:p)})}saveStickerSetLocal(e){e.set.short_name&&(this.names[e.set.short_name]=this.getStickerSetInput(e.set)),this.saveStickers(e.documents),this.indexStickerSet(e)}saveStickerSet(e,t){const r={_:"messages.stickerSet",set:e.set,packs:e.packs,documents:e.documents,keywords:e.keywords};let s=this.storage.getFromCache(t);s?Object.assign(s,r):s=this.storage.setToCache(t,r),this.saveStickerSetLocal(r);const a=s.set.installed_date||LOCAL_IDS_SET.has(t);s.refreshTime=Date.now(),this.storage.set({[t]:s},!a)}getStickerSetThumbDownloadOptions(e){const t=e.thumbs.find(o=>o._==="photoSize"),r=e.thumb_dc_id,s=t.type==="a",a=t.type==="v",n={_:"inputStickerSetThumb",stickerset:this.getStickerSetInput(e),thumb_version:e.thumb_version};return{dcId:r,location:n,size:t.size,mimeType:s?"application/x-tgsticker":a&&getEnvironment().IS_WEBM_SUPPORTED?"video/webm":"image/webp"}}getStickerSetInput(e){return LOCAL_IDS_SET.has(e.id)?{_:e.id}:e.access_hash?{_:"inputStickerSetID",id:e.id,access_hash:e.access_hash}:{_:"inputStickerSetShortName",short_name:""+e.id}}async getFeaturedStickers(){return(await this.apiManager.invokeApiHashable({method:"messages.getFeaturedStickers",processResult:t=>(t.sets.forEach(r=>{this.saveStickerSet({documents:[],packs:[],keywords:[],...r},r.set.id)}),t)})).sets}getPromoPremiumStickers(){return this.getStickersByEmoticon({emoticon:"⭐️⭐️",includeServerStickers:!0})}getPremiumStickers(){return this.getStickersByEmoticon({emoticon:"📂⭐️",includeServerStickers:!0,excludePremiumEffectStickers:!0})}getFavedStickers(e){return this.apiManager.invokeApiHashable({method:"messages.getFavedStickers",processResult:t=>(this.saveStickers(t.stickers),this.favedStickers=t.stickers,t),overwrite:e})}getFavedStickersStickers(e){if(e)this.favedStickers=void 0;else if(this.favedStickers)return this.favedStickers;return this.getFavedStickers(e).then(()=>this.favedStickers)}getFavedStickersLimit(){return this.apiManager.getLimit("favedStickers")}async faveSticker(e,t){this.favedStickers||await this.getFavedStickersStickers();const r=await this.getFavedStickersLimit(),s=this.appDocsManager.getDoc(e);return findAndSplice(this.favedStickers,a=>a.id===s.id),t||(this.favedStickers.unshift(s),this.favedStickers.splice(r,this.favedStickers.length-r)),this.rootScope.dispatchEvent("sticker_updated",{type:"faved",faved:!t,document:s}),this.apiManager.invokeApi("messages.faveSticker",{id:getDocumentInput(s),unfave:t}).then(()=>{t&&this.onStickersUpdated("faved",!0)})}async toggleStickerSet(e){const t=this.storage.getFromCache(e.id);if(e=t.set,e.installed_date){if(await this.apiManager.invokeApi("messages.uninstallStickerSet",{stickerset:this.getStickerSetInput(e)}))return delete e.installed_date,this.saveStickerSetLocal(t),this.rootScope.dispatchEvent("stickers_deleted",e),this.storage.delete(e.id,!0),!0}else if(await this.apiManager.invokeApi("messages.installStickerSet",{stickerset:this.getStickerSetInput(e),archived:!1}))return e.installed_date=tsNow(!0),this.saveStickerSetLocal(t),this.rootScope.dispatchEvent("stickers_installed",e),!0;return!1}toggleStickerSets(e){return Promise.all(e.map(t=>this.toggleStickerSet(t)))}async searchStickerSets(e,t=!0){const r=t?1:0,s=await this.apiManager.invokeApiHashable({method:"messages.searchStickerSets",params:{flags:r,exclude_featured:t||void 0,q:e},processResult:o=>(o.sets.forEach(p=>{this.saveStickerSet({set:p.set,documents:[],keywords:[],packs:[],...p},p.set.id)}),o)}),a=[],n=this.storage.getCache();for(const o in n){const{set:p}=n[o];p.title.toLowerCase().includes(e.toLowerCase())&&!s.sets.find(c=>c.set.id===p.id)&&a.push({_:"stickerSetCovered",set:p,cover:null})}return s.sets.concat(a)}getAllStickers(){return this.apiManager.invokeApiHashable({method:"messages.getAllStickers",processResult:this.processAllStickersResult})}getEmojiStickers(){return this.apiManager.invokeApiHashable({method:"messages.getEmojiStickers",processResult:this.processAllStickersResult})}preloadStickerSets(){return this.getAllStickers().then(this.onPreloadStickerSetsResult)}preloadEmojiSets(){return this.getEmojiStickers().then(this.onPreloadStickerSetsResult)}getStickersByEmoticon({emoticon:e,includeOurStickers:t,includeServerStickers:r,excludePremiumEffectStickers:s}){const a=(Array.isArray(e)?e:[e]).map(o=>fixEmoji(o));e=a.join("");const n=e+(t?"1":"0")+(r?"1":"0");return this.getStickersByEmoticonsPromises[n]?this.getStickersByEmoticonsPromises[n]:this.getStickersByEmoticonsPromises[n]=Promise.all([r?this.apiManager.invokeApiHashable({method:"messages.getStickers",params:{emoticon:e},processResult:o=>o}):void 0,t?this.preloadStickerSets():[],t?this.getRecentStickers():void 0]).then(([o,p,c])=>{const f=o?o.stickers.map(b=>this.appDocsManager.saveDoc(b)):[],l=[],u=[],g=b=>{for(const I of a)for(const S of b)if(fixEmoji(S.emoticon).includes(I))for(const k of S.documents){const T=this.appDocsManager.getDoc(k);(T.animated?l:u).push(T)}};if(c){g(c.packs);const b=c.stickers;[l,u].forEach(I=>{I.sort((S,A)=>b.indexOf(S)-b.indexOf(A))})}for(const b of p)g(b.packs);const y=[...new Set(l.concat(u,f))];return forEachReverse(y,(b,I,S)=>{(b.sticker===3&&!getEnvironment().IS_WEBM_SUPPORTED||s&&!this.rootScope.premium&&getStickerEffectThumb(b))&&S.splice(I,1)}),y})}async splitSearchQuery(e){if(e=e.trim(),!e)return[];let s=parseEntities(e).filter(a=>a._==="messageEntityEmoji"||a._==="messageEntityCustomEmoji").map(a=>e.slice(a.offset,a.offset+a.length));return s.length||(s=(await this.appEmojiManager.prepareAndSearchEmojis({q:e,limit:200,minChars:1})).map(({emoji:a})=>a)),s}async searchStickers(e){return this.getStickersByEmoticon({emoticon:await this.splitSearchQuery(e),includeOurStickers:!0})}clearRecentStickers(){return this.recentStickers&&(this.recentStickers.length=0,this.onStickersUpdated("recent",!1)),this.apiManager.invokeApi("messages.clearRecentStickers")}reorderStickerSets(e,t,r){return this.apiManager.invokeApi("messages.reorderStickerSets",{emojis:t,masks:r,order:e}).then(()=>{this.apiUpdatesManager.processLocalUpdate({_:"updateStickerSetsOrder",order:e,pFlags:{emojis:t||void 0,masks:r||void 0}})})}}function cleanUsername(d){return d&&d.toLowerCase()||""}function canSendToUser(d){return!!(d&&!d.pFlags.deleted&&d.id.toPeerId()!==REPLIES_PEER_ID)}const SEARCH_OPTIONS={clearBadChars:!0,ignoreCase:!0,latinize:!0,includeTag:!0};class AppUsersManager extends AppManager{constructor(){super(...arguments),this.clear=(e=!1)=>{if(e)this.users={},this.usernames={},this.isPremiumRequiredToContactUserIds=new Map,this.isPremiumRequiredToContactUserIdsProcessing=!1;else for(const t in this.users){if(!t)continue;const r=t.toPeerId();if(!this.peersStorage.isPeerNeeded(r)){const s=this.users[t];this.modifyUsernamesCache(s,!1),this.storage.delete(t),delete this.users[t]}}this.getTopPeersPromises={},this.contactsIndex=this.createSearchIndex(),this.contactsFillPromise=void 0,this.contactsList=new Set,this.updatedContactsList=!1},this.updateUsersStatuses=()=>{const e=tsNow(!0);for(const t in this.users){const r=this.users[t];this.updateUserStatus(r,e)}}}after(){return this.clear(!0),setInterval(this.updateUsersStatuses,6e4),this.rootScope.addEventListener("state_synchronized",this.updateUsersStatuses),this.apiUpdatesManager.addMultipleEventsListeners({updateUserStatus:e=>{const t=e.user_id,r=this.users[t];r&&(r.status=e.status,this.saveUserStatus(r.status),this.rootScope.dispatchEvent("user_update",t),this.setUserToStateIfNeeded(r))},updateUserName:e=>{const t=e.user_id,r=this.users[t];r&&(this.forceUserOnline(t),this.saveApiUser({...r,first_name:e.first_name,last_name:e.last_name,username:void 0,usernames:e.usernames},!0))},updateUserEmojiStatus:e=>{const t=e.user_id,r=this.users[t];r&&(this.forceUserOnline(t),this.saveApiUser({...r,emoji_status:e.emoji_status},!0))},updateRecentEmojiStatuses:()=>{this.recentEmojiStatuses=void 0,this.getRecentEmojiStatuses()}}),Promise.all([this.appStateManager.getState(),this.appStoragesManager.loadStorage("users")]).then(([e,{results:t,storage:r}])=>{this.storage=r,this.saveApiUsers(t);for(let a=0,n=t.length;a<n;++a){const o=t[a];o&&e.contactsListCachedTime&&(o.pFlags.contact||o.pFlags.mutual_contact)&&(this.pushContact(o.id),this.contactsFillPromise||(this.contactsFillPromise=deferredPromise(),this.contactsFillPromise.resolve(this.contactsList)))}const s=e.recentSearch||[];for(let a=0,n=s.length;a<n;++a)this.peersStorage.requestPeer(s[a],"recentSearch");this.peersStorage.addEventListener("peerNeeded",a=>{if(!this.appPeersManager.isUser(a))return;const n=a.toUserId();this.storage.getFromCache(n)||this.storage.set({[n]:this.getUser(n)})}),this.peersStorage.addEventListener("peerUnneeded",a=>{if(!this.appPeersManager.isUser(a))return;const n=a.toUserId();this.storage.getFromCache(n)&&this.storage.delete(n)})})}indexMyself(){const e=this.getSelf().id;this.contactsIndex.indexObject(e,this.getUserSearchText(e))}get userId(){return this.rootScope.myId.toUserId()}onContactsModified(e){e&&this.appStateManager.pushToState("contactsListCachedTime",tsNow(!0))}pushRecentSearch(e){return this.appStateManager.getState().then(t=>{const r=t.recentSearch||[];if(r[0]!==e){indexOfAndSplice(r,e),r.unshift(e),r.length>20&&(r.length=20),this.appStateManager.pushToState("recentSearch",r);for(const s of r)this.peersStorage.requestPeer(s,"recentSearch")}})}clearRecentSearch(){return this.appStateManager.getState().then(e=>{const t=e.recentSearch||[];for(const r of t)this.peersStorage.releasePeer(r,"recentSearch");t.length=0,this.appStateManager.pushToState("recentSearch",t)})}fillContacts(){if(this.contactsFillPromise&&this.updatedContactsList)return{cached:this.contactsFillPromise.isFulfilled,promise:this.contactsFillPromise};this.updatedContactsList=!0;const e=deferredPromise();return this.apiManager.invokeApi("contacts.getContacts").then(t=>{t._==="contacts.contacts"&&(this.contactsList.clear(),this.saveApiUsers(t.users),t.contacts.forEach(r=>{this.pushContact(r.user_id)}),this.onContactsModified(!0),this.contactsFillPromise=e),e.resolve(this.contactsList)},()=>{this.updatedContactsList=!1}),{cached:this.contactsFillPromise?.isFulfilled,promise:this.contactsFillPromise||(this.contactsFillPromise=e)}}resolveUsername(e){e[0]==="@"&&(e=e.slice(1)),e=e.toLowerCase();const t=this.usernames[e];return t?this.appPeersManager.getPeer(t):this.apiManager.invokeApiSingleProcess({method:"contacts.resolveUsername",params:{username:e},processResult:r=>this.processResolvedPeer(r)})}resolveUserByUsername(e){return callbackify(this.resolveUsername(e),t=>t?._==="user"?t:void 0)}processResolvedPeer(e){return this.saveApiUsers(e.users),this.appChatsManager.saveApiChats(e.chats),this.appPeersManager.getPeer(getPeerId(e.peer))}resolvePhone(e){return this.apiManager.invokeApi("contacts.resolvePhone",{phone:e}).then(t=>this.processResolvedPeer(t))}pushContact(e){this.contactsList.add(e),this.contactsIndex.indexObject(e,this.getUserSearchText(e)),this.peersStorage.requestPeer(e.toPeerId(),"contact")}popContact(e){this.contactsList.delete(e),this.contactsIndex.indexObject(e,""),this.peersStorage.releasePeer(e.toPeerId(),"contact")}getUserSearchText(e){const t=this.users[e];return t?[t.first_name,t.last_name,t.phone,...getPeerActiveUsernames(t),t.pFlags.self?"Saved Messages":""].filter(Boolean).join(" "):""}getContacts(e,t=!1,r="name"){const s=this.fillContacts().promise;return Promise.all([s,r==="rating"&&this.getTopPeers("correspondents")]).then(([a,n])=>{let o=[...a];if(e){const c=this.contactsIndex.search(e);o=[...o].filter(l=>c.has(l))}if(r==="name")o.sort((c,f)=>{const l=(this.users[c]||{}).sortName||"",u=(this.users[f]||{}).sortName||"";return l.localeCompare(u)});else if(r==="online")o.sort((c,f)=>{const l=this.getUserStatusForSort(this.getUser(c).status);return this.getUserStatusForSort(this.getUser(f).status)-l});else if(r==="rating")if(!e.trim().replace(/@/g,""))o=n.map(c=>c.id.toUserId());else{const c=new Map(n.map(f=>[f.id.toUserId(),f.rating]));o.sort((f,l)=>{const u=c.get(f)||0;return(c.get(l)||0)-u})}const p=this.userId;return indexOfAndSplice(o,p),t&&this.testSelfSearch(e)&&o.unshift(p),o})}getContactsPeerIds(e,t,r,s){return this.getContacts(e,t,r).then(a=>{const n=a.map(o=>o.toPeerId(!1));return s?n.slice(0,s):n})}toggleBlock(e,t,r){return this.apiManager.invokeApiSingle(t?"contacts.block":"contacts.unblock",{id:this.appPeersManager.getInputPeerById(e),my_stories_from:r===void 0?void 0:!0}).then(()=>{this.apiUpdatesManager.processLocalUpdate({_:"updatePeerBlocked",peer_id:this.appPeersManager.getOutputPeer(e),pFlags:{blocked:t||void 0,blocked_my_stories_from:r||void 0}}),this.appProfileManager.refreshPeerSettingsIfNeeded(e)})}testSelfSearch(e){const t=this.getSelf(),r=this.createSearchIndex();return r.indexObject(t.id,this.getUserSearchText(t.id)),r.search(e).has(t.id)}createSearchIndex(){return new SearchIndex(SEARCH_OPTIONS)}saveApiUsers(e,t){!e||e.saved||(e.saved=!0,e.forEach(r=>this.saveApiUser(r,t)))}modifyUsernamesCache(e,t){const r=getPeerActiveUsernames(e);if(!r.length)return;const s=r.map(a=>cleanUsername(a));t?s.forEach(a=>{this.usernames[a]=e.id.toPeerId(e._!=="user")}):s.forEach(a=>{delete this.usernames[a]})}setUsernameToCache(e,t){return!t||t.username!==e.username||!deepEqual(t.usernames,e.usernames)?(this.modifyUsernamesCache(t,!1),this.modifyUsernamesCache(e,!0),!0):!1}saveUserStatus(e){if(!e)return;const t=e.saved;e.expires&&!t&&(e.expires-=this.timeManager.getServerTimeOffset()),e.was_online&&!t&&(e.was_online-=this.timeManager.getServerTimeOffset()),e.saved=!0}saveApiUser(e,t){if(!e||e._==="userEmpty")return;const r=e.id,s=this.users[r];if(e.pFlags??(e.pFlags={}),e.pFlags.min&&s!==void 0)return;const a=this.setUsernameToCache(e,s);if(!s||s.sortName===void 0||s.first_name!==e.first_name||s.last_name!==e.last_name){const o=e.first_name+(e.last_name?" "+e.last_name:"");e.sortName=e.pFlags.deleted?"":cleanSearchText(o,!1)}else e.sortName=s.sortName;this.saveUserStatus(e.status),e.photo?._==="userProfilePhotoEmpty"&&delete e.photo,e.emoji_status?._==="emojiStatusEmpty"&&delete e.emoji_status;const n=r.toPeerId(!1);if(s===void 0)this.users[r]=e,this.mirrorUser(e);else{const o=e.first_name!==s.first_name||e.last_name!==s.last_name||a,p=s.photo?.photo_id,c=e.photo?.photo_id,f=p!==c,l=s.emoji_status?.document_id!==e.emoji_status?.document_id,u=s.pFlags.premium!==e.pFlags.premium,g=u||l||s.pFlags.verified!==e.pFlags.verified||s.pFlags.scam!==e.pFlags.scam||s.pFlags.fake!==e.pFlags.fake,y=!!s.pFlags.contact,b=!!e.pFlags.contact,I=this.appStoriesManager.saveApiPeerStories(e,s);safeReplaceObject(s,e),this.mirrorUser(s),this.rootScope.dispatchEvent("user_update",r),y!==b&&this.onContactUpdated(r,b,y),I?.(),f&&this.rootScope.dispatchEvent("avatar_update",{peerId:n}),(o||g)&&this.rootScope.dispatchEvent("peer_title_edit",{peerId:n}),u&&this.rootScope.dispatchEvent("peer_bio_edit",n),l&&e.pFlags.self&&this.rootScope.dispatchEvent("emoji_status_change")}this.checkPremium(e,s),this.setUserToStateIfNeeded(e)}mirrorUser(e){MTProtoMessagePort.getInstance().invokeVoid("mirror",{name:"peers",key:""+e.id,value:e})}checkPremium(e,t){if(e.pFlags.self){const r=!!e.pFlags.premium;this.rootScope.premium!==r&&this.rootScope.dispatchEvent("premium_toggle_private",{isNew:!t,isPremium:r})}}setUserToStateIfNeeded(e){this.peersStorage.isPeerNeeded(e.id.toPeerId())&&this.storage.set({[e.id]:e})}isUserOnlineVisible(e){return this.getUserStatusForSort(e)>3}getUserStatusForSort(e){if(typeof e!="object"&&(e=this.getUser(e)?.status),e){const t=e._==="userStatusOnline"?e.expires:e._==="userStatusOffline"?e.was_online:0;if(t)return t;switch(e._){case"userStatusRecently":return 3;case"userStatusLastWeek":return 2;case"userStatusLastMonth":return 1}}return 0}getUser(e){return isObject(e)?e:this.users[e]}getUsers(){return this.users}getUserStatus(e){return this.isRegularUser(e)&&!this.users[e].pFlags.self&&this.users[e].status}getApiUsers(e){return this.apiManager.invokeApi("users.getUsers",{id:e.map(t=>this.getUserInput(t))}).then(t=>(this.saveApiUsers(t),t))}async getUserPhone(e){const t=this.getUser(e);if(!t?.phone)return;const r=await this.apiManager.getAppConfig();return{phone:t.phone,isAnonymous:r.fragment_prefixes.some(s=>t.phone.startsWith(s))}}getSelf(){return this.getUser(this.userId)}isBot(e){return this.users[e]&&!!this.users[e].pFlags.bot}isAttachMenuBot(e){return this.isBot(e)&&!!this.users[e].pFlags.bot_attach_menu}isContact(e){return this.contactsList.has(e)||!!(this.users[e]&&this.users[e].pFlags.contact)}isRegularUser(e){const t=this.users[e];return t&&!this.isBot(e)&&!t.pFlags.deleted&&!t.pFlags.support}isNonContactUser(e){return this.isRegularUser(e)&&!this.isContact(e)&&e!==this.userId}isPremium(e){return!!this.users[e]?.pFlags?.premium}isDeleted(e){return!!this.users[e]?.pFlags?.deleted}hasUser(e,t){const r=this.users[e];return isObject(r)&&(t||!r.pFlags.min)}canEdit(e){return this.userId===e||this.isContact(e)||!!this.users[e]?.pFlags?.bot_can_edit}getUserString(e){const t=this.getUser(e);return"u"+e+(t.access_hash?"_"+t.access_hash:"")}getUserId(e){const t=getPeerId(e);return t?t.toUserId():isObject(e)&&e._==="inputUserSelf"&&this.getSelf().id||NULL_PEER_ID}getUserInput(e){const t=this.getUser(e);return!e||t.pFlags&&t.pFlags.self?{_:"inputUserSelf"}:{_:"inputUser",user_id:e,access_hash:t.access_hash}}getUserInputPeer(e){const t=this.getUser(e);return{_:"inputPeerUser",user_id:e,access_hash:t.access_hash}}getContactMediaInput(e){const t=this.getUser(e);return{_:"inputMediaContact",first_name:t.first_name,last_name:t.last_name,phone_number:t.phone,vcard:"",user_id:e}}updateUserStatus(e,t=tsNow(!0)){e.status&&e.status._==="userStatusOnline"&&e.status.expires<t&&(e.status={_:"userStatusOffline",was_online:e.status.expires},this.rootScope.dispatchEvent("user_update",e.id),this.setUserToStateIfNeeded(e))}forceUserOnline(e,t){if(this.isBot(e))return;const r=tsNow(!0),s=60;if(t){if(r-t>=s)return}else if(this.apiUpdatesManager.updatesState.syncLoading)return;const a=this.getUser(e);a?.status&&a.status._!=="userStatusOnline"&&a.status._!=="userStatusEmpty"&&!a.pFlags.support&&!a.pFlags.deleted&&(a.status={_:"userStatusOnline",expires:r+s},this.rootScope.dispatchEvent("user_update",e),this.setUserToStateIfNeeded(a))}importContact(e,t,r){return this.importContacts([{first_name:e,last_name:t,phones:[r]}]).then(s=>{if(!s.length){const a=new Error;throw a.type="NO_USER",a}return s[0]})}importContacts(e){const t=[];for(let r=0;r<e.length;++r)for(let s=0;s<e[r].phones.length;++s)t.push({_:"inputPhoneContact",client_id:(r<<16|s).toString(10),phone:e[r].phones[s],first_name:e[r].first_name,last_name:e[r].last_name});return this.apiManager.invokeApi("contacts.importContacts",{contacts:t}).then(r=>(this.saveApiUsers(r.users),r.imported.map(a=>(this.onContactUpdated(a.user_id,!0),a.user_id))))}getTopPeers(e){return this.getTopPeersPromises[e]?this.getTopPeersPromises[e]:this.getTopPeersPromises[e]=this.appStateManager.getState().then(t=>{const r=t.topPeersCache[e];return r&&r.cachedTime+864e5>Date.now()&&r.peers?r.peers:this.apiManager.invokeApi("contacts.getTopPeers",{[e]:!0,offset:0,limit:30,hash:"0"}).then(s=>{let a=[];return s._==="contacts.topPeers"&&(this.saveApiUsers(s.users),this.appChatsManager.saveApiChats(s.chats),s.categories.length&&(a=s.categories[0].peers.map(n=>{const o=getPeerId(n.peer);return this.peersStorage.requestPeer(o,"topPeer"),{id:o,rating:n.rating}}))),t.topPeersCache[e]={peers:a,cachedTime:Date.now()},this.appStateManager.pushToState("topPeersCache",t.topPeersCache),a})})}getBlocked(e=0,t=0){return this.apiManager.invokeApiSingle("contacts.getBlocked",{offset:e,limit:t}).then(r=>{this.saveApiUsers(r.users),this.appChatsManager.saveApiChats(r.chats);const s=r._==="contacts.blocked"?r.users.length+r.chats.length:r.count,a=r.users.map(n=>n.id.toPeerId()).concat(r.chats.map(n=>n.id.toPeerId(!0)));return{count:s,peerIds:a}})}getLocated(e,t,r,s=!1,a=0){const n={_:"inputGeoPoint",lat:e,long:t,accuracy_radius:r};return this.apiManager.invokeApi("contacts.getLocated",{geo_point:n,background:s}).then(o=>(this.apiUpdatesManager.processUpdateMessage(o),o))}searchContacts(e,t=20){const r=parseEntities(e);if(r.length&&r[0].length===e.trim().length&&r[0]._==="messageEntityUrl")try{const a=new URL(wrapUrl(e).url).pathname.slice(1);a&&(e=a)}catch{}return this.apiManager.invokeApiCacheable("contacts.search",{q:e,limit:t},{cacheSeconds:60}).then(s=>(this.saveApiUsers(s.users),this.appChatsManager.saveApiChats(s.chats),{my_results:filterUnique(s.my_results.map(n=>getPeerId(n))),results:s.results.map(n=>getPeerId(n))}))}onContactUpdated(e,t,r=this.isContact(e)){t!==r&&(t?this.pushContact(e):this.popContact(e),this.onContactsModified(),this.rootScope.dispatchEvent("contacts_update",e))}updateUsername(e){return this.apiManager.invokeApi("account.updateUsername",{username:e}).then(t=>{this.saveApiUser(t)})}setUserStatus(e,t){if(this.isBot(e))return;const r=this.users[e];if(r){const s=t?{_:"userStatusOffline",was_online:tsNow(!0)}:{_:"userStatusOnline",expires:tsNow(!0)+50};r.status=s,this.rootScope.dispatchEvent("user_update",e),this.setUserToStateIfNeeded(r)}}updateMyOnlineStatus(e){return this.setUserStatus(this.getSelf().id,e),this.apiManager.invokeApiSingle("account.updateStatus",{offline:e})}addContact(e,t,r,s,a){return this.apiManager.invokeApi("contacts.addContact",{id:this.getUserInput(e),first_name:t,last_name:r,phone:s,add_phone_privacy_exception:a}).then(n=>{this.apiUpdatesManager.processUpdateMessage(n,{override:!0}),this.appProfileManager.refreshPeerSettingsIfNeeded(e.toPeerId(!1)),this.onContactUpdated(e,!0)})}deleteContacts(e){return this.apiManager.invokeApi("contacts.deleteContacts",{id:e.map(t=>this.getUserInput(t))}).then(t=>{this.apiUpdatesManager.processUpdateMessage(t,{override:!0}),e.forEach(r=>{this.onContactUpdated(r,!1)})})}checkUsername(e){return this.apiManager.invokeApi("account.checkUsername",{username:e})}canSendToUser(e){return canSendToUser(this.getUser(e))}getCommonChats(e,t=100,r){return this.apiManager.invokeApiSingleProcess({method:"messages.getCommonChats",params:{user_id:this.getUserInput(e),limit:t,max_id:r??0},processResult:s=>(this.appChatsManager.saveApiChats(s.chats),s)})}updateEmojiStatus(e){return this.apiManager.invokeApi("account.updateEmojiStatus",{emoji_status:e}).then(()=>{this.apiUpdatesManager.processLocalUpdate({_:"updateUserEmojiStatus",user_id:this.getSelf().id,emoji_status:e})})}getDefaultEmojiStatuses(){return this.defaultEmojiStatuses??(this.defaultEmojiStatuses=this.apiManager.invokeApiSingleProcess({method:"account.getDefaultEmojiStatuses",processResult:e=>this.defaultEmojiStatuses=e}))}getRecentEmojiStatuses(){return this.recentEmojiStatuses??(this.recentEmojiStatuses=this.apiManager.invokeApiSingleProcess({method:"account.getRecentEmojiStatuses",processResult:e=>this.recentEmojiStatuses=e}))}isPremiumRequiredToContact(e,t){const r=this.getUser(e);if(!r||this.rootScope.premium||!r.pFlags.contact_require_premium)return!1;if(this.appProfileManager.getCachedFullUser(e)?.pFlags?.contact_require_premium)return!0;if(this.appMessagesManager.getHistoryStorage(e.toPeerId(!1)).count)return!1;if(t)return;let n=this.isPremiumRequiredToContactUserIds.get(e);return n||this.isPremiumRequiredToContactUserIds.set(e,n=deferredPromise()),this.getIsPremiumRequiredToContact(),n}getIsPremiumRequiredToContact(){this.isPremiumRequiredToContactUserIdsProcessing||(this.isPremiumRequiredToContactUserIdsProcessing=!0,pause(0).then(()=>{const e=[...this.isPremiumRequiredToContactUserIds.keys()];this.apiManager.invokeApi("users.getIsPremiumRequiredToContact",{id:e.map(t=>this.getUserInput(t))}).then(t=>{t.forEach((r,s)=>{const a=e[s];this.isPremiumRequiredToContactUserIds.get(a).resolve(r),this.isPremiumRequiredToContactUserIds.delete(a)})}).finally(()=>{this.isPremiumRequiredToContactUserIdsProcessing=!1,this.isPremiumRequiredToContactUserIds.size&&this.getIsPremiumRequiredToContact()})}))}}const photoTypeSet=new Set(["photo","video","gif","document"]);class AppWebPagesManager extends AppManager{constructor(){super(...arguments),this.webpages={},this.pendingWebPages={}}after(){this.apiUpdatesManager.addMultipleEventsListeners({updateWebPage:e=>{this.saveWebPage(e.webpage)},updateChannelWebPage:e=>{this.saveWebPage(e.webpage)}})}saveWebPage(e,t,r){if(e._==="webPageNotModified"||e._==="webPageEmpty")return;const{id:s}=e;r??(r={type:"webPage",url:e.url});const a=this.webpages[s],n=a&&a._===e._&&a.hash!==e.hash;let o=!1;if(e._==="webPage"){e.photo?._==="photo"?e.photo=this.appPhotosManager.savePhoto(e.photo,r):delete e.photo,e.document?._==="document"?e.document=this.appDocsManager.saveDoc(e.document,r):(e.type==="document"&&delete e.type,delete e.document),a?._===e._&&(o=a.photo?.id!==e.photo?.id||a.document?.id!==e.document?.id);const c=e.site_name,f=e.title||e.author||"";c&&f===c&&delete e.site_name;for(const l of e.attributes||[])switch(l._){case"webPageAttributeStory":{const u=this.appStoriesManager.getPeerStoriesCache(this.appPeersManager.getPeerId(l.peer));l.story=this.appStoriesManager.saveStoryItem(l.story,u);break}}!photoTypeSet.has(e.type)&&!e.description&&e.photo&&(e.type="photo")}let p=this.pendingWebPages[s];if(t&&(p||(p=this.pendingWebPages[s]=new Set),p.add(t)),a===void 0?this.webpages[s]=e:safeReplaceObject(a,e),(!t&&n||o)&&p!==void 0){const c=[];p.forEach(f=>{const[l,u,g]=f.split("_");c.push({peerId:l.toPeerId(),mid:+u,isScheduled:!!g})}),this.rootScope.dispatchEvent("webpage_updated",{id:s,msgs:c})}return e}getMessageKeyForPendingWebPage(e,t,r){return e+"_"+t+(r?"_s":"")}deleteWebPageFromPending(e,t){const r=e.id;if(!r)return;const s=this.pendingWebPages[r];s&&s.has(t)&&(s.delete(t),s.size||delete this.pendingWebPages[r])}getCachedWebPage(e){return this.webpages[e]}getWebPage(e){return this.apiManager.invokeApiHashable({method:"messages.getWebPage",processResult:t=>(this.appPeersManager.saveApiPeers(t),this.saveWebPage(t.webpage)),params:{url:e}})}}function blobSafeMimeType(d){return["image/jpeg","image/png","image/gif","image/svg+xml","image/webp","image/bmp","image/avif","image/jxl","video/mp4","video/webm","video/quicktime","audio/ogg","audio/mpeg","audio/mp4","audio/wav","application/json","application/pdf"].indexOf(d)===-1?"application/octet-stream":d}function blobConstruct(d,e=""){Array.isArray(d)||(d=[d]);const t=blobSafeMimeType(e);return new Blob(d,{type:t})}class MemoryWriter{constructor(e,t,r){this.mimeType=e,this.size=t,this.saveFileCallback=r,this.bytes=new Uint8Array(t)}async write(e,t){const r=t+e.byteLength;if(r>this.bytes.byteLength){const s=new Uint8Array(r);s.set(this.bytes,0),this.bytes=s}this.bytes.set(e,t)}truncate(){this.bytes=new Uint8Array}trim(e){this.bytes=this.bytes.slice(0,e)}finalize(e=!0){const t=blobConstruct(this.bytes,this.mimeType);return e&&this.saveFileCallback&&this.saveFileCallback(t),t}getParts(){return this.bytes}replaceParts(e){this.bytes=e}}const ct=class ct{constructor(e){this.dbName=e,this.useStorage=!0,Modes.test&&(this.dbName+="_test"),ct.STORAGES.length&&(this.useStorage=ct.STORAGES[0].useStorage),this.openDatabase(),ct.STORAGES.push(this)}openDatabase(){return this.openDbPromise??(this.openDbPromise=caches.open(this.dbName))}delete(e){return this.timeoutOperation(t=>t.delete("/"+e))}deleteAll(){return caches.delete(this.dbName)}get(e){return this.timeoutOperation(t=>t.match("/"+e))}save(e,t){return this.timeoutOperation(r=>r.put("/"+e,t))}getFile(e,t="blob"){return this.get(e).then(r=>{if(!r)throw makeError("NO_ENTRY_FOUND");return r[t]()})}saveFile(e,t){t instanceof Blob||(t=blobConstruct(t));const r=new Response(t,{headers:{"Content-Length":""+t.size}});return this.save(e,r).then(()=>t)}timeoutOperation(e){return this.useStorage?new Promise(async(t,r)=>{let s=!1;const a=setTimeout(()=>{r(),s=!0},15e3);try{const n=await this.openDatabase();if(!n)throw this.useStorage=!1,this.openDbPromise=void 0,"no cache?";const o=await e(n);if(s)return;t(o)}catch(n){r(n)}clearTimeout(a)}):Promise.reject(makeError("STORAGE_OFFLINE"))}prepareWriting(e,t,r){return{deferred:deferredPromise(),getWriter:()=>new MemoryWriter(r,t,a=>this.saveFile(e,a).catch(()=>a))}}static toggleStorage(e,t){return Promise.all(this.STORAGES.map(r=>{if(r.useStorage=e,!!t&&!e)return r.deleteAll()}))}};ct.STORAGES=[];let CacheStorageController=ct;function readBlobAs(d,e){return new Promise(t=>{const r=new FileReader;r.addEventListener("loadend",s=>{t(s.target.result)}),r[e](d)})}function readBlobAsArrayBuffer(d){return readBlobAs(d,"readAsArrayBuffer")}function fixFirefoxSvg(d){const e=d.indexOf("<svg");e!==0&&(d=d.slice(e));const[t,r,s,a]=d.match(/viewBox="(.+?)"/)[1].split(" ");return d=d.replace(/>/,` width="${s}" height="${a}">`).replace(/[^\x00-\x7F]/g,""),d}function getPhotoDownloadOptions(d,e,t,r){const s=d._==="document";if(!e||e._==="photoSizeEmpty")throw new Error("photoSizeEmpty!");const a=!!((e._==="photoSize"||e._==="photoSizeProgressive")&&d.access_hash&&d.file_reference),n={_:s?"inputDocumentFileLocation":"inputPhotoFileLocation",id:d.id,access_hash:d.access_hash,file_reference:d.file_reference,thumb_size:e.type};return{dcId:d.dc_id,location:n,size:a?e.size:void 0,mimeType:"image/jpeg",queueId:t,onlyCache:r}}function getWebFileDownloadOptions(d){return{dcId:0,location:d,size:0,mimeType:"image/jpeg"}}function getWebDocumentDownloadOptions(d){const e=getWebFileDownloadOptions({_:"inputWebFileLocation",access_hash:d.access_hash,url:d.url});return e.size=d.size,e.mimeType=d.mime_type,e}function isWebDocument(d){return!!(d&&(d._==="webDocument"||d._==="webDocumentNoProxy"))}function isWebFileLocation(d){return d?._.includes("inputWebFile")}function getDownloadFileNameFromOptions(d){return getFileNameByLocation(d.location,d)}function getDownloadMediaDetails(d){const{media:e,thumb:t,queueId:r,onlyCache:s}=d;let a;return e._==="document"?a=getDocumentDownloadOptions(e,t,r,s):e._==="photo"?a=getPhotoDownloadOptions(e,t,r,s):isWebDocument(e)?a=getWebDocumentDownloadOptions(e):isWebFileLocation(e)&&(a=getWebFileDownloadOptions(e)),a.downloadId=d.downloadId,{fileName:getDownloadFileNameFromOptions(a),downloadOptions:a}}function readBlobAsUint8Array(d){return readBlobAsArrayBuffer(d).then(e=>new Uint8Array(e))}function fileNameRFC(d){return encodeURIComponent(d).replace(/['()]/g,escape).replace(/\*/g,"%2A")}class DownloadWriter{constructor(e,t){this.serviceMessagePort=e,this.downloadId=t,this.serviceMessagePort=appManagersManager$1.getServiceMessagePort()}async write(e,t){return this.serviceMessagePort.invoke("downloadChunk",{id:this.downloadId,chunk:e})}finalize(e){return this.serviceMessagePort.invoke("downloadFinalize",this.downloadId).then(()=>{})}}class DownloadStorage{getFile(e){return Promise.reject(makeError("NO_ENTRY_FOUND"))}prepareWriting({fileName:e,downloadId:t,size:r}){const s={"Content-Disposition":"attachment; filename*=UTF-8''"+fileNameRFC(e),...r?{"Content-Length":r}:{}},a=appManagersManager$1.getServiceMessagePort(),n=a.invoke("download",{headers:s,id:t}),o=deferredPromise();return o.cancel=()=>{o.reject(makeError("DOWNLOAD_CANCELED"))},o.catch(()=>{appManagersManager$1.getServiceMessagePort().invoke("downloadCancel",t)}),n.then(o.resolve.bind(o),o.reject.bind(o)),{deferred:o,getWriter:()=>new DownloadWriter(a,t)}}}function clamp(d,e,t){return Math.min(t,Math.max(e,d))}const MAX_DOWNLOAD_FILE_PART_SIZE=1*1024*1024,MAX_UPLOAD_FILE_PART_SIZE=512*1024,MIN_PART_SIZE=64*1024,AVG_PART_SIZE=512*1024,REGULAR_DOWNLOAD_DELTA=9*512*1024/MIN_PART_SIZE,PREMIUM_DOWNLOAD_DELTA=56*512*1024/MIN_PART_SIZE,IGNORE_ERRORS=new Set(["DOWNLOAD_CANCELED","UPLOAD_CANCELED","UNKNOWN","NO_NEW_CONTEXT"]);class ApiFileManager extends AppManager{constructor(){super(...arguments),this.cacheStorage=new CacheStorageController("cachedFiles"),this.downloadStorage=new DownloadStorage,this.downloadPromises={},this.uploadPromises={},this.downloadPulls={},this.downloadActives={},this.refreshReferencePromises={},this.log=logger("AFM",LogTypes.Error|LogTypes.Log),this.tempId=0,this.queueId=0,this.debug=Modes.debug,this.maxUploadParts=4e3,this.maxDownloadParts=8e3,this.uncompressTGS=(e,t)=>this.cryptoWorker.invokeCrypto("gzipUncompress",e.slice().buffer,!1),this.uncompressTGV=(e,t)=>{const r=e.slice().buffer;return getEnvironment().IS_FIREFOX?this.cryptoWorker.invokeCrypto("gzipUncompress",r,!0).then(s=>fixFirefoxSvg(s)).then(s=>new TextEncoder().encode(s)):this.cryptoWorker.invokeCrypto("gzipUncompress",r,!1)},this.convertWebp=(e,t)=>MTProtoMessagePort.getInstance().invoke("convertWebp",{fileName:t,bytes:e}),this.convertOpus=(e,t)=>MTProtoMessagePort.getInstance().invoke("convertOpus",{fileName:t,bytes:e})}after(){setInterval(()=>{for(const e in this.refreshReferencePromises){const{deferred:t}=this.refreshReferencePromises[e];(t.isFulfilled||t.isRejected)&&delete this.refreshReferencePromises[e]}},18e5),this.rootScope.addEventListener("config",e=>{this.webFileDcId=e.webfile_dc_id}),this.rootScope.addEventListener("app_config",e=>{this.maxUploadParts=this.rootScope.premium?e.upload_max_fileparts_premium:e.upload_max_fileparts_default,this.maxDownloadParts=e.upload_max_fileparts_premium})}downloadRequest({dcId:e,id:t,cb:r,activeDelta:s,queueId:a=0,priority:n=0}){this.downloadPulls[e]===void 0&&(this.downloadPulls[e]=[],this.downloadActives[e]=0);const o=this.downloadPulls[e],p=new Promise((c,f)=>{insertInDescendSortedArray(o,{id:t,queueId:a,cb:r,deferred:{resolve:c,reject:f},activeDelta:s,priority:n},"priority",-1)});return this.downloadCheck(e),p}downloadCheck(e){const t=this.downloadPulls[e],r=this.rootScope.premium?PREMIUM_DOWNLOAD_DELTA:REGULAR_DOWNLOAD_DELTA;if(this.downloadActives[e]>=r||!t?.length)return!1;const s=t[0].priority?t.shift():findAndSplice(t,o=>o.queueId===0)||findAndSplice(t,o=>o.queueId===this.queueId)||t.shift(),a=s.activeDelta||1;this.downloadActives[e]+=a;const n=s.cb();n.then(()=>{this.downloadActives[e]-=a,this.downloadCheck(e)},o=>{(!o?.type||!IGNORE_ERRORS.has(o.type))&&this.log.error("downloadCheck error:",o),this.downloadActives[e]-=a,this.downloadCheck(e)}).finally(()=>{n.then(s.deferred.resolve,s.deferred.reject)})}setQueueId(e){this.queueId=e}getFileStorage(){return this.cacheStorage}cancelDownload(e){const t=[this.downloadPromises[e],this.uploadPromises[e]].filter(Boolean);let r=!1;for(let s=0,a=t.length;s<a;++s){const n=t[s];n&&!n.isRejected&&!n.isFulfilled&&(n.cancel(),r=!0)}return r}requestWebFilePart({dcId:e,location:t,offset:r,limit:s,id:a,queueId:n,checkCancel:o}){return this.downloadRequest({dcId:this.webFileDcId,id:a,cb:async()=>{if(o?.(),"url"in t){const p=t.url;if(this.isLocalWebFile(p))return fetch(p).then(c=>c.arrayBuffer()).then(c=>{const f=p.split(".").pop(),l=EXTENSION_MIME_TYPE_MAP[f]||"application/octet-stream";return{_:"upload.webFile",size:c.byteLength,mime_type:l,file_type:{_:"storage.fileUnknown"},mtime:0,bytes:new Uint8Array(c)}})}return this.apiManager.invokeApi("upload.getWebFile",{location:t,offset:r,limit:s},{dcId:this.webFileDcId,fileDownload:!0})},activeDelta:this.getDelta(s),queueId:n})}requestFilePart({dcId:e,location:t,offset:r,limit:s,id:a,queueId:n,checkCancel:o,floodMaxTimeout:p,priority:c}){return this.downloadRequest({dcId:e,id:a,cb:async()=>{o?.();const f=async()=>{o?.();const u=t.file_reference?.slice();return this.apiManager.invokeApi("upload.getFile",{location:t,offset:r,limit:s},{dcId:e,fileDownload:!0,floodMaxTimeout:p}).catch(y=>{if(o?.(),y.type==="FILE_REFERENCE_EXPIRED")return this.refreshReference(t,u).then(f);throw y})},l=t.file_reference;if(l&&!t.checkedReference){t.checkedReference=!0;const u=bytesToHex(l);if(this.refreshReferencePromises[u])return this.refreshReference(t,l).then(f)}return f()},activeDelta:this.getDelta(s),queueId:n,priority:c})}getDelta(e){return e/MIN_PART_SIZE}getLimitPart(e,t){if(!e)return AVG_PART_SIZE;let r=MIN_PART_SIZE;const s=t?this.maxUploadParts:this.maxDownloadParts,a=t?MAX_UPLOAD_FILE_PART_SIZE:MAX_DOWNLOAD_FILE_PART_SIZE;for(;e/r>s&&r<a;)r*=2;return r}refreshReference(e,t,r=bytesToHex(t)){let s=this.refreshReferencePromises[r];if(!s){const a=deferredPromise();s=this.refreshReferencePromises[r]={deferred:a},this.referenceDatabase.refreshReference(t).then(n=>{r===bytesToHex(n)&&a.reject(makeError("REFERENCE_IS_NOT_REFRESHED")),a.resolve(n)},a.reject.bind(a))}return s.deferred.then(a=>{e.file_reference=a})}isDownloading(e){return!!this.downloadPromises[e]}getDownload(e){return this.downloadPromises[e]}getUpload(e){return this.uploadPromises[e]}getConvertMethod(e){let t;return e==="application/x-tgwallpattern"?(t=this.uncompressTGV,e="image/svg+xml"):e==="image/webp"&&!getEnvironment().IS_WEBP_SUPPORTED?(t=this.convertWebp,e="image/png"):e==="application/x-tgsticker"?(t=this.uncompressTGS,e="application/json"):e==="audio/ogg"&&!getEnvironment().IS_OPUS_SUPPORTED&&(t=this.convertOpus,e="audio/wav"),{mimeType:e,process:t}}isLocalWebFile(e){return e?.startsWith("assets/")}download(e){const t=this.log.bindPrefix("download"),r=e.size??0,{dcId:s,location:a}=e;let{downloadId:n}=e;n&&!appManagersManager$1.getServiceMessagePort()&&(t.error("fallback to blob",e),n=void 0);const o=e.mimeType,p=this.getConvertMethod(o),{process:c}=p;e.mimeType=p.mimeType||"image/jpeg";const f=getDownloadFileNameFromOptions(e),l=n?getDownloadFileNameFromOptions({...copy(e),downloadId:void 0}):f,u=this.getFileStorage(),g=n?this.downloadStorage:void 0;let y=n?void 0:this.downloadPromises[f];if(t("start",f,e,r),y)return y;const b=(m,_)=>{if(!m?.error)for(const h of K)m&&m!==h||(h.error=_,h.deferred.reject(_))},I=isWebFileLocation(a),S=I&&this.isLocalWebFile(a.url),A=this.tempId++,k=S?r:e.limitPart||this.getLimitPart(r,!1);let T=u.getFile.bind(u),O,$;const K=[],ee=r||k,Q=()=>K.reduce((m,_)=>m+ +!!_.error,0),te=(m,_)=>{const{deferred:h}=m,v=b.bind(null,m);h.cancel=()=>h.reject(makeError("DOWNLOAD_CANCELED")),h.catch(E=>{v(E),m.writer?.truncate?.()}).finally(()=>{this.downloadPromises[_]===h&&delete this.downloadPromises[_],delete m.writer}),this.downloadPromises[_]=h,K.push(m)};if(u&&(!g||ee<=MAX_FILE_SAVE_SIZE)&&(O=u.prepareWriting(l,ee,e.mimeType),te(O,l)),g){let m=e.fileName;if(!m){m=l;const _=MIME_TYPE_EXTENSION_MAP[e.mimeType];_&&(m+="."+_)}$=g.prepareWriting({fileName:m,downloadId:n,size:ee}),te($,f),O&&$.deferred.catch(_=>O.deferred.reject(_))}y=$?.deferred??O.deferred,g&&c&&(T=g.getFile.bind(g)),T(l).then(async m=>{if(N(),$){const _=$.writer=$.getWriter();N();const h=await readBlobAsUint8Array(m);N(),await _.write(h),N(),$.deferred.resolve(await _.finalize())}O&&O.deferred.resolve(m)}).catch(async m=>{if(e.onlyCache){b(null,m);return}K.forEach(x=>{x.writer=x.getWriter()});const _=1/0,h=(I?this.requestWebFilePart:this.requestFilePart).bind(this);I&&this.webFileDcId===void 0&&!S&&(await this.apiManager.getConfig(),N());const v={done:0,offset:0,total:r,fileName:f},E=()=>{try{N(),v.done=P,this.rootScope.dispatchEvent("download_progress",v)}catch{}},M=throttle(E,50,!0);let P=0,D=Promise.resolve(),w=0;const B=async()=>{if(w&&w>r)return;const x=deferredPromise(),U=D,X=w;D=x,w+=k;try{N();const se=performance.now(),J=await h({dcId:s,location:a,offset:X,limit:k,id:A,queueId:e.queueId,checkCancel:N});N();const L=performance.now()-se,G=J.bytes,re=G.byteLength;t("requestPart result",f,J);const fe=X+k>=r||!re;if(re){P+=re,fe?E():(B(),M());const z=performance.now();await U,N();const H=performance.now()-z,de=performance.now();await Promise.all(K.map(({writer:me})=>me?.write(G,X))),N(),n&&t("write time",performance.now()-de,"request time",L,"queue time",H)}if(fe&&(!r||P<r)&&K.forEach(({writer:z})=>z?.trim?.(P)),fe&&c){const z=K.filter(({writer:H})=>H?.getParts&&H.replaceParts).map(async({writer:H})=>{const de=H.getParts(),me=await c(de,l);H.replaceParts(me)});await Promise.all(z),N()}if(x.resolve(),fe){const z=P<=MAX_FILE_SAVE_SIZE;K.forEach(H=>{const{deferred:de,writer:me}=H;if(de.isFulfilled||de.isRejected||!me)return;const we=me.finalize(z);de.resolve(we)})}}catch(se){b(null,se),x.resolve()}};for(let x=0,U=clamp(r/k,1,_);x<U;++x)B()}).catch(noop$2);const N=()=>{if(Q()===K.length)throw K[0].error};return y}downloadMedia(e){let{media:t,thumb:r}=e;const s=t._==="photo";if(s&&!r)return Promise.reject("preloadPhoto photoEmpty!");const a=t._==="document";a?t=this.appDocsManager.getDoc(t.id):s&&(t=this.appPhotosManager.getPhoto(t.id)),e.media=t||e.media;const{fileName:n,downloadOptions:o}=getDownloadMediaDetails(e);let p=this.getDownload(n);return p||(p=this.download(o),a&&!r&&(this.rootScope.dispatchEvent("document_downloading",t.id),p.then(()=>{this.rootScope.dispatchEvent("document_downloaded",t.id)}).catch(noop$2))),p}downloadMediaURL(e){const{media:t,thumb:r}=e;let s=this.thumbsStorage.getCacheContext(t,r?.type);return(!r||s.downloaded>=("size"in r?r.size:0))&&s.url?Promise.resolve(s.url):this.downloadMedia(e).then(a=>{if(!s.downloaded||!s.url||s.downloaded<a.size){const n=URL.createObjectURL(a);s=this.thumbsStorage.setCacheContextURL(t,s.type,n,a.size)}return s.url})}downloadMediaVoid(e){return this.downloadMedia(e).then(noop$2)}delete(e){return delete this.downloadPromises[e],this.getFileStorage().delete(e)}upload({file:e,fileName:t}){t||(t=getFileNameForUpload(e));const r=e.size,s=r>=10485760,a=this.getLimitPart(r,!0),n=this.getDelta(a),o=Math.ceil(r/a),p=randomLong(),c={_:s?"inputFileBig":"inputFile",id:p,parts:o,name:t,md5_checksum:""},f=deferredPromise();if(o>this.maxUploadParts)return f.reject(makeError("FILE_TOO_BIG")),f;let l=!1,u=!1,g=$=>{$?.type!=="UPLOAD_CANCELED"&&this.log.error("up error",$),f.reject($),l=!0,g=noop$2};const y=s?"upload.saveBigFilePart":"upload.saveFilePart",b=this.tempId++,I=this;function*S(){let $=0,K=0;for(let ee=0;ee<r;ee+=a){const Q=$++;yield I.downloadRequest({dcId:"upload",id:b,cb:async()=>{A();const te=e.slice(ee,ee+a),N=await readBlobAsArrayBuffer(te);return A(),I.debug&&I.log("Upload file part, isBig:",s,Q,N.byteLength,new Uint8Array(N).length,new Uint8Array(N).slice().length),I.apiManager.invokeApi(y,{file_id:p,file_part:Q,file_total_parts:o,bytes:N},{fileUpload:!0}).then(()=>{if(l)return;++K;const m={done:K*a,offset:ee,total:r,fileName:t};f.notify(m),K>=o&&(f.resolve(c),u=!0)},g)},activeDelta:n}).catch(g)}}const A=()=>{if(l)throw makeError("UPLOAD_CANCELED")};f.cancel=()=>{!l&&!u&&(l=!0,g(makeError("UPLOAD_CANCELED")))},f.notify=$=>{this.rootScope.dispatchEvent("download_progress",$)},f.finally(()=>{this.uploadPromises[t]===f&&delete this.uploadPromises[t]}),this.uploadPromises[t]=f;const k=S(),T=()=>{if(l)return;const $=k.next();$.done||l||$.value.then(T)},O=1/0;for(let $=0,K=Math.min(O,o);$<K;++$)T();return f}}class LocalStorage{constructor(){this.prefix="",this.cache={},this.useStorage=!0,Modes.test&&(this.prefix="t_")}get(e,t=!0){if(this.cache.hasOwnProperty(e)&&t)return this.cache[e];if(this.useStorage){let r;try{r=localStorage.getItem(this.prefix+e)}catch{throw this.useStorage=!1,makeError("STORAGE_OFFLINE")}if(r!==null)try{r=JSON.parse(r)}catch{}else r=void 0;return r}else throw makeError("STORAGE_OFFLINE")}set(e,t=!1){let r;for(const s in e)if(e.hasOwnProperty(s)){const a=e[s];if(this.cache[s]=a,!t)try{if(!this.useStorage)throw makeError("STORAGE_OFFLINE");const n=JSON.stringify(a);localStorage.setItem(this.prefix+s,n)}catch(n){this.useStorage=!1,r=n}}if(r)throw r}delete(e,t=!1){e=""+e,t||delete this.cache[e];try{localStorage.removeItem(this.prefix+e)}catch{}}clear(){const e=["dc","server_time_offset","xt_instance","user_auth","state_id","k_build"];for(let t=1;t<=5;++t)e.push(`dc${t}_server_salt`),e.push(`dc${t}_auth_key`),e.push(`dc${t}_hash`);for(const t of e)this.delete(t,!0)}toggleStorage(e,t){if(this.useStorage=e,!!t)if(!e)this.clear();else return this.set(this.cache)}}const ht=class ht{constructor(){ht.STORAGES.push(this),IS_WORKER||(this.storage=new LocalStorage)}async proxy(e,...t){return IS_WORKER?MTProtoMessagePort.getInstance().invoke("localStorageProxy",{type:e,args:t}):(t=Array.prototype.slice.call(t),this.storage[e].apply(this.storage,t))}get(e,t){return this.proxy("get",e,t)}set(e,t){return this.proxy("set",e,t)}delete(e,t){return this.proxy("delete",e,t)}clear(){return this.proxy("clear")}toggleStorage(e,t){return this.proxy("toggleStorage",e,t)}};ht.STORAGES=[];let LocalStorageController=ht;const sessionStorage=new LocalStorageController;MOUNT_CLASS_TO.appStorage=sessionStorage;class ApiManagerMethods extends AppManager{constructor(){super(),this.hashes={},this.apiPromisesSingleProcess={},this.apiPromisesSingle={},this.apiPromisesCacheable={},this.afterMessageIdTemp=0}after(){this.rootScope.addEventListener("managers_ready",async()=>{const t=await e;this.applyAppConfig(t,!1)},{once:!0});const e=this.appStateManager.getState().then(t=>t.appConfig);return e}setUser(e){return this.appUsersManager.saveApiUser(e),this.setUserAuth(e.id)}invokeApiAfter(e,t={},r={}){let s=r;return s.prepareTempMessageId=""+ ++this.afterMessageIdTemp,s={...r},r.messageId=s.prepareTempMessageId,this.invokeApi(e,t,s)}invokeApiHashable(e){e.params??(e.params={}),e.options??(e.options={});const{params:t,options:r,method:s,overwrite:a}=e,n=JSON.stringify(t);let o;return this.hashes[s]&&(o=this.hashes[s][n],o&&(a?(delete this.hashes[s][n],o=void 0):t.hash=o.hash)),this.invokeApiSingleProcess({method:s,processResult:p=>{if(p._.includes("NotModified"))return o.result;if(p.hash){const c=p.hash;this.hashes[s]||(this.hashes[s]={}),o=this.hashes[s][n]={hash:c,result:p}}if(e.processResult){const c=e.processResult(p);return o?o.result=c:c}return p},params:t,options:r})}invokeApiSingle(e,t={},r={}){const s=e+"-"+JSON.stringify(t),a=this.apiPromisesSingle;return a[s]?a[s]:a[s]=this.invokeApi(e,t,r).finally(()=>{delete a[s]})}invokeApiSingleProcess(e){e.params??(e.params={}),e.options??(e.options={});const{method:t,processResult:r,processError:s,params:a,options:n}=e,o=this.apiPromisesSingleProcess,p=n.cacheKey||JSON.stringify(a),c=o[t]??(o[t]=new Map),f=c.get(p);if(f)return f;const l=()=>{const b=c.get(p);return b===y?void 0:b},y=this.invokeApi(t,a,n).then(b=>l()||(r?r(b):b),b=>{const I=l();if(I)return I;if(!s)throw b;return s(b)}).finally(()=>{c.get(p)===y&&(c.delete(p),c.size||delete o[t])});return c.set(p,y),y}invokeApiCacheable(e,t={},r={}){var c;const s=(c=this.apiPromisesCacheable)[e]??(c[e]={}),a=JSON.stringify(t);let n=s[a];if(n&&(!r.override||!n.fulfilled)){if(r.syncIfHasResult){if(n.hasOwnProperty("result"))return n.result;if(n.hasOwnProperty("error"))throw n.error}return n.promise}r.override&&(n?.timeout&&(clearTimeout(n.timeout),delete n.timeout),delete r.override);let o;r.cacheSeconds&&(o=ctx.setTimeout(()=>{s[a]===n&&delete s[a]},r.cacheSeconds*1e3),delete r.cacheSeconds);const p=this.invokeApi(e,t,r);return p.then(f=>{n.result=f},f=>{n.error=f}),n=s[a]={timestamp:Date.now(),fulfilled:!1,timeout:o,promise:p,params:t},p}clearCache(e,t){const r=this.apiPromisesCacheable[e];if(r)for(const s in r){const a=r[s];try{t(a.params)&&(a.timeout&&clearTimeout(a.timeout),delete r[s])}catch{}}}getConfig(e){return this.config&&!e?this.config:this.invokeApiSingleProcess({method:"help.getConfig",params:{},processResult:t=>(this.config=t,this.rootScope.dispatchEvent("config",t),t),options:{overwrite:e}})}applyAppConfig(e,t){return this.appConfig=e,ignoreRestrictionReasons(e.ignore_restriction_reasons??[]),t&&(e.cachedTime=Date.now(),this.appStateManager.pushToState("appConfig",e)),this.rootScope.dispatchEvent("app_config",e),e}getAppConfig(e){return this.appConfig&&!e&&(this.requestedAppConfig||Date.now()-(this.appConfig.cachedTime||0)<864e5)?this.appConfig:this.invokeApiSingleProcess({method:"help.getAppConfig",params:{hash:this.appConfig?.hash||0},processResult:async t=>{this.requestedAppConfig=!0;const r=t.config||this.appConfig;return r.hash=t.hash||r.hash,this.applyAppConfig(r,!0)},options:{overwrite:e}})}getTimezonesList(){return this.invokeApiCacheable("help.getTimezonesList",{hash:0},{cacheSeconds:86400,syncIfHasResult:!0})}getLimit(e,t){return callbackify(this.getAppConfig(),r=>{const s={pin:["dialogs_pinned_limit_default","dialogs_pinned_limit_premium"],folderPin:["dialogs_folder_pinned_limit_default","dialogs_folder_pinned_limit_premium"],folders:["dialog_filters_limit_default","dialog_filters_limit_premium"],favedStickers:["stickers_faved_limit_default","stickers_faved_limit_premium"],reactions:["reactions_user_max_default","reactions_user_max_premium"],bio:["about_length_limit_default","about_length_limit_premium"],topicPin:"topics_pinned_limit",caption:["caption_length_limit_default","caption_length_limit_premium"],chatlistInvites:["chatlist_invites_limit_default","chatlist_invites_limit_premium"],chatlistsJoined:["chatlists_joined_limit_default","chatlists_joined_limit_premium"],channels:["channels_limit_default","channels_limit_premium"],links:["channels_public_limit_default","channels_public_limit_premium"],gifs:["saved_gifs_limit_default","saved_gifs_limit_premium"],folderPeers:["dialog_filters_chats_limit_default","dialog_filters_chats_limit_premium"],uploadFileParts:["upload_max_fileparts_default","upload_max_fileparts_premium"],recommendedChannels:["recommended_channels_limit_default","recommended_channels_limit_premium"],savedPin:["saved_dialogs_pinned_limit_default","saved_dialogs_pinned_limit_premium"]};t??(t=this.rootScope.premium);const a=s[e],n=Array.isArray(a)?a[t?1:0]:a;return r[n]})}getPeerColors(){return this.apiManager.invokeApiCacheable("help.getPeerColors",{hash:0})}getPeerProfileColors(){return this.apiManager.invokeApiCacheable("help.getPeerProfileColors",{hash:0})}setThemeParams(e){this.themeParams=e}getThemeParams(){return this.themeParams}}function toggleStorages(d,e){return Promise.all([AppStorage.toggleStorage(d,e),CacheStorageController.toggleStorage(d,e),sessionStorage.toggleStorage(d,e)]).then(noop$2,noop$2)}const PREMIUM_FILE_NETWORKERS_COUNT=6,REGULAR_FILE_NETWORKERS_COUNT=3;class ApiManager extends ApiManagerMethods{constructor(){super(),this.log=logger("API"),this.cachedNetworkers={},this.cachedExportPromise={},this.gettingNetworkers={},this.baseDcId=0,this.afterMessageTempIds={},this.transportType=Modes.transport,Modes.multipleTransports&&transportController$1.addEventListener("transport",t=>{this.changeTransportType(t)});const e=9970*1e3;setInterval(()=>{this.getConfig(!0)},e)}after(){const e=super.after();return this.apiUpdatesManager.addMultipleEventsListeners({updateConfig:()=>{this.getConfig(!0),this.getAppConfig(!0)}}),this.rootScope.addEventListener("user_auth",()=>{this.config&&this.apiUpdatesManager.processLocalUpdate({_:"updateConfig"})}),this.rootScope.addEventListener("premium_toggle",t=>{this.iterateNetworkers(({networker:r,connectionType:s,dcId:a,transportType:n})=>{if(s==="client"||n!=="websocket")return;const o=r.transport;if(!o){this.log.error("wow what, no transport?",r);return}if(o.connection){const p=constructTelegramWebSocketUrl(a,s,t);o.changeUrl(p)}})}),e}getTransportType(e){let t;return t=this.transportType,t}iterateNetworkers(e){for(const t in this.cachedNetworkers){const r=this.cachedNetworkers[t];for(const s in r){const a=r[s];for(const n in a)a[n].forEach((p,c,f)=>{e({networker:p,dcId:+n,connectionType:s,transportType:t,index:c,array:f})})}}}chooseServer(e,t,r){return this.dcConfigurator.chooseServer(e,t,r,t==="client",this.rootScope.premium)}changeTransportType(e){const t=this.transportType;if(t===e)return;this.log("changing transport from",t,"to",e);const r=this.cachedNetworkers[t],s=this.cachedNetworkers[e];this.cachedNetworkers[e]=r,this.cachedNetworkers[t]=s,this.transportType=e;for(const a in this.gettingNetworkers){const n=this.gettingNetworkers[a];delete this.gettingNetworkers[a];const o=a.replace(t,e);this.gettingNetworkers[o]=n,this.log("changed networker getKey from",a,"to",o)}this.iterateNetworkers(a=>{const n=this.getTransportType(a.connectionType),o=this.chooseServer(a.dcId,a.connectionType,n);this.changeNetworkerTransport(a.networker,o)})}async getBaseDcId(){if(this.baseDcId)return this.baseDcId;const e=await sessionStorage.get("dc");return this.baseDcId||(e?this.baseDcId=e:this.setBaseDcId(App.baseDcId)),this.baseDcId}async setUserAuth(e){if((typeof e=="string"||typeof e=="number")&&(e={dcID:0,date:tsNow(!0),id:e.toPeerId(!1)}),this.rootScope.dispatchEvent("user_auth",e),!e.dcID){const t=await this.getBaseDcId();e.dcID=t}sessionStorage.set({user_auth:e})}setBaseDcId(e){const t=this.baseDcId;t&&this.getNetworker(t).then(r=>{this.setOnDrainIfNeeded(r)}),this.baseDcId=e,sessionStorage.set({dc:this.baseDcId})}async logOut(){if(this.loggingOut)return;this.loggingOut=!0;const e=[],t="dc";for(let n=1;n<=5;n++)e.push(t+n+"_auth_key");const r=await Promise.all(e.map(n=>sessionStorage.get(n))),s=[];for(let n=0;n<r.length;n++)r[n]&&s.push(this.invokeApi("auth.logOut",{},{dcId:n+1,ignoreErrors:!0}));const a=async()=>{this.baseDcId=void 0,await toggleStorages(!1,!0),IDB.closeDatabases(),this.rootScope.dispatchEvent("logging_out")};return setTimeout(a,1e3),Promise.all(s).catch(n=>{n.handled=!0}).finally(a)}generateNetworkerGetKey(e,t,r){return[e,t,r].join("-")}getNetworker(e,t={}){const r=t.fileDownload?"download":t.fileUpload?"upload":"client",s=this.getTransportType(r);this.cachedNetworkers[s]||(this.cachedNetworkers[s]={client:{},download:{},upload:{}});const a=this.cachedNetworkers[s][r];e in a||(a[e]=[]);const n=a[e],o=r==="client"||s==="https"?1:this.rootScope.premium?PREMIUM_FILE_NETWORKERS_COUNT:REGULAR_FILE_NETWORKERS_COUNT;if(n.length>=o){let u=n[0];if(o>1){let g=1/0,y,b;for(let I=o-1;I>=0;--I){const S=n[I],{activeRequests:A,isOnline:k}=S;A<g&&k&&(g=g,y=S,b=I)}y?u=y:b=o-1,b&&n.unshift(u=n.splice(b,1)[0])}return Promise.resolve(u)}let p=this.generateNetworkerGetKey(e,s,r);if(this.gettingNetworkers[p])return this.gettingNetworkers[p];const c=`dc${e}_auth_key`,f=`dc${e}_server_salt`;let l=this.chooseServer(e,r,s);return this.gettingNetworkers[p]=Promise.all([c,f].map(u=>sessionStorage.get(u))).then(async([u,g])=>{let y,b;if(u?.length===512){g?.length!==16&&(g="AAAAAAAAAAAAAAAA");const S=bytesFromHex(u),A=(await cryptoMessagePort.invokeCrypto("sha1",S)).slice(-8),k=bytesFromHex(g);y=this.networkerFactory.getNetworker(e,S,A,k,t)}else try{const S=await this.authorizer.auth(e);u=bytesToHex(S.authKey),g=bytesToHex(S.serverSalt),e===App.baseDcId&&sessionStorage.set({auth_key_fingerprint:u.slice(0,8)}),sessionStorage.set({[c]:u,[f]:g}),y=this.networkerFactory.getNetworker(e,S.authKey,S.authKeyId,S.serverSalt,t)}catch(S){b=S}const I=this.getTransportType(r);if(I!==s&&(p=this.generateNetworkerGetKey(e,I,r),l.destroy(),DcConfigurator.removeTransport(this.dcConfigurator.chosenServers,l),y&&(l=this.chooseServer(e,r,I)),this.log("transport has been changed during authorization from",s,"to",I)),delete this.gettingNetworkers[p],b)throw this.log("get networker error",b,b.stack),b;return this.changeNetworkerTransport(y,l),n.unshift(y),this.setOnDrainIfNeeded(y),y})}getNetworkerVoid(e){return this.getNetworker(e).then(noop$2,noop$2)}changeNetworkerTransport(e,t){const r=e.transport;r&&DcConfigurator.removeTransport(this.dcConfigurator.chosenServers,r),e.changeTransport(t)}onNetworkerDrain(e){this.log("networker drain",e.dcId),e.onDrain=void 0,this.changeNetworkerTransport(e),e.destroy(),this.networkerFactory.removeNetworker(e),DcConfigurator.removeTransport(this.cachedNetworkers,e)}setOnDrainIfNeeded(e){if(e.onDrain)return;(e.isFileNetworker?Promise.resolve(!0):this.getBaseDcId().then(r=>e.dcId!==r)).then(r=>{e.onDrain||r&&(e.onDrain=()=>this.onNetworkerDrain(e),e.setDrainTimeout())})}setUpdatesProcessor(e){this.updatesProcessor=e,this.networkerFactory.setUpdatesProcessor(e)}invokeApi(e,t={},r={}){const s=deferredPromise();let{afterMessageId:a,prepareTempMessageId:n}=r;if(n&&s.then(()=>{delete this.afterMessageTempIds[n]}),MOUNT_CLASS_TO){const u=Date.now(),g=ctx.setInterval(()=>{(!c||!c.isStopped())&&this.log.error("Request is still processing:",e,t,r,"time:",(Date.now()-u)/1e3)},5e3);s.catch(noop$2).finally(()=>{clearInterval(g)})}const o=async u=>{throw u?isObject(u)||(u={message:u}):u={type:"ERROR_EMPTY"},(u.code===401&&u.type==="SESSION_REVOKED"||u.code===406&&u.type==="AUTH_KEY_DUPLICATED")&&this.logOut(),r.ignoreErrors||(u.code===406&&(u.handled=!0),r.noErrorBox||(u.input=e,setTimeout(()=>{u.handled||(u.code===401&&this.logOut(),u.handled=!0)},100))),u};let p,c;const f=()=>{if(a){const g=this.afterMessageTempIds[a];g&&(r.afterMessageId=g.messageId)}const u=c.wrapApiCall(e,t,r);return n&&(this.afterMessageTempIds[n]={messageId:r.messageId,promise:s}),u.catch(g=>{if(g.type!=="FILE_REFERENCE_EXPIRED"&&this.log.error("Error",g.code,g.type,this.baseDcId,p,e,t),g.code===401&&this.baseDcId===p)throw g.type!=="SESSION_PASSWORD_NEEDED"&&(sessionStorage.delete("dc"),sessionStorage.delete("user_auth")),g;if(g.code===401&&this.baseDcId&&p!==this.baseDcId){if(this.cachedExportPromise[p]===void 0){const y=new Promise((b,I)=>{this.invokeApi("auth.exportAuthorization",{dc_id:p},{noErrorBox:!0}).then(S=>{this.invokeApi("auth.importAuthorization",{id:S.id,bytes:S.bytes},{dcId:p,noErrorBox:!0}).then(b,I)},I)});this.cachedExportPromise[p]=y}return this.cachedExportPromise[p].then(()=>f())}else if(g.code===303){const y=+g.type.match(/^(PHONE_MIGRATE_|NETWORK_MIGRATE_|USER_MIGRATE_|STATS_MIGRATE_)(\d+)/)[2];if(y!==p)return r.dcId?r.dcId=y:this.setBaseDcId(y),this.invokeApi(e,t,r)}else if(g.code===400&&g.type.indexOf("FILE_MIGRATE")===0){const y=+g.type.match(/^(FILE_MIGRATE_)(\d+)/)[2];if(y!==p)return r.dcId=y,this.invokeApi(e,t,r);throw g}else{if(g.code===400&&g.type==="CONNECTION_NOT_INITED")return this.networkerFactory.unsetConnectionInited(),f();if(!r.rawError&&g.code===420&&!g.type.includes("SLOWMODE_WAIT")){const y=+g.type.match(/^FLOOD_WAIT_(\d+)/)[1]||1;if(y>(r.floodMaxTimeout??60)&&!r.prepareTempMessageId)throw g;return pause(y*1e3).then(()=>f())}else if(!r.rawError&&["MSG_WAIT_FAILED","MSG_WAIT_TIMEOUT"].includes(g.type)){const y=this.afterMessageTempIds[a];return a=void 0,delete r.afterMessageId,y?y.promise.then(()=>f()):f()}else if(!r.rawError&&g.code===500){const y=Date.now();if(r.stopTime&&y>=r.stopTime)throw g;return r.waitTime=r.waitTime?Math.min(60,r.waitTime*1.5):1,pause(r.waitTime*1e3).then(()=>f())}else{if(g.type==="UNKNOWN"||g.type==="MTPROTO_CLUSTER_INVALID")return pause(1e3).then(()=>f());throw g}}})};let l;return(p=r.dcId||this.baseDcId)?l=this.getNetworker(p,r):l=this.getBaseDcId().then(u=>this.getNetworker(p=u,r)),l.then(u=>{c=u;const g=f();return c.attachPromise(s,r),g}).then(s.resolve.bind(s)).catch(o).catch(s.reject.bind(s)),s}}class PeersStorage{constructor(){this.neededPeers=new Map,this.singlePeerMap=new Map,this._constructor(!1)}after(){this.rootScope.addEventListener("user_auth",()=>{this.requestPeer(this.appPeersManager.peerId,"self")})}requestPeer(e,t){let r=this.neededPeers.get(e);r&&r.has(t)||(r||(r=new Set,this.neededPeers.set(e,r)),r.add(t),this.dispatchEvent("peerNeeded",e))}releasePeer(e,t){const r=this.neededPeers.get(e);r&&(r.delete(t),r.size||(this.neededPeers.delete(e),this.dispatchEvent("peerUnneeded",e)))}requestPeersForKey(e,t){Array.isArray(e)&&(e=new Set(e));let r=this.singlePeerMap.get(t);if(r){for(const s of r)e.has(s)||(this.releasePeer(s,t),r.delete(s));if(!r.size&&!e.size){this.singlePeerMap.delete(t);return}}if(e.size){r||(r=new Set,this.singlePeerMap.set(t,r));for(const s of e)r.has(s)||(this.requestPeer(s,t),r.add(s))}}isPeerNeeded(e){return this.neededPeers.has(e)}}applyMixins(PeersStorage,[EventListenerBase,AppManager]);function generateEmptyThumb(d){return{downloaded:0,url:"",type:d}}function getStickerThumbKey(d,e){return d+(e!==void 0?"-"+e:"")}function getThumbKey(d){return isWebFileLocation(d)?getFileNameByLocation(d):d._+(d.id??d.url)}const thumbFullSize=THUMB_TYPE_FULL;class ThumbsStorage{constructor(){this.thumbsCache={},this.stickerCachedThumbs={}}getCacheContext(e,t=thumbFullSize,r=getThumbKey(e)){var a;const s=(a=this.thumbsCache)[r]??(a[r]={});return s[t]??(s[t]=generateEmptyThumb(t))}mirrorCacheContext(e,t,r){MTProtoMessagePort.getInstance().invokeVoid("mirror",{name:"thumbs",key:joinDeepPath(e,t),value:r})}mirrorStickerThumb(e,t){MTProtoMessagePort.getInstance().invokeVoid("mirror",{name:"stickerThumbs",key:e,value:t})}mirrorAll(e){const t=MTProtoMessagePort.getInstance();t.invokeVoid("mirror",{name:"thumbs",value:this.thumbsCache},e),t.invokeVoid("mirror",{name:"stickerThumbs",value:this.stickerCachedThumbs},e)}setCacheContextURL(e,t=thumbFullSize,r,s=0,a=getThumbKey(e)){const n=this.getCacheContext(e,t,a);return n.url=r,n.downloaded=s,this.mirrorCacheContext(a,t,n),n}deleteCacheContext(e,t=thumbFullSize,r=getThumbKey(e)){const s=this.thumbsCache[r];s&&(this.mirrorCacheContext(r,t),delete s[t])}getStickerCachedThumb(e,t){return this.stickerCachedThumbs[getStickerThumbKey(e,t)]}saveStickerPreview(e,t,r,s,a){const n=getStickerThumbKey(e,a),o=this.stickerCachedThumbs[n];if(o&&o.w>=r&&o.h>=s)return;const p=this.stickerCachedThumbs[n]={url:URL.createObjectURL(t),w:r,h:s};this.mirrorStickerThumb(n,p)}clearColoredStickerThumbs(){for(const e in this.stickerCachedThumbs){const[,t]=e.split("-");if(t&&isNaN(+t)){const r=this.stickerCachedThumbs[e];URL.revokeObjectURL(r.url),delete this.stickerCachedThumbs[e],this.mirrorStickerThumb(e)}}}}var Schema={MTProto:{constructors:[{id:481674261,predicate:"vector",params:[],type:"Vector t"},{id:85337187,predicate:"resPQ",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"pq",type:"bytes"},{name:"server_public_key_fingerprints",type:"Vector<long>"}],type:"ResPQ"},{id:-1443537003,predicate:"p_q_inner_data_dc",params:[{name:"pq",type:"bytes"},{name:"p",type:"bytes"},{name:"q",type:"bytes"},{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce",type:"int256"},{name:"dc",type:"int"}],type:"P_Q_inner_data"},{id:1459478408,predicate:"p_q_inner_data_temp_dc",params:[{name:"pq",type:"bytes"},{name:"p",type:"bytes"},{name:"q",type:"bytes"},{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce",type:"int256"},{name:"dc",type:"int"},{name:"expires_in",type:"int"}],type:"P_Q_inner_data"},{id:-790100132,predicate:"server_DH_params_ok",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"encrypted_answer",type:"bytes"}],type:"Server_DH_Params"},{id:-1249309254,predicate:"server_DH_inner_data",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"g",type:"int"},{name:"dh_prime",type:"bytes"},{name:"g_a",type:"bytes"},{name:"server_time",type:"int"}],type:"Server_DH_inner_data"},{id:1715713620,predicate:"client_DH_inner_data",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"retry_id",type:"long"},{name:"g_b",type:"bytes"}],type:"Client_DH_Inner_Data"},{id:1003222836,predicate:"dh_gen_ok",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce_hash1",type:"int128"}],type:"Set_client_DH_params_answer"},{id:1188831161,predicate:"dh_gen_retry",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce_hash2",type:"int128"}],type:"Set_client_DH_params_answer"},{id:-1499615742,predicate:"dh_gen_fail",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce_hash3",type:"int128"}],type:"Set_client_DH_params_answer"},{id:1973679973,predicate:"bind_auth_key_inner",params:[{name:"nonce",type:"long"},{name:"temp_auth_key_id",type:"long"},{name:"perm_auth_key_id",type:"long"},{name:"temp_session_id",type:"long"},{name:"expires_at",type:"int"}],type:"BindAuthKeyInner"},{id:-212046591,predicate:"rpc_result",params:[{name:"req_msg_id",type:"long"},{name:"result",type:"Object"}],type:"RpcResult"},{id:558156313,predicate:"rpc_error",params:[{name:"error_code",type:"int"},{name:"error_message",type:"string"}],type:"RpcError"},{id:1579864942,predicate:"rpc_answer_unknown",params:[],type:"RpcDropAnswer"},{id:-847714938,predicate:"rpc_answer_dropped_running",params:[],type:"RpcDropAnswer"},{id:-1539647305,predicate:"rpc_answer_dropped",params:[{name:"msg_id",type:"long"},{name:"seq_no",type:"int"},{name:"bytes",type:"int"}],type:"RpcDropAnswer"},{id:155834844,predicate:"future_salt",params:[{name:"valid_since",type:"int"},{name:"valid_until",type:"int"},{name:"salt",type:"long"}],type:"FutureSalt"},{id:-1370486635,predicate:"future_salts",params:[{name:"req_msg_id",type:"long"},{name:"now",type:"int"},{name:"salts",type:"vector<future_salt>"}],type:"FutureSalts"},{id:880243653,predicate:"pong",params:[{name:"msg_id",type:"long"},{name:"ping_id",type:"long"}],type:"Pong"},{id:-501201412,predicate:"destroy_session_ok",params:[{name:"session_id",type:"long"}],type:"DestroySessionRes"},{id:1658015945,predicate:"destroy_session_none",params:[{name:"session_id",type:"long"}],type:"DestroySessionRes"},{id:-1631450872,predicate:"new_session_created",params:[{name:"first_msg_id",type:"long"},{name:"unique_id",type:"long"},{name:"server_salt",type:"long"}],type:"NewSession"},{id:1945237724,predicate:"msg_container",params:[{name:"messages",type:"vector<%Message>"}],type:"MessageContainer"},{id:1538843921,predicate:"message",params:[{name:"msg_id",type:"long"},{name:"seqno",type:"int"},{name:"bytes",type:"int"},{name:"body",type:"Object"}],type:"Message"},{id:-530561358,predicate:"msg_copy",params:[{name:"orig_message",type:"Message"}],type:"MessageCopy"},{id:812830625,predicate:"gzip_packed",params:[{name:"packed_data",type:"bytes"}],type:"Object"},{id:1658238041,predicate:"msgs_ack",params:[{name:"msg_ids",type:"Vector<long>"}],type:"MsgsAck"},{id:-1477445615,predicate:"bad_msg_notification",params:[{name:"bad_msg_id",type:"long"},{name:"bad_msg_seqno",type:"int"},{name:"error_code",type:"int"}],type:"BadMsgNotification"},{id:-307542917,predicate:"bad_server_salt",params:[{name:"bad_msg_id",type:"long"},{name:"bad_msg_seqno",type:"int"},{name:"error_code",type:"int"},{name:"new_server_salt",type:"long"}],type:"BadMsgNotification"},{id:2105940488,predicate:"msg_resend_req",params:[{name:"msg_ids",type:"Vector<long>"}],type:"MsgResendReq"},{id:-630588590,predicate:"msgs_state_req",params:[{name:"msg_ids",type:"Vector<long>"}],type:"MsgsStateReq"},{id:81704317,predicate:"msgs_state_info",params:[{name:"req_msg_id",type:"long"},{name:"info",type:"bytes"}],type:"MsgsStateInfo"},{id:-1933520591,predicate:"msgs_all_info",params:[{name:"msg_ids",type:"Vector<long>"},{name:"info",type:"bytes"}],type:"MsgsAllInfo"},{id:661470918,predicate:"msg_detailed_info",params:[{name:"msg_id",type:"long"},{name:"answer_msg_id",type:"long"},{name:"bytes",type:"int"},{name:"status",type:"int"}],type:"MsgDetailedInfo"},{id:-2137147681,predicate:"msg_new_detailed_info",params:[{name:"answer_msg_id",type:"long"},{name:"bytes",type:"int"},{name:"status",type:"int"}],type:"MsgDetailedInfo"},{id:-161422892,predicate:"destroy_auth_key_ok",params:[],type:"DestroyAuthKeyRes"},{id:178201177,predicate:"destroy_auth_key_none",params:[],type:"DestroyAuthKeyRes"},{id:-368010477,predicate:"destroy_auth_key_fail",params:[],type:"DestroyAuthKeyRes"}],methods:[{id:-1099002127,method:"req_pq_multi",params:[{name:"nonce",type:"int128"}],type:"ResPQ"},{id:-686627650,method:"req_DH_params",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"p",type:"bytes"},{name:"q",type:"bytes"},{name:"public_key_fingerprint",type:"long"},{name:"encrypted_data",type:"bytes"}],type:"Server_DH_Params"},{id:-184262881,method:"set_client_DH_params",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"encrypted_data",type:"bytes"}],type:"Set_client_DH_params_answer"},{id:1491380032,method:"rpc_drop_answer",params:[{name:"req_msg_id",type:"long"}],type:"RpcDropAnswer"},{id:-1188971260,method:"get_future_salts",params:[{name:"num",type:"int"}],type:"FutureSalts"},{id:2059302892,method:"ping",params:[{name:"ping_id",type:"long"}],type:"Pong"},{id:-213746804,method:"ping_delay_disconnect",params:[{name:"ping_id",type:"long"},{name:"disconnect_delay",type:"int"}],type:"Pong"},{id:-414113498,method:"destroy_session",params:[{name:"session_id",type:"long"}],type:"DestroySessionRes"},{id:-1835453025,method:"http_wait",params:[{name:"max_delay",type:"int"},{name:"wait_after",type:"int"},{name:"max_wait",type:"int"}],type:"HttpWait"},{id:-784117408,method:"destroy_auth_key",params:[],type:"DestroyAuthKeyRes"}]},API:{constructors:[{id:-1132882121,predicate:"boolFalse",params:[],type:"Bool"},{id:-1720552011,predicate:"boolTrue",params:[],type:"Bool"},{id:1072550713,predicate:"true",params:[],type:"True"},{id:481674261,predicate:"vector",params:[],type:"Vector t"},{id:-994444869,predicate:"error",params:[{name:"code",type:"int"},{name:"text",type:"string"}],type:"Error"},{id:1450380236,predicate:"null",params:[],type:"Null"},{id:2134579434,predicate:"inputPeerEmpty",params:[],type:"InputPeer"},{id:2107670217,predicate:"inputPeerSelf",params:[],type:"InputPeer"},{id:900291769,predicate:"inputPeerChat",params:[{name:"chat_id",type:"long"}],type:"InputPeer"},{id:-1182234929,predicate:"inputUserEmpty",params:[],type:"InputUser"},{id:-138301121,predicate:"inputUserSelf",params:[],type:"InputUser"},{id:-208488460,predicate:"inputPhoneContact",params:[{name:"client_id",type:"long"},{name:"phone",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"}],type:"InputContact"},{id:-181407105,predicate:"inputFile",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"name",type:"string"},{name:"md5_checksum",type:"string"}],type:"InputFile"},{id:-1771768449,predicate:"inputMediaEmpty",params:[],type:"InputMedia"},{id:505969924,predicate:"inputMediaUploadedPhoto",params:[{name:"flags",type:"#"},{name:"spoiler",type:"flags.2?true"},{name:"file",type:"InputFile"},{name:"stickers",type:"flags.0?Vector<InputDocument>"},{name:"ttl_seconds",type:"flags.1?int"}],type:"InputMedia"},{id:-1279654347,predicate:"inputMediaPhoto",params:[{name:"flags",type:"#"},{name:"spoiler",type:"flags.1?true"},{name:"id",type:"InputPhoto"},{name:"ttl_seconds",type:"flags.0?int"}],type:"InputMedia"},{id:-104578748,predicate:"inputMediaGeoPoint",params:[{name:"geo_point",type:"InputGeoPoint"}],type:"InputMedia"},{id:-122978821,predicate:"inputMediaContact",params:[{name:"phone_number",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"vcard",type:"string"}],type:"InputMedia"},{id:480546647,predicate:"inputChatPhotoEmpty",params:[],type:"InputChatPhoto"},{id:-1110593856,predicate:"inputChatUploadedPhoto",params:[{name:"flags",type:"#"},{name:"file",type:"flags.0?InputFile"},{name:"video",type:"flags.1?InputFile"},{name:"video_start_ts",type:"flags.2?double"},{name:"video_emoji_markup",type:"flags.3?VideoSize"}],type:"InputChatPhoto"},{id:-1991004873,predicate:"inputChatPhoto",params:[{name:"id",type:"InputPhoto"}],type:"InputChatPhoto"},{id:-457104426,predicate:"inputGeoPointEmpty",params:[],type:"InputGeoPoint"},{id:1210199983,predicate:"inputGeoPoint",params:[{name:"flags",type:"#"},{name:"lat",type:"double"},{name:"long",type:"double"},{name:"accuracy_radius",type:"flags.0?int"}],type:"InputGeoPoint"},{id:483901197,predicate:"inputPhotoEmpty",params:[],type:"InputPhoto"},{id:1001634122,predicate:"inputPhoto",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"}],type:"InputPhoto"},{id:-539317279,predicate:"inputFileLocation",params:[{name:"volume_id",type:"long"},{name:"local_id",type:"int"},{name:"secret",type:"long"},{name:"file_reference",type:"bytes"}],type:"InputFileLocation"},{id:1498486562,predicate:"peerUser",params:[{name:"user_id",type:"long"}],type:"Peer"},{id:918946202,predicate:"peerChat",params:[{name:"chat_id",type:"long"}],type:"Peer"},{id:-1432995067,predicate:"storage.fileUnknown",params:[],type:"storage.FileType"},{id:1086091090,predicate:"storage.filePartial",params:[],type:"storage.FileType"},{id:8322574,predicate:"storage.fileJpeg",params:[],type:"storage.FileType"},{id:-891180321,predicate:"storage.fileGif",params:[],type:"storage.FileType"},{id:172975040,predicate:"storage.filePng",params:[],type:"storage.FileType"},{id:-1373745011,predicate:"storage.filePdf",params:[],type:"storage.FileType"},{id:1384777335,predicate:"storage.fileMp3",params:[],type:"storage.FileType"},{id:1258941372,predicate:"storage.fileMov",params:[],type:"storage.FileType"},{id:-1278304028,predicate:"storage.fileMp4",params:[],type:"storage.FileType"},{id:276907596,predicate:"storage.fileWebp",params:[],type:"storage.FileType"},{id:-742634630,predicate:"userEmpty",params:[{name:"id",type:"long"}],type:"User"},{id:1326562017,predicate:"userProfilePhotoEmpty",params:[],type:"UserProfilePhoto"},{id:-2100168954,predicate:"userProfilePhoto",params:[{name:"flags",type:"#"},{name:"has_video",type:"flags.0?true"},{name:"personal",type:"flags.2?true"},{name:"photo_id",type:"long"},{name:"stripped_thumb",type:"flags.1?bytes"},{name:"dc_id",type:"int"}],type:"UserProfilePhoto"},{id:164646985,predicate:"userStatusEmpty",params:[],type:"UserStatus"},{id:-306628279,predicate:"userStatusOnline",params:[{name:"expires",type:"int"}],type:"UserStatus"},{id:9203775,predicate:"userStatusOffline",params:[{name:"was_online",type:"int"}],type:"UserStatus"},{id:693512293,predicate:"chatEmpty",params:[{name:"id",type:"long"}],type:"Chat"},{id:1103884886,predicate:"chat",params:[{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"left",type:"flags.2?true"},{name:"deactivated",type:"flags.5?true"},{name:"call_active",type:"flags.23?true"},{name:"call_not_empty",type:"flags.24?true"},{name:"noforwards",type:"flags.25?true"},{name:"id",type:"long"},{name:"title",type:"string"},{name:"photo",type:"ChatPhoto"},{name:"participants_count",type:"int"},{name:"date",type:"int"},{name:"version",type:"int"},{name:"migrated_to",type:"flags.6?InputChannel"},{name:"admin_rights",type:"flags.14?ChatAdminRights"},{name:"default_banned_rights",type:"flags.18?ChatBannedRights"}],type:"Chat"},{id:1704108455,predicate:"chatForbidden",params:[{name:"id",type:"long"},{name:"title",type:"string"}],type:"Chat"},{id:-908914376,predicate:"chatFull",params:[{name:"flags",type:"#"},{name:"can_set_username",type:"flags.7?true"},{name:"has_scheduled",type:"flags.8?true"},{name:"translations_disabled",type:"flags.19?true"},{name:"id",type:"long"},{name:"about",type:"string"},{name:"participants",type:"ChatParticipants"},{name:"chat_photo",type:"flags.2?Photo"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"exported_invite",type:"flags.13?ExportedChatInvite"},{name:"bot_info",type:"flags.3?Vector<BotInfo>"},{name:"pinned_msg_id",type:"flags.6?int"},{name:"folder_id",type:"flags.11?int"},{name:"call",type:"flags.12?InputGroupCall"},{name:"ttl_period",type:"flags.14?int"},{name:"groupcall_default_join_as",type:"flags.15?Peer"},{name:"theme_emoticon",type:"flags.16?string"},{name:"requests_pending",type:"flags.17?int"},{name:"recent_requesters",type:"flags.17?Vector<long>"},{name:"available_reactions",type:"flags.18?ChatReactions"}],type:"ChatFull"},{id:-1070776313,predicate:"chatParticipant",params:[{name:"user_id",type:"long"},{name:"inviter_id",type:"long"},{name:"date",type:"int"}],type:"ChatParticipant"},{id:-2023500831,predicate:"chatParticipantsForbidden",params:[{name:"flags",type:"#"},{name:"chat_id",type:"long"},{name:"self_participant",type:"flags.0?ChatParticipant"}],type:"ChatParticipants"},{id:1018991608,predicate:"chatParticipants",params:[{name:"chat_id",type:"long"},{name:"participants",type:"Vector<ChatParticipant>"},{name:"version",type:"int"}],type:"ChatParticipants"},{id:935395612,predicate:"chatPhotoEmpty",params:[],type:"ChatPhoto"},{id:476978193,predicate:"chatPhoto",params:[{name:"flags",type:"#"},{name:"has_video",type:"flags.0?true"},{name:"photo_id",type:"long"},{name:"stripped_thumb",type:"flags.1?bytes"},{name:"dc_id",type:"int"}],type:"ChatPhoto"},{id:-1868117372,predicate:"messageEmpty",params:[{name:"flags",type:"#"},{name:"id",type:"int"},{name:"peer_id",type:"flags.0?Peer"}],type:"Message"},{id:592953125,predicate:"message",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"mentioned",type:"flags.4?true"},{name:"media_unread",type:"flags.5?true"},{name:"silent",type:"flags.13?true"},{name:"post",type:"flags.14?true"},{name:"from_scheduled",type:"flags.18?true"},{name:"legacy",type:"flags.19?true"},{name:"edit_hide",type:"flags.21?true"},{name:"pinned",type:"flags.24?true"},{name:"noforwards",type:"flags.26?true"},{name:"invert_media",type:"flags.27?true"},{name:"flags2",type:"#"},{name:"offline",type:"flags2.1?true"},{name:"id",type:"int"},{name:"from_id",type:"flags.8?Peer"},{name:"from_boosts_applied",type:"flags.29?int"},{name:"peer_id",type:"Peer"},{name:"saved_peer_id",type:"flags.28?Peer"},{name:"fwd_from",type:"flags.2?MessageFwdHeader"},{name:"via_bot_id",type:"flags.11?long"},{name:"via_business_bot_id",type:"flags2.0?long"},{name:"reply_to",type:"flags.3?MessageReplyHeader"},{name:"date",type:"int"},{name:"message",type:"string"},{name:"media",type:"flags.9?MessageMedia"},{name:"reply_markup",type:"flags.6?ReplyMarkup"},{name:"entities",type:"flags.7?Vector<MessageEntity>"},{name:"views",type:"flags.10?int"},{name:"forwards",type:"flags.10?int"},{name:"replies",type:"flags.23?MessageReplies"},{name:"edit_date",type:"flags.15?int"},{name:"post_author",type:"flags.16?string"},{name:"grouped_id",type:"flags.17?long"},{name:"reactions",type:"flags.20?MessageReactions"},{name:"restriction_reason",type:"flags.22?Vector<RestrictionReason>"},{name:"ttl_period",type:"flags.25?int"},{name:"quick_reply_shortcut_id",type:"flags.30?int"}],type:"Message"},{id:721967202,predicate:"messageService",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"mentioned",type:"flags.4?true"},{name:"media_unread",type:"flags.5?true"},{name:"silent",type:"flags.13?true"},{name:"post",type:"flags.14?true"},{name:"legacy",type:"flags.19?true"},{name:"id",type:"int"},{name:"from_id",type:"flags.8?Peer"},{name:"peer_id",type:"Peer"},{name:"reply_to",type:"flags.3?MessageReplyHeader"},{name:"date",type:"int"},{name:"action",type:"MessageAction"},{name:"ttl_period",type:"flags.25?int"}],type:"Message"},{id:1038967584,predicate:"messageMediaEmpty",params:[],type:"MessageMedia"},{id:1766936791,predicate:"messageMediaPhoto",params:[{name:"flags",type:"#"},{name:"spoiler",type:"flags.3?true"},{name:"photo",type:"flags.0?Photo"},{name:"ttl_seconds",type:"flags.2?int"}],type:"MessageMedia"},{id:1457575028,predicate:"messageMediaGeo",params:[{name:"geo",type:"GeoPoint"}],type:"MessageMedia"},{id:1882335561,predicate:"messageMediaContact",params:[{name:"phone_number",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"vcard",type:"string"},{name:"user_id",type:"long"}],type:"MessageMedia"},{id:-1618676578,predicate:"messageMediaUnsupported",params:[],type:"MessageMedia"},{id:-1230047312,predicate:"messageActionEmpty",params:[],type:"MessageAction"},{id:-1119368275,predicate:"messageActionChatCreate",params:[{name:"title",type:"string"},{name:"users",type:"Vector<long>"}],type:"MessageAction"},{id:-1247687078,predicate:"messageActionChatEditTitle",params:[{name:"title",type:"string"}],type:"MessageAction"},{id:2144015272,predicate:"messageActionChatEditPhoto",params:[{name:"photo",type:"Photo"}],type:"MessageAction"},{id:-1780220945,predicate:"messageActionChatDeletePhoto",params:[],type:"MessageAction"},{id:365886720,predicate:"messageActionChatAddUser",params:[{name:"users",type:"Vector<long>"}],type:"MessageAction"},{id:-1539362612,predicate:"messageActionChatDeleteUser",params:[{name:"user_id",type:"long"}],type:"MessageAction"},{id:-712374074,predicate:"dialog",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.2?true"},{name:"unread_mark",type:"flags.3?true"},{name:"view_forum_as_messages",type:"flags.6?true"},{name:"peer",type:"Peer"},{name:"top_message",type:"int"},{name:"read_inbox_max_id",type:"int"},{name:"read_outbox_max_id",type:"int"},{name:"unread_count",type:"int"},{name:"unread_mentions_count",type:"int"},{name:"unread_reactions_count",type:"int"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"pts",type:"flags.0?int"},{name:"draft",type:"flags.1?DraftMessage"},{name:"folder_id",type:"flags.4?int"},{name:"ttl_period",type:"flags.5?int"}],type:"Dialog"},{id:590459437,predicate:"photoEmpty",params:[{name:"id",type:"long"}],type:"Photo"},{id:-82216347,predicate:"photo",params:[{name:"flags",type:"#"},{name:"has_stickers",type:"flags.0?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"date",type:"int"},{name:"sizes",type:"Vector<PhotoSize>"},{name:"video_sizes",type:"flags.1?Vector<VideoSize>"},{name:"dc_id",type:"int"}],type:"Photo"},{id:236446268,predicate:"photoSizeEmpty",params:[{name:"type",type:"string"}],type:"PhotoSize"},{id:1976012384,predicate:"photoSize",params:[{name:"type",type:"string"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"size",type:"int"}],type:"PhotoSize"},{id:35527382,predicate:"photoCachedSize",params:[{name:"type",type:"string"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"bytes",type:"bytes"}],type:"PhotoSize"},{id:286776671,predicate:"geoPointEmpty",params:[],type:"GeoPoint"},{id:-1297942941,predicate:"geoPoint",params:[{name:"flags",type:"#"},{name:"long",type:"double"},{name:"lat",type:"double"},{name:"access_hash",type:"long"},{name:"accuracy_radius",type:"flags.0?int"}],type:"GeoPoint"},{id:1577067778,predicate:"auth.sentCode",params:[{name:"flags",type:"#"},{name:"type",type:"auth.SentCodeType"},{name:"phone_code_hash",type:"string"},{name:"next_type",type:"flags.1?auth.CodeType"},{name:"timeout",type:"flags.2?int"}],type:"auth.SentCode"},{id:782418132,predicate:"auth.authorization",params:[{name:"flags",type:"#"},{name:"setup_password_required",type:"flags.1?true"},{name:"otherwise_relogin_days",type:"flags.1?int"},{name:"tmp_sessions",type:"flags.0?int"},{name:"future_auth_token",type:"flags.2?bytes"},{name:"user",type:"User"}],type:"auth.Authorization"},{id:-1271602504,predicate:"auth.exportedAuthorization",params:[{name:"id",type:"long"},{name:"bytes",type:"bytes"}],type:"auth.ExportedAuthorization"},{id:-1195615476,predicate:"inputNotifyPeer",params:[{name:"peer",type:"InputPeer"}],type:"InputNotifyPeer"},{id:423314455,predicate:"inputNotifyUsers",params:[],type:"InputNotifyPeer"},{id:1251338318,predicate:"inputNotifyChats",params:[],type:"InputNotifyPeer"},{id:-892638494,predicate:"inputPeerNotifySettings",params:[{name:"flags",type:"#"},{name:"show_previews",type:"flags.0?Bool"},{name:"silent",type:"flags.1?Bool"},{name:"mute_until",type:"flags.2?int"},{name:"sound",type:"flags.3?NotificationSound"},{name:"stories_muted",type:"flags.6?Bool"},{name:"stories_hide_sender",type:"flags.7?Bool"},{name:"stories_sound",type:"flags.8?NotificationSound"}],type:"InputPeerNotifySettings"},{id:-1721619444,predicate:"peerNotifySettings",params:[{name:"flags",type:"#"},{name:"show_previews",type:"flags.0?Bool"},{name:"silent",type:"flags.1?Bool"},{name:"mute_until",type:"flags.2?int"},{name:"ios_sound",type:"flags.3?NotificationSound"},{name:"android_sound",type:"flags.4?NotificationSound"},{name:"other_sound",type:"flags.5?NotificationSound"},{name:"stories_muted",type:"flags.6?Bool"},{name:"stories_hide_sender",type:"flags.7?Bool"},{name:"stories_ios_sound",type:"flags.8?NotificationSound"},{name:"stories_android_sound",type:"flags.9?NotificationSound"},{name:"stories_other_sound",type:"flags.10?NotificationSound"}],type:"PeerNotifySettings"},{id:-1395233698,predicate:"peerSettings",params:[{name:"flags",type:"#"},{name:"report_spam",type:"flags.0?true"},{name:"add_contact",type:"flags.1?true"},{name:"block_contact",type:"flags.2?true"},{name:"share_contact",type:"flags.3?true"},{name:"need_contacts_exception",type:"flags.4?true"},{name:"report_geo",type:"flags.5?true"},{name:"autoarchived",type:"flags.7?true"},{name:"invite_members",type:"flags.8?true"},{name:"request_chat_broadcast",type:"flags.10?true"},{name:"business_bot_paused",type:"flags.11?true"},{name:"business_bot_can_reply",type:"flags.12?true"},{name:"geo_distance",type:"flags.6?int"},{name:"request_chat_title",type:"flags.9?string"},{name:"request_chat_date",type:"flags.9?int"},{name:"business_bot_id",type:"flags.13?long"},{name:"business_bot_manage_url",type:"flags.13?string"}],type:"PeerSettings"},{id:-1539849235,predicate:"wallPaper",params:[{name:"id",type:"long"},{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"default",type:"flags.1?true"},{name:"pattern",type:"flags.3?true"},{name:"dark",type:"flags.4?true"},{name:"access_hash",type:"long"},{name:"slug",type:"string"},{name:"document",type:"Document"},{name:"settings",type:"flags.2?WallPaperSettings"}],type:"WallPaper"},{id:1490799288,predicate:"inputReportReasonSpam",params:[],type:"ReportReason"},{id:505595789,predicate:"inputReportReasonViolence",params:[],type:"ReportReason"},{id:777640226,predicate:"inputReportReasonPornography",params:[],type:"ReportReason"},{id:-1376497949,predicate:"inputReportReasonChildAbuse",params:[],type:"ReportReason"},{id:-1041980751,predicate:"inputReportReasonOther",params:[],type:"ReportReason"},{id:-862357728,predicate:"userFull",params:[{name:"flags",type:"#"},{name:"blocked",type:"flags.0?true"},{name:"phone_calls_available",type:"flags.4?true"},{name:"phone_calls_private",type:"flags.5?true"},{name:"can_pin_message",type:"flags.7?true"},{name:"has_scheduled",type:"flags.12?true"},{name:"video_calls_available",type:"flags.13?true"},{name:"voice_messages_forbidden",type:"flags.20?true"},{name:"translations_disabled",type:"flags.23?true"},{name:"stories_pinned_available",type:"flags.26?true"},{name:"blocked_my_stories_from",type:"flags.27?true"},{name:"wallpaper_overridden",type:"flags.28?true"},{name:"contact_require_premium",type:"flags.29?true"},{name:"read_dates_private",type:"flags.30?true"},{name:"flags2",type:"#"},{name:"id",type:"long"},{name:"about",type:"flags.1?string"},{name:"settings",type:"PeerSettings"},{name:"personal_photo",type:"flags.21?Photo"},{name:"profile_photo",type:"flags.2?Photo"},{name:"fallback_photo",type:"flags.22?Photo"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"bot_info",type:"flags.3?BotInfo"},{name:"pinned_msg_id",type:"flags.6?int"},{name:"common_chats_count",type:"int"},{name:"folder_id",type:"flags.11?int"},{name:"ttl_period",type:"flags.14?int"},{name:"theme_emoticon",type:"flags.15?string"},{name:"private_forward_name",type:"flags.16?string"},{name:"bot_group_admin_rights",type:"flags.17?ChatAdminRights"},{name:"bot_broadcast_admin_rights",type:"flags.18?ChatAdminRights"},{name:"premium_gifts",type:"flags.19?Vector<PremiumGiftOption>"},{name:"wallpaper",type:"flags.24?WallPaper"},{name:"stories",type:"flags.25?PeerStories"},{name:"business_work_hours",type:"flags2.0?BusinessWorkHours"},{name:"business_location",type:"flags2.1?BusinessLocation"},{name:"business_greeting_message",type:"flags2.2?BusinessGreetingMessage"},{name:"business_away_message",type:"flags2.3?BusinessAwayMessage"},{name:"business_intro",type:"flags2.4?BusinessIntro"},{name:"birthday",type:"flags2.5?Birthday"},{name:"personal_channel_id",type:"flags2.6?long"},{name:"personal_channel_message",type:"flags2.6?int"}],type:"UserFull"},{id:341499403,predicate:"contact",params:[{name:"user_id",type:"long"},{name:"mutual",type:"Bool"}],type:"Contact"},{id:-1052885936,predicate:"importedContact",params:[{name:"user_id",type:"long"},{name:"client_id",type:"long"}],type:"ImportedContact"},{id:383348795,predicate:"contactStatus",params:[{name:"user_id",type:"long"},{name:"status",type:"UserStatus"}],type:"ContactStatus"},{id:-1219778094,predicate:"contacts.contactsNotModified",params:[],type:"contacts.Contacts"},{id:-353862078,predicate:"contacts.contacts",params:[{name:"contacts",type:"Vector<Contact>"},{name:"saved_count",type:"int"},{name:"users",type:"Vector<User>"}],type:"contacts.Contacts"},{id:2010127419,predicate:"contacts.importedContacts",params:[{name:"imported",type:"Vector<ImportedContact>"},{name:"popular_invites",type:"Vector<PopularContact>"},{name:"retry_contacts",type:"Vector<long>"},{name:"users",type:"Vector<User>"}],type:"contacts.ImportedContacts"},{id:182326673,predicate:"contacts.blocked",params:[{name:"blocked",type:"Vector<PeerBlocked>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.Blocked"},{id:-513392236,predicate:"contacts.blockedSlice",params:[{name:"count",type:"int"},{name:"blocked",type:"Vector<PeerBlocked>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.Blocked"},{id:364538944,predicate:"messages.dialogs",params:[{name:"dialogs",type:"Vector<Dialog>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Dialogs"},{id:1910543603,predicate:"messages.dialogsSlice",params:[{name:"count",type:"int"},{name:"dialogs",type:"Vector<Dialog>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Dialogs"},{id:-1938715001,predicate:"messages.messages",params:[{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Messages"},{id:978610270,predicate:"messages.messagesSlice",params:[{name:"flags",type:"#"},{name:"inexact",type:"flags.1?true"},{name:"count",type:"int"},{name:"next_rate",type:"flags.0?int"},{name:"offset_id_offset",type:"flags.2?int"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Messages"},{id:1694474197,predicate:"messages.chats",params:[{name:"chats",type:"Vector<Chat>"}],type:"messages.Chats"},{id:-438840932,predicate:"messages.chatFull",params:[{name:"full_chat",type:"ChatFull"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.ChatFull"},{id:-1269012015,predicate:"messages.affectedHistory",params:[{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"offset",type:"int"}],type:"messages.AffectedHistory"},{id:1474492012,predicate:"inputMessagesFilterEmpty",params:[],type:"MessagesFilter"},{id:-1777752804,predicate:"inputMessagesFilterPhotos",params:[],type:"MessagesFilter"},{id:-1614803355,predicate:"inputMessagesFilterVideo",params:[],type:"MessagesFilter"},{id:1458172132,predicate:"inputMessagesFilterPhotoVideo",params:[],type:"MessagesFilter"},{id:-1629621880,predicate:"inputMessagesFilterDocument",params:[],type:"MessagesFilter"},{id:2129714567,predicate:"inputMessagesFilterUrl",params:[],type:"MessagesFilter"},{id:-3644025,predicate:"inputMessagesFilterGif",params:[],type:"MessagesFilter"},{id:522914557,predicate:"updateNewMessage",params:[{name:"message",type:"Message"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:1318109142,predicate:"updateMessageID",params:[{name:"id",type:"int"},{name:"random_id",type:"long"}],type:"Update"},{id:-1576161051,predicate:"updateDeleteMessages",params:[{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-1071741569,predicate:"updateUserTyping",params:[{name:"user_id",type:"long"},{name:"action",type:"SendMessageAction"}],type:"Update"},{id:-2092401936,predicate:"updateChatUserTyping",params:[{name:"chat_id",type:"long"},{name:"from_id",type:"Peer"},{name:"action",type:"SendMessageAction"}],type:"Update"},{id:125178264,predicate:"updateChatParticipants",params:[{name:"participants",type:"ChatParticipants"}],type:"Update"},{id:-440534818,predicate:"updateUserStatus",params:[{name:"user_id",type:"long"},{name:"status",type:"UserStatus"}],type:"Update"},{id:-1484486364,predicate:"updateUserName",params:[{name:"user_id",type:"long"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"usernames",type:"Vector<Username>"}],type:"Update"},{id:-1991136273,predicate:"updateNewAuthorization",params:[{name:"flags",type:"#"},{name:"unconfirmed",type:"flags.0?true"},{name:"hash",type:"long"},{name:"date",type:"flags.0?int"},{name:"device",type:"flags.0?string"},{name:"location",type:"flags.0?string"}],type:"Update"},{id:-1519637954,predicate:"updates.state",params:[{name:"pts",type:"int"},{name:"qts",type:"int"},{name:"date",type:"int"},{name:"seq",type:"int"},{name:"unread_count",type:"int"}],type:"updates.State"},{id:1567990072,predicate:"updates.differenceEmpty",params:[{name:"date",type:"int"},{name:"seq",type:"int"}],type:"updates.Difference"},{id:16030880,predicate:"updates.difference",params:[{name:"new_messages",type:"Vector<Message>"},{name:"new_encrypted_messages",type:"Vector<EncryptedMessage>"},{name:"other_updates",type:"Vector<Update>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"state",type:"updates.State"}],type:"updates.Difference"},{id:-1459938943,predicate:"updates.differenceSlice",params:[{name:"new_messages",type:"Vector<Message>"},{name:"new_encrypted_messages",type:"Vector<EncryptedMessage>"},{name:"other_updates",type:"Vector<Update>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"intermediate_state",type:"updates.State"}],type:"updates.Difference"},{id:-484987010,predicate:"updatesTooLong",params:[],type:"Updates"},{id:826001400,predicate:"updateShortMessage",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"mentioned",type:"flags.4?true"},{name:"media_unread",type:"flags.5?true"},{name:"silent",type:"flags.13?true"},{name:"id",type:"int"},{name:"user_id",type:"long"},{name:"message",type:"string"},{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"date",type:"int"},{name:"fwd_from",type:"flags.2?MessageFwdHeader"},{name:"via_bot_id",type:"flags.11?long"},{name:"reply_to",type:"flags.3?MessageReplyHeader"},{name:"entities",type:"flags.7?Vector<MessageEntity>"},{name:"ttl_period",type:"flags.25?int"}],type:"Updates"},{id:1299050149,predicate:"updateShortChatMessage",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"mentioned",type:"flags.4?true"},{name:"media_unread",type:"flags.5?true"},{name:"silent",type:"flags.13?true"},{name:"id",type:"int"},{name:"from_id",type:"long"},{name:"chat_id",type:"long"},{name:"message",type:"string"},{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"date",type:"int"},{name:"fwd_from",type:"flags.2?MessageFwdHeader"},{name:"via_bot_id",type:"flags.11?long"},{name:"reply_to",type:"flags.3?MessageReplyHeader"},{name:"entities",type:"flags.7?Vector<MessageEntity>"},{name:"ttl_period",type:"flags.25?int"}],type:"Updates"},{id:2027216577,predicate:"updateShort",params:[{name:"update",type:"Update"},{name:"date",type:"int"}],type:"Updates"},{id:1918567619,predicate:"updatesCombined",params:[{name:"updates",type:"Vector<Update>"},{name:"users",type:"Vector<User>"},{name:"chats",type:"Vector<Chat>"},{name:"date",type:"int"},{name:"seq_start",type:"int"},{name:"seq",type:"int"}],type:"Updates"},{id:1957577280,predicate:"updates",params:[{name:"updates",type:"Vector<Update>"},{name:"users",type:"Vector<User>"},{name:"chats",type:"Vector<Chat>"},{name:"date",type:"int"},{name:"seq",type:"int"}],type:"Updates"},{id:-1916114267,predicate:"photos.photos",params:[{name:"photos",type:"Vector<Photo>"},{name:"users",type:"Vector<User>"}],type:"photos.Photos"},{id:352657236,predicate:"photos.photosSlice",params:[{name:"count",type:"int"},{name:"photos",type:"Vector<Photo>"},{name:"users",type:"Vector<User>"}],type:"photos.Photos"},{id:539045032,predicate:"photos.photo",params:[{name:"photo",type:"Photo"},{name:"users",type:"Vector<User>"}],type:"photos.Photo"},{id:157948117,predicate:"upload.file",params:[{name:"type",type:"storage.FileType"},{name:"mtime",type:"int"},{name:"bytes",type:"bytes"}],type:"upload.File"},{id:414687501,predicate:"dcOption",params:[{name:"flags",type:"#"},{name:"ipv6",type:"flags.0?true"},{name:"media_only",type:"flags.1?true"},{name:"tcpo_only",type:"flags.2?true"},{name:"cdn",type:"flags.3?true"},{name:"static",type:"flags.4?true"},{name:"this_port_only",type:"flags.5?true"},{name:"id",type:"int"},{name:"ip_address",type:"string"},{name:"port",type:"int"},{name:"secret",type:"flags.10?bytes"}],type:"DcOption"},{id:-870702050,predicate:"config",params:[{name:"flags",type:"#"},{name:"default_p2p_contacts",type:"flags.3?true"},{name:"preload_featured_stickers",type:"flags.4?true"},{name:"revoke_pm_inbox",type:"flags.6?true"},{name:"blocked_mode",type:"flags.8?true"},{name:"force_try_ipv6",type:"flags.14?true"},{name:"date",type:"int"},{name:"expires",type:"int"},{name:"test_mode",type:"Bool"},{name:"this_dc",type:"int"},{name:"dc_options",type:"Vector<DcOption>"},{name:"dc_txt_domain_name",type:"string"},{name:"chat_size_max",type:"int"},{name:"megagroup_size_max",type:"int"},{name:"forwarded_count_max",type:"int"},{name:"online_update_period_ms",type:"int"},{name:"offline_blur_timeout_ms",type:"int"},{name:"offline_idle_timeout_ms",type:"int"},{name:"online_cloud_timeout_ms",type:"int"},{name:"notify_cloud_delay_ms",type:"int"},{name:"notify_default_delay_ms",type:"int"},{name:"push_chat_period_ms",type:"int"},{name:"push_chat_limit",type:"int"},{name:"edit_time_limit",type:"int"},{name:"revoke_time_limit",type:"int"},{name:"revoke_pm_time_limit",type:"int"},{name:"rating_e_decay",type:"int"},{name:"stickers_recent_limit",type:"int"},{name:"channels_read_media_period",type:"int"},{name:"tmp_sessions",type:"flags.0?int"},{name:"call_receive_timeout_ms",type:"int"},{name:"call_ring_timeout_ms",type:"int"},{name:"call_connect_timeout_ms",type:"int"},{name:"call_packet_timeout_ms",type:"int"},{name:"me_url_prefix",type:"string"},{name:"autoupdate_url_prefix",type:"flags.7?string"},{name:"gif_search_username",type:"flags.9?string"},{name:"venue_search_username",type:"flags.10?string"},{name:"img_search_username",type:"flags.11?string"},{name:"static_maps_provider",type:"flags.12?string"},{name:"caption_length_max",type:"int"},{name:"message_length_max",type:"int"},{name:"webfile_dc_id",type:"int"},{name:"suggested_lang_code",type:"flags.2?string"},{name:"lang_pack_version",type:"flags.2?int"},{name:"base_lang_pack_version",type:"flags.2?int"},{name:"reactions_default",type:"flags.15?Reaction"},{name:"autologin_token",type:"flags.16?string"}],type:"Config"},{id:-1910892683,predicate:"nearestDc",params:[{name:"country",type:"string"},{name:"this_dc",type:"int"},{name:"nearest_dc",type:"int"}],type:"NearestDc"},{id:-860107216,predicate:"help.appUpdate",params:[{name:"flags",type:"#"},{name:"can_not_skip",type:"flags.0?true"},{name:"id",type:"int"},{name:"version",type:"string"},{name:"text",type:"string"},{name:"entities",type:"Vector<MessageEntity>"},{name:"document",type:"flags.1?Document"},{name:"url",type:"flags.2?string"},{name:"sticker",type:"flags.3?Document"}],type:"help.AppUpdate"},{id:-1000708810,predicate:"help.noAppUpdate",params:[],type:"help.AppUpdate"},{id:415997816,predicate:"help.inviteText",params:[{name:"message",type:"string"}],type:"help.InviteText"},{id:314359194,predicate:"updateNewEncryptedMessage",params:[{name:"message",type:"EncryptedMessage"},{name:"qts",type:"int"}],type:"Update"},{id:386986326,predicate:"updateEncryptedChatTyping",params:[{name:"chat_id",type:"int"}],type:"Update"},{id:-1264392051,predicate:"updateEncryption",params:[{name:"chat",type:"EncryptedChat"},{name:"date",type:"int"}],type:"Update"},{id:956179895,predicate:"updateEncryptedMessagesRead",params:[{name:"chat_id",type:"int"},{name:"max_date",type:"int"},{name:"date",type:"int"}],type:"Update"},{id:-1417756512,predicate:"encryptedChatEmpty",params:[{name:"id",type:"int"}],type:"EncryptedChat"},{id:1722964307,predicate:"encryptedChatWaiting",params:[{name:"id",type:"int"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"}],type:"EncryptedChat"},{id:1223809356,predicate:"encryptedChatRequested",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.0?int"},{name:"id",type:"int"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_a",type:"bytes"}],type:"EncryptedChat"},{id:1643173063,predicate:"encryptedChat",params:[{name:"id",type:"int"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_a_or_b",type:"bytes"},{name:"key_fingerprint",type:"long"}],type:"EncryptedChat"},{id:505183301,predicate:"encryptedChatDiscarded",params:[{name:"flags",type:"#"},{name:"history_deleted",type:"flags.0?true"},{name:"id",type:"int"}],type:"EncryptedChat"},{id:-247351839,predicate:"inputEncryptedChat",params:[{name:"chat_id",type:"int"},{name:"access_hash",type:"long"}],type:"InputEncryptedChat"},{id:-1038136962,predicate:"encryptedFileEmpty",params:[],type:"EncryptedFile"},{id:-1476358952,predicate:"encryptedFile",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"size",type:"long"},{name:"dc_id",type:"int"},{name:"key_fingerprint",type:"int"}],type:"EncryptedFile"},{id:406307684,predicate:"inputEncryptedFileEmpty",params:[],type:"InputEncryptedFile"},{id:1690108678,predicate:"inputEncryptedFileUploaded",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"md5_checksum",type:"string"},{name:"key_fingerprint",type:"int"}],type:"InputEncryptedFile"},{id:1511503333,predicate:"inputEncryptedFile",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputEncryptedFile"},{id:-182231723,predicate:"inputEncryptedFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputFileLocation"},{id:-317144808,predicate:"encryptedMessage",params:[{name:"random_id",type:"long"},{name:"chat_id",type:"int"},{name:"date",type:"int"},{name:"bytes",type:"bytes"},{name:"file",type:"EncryptedFile"}],type:"EncryptedMessage"},{id:594758406,predicate:"encryptedMessageService",params:[{name:"random_id",type:"long"},{name:"chat_id",type:"int"},{name:"date",type:"int"},{name:"bytes",type:"bytes"}],type:"EncryptedMessage"},{id:-1058912715,predicate:"messages.dhConfigNotModified",params:[{name:"random",type:"bytes"}],type:"messages.DhConfig"},{id:740433629,predicate:"messages.dhConfig",params:[{name:"g",type:"int"},{name:"p",type:"bytes"},{name:"version",type:"int"},{name:"random",type:"bytes"}],type:"messages.DhConfig"},{id:1443858741,predicate:"messages.sentEncryptedMessage",params:[{name:"date",type:"int"}],type:"messages.SentEncryptedMessage"},{id:-1802240206,predicate:"messages.sentEncryptedFile",params:[{name:"date",type:"int"},{name:"file",type:"EncryptedFile"}],type:"messages.SentEncryptedMessage"},{id:-95482955,predicate:"inputFileBig",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"name",type:"string"}],type:"InputFile"},{id:767652808,predicate:"inputEncryptedFileBigUploaded",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"key_fingerprint",type:"int"}],type:"InputEncryptedFile"},{id:1037718609,predicate:"updateChatParticipantAdd",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"long"},{name:"inviter_id",type:"long"},{name:"date",type:"int"},{name:"version",type:"int"}],type:"Update"},{id:-483443337,predicate:"updateChatParticipantDelete",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"long"},{name:"version",type:"int"}],type:"Update"},{id:-1906403213,predicate:"updateDcOptions",params:[{name:"dc_options",type:"Vector<DcOption>"}],type:"Update"},{id:1530447553,predicate:"inputMediaUploadedDocument",params:[{name:"flags",type:"#"},{name:"nosound_video",type:"flags.3?true"},{name:"force_file",type:"flags.4?true"},{name:"spoiler",type:"flags.5?true"},{name:"file",type:"InputFile"},{name:"thumb",type:"flags.2?InputFile"},{name:"mime_type",type:"string"},{name:"attributes",type:"Vector<DocumentAttribute>"},{name:"stickers",type:"flags.0?Vector<InputDocument>"},{name:"ttl_seconds",type:"flags.1?int"}],type:"InputMedia"},{id:860303448,predicate:"inputMediaDocument",params:[{name:"flags",type:"#"},{name:"spoiler",type:"flags.2?true"},{name:"id",type:"InputDocument"},{name:"ttl_seconds",type:"flags.0?int"},{name:"query",type:"flags.1?string"}],type:"InputMedia"},{id:1291114285,predicate:"messageMediaDocument",params:[{name:"flags",type:"#"},{name:"nopremium",type:"flags.3?true"},{name:"spoiler",type:"flags.4?true"},{name:"video",type:"flags.6?true"},{name:"round",type:"flags.7?true"},{name:"voice",type:"flags.8?true"},{name:"document",type:"flags.0?Document"},{name:"alt_document",type:"flags.5?Document"},{name:"ttl_seconds",type:"flags.2?int"}],type:"MessageMedia"},{id:1928391342,predicate:"inputDocumentEmpty",params:[],type:"InputDocument"},{id:448771445,predicate:"inputDocument",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"}],type:"InputDocument"},{id:-1160743548,predicate:"inputDocumentFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"thumb_size",type:"string"}],type:"InputFileLocation"},{id:922273905,predicate:"documentEmpty",params:[{name:"id",type:"long"}],type:"Document"},{id:-1881881384,predicate:"document",params:[{name:"flags",type:"#"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"date",type:"int"},{name:"mime_type",type:"string"},{name:"size",type:"long"},{name:"thumbs",type:"flags.0?Vector<PhotoSize>"},{name:"video_thumbs",type:"flags.1?Vector<VideoSize>"},{name:"dc_id",type:"int"},{name:"attributes",type:"Vector<DocumentAttribute>"}],type:"Document"},{id:398898678,predicate:"help.support",params:[{name:"phone_number",type:"string"},{name:"user",type:"User"}],type:"help.Support"},{id:-1613493288,predicate:"notifyPeer",params:[{name:"peer",type:"Peer"}],type:"NotifyPeer"},{id:-1261946036,predicate:"notifyUsers",params:[],type:"NotifyPeer"},{id:-1073230141,predicate:"notifyChats",params:[],type:"NotifyPeer"},{id:-1094555409,predicate:"updateNotifySettings",params:[{name:"peer",type:"NotifyPeer"},{name:"notify_settings",type:"PeerNotifySettings"}],type:"Update"},{id:381645902,predicate:"sendMessageTypingAction",params:[],type:"SendMessageAction"},{id:-44119819,predicate:"sendMessageCancelAction",params:[],type:"SendMessageAction"},{id:-1584933265,predicate:"sendMessageRecordVideoAction",params:[],type:"SendMessageAction"},{id:-378127636,predicate:"sendMessageUploadVideoAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:-718310409,predicate:"sendMessageRecordAudioAction",params:[],type:"SendMessageAction"},{id:-212740181,predicate:"sendMessageUploadAudioAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:-774682074,predicate:"sendMessageUploadPhotoAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:-1441998364,predicate:"sendMessageUploadDocumentAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:393186209,predicate:"sendMessageGeoLocationAction",params:[],type:"SendMessageAction"},{id:1653390447,predicate:"sendMessageChooseContactAction",params:[],type:"SendMessageAction"},{id:-1290580579,predicate:"contacts.found",params:[{name:"my_results",type:"Vector<Peer>"},{name:"results",type:"Vector<Peer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.Found"},{id:-337352679,predicate:"updateServiceNotification",params:[{name:"flags",type:"#"},{name:"popup",type:"flags.0?true"},{name:"invert_media",type:"flags.2?true"},{name:"inbox_date",type:"flags.1?int"},{name:"type",type:"string"},{name:"message",type:"string"},{name:"media",type:"MessageMedia"},{name:"entities",type:"Vector<MessageEntity>"}],type:"Update"},{id:2065268168,predicate:"userStatusRecently",params:[{name:"flags",type:"#"},{name:"by_me",type:"flags.0?true"}],type:"UserStatus"},{id:1410997530,predicate:"userStatusLastWeek",params:[{name:"flags",type:"#"},{name:"by_me",type:"flags.0?true"}],type:"UserStatus"},{id:1703516023,predicate:"userStatusLastMonth",params:[{name:"flags",type:"#"},{name:"by_me",type:"flags.0?true"}],type:"UserStatus"},{id:-298113238,predicate:"updatePrivacy",params:[{name:"key",type:"PrivacyKey"},{name:"rules",type:"Vector<PrivacyRule>"}],type:"Update"},{id:1335282456,predicate:"inputPrivacyKeyStatusTimestamp",params:[],type:"InputPrivacyKey"},{id:-1137792208,predicate:"privacyKeyStatusTimestamp",params:[],type:"PrivacyKey"},{id:218751099,predicate:"inputPrivacyValueAllowContacts",params:[],type:"InputPrivacyRule"},{id:407582158,predicate:"inputPrivacyValueAllowAll",params:[],type:"InputPrivacyRule"},{id:320652927,predicate:"inputPrivacyValueAllowUsers",params:[{name:"users",type:"Vector<InputUser>"}],type:"InputPrivacyRule"},{id:195371015,predicate:"inputPrivacyValueDisallowContacts",params:[],type:"InputPrivacyRule"},{id:-697604407,predicate:"inputPrivacyValueDisallowAll",params:[],type:"InputPrivacyRule"},{id:-1877932953,predicate:"inputPrivacyValueDisallowUsers",params:[{name:"users",type:"Vector<InputUser>"}],type:"InputPrivacyRule"},{id:-123988,predicate:"privacyValueAllowContacts",params:[],type:"PrivacyRule"},{id:1698855810,predicate:"privacyValueAllowAll",params:[],type:"PrivacyRule"},{id:-1198497870,predicate:"privacyValueAllowUsers",params:[{name:"users",type:"Vector<long>"}],type:"PrivacyRule"},{id:-125240806,predicate:"privacyValueDisallowContacts",params:[],type:"PrivacyRule"},{id:-1955338397,predicate:"privacyValueDisallowAll",params:[],type:"PrivacyRule"},{id:-463335103,predicate:"privacyValueDisallowUsers",params:[{name:"users",type:"Vector<long>"}],type:"PrivacyRule"},{id:1352683077,predicate:"account.privacyRules",params:[{name:"rules",type:"Vector<PrivacyRule>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"account.PrivacyRules"},{id:-1194283041,predicate:"accountDaysTTL",params:[{name:"days",type:"int"}],type:"AccountDaysTTL"},{id:88680979,predicate:"updateUserPhone",params:[{name:"user_id",type:"long"},{name:"phone",type:"string"}],type:"Update"},{id:1815593308,predicate:"documentAttributeImageSize",params:[{name:"w",type:"int"},{name:"h",type:"int"}],type:"DocumentAttribute"},{id:297109817,predicate:"documentAttributeAnimated",params:[],type:"DocumentAttribute"},{id:1662637586,predicate:"documentAttributeSticker",params:[{name:"flags",type:"#"},{name:"mask",type:"flags.1?true"},{name:"alt",type:"string"},{name:"stickerset",type:"InputStickerSet"},{name:"mask_coords",type:"flags.0?MaskCoords"}],type:"DocumentAttribute"},{id:-745541182,predicate:"documentAttributeVideo",params:[{name:"flags",type:"#"},{name:"round_message",type:"flags.0?true"},{name:"supports_streaming",type:"flags.1?true"},{name:"nosound",type:"flags.3?true"},{name:"duration",type:"double"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"preload_prefix_size",type:"flags.2?int"}],type:"DocumentAttribute"},{id:-1739392570,predicate:"documentAttributeAudio",params:[{name:"flags",type:"#"},{name:"voice",type:"flags.10?true"},{name:"duration",type:"int"},{name:"title",type:"flags.0?string"},{name:"performer",type:"flags.1?string"},{name:"waveform",type:"flags.2?bytes"}],type:"DocumentAttribute"},{id:358154344,predicate:"documentAttributeFilename",params:[{name:"file_name",type:"string"}],type:"DocumentAttribute"},{id:-244016606,predicate:"messages.stickersNotModified",params:[],type:"messages.Stickers"},{id:816245886,predicate:"messages.stickers",params:[{name:"hash",type:"long"},{name:"stickers",type:"Vector<Document>"}],type:"messages.Stickers"},{id:313694676,predicate:"stickerPack",params:[{name:"emoticon",type:"string"},{name:"documents",type:"Vector<long>"}],type:"StickerPack"},{id:-395967805,predicate:"messages.allStickersNotModified",params:[],type:"messages.AllStickers"},{id:-843329861,predicate:"messages.allStickers",params:[{name:"hash",type:"long"},{name:"sets",type:"Vector<StickerSet>"}],type:"messages.AllStickers"},{id:-1667805217,predicate:"updateReadHistoryInbox",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.0?int"},{name:"peer",type:"Peer"},{name:"max_id",type:"int"},{name:"still_unread_count",type:"int"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:791617983,predicate:"updateReadHistoryOutbox",params:[{name:"peer",type:"Peer"},{name:"max_id",type:"int"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-2066640507,predicate:"messages.affectedMessages",params:[{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"messages.AffectedMessages"},{id:2139689491,predicate:"updateWebPage",params:[{name:"webpage",type:"WebPage"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:555358088,predicate:"webPageEmpty",params:[{name:"flags",type:"#"},{name:"id",type:"long"},{name:"url",type:"flags.0?string"}],type:"WebPage"},{id:-1328464313,predicate:"webPagePending",params:[{name:"flags",type:"#"},{name:"id",type:"long"},{name:"url",type:"flags.0?string"},{name:"date",type:"int"}],type:"WebPage"},{id:-392411726,predicate:"webPage",params:[{name:"flags",type:"#"},{name:"has_large_media",type:"flags.13?true"},{name:"id",type:"long"},{name:"url",type:"string"},{name:"display_url",type:"string"},{name:"hash",type:"int"},{name:"type",type:"flags.0?string"},{name:"site_name",type:"flags.1?string"},{name:"title",type:"flags.2?string"},{name:"description",type:"flags.3?string"},{name:"photo",type:"flags.4?Photo"},{name:"embed_url",type:"flags.5?string"},{name:"embed_type",type:"flags.5?string"},{name:"embed_width",type:"flags.6?int"},{name:"embed_height",type:"flags.6?int"},{name:"duration",type:"flags.7?int"},{name:"author",type:"flags.8?string"},{name:"document",type:"flags.9?Document"},{name:"cached_page",type:"flags.10?Page"},{name:"attributes",type:"flags.12?Vector<WebPageAttribute>"}],type:"WebPage"},{id:-571405253,predicate:"messageMediaWebPage",params:[{name:"flags",type:"#"},{name:"force_large_media",type:"flags.0?true"},{name:"force_small_media",type:"flags.1?true"},{name:"manual",type:"flags.3?true"},{name:"safe",type:"flags.4?true"},{name:"webpage",type:"WebPage"}],type:"MessageMedia"},{id:-1392388579,predicate:"authorization",params:[{name:"flags",type:"#"},{name:"current",type:"flags.0?true"},{name:"official_app",type:"flags.1?true"},{name:"password_pending",type:"flags.2?true"},{name:"encrypted_requests_disabled",type:"flags.3?true"},{name:"call_requests_disabled",type:"flags.4?true"},{name:"unconfirmed",type:"flags.5?true"},{name:"hash",type:"long"},{name:"device_model",type:"string"},{name:"platform",type:"string"},{name:"system_version",type:"string"},{name:"api_id",type:"int"},{name:"app_name",type:"string"},{name:"app_version",type:"string"},{name:"date_created",type:"int"},{name:"date_active",type:"int"},{name:"ip",type:"string"},{name:"country",type:"string"},{name:"region",type:"string"}],type:"Authorization"},{id:1275039392,predicate:"account.authorizations",params:[{name:"authorization_ttl_days",type:"int"},{name:"authorizations",type:"Vector<Authorization>"}],type:"account.Authorizations"},{id:-1787080453,predicate:"account.password",params:[{name:"flags",type:"#"},{name:"has_recovery",type:"flags.0?true"},{name:"has_secure_values",type:"flags.1?true"},{name:"has_password",type:"flags.2?true"},{name:"current_algo",type:"flags.2?PasswordKdfAlgo"},{name:"srp_B",type:"flags.2?bytes"},{name:"srp_id",type:"flags.2?long"},{name:"hint",type:"flags.3?string"},{name:"email_unconfirmed_pattern",type:"flags.4?string"},{name:"new_algo",type:"PasswordKdfAlgo"},{name:"new_secure_algo",type:"SecurePasswordKdfAlgo"},{name:"secure_random",type:"bytes"},{name:"pending_reset_date",type:"flags.5?int"},{name:"login_email_pattern",type:"flags.6?string"}],type:"account.Password"},{id:-1705233435,predicate:"account.passwordSettings",params:[{name:"flags",type:"#"},{name:"email",type:"flags.0?string"},{name:"secure_settings",type:"flags.1?SecureSecretSettings"}],type:"account.PasswordSettings"},{id:-1036572727,predicate:"account.passwordInputSettings",params:[{name:"flags",type:"#"},{name:"new_algo",type:"flags.0?PasswordKdfAlgo"},{name:"new_password_hash",type:"flags.0?bytes"},{name:"hint",type:"flags.0?string"},{name:"email",type:"flags.1?string"},{name:"new_secure_settings",type:"flags.2?SecureSecretSettings"}],type:"account.PasswordInputSettings"},{id:326715557,predicate:"auth.passwordRecovery",params:[{name:"email_pattern",type:"string"}],type:"auth.PasswordRecovery"},{id:-1052959727,predicate:"inputMediaVenue",params:[{name:"geo_point",type:"InputGeoPoint"},{name:"title",type:"string"},{name:"address",type:"string"},{name:"provider",type:"string"},{name:"venue_id",type:"string"},{name:"venue_type",type:"string"}],type:"InputMedia"},{id:784356159,predicate:"messageMediaVenue",params:[{name:"geo",type:"GeoPoint"},{name:"title",type:"string"},{name:"address",type:"string"},{name:"provider",type:"string"},{name:"venue_id",type:"string"},{name:"venue_type",type:"string"}],type:"MessageMedia"},{id:-1551583367,predicate:"receivedNotifyMessage",params:[{name:"id",type:"int"},{name:"flags",type:"int"}],type:"ReceivedNotifyMessage"},{id:179611673,predicate:"chatInviteExported",params:[{name:"flags",type:"#"},{name:"revoked",type:"flags.0?true"},{name:"permanent",type:"flags.5?true"},{name:"request_needed",type:"flags.6?true"},{name:"link",type:"string"},{name:"admin_id",type:"long"},{name:"date",type:"int"},{name:"start_date",type:"flags.4?int"},{name:"expire_date",type:"flags.1?int"},{name:"usage_limit",type:"flags.2?int"},{name:"usage",type:"flags.3?int"},{name:"requested",type:"flags.7?int"},{name:"title",type:"flags.8?string"}],type:"ExportedChatInvite"},{id:1516793212,predicate:"chatInviteAlready",params:[{name:"chat",type:"Chat"}],type:"ChatInvite"},{id:-840897472,predicate:"chatInvite",params:[{name:"flags",type:"#"},{name:"channel",type:"flags.0?true"},{name:"broadcast",type:"flags.1?true"},{name:"public",type:"flags.2?true"},{name:"megagroup",type:"flags.3?true"},{name:"request_needed",type:"flags.6?true"},{name:"verified",type:"flags.7?true"},{name:"scam",type:"flags.8?true"},{name:"fake",type:"flags.9?true"},{name:"title",type:"string"},{name:"about",type:"flags.5?string"},{name:"photo",type:"Photo"},{name:"participants_count",type:"int"},{name:"participants",type:"flags.4?Vector<User>"},{name:"color",type:"int"}],type:"ChatInvite"},{id:51520707,predicate:"messageActionChatJoinedByLink",params:[{name:"inviter_id",type:"long"}],type:"MessageAction"},{id:-131960447,predicate:"updateReadMessagesContents",params:[{name:"flags",type:"#"},{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"date",type:"flags.0?int"}],type:"Update"},{id:-4838507,predicate:"inputStickerSetEmpty",params:[],type:"InputStickerSet"},{id:-1645763991,predicate:"inputStickerSetID",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputStickerSet"},{id:-2044933984,predicate:"inputStickerSetShortName",params:[{name:"short_name",type:"string"}],type:"InputStickerSet"},{id:768691932,predicate:"stickerSet",params:[{name:"flags",type:"#"},{name:"archived",type:"flags.1?true"},{name:"official",type:"flags.2?true"},{name:"masks",type:"flags.3?true"},{name:"emojis",type:"flags.7?true"},{name:"text_color",type:"flags.9?true"},{name:"channel_emoji_status",type:"flags.10?true"},{name:"creator",type:"flags.11?true"},{name:"installed_date",type:"flags.0?int"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"title",type:"string"},{name:"short_name",type:"string"},{name:"thumbs",type:"flags.4?Vector<PhotoSize>"},{name:"thumb_dc_id",type:"flags.4?int"},{name:"thumb_version",type:"flags.4?int"},{name:"thumb_document_id",type:"flags.8?long"},{name:"count",type:"int"},{name:"hash",type:"int"}],type:"StickerSet"},{id:1846886166,predicate:"messages.stickerSet",params:[{name:"set",type:"StickerSet"},{name:"packs",type:"Vector<StickerPack>"},{name:"keywords",type:"Vector<StickerKeyword>"},{name:"documents",type:"Vector<Document>"}],type:"messages.StickerSet"},{id:559694904,predicate:"user",params:[{name:"flags",type:"#"},{name:"self",type:"flags.10?true"},{name:"contact",type:"flags.11?true"},{name:"mutual_contact",type:"flags.12?true"},{name:"deleted",type:"flags.13?true"},{name:"bot",type:"flags.14?true"},{name:"bot_chat_history",type:"flags.15?true"},{name:"bot_nochats",type:"flags.16?true"},{name:"verified",type:"flags.17?true"},{name:"restricted",type:"flags.18?true"},{name:"min",type:"flags.20?true"},{name:"bot_inline_geo",type:"flags.21?true"},{name:"support",type:"flags.23?true"},{name:"scam",type:"flags.24?true"},{name:"apply_min_photo",type:"flags.25?true"},{name:"fake",type:"flags.26?true"},{name:"bot_attach_menu",type:"flags.27?true"},{name:"premium",type:"flags.28?true"},{name:"attach_menu_enabled",type:"flags.29?true"},{name:"flags2",type:"#"},{name:"bot_can_edit",type:"flags2.1?true"},{name:"close_friend",type:"flags2.2?true"},{name:"stories_hidden",type:"flags2.3?true"},{name:"stories_unavailable",type:"flags2.4?true"},{name:"contact_require_premium",type:"flags2.10?true"},{name:"bot_business",type:"flags2.11?true"},{name:"id",type:"long"},{name:"access_hash",type:"flags.0?long"},{name:"first_name",type:"flags.1?string"},{name:"last_name",type:"flags.2?string"},{name:"username",type:"flags.3?string"},{name:"phone",type:"flags.4?string"},{name:"photo",type:"flags.5?UserProfilePhoto"},{name:"status",type:"flags.6?UserStatus"},{name:"bot_info_version",type:"flags.14?int"},{name:"restriction_reason",type:"flags.18?Vector<RestrictionReason>"},{name:"bot_inline_placeholder",type:"flags.19?string"},{name:"lang_code",type:"flags.22?string"},{name:"emoji_status",type:"flags.30?EmojiStatus"},{name:"usernames",type:"flags2.0?Vector<Username>"},{name:"stories_max_id",type:"flags2.5?int"},{name:"color",type:"flags2.8?PeerColor"},{name:"profile_color",type:"flags2.9?PeerColor"}],type:"User"},{id:-1032140601,predicate:"botCommand",params:[{name:"command",type:"string"},{name:"description",type:"string"}],type:"BotCommand"},{id:-1892676777,predicate:"botInfo",params:[{name:"flags",type:"#"},{name:"user_id",type:"flags.0?long"},{name:"description",type:"flags.1?string"},{name:"description_photo",type:"flags.4?Photo"},{name:"description_document",type:"flags.5?Document"},{name:"commands",type:"flags.2?Vector<BotCommand>"},{name:"menu_button",type:"flags.3?BotMenuButton"}],type:"BotInfo"},{id:-1560655744,predicate:"keyboardButton",params:[{name:"text",type:"string"}],type:"KeyboardButton"},{id:2002815875,predicate:"keyboardButtonRow",params:[{name:"buttons",type:"Vector<KeyboardButton>"}],type:"KeyboardButtonRow"},{id:-1606526075,predicate:"replyKeyboardHide",params:[{name:"flags",type:"#"},{name:"selective",type:"flags.2?true"}],type:"ReplyMarkup"},{id:-2035021048,predicate:"replyKeyboardForceReply",params:[{name:"flags",type:"#"},{name:"single_use",type:"flags.1?true"},{name:"selective",type:"flags.2?true"},{name:"placeholder",type:"flags.3?string"}],type:"ReplyMarkup"},{id:-2049074735,predicate:"replyKeyboardMarkup",params:[{name:"flags",type:"#"},{name:"resize",type:"flags.0?true"},{name:"single_use",type:"flags.1?true"},{name:"selective",type:"flags.2?true"},{name:"persistent",type:"flags.4?true"},{name:"rows",type:"Vector<KeyboardButtonRow>"},{name:"placeholder",type:"flags.3?string"}],type:"ReplyMarkup"},{id:-571955892,predicate:"inputPeerUser",params:[{name:"user_id",type:"long"},{name:"access_hash",type:"long"}],type:"InputPeer"},{id:-233744186,predicate:"inputUser",params:[{name:"user_id",type:"long"},{name:"access_hash",type:"long"}],type:"InputUser"},{id:-1148011883,predicate:"messageEntityUnknown",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-100378723,predicate:"messageEntityMention",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1868782349,predicate:"messageEntityHashtag",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1827637959,predicate:"messageEntityBotCommand",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1859134776,predicate:"messageEntityUrl",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1692693954,predicate:"messageEntityEmail",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-1117713463,predicate:"messageEntityBold",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-2106619040,predicate:"messageEntityItalic",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:681706865,predicate:"messageEntityCode",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1938967520,predicate:"messageEntityPre",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"language",type:"string"}],type:"MessageEntity"},{id:1990644519,predicate:"messageEntityTextUrl",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"url",type:"string"}],type:"MessageEntity"},{id:-1877614335,predicate:"updateShortSentMessage",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"id",type:"int"},{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"date",type:"int"},{name:"media",type:"flags.9?MessageMedia"},{name:"entities",type:"flags.7?Vector<MessageEntity>"},{name:"ttl_period",type:"flags.25?int"}],type:"Updates"},{id:-292807034,predicate:"inputChannelEmpty",params:[],type:"InputChannel"},{id:-212145112,predicate:"inputChannel",params:[{name:"channel_id",type:"long"},{name:"access_hash",type:"long"}],type:"InputChannel"},{id:-1566230754,predicate:"peerChannel",params:[{name:"channel_id",type:"long"}],type:"Peer"},{id:666680316,predicate:"inputPeerChannel",params:[{name:"channel_id",type:"long"},{name:"access_hash",type:"long"}],type:"InputPeer"},{id:179174543,predicate:"channel",params:[{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"left",type:"flags.2?true"},{name:"broadcast",type:"flags.5?true"},{name:"verified",type:"flags.7?true"},{name:"megagroup",type:"flags.8?true"},{name:"restricted",type:"flags.9?true"},{name:"signatures",type:"flags.11?true"},{name:"min",type:"flags.12?true"},{name:"scam",type:"flags.19?true"},{name:"has_link",type:"flags.20?true"},{name:"has_geo",type:"flags.21?true"},{name:"slowmode_enabled",type:"flags.22?true"},{name:"call_active",type:"flags.23?true"},{name:"call_not_empty",type:"flags.24?true"},{name:"fake",type:"flags.25?true"},{name:"gigagroup",type:"flags.26?true"},{name:"noforwards",type:"flags.27?true"},{name:"join_to_send",type:"flags.28?true"},{name:"join_request",type:"flags.29?true"},{name:"forum",type:"flags.30?true"},{name:"flags2",type:"#"},{name:"stories_hidden",type:"flags2.1?true"},{name:"stories_hidden_min",type:"flags2.2?true"},{name:"stories_unavailable",type:"flags2.3?true"},{name:"id",type:"long"},{name:"access_hash",type:"flags.13?long"},{name:"title",type:"string"},{name:"username",type:"flags.6?string"},{name:"photo",type:"ChatPhoto"},{name:"date",type:"int"},{name:"restriction_reason",type:"flags.9?Vector<RestrictionReason>"},{name:"admin_rights",type:"flags.14?ChatAdminRights"},{name:"banned_rights",type:"flags.15?ChatBannedRights"},{name:"default_banned_rights",type:"flags.18?ChatBannedRights"},{name:"participants_count",type:"flags.17?int"},{name:"usernames",type:"flags2.0?Vector<Username>"},{name:"stories_max_id",type:"flags2.4?int"},{name:"color",type:"flags2.7?PeerColor"},{name:"profile_color",type:"flags2.8?PeerColor"},{name:"emoji_status",type:"flags2.9?EmojiStatus"},{name:"level",type:"flags2.10?int"}],type:"Chat"},{id:399807445,predicate:"channelForbidden",params:[{name:"flags",type:"#"},{name:"broadcast",type:"flags.5?true"},{name:"megagroup",type:"flags.8?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"title",type:"string"},{name:"until_date",type:"flags.16?int"}],type:"Chat"},{id:2131196633,predicate:"contacts.resolvedPeer",params:[{name:"peer",type:"Peer"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.ResolvedPeer"},{id:1153455271,predicate:"channelFull",params:[{name:"flags",type:"#"},{name:"can_view_participants",type:"flags.3?true"},{name:"can_set_username",type:"flags.6?true"},{name:"can_set_stickers",type:"flags.7?true"},{name:"hidden_prehistory",type:"flags.10?true"},{name:"can_set_location",type:"flags.16?true"},{name:"has_scheduled",type:"flags.19?true"},{name:"can_view_stats",type:"flags.20?true"},{name:"blocked",type:"flags.22?true"},{name:"flags2",type:"#"},{name:"can_delete_channel",type:"flags2.0?true"},{name:"antispam",type:"flags2.1?true"},{name:"participants_hidden",type:"flags2.2?true"},{name:"translations_disabled",type:"flags2.3?true"},{name:"stories_pinned_available",type:"flags2.5?true"},{name:"view_forum_as_messages",type:"flags2.6?true"},{name:"restricted_sponsored",type:"flags2.11?true"},{name:"can_view_revenue",type:"flags2.12?true"},{name:"id",type:"long"},{name:"about",type:"string"},{name:"participants_count",type:"flags.0?int"},{name:"admins_count",type:"flags.1?int"},{name:"kicked_count",type:"flags.2?int"},{name:"banned_count",type:"flags.2?int"},{name:"online_count",type:"flags.13?int"},{name:"read_inbox_max_id",type:"int"},{name:"read_outbox_max_id",type:"int"},{name:"unread_count",type:"int"},{name:"chat_photo",type:"Photo"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"exported_invite",type:"flags.23?ExportedChatInvite"},{name:"bot_info",type:"Vector<BotInfo>"},{name:"migrated_from_chat_id",type:"flags.4?long"},{name:"migrated_from_max_id",type:"flags.4?int"},{name:"pinned_msg_id",type:"flags.5?int"},{name:"stickerset",type:"flags.8?StickerSet"},{name:"available_min_id",type:"flags.9?int"},{name:"folder_id",type:"flags.11?int"},{name:"linked_chat_id",type:"flags.14?long"},{name:"location",type:"flags.15?ChannelLocation"},{name:"slowmode_seconds",type:"flags.17?int"},{name:"slowmode_next_send_date",type:"flags.18?int"},{name:"stats_dc",type:"flags.12?int"},{name:"pts",type:"int"},{name:"call",type:"flags.21?InputGroupCall"},{name:"ttl_period",type:"flags.24?int"},{name:"pending_suggestions",type:"flags.25?Vector<string>"},{name:"groupcall_default_join_as",type:"flags.26?Peer"},{name:"theme_emoticon",type:"flags.27?string"},{name:"requests_pending",type:"flags.28?int"},{name:"recent_requesters",type:"flags.28?Vector<long>"},{name:"default_send_as",type:"flags.29?Peer"},{name:"available_reactions",type:"flags.30?ChatReactions"},{name:"stories",type:"flags2.4?PeerStories"},{name:"wallpaper",type:"flags2.7?WallPaper"},{name:"boosts_applied",type:"flags2.8?int"},{name:"boosts_unrestrict",type:"flags2.9?int"},{name:"emojiset",type:"flags2.10?StickerSet"}],type:"ChatFull"},{id:182649427,predicate:"messageRange",params:[{name:"min_id",type:"int"},{name:"max_id",type:"int"}],type:"MessageRange"},{id:-948520370,predicate:"messages.channelMessages",params:[{name:"flags",type:"#"},{name:"inexact",type:"flags.1?true"},{name:"pts",type:"int"},{name:"count",type:"int"},{name:"offset_id_offset",type:"flags.2?int"},{name:"messages",type:"Vector<Message>"},{name:"topics",type:"Vector<ForumTopic>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Messages"},{id:-1781355374,predicate:"messageActionChannelCreate",params:[{name:"title",type:"string"}],type:"MessageAction"},{id:277713951,predicate:"updateChannelTooLong",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"pts",type:"flags.0?int"}],type:"Update"},{id:1666927625,predicate:"updateChannel",params:[{name:"channel_id",type:"long"}],type:"Update"},{id:1656358105,predicate:"updateNewChannelMessage",params:[{name:"message",type:"Message"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-1842450928,predicate:"updateReadChannelInbox",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.0?int"},{name:"channel_id",type:"long"},{name:"max_id",type:"int"},{name:"still_unread_count",type:"int"},{name:"pts",type:"int"}],type:"Update"},{id:-1020437742,predicate:"updateDeleteChannelMessages",params:[{name:"channel_id",type:"long"},{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-232346616,predicate:"updateChannelMessageViews",params:[{name:"channel_id",type:"long"},{name:"id",type:"int"},{name:"views",type:"int"}],type:"Update"},{id:1041346555,predicate:"updates.channelDifferenceEmpty",params:[{name:"flags",type:"#"},{name:"final",type:"flags.0?true"},{name:"pts",type:"int"},{name:"timeout",type:"flags.1?int"}],type:"updates.ChannelDifference"},{id:-1531132162,predicate:"updates.channelDifferenceTooLong",params:[{name:"flags",type:"#"},{name:"final",type:"flags.0?true"},{name:"timeout",type:"flags.1?int"},{name:"dialog",type:"Dialog"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"updates.ChannelDifference"},{id:543450958,predicate:"updates.channelDifference",params:[{name:"flags",type:"#"},{name:"final",type:"flags.0?true"},{name:"pts",type:"int"},{name:"timeout",type:"flags.1?int"},{name:"new_messages",type:"Vector<Message>"},{name:"other_updates",type:"Vector<Update>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"updates.ChannelDifference"},{id:-1798033689,predicate:"channelMessagesFilterEmpty",params:[],type:"ChannelMessagesFilter"},{id:-847783593,predicate:"channelMessagesFilter",params:[{name:"flags",type:"#"},{name:"exclude_new_messages",type:"flags.1?true"},{name:"ranges",type:"Vector<MessageRange>"}],type:"ChannelMessagesFilter"},{id:-1072953408,predicate:"channelParticipant",params:[{name:"user_id",type:"long"},{name:"date",type:"int"}],type:"ChannelParticipant"},{id:900251559,predicate:"channelParticipantSelf",params:[{name:"flags",type:"#"},{name:"via_request",type:"flags.0?true"},{name:"user_id",type:"long"},{name:"inviter_id",type:"long"},{name:"date",type:"int"}],type:"ChannelParticipant"},{id:803602899,predicate:"channelParticipantCreator",params:[{name:"flags",type:"#"},{name:"user_id",type:"long"},{name:"admin_rights",type:"ChatAdminRights"},{name:"rank",type:"flags.0?string"}],type:"ChannelParticipant"},{id:-566281095,predicate:"channelParticipantsRecent",params:[],type:"ChannelParticipantsFilter"},{id:-1268741783,predicate:"channelParticipantsAdmins",params:[],type:"ChannelParticipantsFilter"},{id:-1548400251,predicate:"channelParticipantsKicked",params:[{name:"q",type:"string"}],type:"ChannelParticipantsFilter"},{id:-1699676497,predicate:"channels.channelParticipants",params:[{name:"count",type:"int"},{name:"participants",type:"Vector<ChannelParticipant>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"channels.ChannelParticipants"},{id:-541588713,predicate:"channels.channelParticipant",params:[{name:"participant",type:"ChannelParticipant"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"channels.ChannelParticipant"},{id:-462696732,predicate:"chatParticipantCreator",params:[{name:"user_id",type:"long"}],type:"ChatParticipant"},{id:-1600962725,predicate:"chatParticipantAdmin",params:[{name:"user_id",type:"long"},{name:"inviter_id",type:"long"},{name:"date",type:"int"}],type:"ChatParticipant"},{id:-674602590,predicate:"updateChatParticipantAdmin",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"long"},{name:"is_admin",type:"Bool"},{name:"version",type:"int"}],type:"Update"},{id:-519864430,predicate:"messageActionChatMigrateTo",params:[{name:"channel_id",type:"long"}],type:"MessageAction"},{id:-365344535,predicate:"messageActionChannelMigrateFrom",params:[{name:"title",type:"string"},{name:"chat_id",type:"long"}],type:"MessageAction"},{id:-1328445861,predicate:"channelParticipantsBots",params:[],type:"ChannelParticipantsFilter"},{id:2013922064,predicate:"help.termsOfService",params:[{name:"flags",type:"#"},{name:"popup",type:"flags.0?true"},{name:"id",type:"DataJSON"},{name:"text",type:"string"},{name:"entities",type:"Vector<MessageEntity>"},{name:"min_age_confirm",type:"flags.1?int"}],type:"help.TermsOfService"},{id:1753886890,predicate:"updateNewStickerSet",params:[{name:"stickerset",type:"messages.StickerSet"}],type:"Update"},{id:196268545,predicate:"updateStickerSetsOrder",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"emojis",type:"flags.1?true"},{name:"order",type:"Vector<long>"}],type:"Update"},{id:834816008,predicate:"updateStickerSets",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"emojis",type:"flags.1?true"}],type:"Update"},{id:-402498398,predicate:"messages.savedGifsNotModified",params:[],type:"messages.SavedGifs"},{id:-2069878259,predicate:"messages.savedGifs",params:[{name:"hash",type:"long"},{name:"gifs",type:"Vector<Document>"}],type:"messages.SavedGifs"},{id:-1821035490,predicate:"updateSavedGifs",params:[],type:"Update"},{id:864077702,predicate:"inputBotInlineMessageMediaAuto",params:[{name:"flags",type:"#"},{name:"invert_media",type:"flags.3?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:1036876423,predicate:"inputBotInlineMessageText",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.0?true"},{name:"invert_media",type:"flags.3?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:-2000710887,predicate:"inputBotInlineResult",params:[{name:"flags",type:"#"},{name:"id",type:"string"},{name:"type",type:"string"},{name:"title",type:"flags.1?string"},{name:"description",type:"flags.2?string"},{name:"url",type:"flags.3?string"},{name:"thumb",type:"flags.4?InputWebDocument"},{name:"content",type:"flags.5?InputWebDocument"},{name:"send_message",type:"InputBotInlineMessage"}],type:"InputBotInlineResult"},{id:1984755728,predicate:"botInlineMessageMediaAuto",params:[{name:"flags",type:"#"},{name:"invert_media",type:"flags.3?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:-1937807902,predicate:"botInlineMessageText",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.0?true"},{name:"invert_media",type:"flags.3?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:295067450,predicate:"botInlineResult",params:[{name:"flags",type:"#"},{name:"id",type:"string"},{name:"type",type:"string"},{name:"title",type:"flags.1?string"},{name:"description",type:"flags.2?string"},{name:"url",type:"flags.3?string"},{name:"thumb",type:"flags.4?WebDocument"},{name:"content",type:"flags.5?WebDocument"},{name:"send_message",type:"BotInlineMessage"}],type:"BotInlineResult"},{id:-534646026,predicate:"messages.botResults",params:[{name:"flags",type:"#"},{name:"gallery",type:"flags.0?true"},{name:"query_id",type:"long"},{name:"next_offset",type:"flags.1?string"},{name:"switch_pm",type:"flags.2?InlineBotSwitchPM"},{name:"switch_webview",type:"flags.3?InlineBotWebView"},{name:"results",type:"Vector<BotInlineResult>"},{name:"cache_time",type:"int"},{name:"users",type:"Vector<User>"}],type:"messages.BotResults"},{id:1232025500,predicate:"updateBotInlineQuery",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"query",type:"string"},{name:"geo",type:"flags.0?GeoPoint"},{name:"peer_type",type:"flags.1?InlineQueryPeerType"},{name:"offset",type:"string"}],type:"Update"},{id:317794823,predicate:"updateBotInlineSend",params:[{name:"flags",type:"#"},{name:"user_id",type:"long"},{name:"query",type:"string"},{name:"geo",type:"flags.0?GeoPoint"},{name:"id",type:"string"},{name:"msg_id",type:"flags.1?InputBotInlineMessageID"}],type:"Update"},{id:1358283666,predicate:"inputMessagesFilterVoice",params:[],type:"MessagesFilter"},{id:928101534,predicate:"inputMessagesFilterMusic",params:[],type:"MessagesFilter"},{id:-1107622874,predicate:"inputPrivacyKeyChatInvite",params:[],type:"InputPrivacyKey"},{id:1343122938,predicate:"privacyKeyChatInvite",params:[],type:"PrivacyKey"},{id:1571494644,predicate:"exportedMessageLink",params:[{name:"link",type:"string"},{name:"html",type:"string"}],type:"ExportedMessageLink"},{id:1313731771,predicate:"messageFwdHeader",params:[{name:"flags",type:"#"},{name:"imported",type:"flags.7?true"},{name:"saved_out",type:"flags.11?true"},{name:"from_id",type:"flags.0?Peer"},{name:"from_name",type:"flags.5?string"},{name:"date",type:"int"},{name:"channel_post",type:"flags.2?int"},{name:"post_author",type:"flags.3?string"},{name:"saved_from_peer",type:"flags.4?Peer"},{name:"saved_from_msg_id",type:"flags.4?int"},{name:"saved_from_id",type:"flags.8?Peer"},{name:"saved_from_name",type:"flags.9?string"},{name:"saved_date",type:"flags.10?int"},{name:"psa_type",type:"flags.6?string"}],type:"MessageFwdHeader"},{id:457133559,predicate:"updateEditChannelMessage",params:[{name:"message",type:"Message"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-1799538451,predicate:"messageActionPinMessage",params:[],type:"MessageAction"},{id:1923290508,predicate:"auth.codeTypeSms",params:[],type:"auth.CodeType"},{id:1948046307,predicate:"auth.codeTypeCall",params:[],type:"auth.CodeType"},{id:577556219,predicate:"auth.codeTypeFlashCall",params:[],type:"auth.CodeType"},{id:1035688326,predicate:"auth.sentCodeTypeApp",params:[{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:-1073693790,predicate:"auth.sentCodeTypeSms",params:[{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:1398007207,predicate:"auth.sentCodeTypeCall",params:[{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:-1425815847,predicate:"auth.sentCodeTypeFlashCall",params:[{name:"pattern",type:"string"}],type:"auth.SentCodeType"},{id:629866245,predicate:"keyboardButtonUrl",params:[{name:"text",type:"string"},{name:"url",type:"string"}],type:"KeyboardButton"},{id:901503851,predicate:"keyboardButtonCallback",params:[{name:"flags",type:"#"},{name:"requires_password",type:"flags.0?true"},{name:"text",type:"string"},{name:"data",type:"bytes"}],type:"KeyboardButton"},{id:-1318425559,predicate:"keyboardButtonRequestPhone",params:[{name:"text",type:"string"}],type:"KeyboardButton"},{id:-59151553,predicate:"keyboardButtonRequestGeoLocation",params:[{name:"text",type:"string"}],type:"KeyboardButton"},{id:-1816527947,predicate:"keyboardButtonSwitchInline",params:[{name:"flags",type:"#"},{name:"same_peer",type:"flags.0?true"},{name:"text",type:"string"},{name:"query",type:"string"},{name:"peer_types",type:"flags.1?Vector<InlineQueryPeerType>"}],type:"KeyboardButton"},{id:1218642516,predicate:"replyInlineMarkup",params:[{name:"rows",type:"Vector<KeyboardButtonRow>"}],type:"ReplyMarkup"},{id:911761060,predicate:"messages.botCallbackAnswer",params:[{name:"flags",type:"#"},{name:"alert",type:"flags.1?true"},{name:"has_url",type:"flags.3?true"},{name:"native_ui",type:"flags.4?true"},{name:"message",type:"flags.0?string"},{name:"url",type:"flags.2?string"},{name:"cache_time",type:"int"}],type:"messages.BotCallbackAnswer"},{id:-1177566067,predicate:"updateBotCallbackQuery",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"peer",type:"Peer"},{name:"msg_id",type:"int"},{name:"chat_instance",type:"long"},{name:"data",type:"flags.0?bytes"},{name:"game_short_name",type:"flags.1?string"}],type:"Update"},{id:649453030,predicate:"messages.messageEditData",params:[{name:"flags",type:"#"},{name:"caption",type:"flags.0?true"}],type:"messages.MessageEditData"},{id:-469536605,predicate:"updateEditMessage",params:[{name:"message",type:"Message"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-1768777083,predicate:"inputBotInlineMessageMediaGeo",params:[{name:"flags",type:"#"},{name:"geo_point",type:"InputGeoPoint"},{name:"heading",type:"flags.0?int"},{name:"period",type:"flags.1?int"},{name:"proximity_notification_radius",type:"flags.3?int"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:1098628881,predicate:"inputBotInlineMessageMediaVenue",params:[{name:"flags",type:"#"},{name:"geo_point",type:"InputGeoPoint"},{name:"title",type:"string"},{name:"address",type:"string"},{name:"provider",type:"string"},{name:"venue_id",type:"string"},{name:"venue_type",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:-1494368259,predicate:"inputBotInlineMessageMediaContact",params:[{name:"flags",type:"#"},{name:"phone_number",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"vcard",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:85477117,predicate:"botInlineMessageMediaGeo",params:[{name:"flags",type:"#"},{name:"geo",type:"GeoPoint"},{name:"heading",type:"flags.0?int"},{name:"period",type:"flags.1?int"},{name:"proximity_notification_radius",type:"flags.3?int"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:-1970903652,predicate:"botInlineMessageMediaVenue",params:[{name:"flags",type:"#"},{name:"geo",type:"GeoPoint"},{name:"title",type:"string"},{name:"address",type:"string"},{name:"provider",type:"string"},{name:"venue_id",type:"string"},{name:"venue_type",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:416402882,predicate:"botInlineMessageMediaContact",params:[{name:"flags",type:"#"},{name:"phone_number",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"vcard",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:-1462213465,predicate:"inputBotInlineResultPhoto",params:[{name:"id",type:"string"},{name:"type",type:"string"},{name:"photo",type:"InputPhoto"},{name:"send_message",type:"InputBotInlineMessage"}],type:"InputBotInlineResult"},{id:-459324,predicate:"inputBotInlineResultDocument",params:[{name:"flags",type:"#"},{name:"id",type:"string"},{name:"type",type:"string"},{name:"title",type:"flags.1?string"},{name:"description",type:"flags.2?string"},{name:"document",type:"InputDocument"},{name:"send_message",type:"InputBotInlineMessage"}],type:"InputBotInlineResult"},{id:400266251,predicate:"botInlineMediaResult",params:[{name:"flags",type:"#"},{name:"id",type:"string"},{name:"type",type:"string"},{name:"photo",type:"flags.0?Photo"},{name:"document",type:"flags.1?Document"},{name:"title",type:"flags.2?string"},{name:"description",type:"flags.3?string"},{name:"send_message",type:"BotInlineMessage"}],type:"BotInlineResult"},{id:-1995686519,predicate:"inputBotInlineMessageID",params:[{name:"dc_id",type:"int"},{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputBotInlineMessageID"},{id:1763610706,predicate:"updateInlineBotCallbackQuery",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"msg_id",type:"InputBotInlineMessageID"},{name:"chat_instance",type:"long"},{name:"data",type:"flags.0?bytes"},{name:"game_short_name",type:"flags.1?string"}],type:"Update"},{id:1008755359,predicate:"inlineBotSwitchPM",params:[{name:"text",type:"string"},{name:"start_param",type:"string"}],type:"InlineBotSwitchPM"},{id:863093588,predicate:"messages.peerDialogs",params:[{name:"dialogs",type:"Vector<Dialog>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"state",type:"updates.State"}],type:"messages.PeerDialogs"},{id:-305282981,predicate:"topPeer",params:[{name:"peer",type:"Peer"},{name:"rating",type:"double"}],type:"TopPeer"},{id:-1419371685,predicate:"topPeerCategoryBotsPM",params:[],type:"TopPeerCategory"},{id:344356834,predicate:"topPeerCategoryBotsInline",params:[],type:"TopPeerCategory"},{id:104314861,predicate:"topPeerCategoryCorrespondents",params:[],type:"TopPeerCategory"},{id:-1122524854,predicate:"topPeerCategoryGroups",params:[],type:"TopPeerCategory"},{id:371037736,predicate:"topPeerCategoryChannels",params:[],type:"TopPeerCategory"},{id:-75283823,predicate:"topPeerCategoryPeers",params:[{name:"category",type:"TopPeerCategory"},{name:"count",type:"int"},{name:"peers",type:"Vector<TopPeer>"}],type:"TopPeerCategoryPeers"},{id:-567906571,predicate:"contacts.topPeersNotModified",params:[],type:"contacts.TopPeers"},{id:1891070632,predicate:"contacts.topPeers",params:[{name:"categories",type:"Vector<TopPeerCategoryPeers>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.TopPeers"},{id:-595914432,predicate:"messageEntityMentionName",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"user_id",type:"long"}],type:"MessageEntity"},{id:546203849,predicate:"inputMessageEntityMentionName",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"user_id",type:"InputUser"}],type:"MessageEntity"},{id:975236280,predicate:"inputMessagesFilterChatPhotos",params:[],type:"MessagesFilter"},{id:-1218471511,predicate:"updateReadChannelOutbox",params:[{name:"channel_id",type:"long"},{name:"max_id",type:"int"}],type:"Update"},{id:457829485,predicate:"updateDraftMessage",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"top_msg_id",type:"flags.0?int"},{name:"draft",type:"DraftMessage"}],type:"Update"},{id:453805082,predicate:"draftMessageEmpty",params:[{name:"flags",type:"#"},{name:"date",type:"flags.0?int"}],type:"DraftMessage"},{id:1070397423,predicate:"draftMessage",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"invert_media",type:"flags.6?true"},{name:"reply_to",type:"flags.4?InputReplyTo"},{name:"message",type:"string"},{name:"entities",type:"flags.3?Vector<MessageEntity>"},{name:"media",type:"flags.5?InputMedia"},{name:"date",type:"int"}],type:"DraftMessage"},{id:-1615153660,predicate:"messageActionHistoryClear",params:[],type:"MessageAction"},{id:-958657434,predicate:"messages.featuredStickersNotModified",params:[{name:"count",type:"int"}],type:"messages.FeaturedStickers"},{id:-1103615738,predicate:"messages.featuredStickers",params:[{name:"flags",type:"#"},{name:"premium",type:"flags.0?true"},{name:"hash",type:"long"},{name:"count",type:"int"},{name:"sets",type:"Vector<StickerSetCovered>"},{name:"unread",type:"Vector<long>"}],type:"messages.FeaturedStickers"},{id:1461528386,predicate:"updateReadFeaturedStickers",params:[],type:"Update"},{id:186120336,predicate:"messages.recentStickersNotModified",params:[],type:"messages.RecentStickers"},{id:-1999405994,predicate:"messages.recentStickers",params:[{name:"hash",type:"long"},{name:"packs",type:"Vector<StickerPack>"},{name:"stickers",type:"Vector<Document>"},{name:"dates",type:"Vector<int>"}],type:"messages.RecentStickers"},{id:-1706939360,predicate:"updateRecentStickers",params:[],type:"Update"},{id:1338747336,predicate:"messages.archivedStickers",params:[{name:"count",type:"int"},{name:"sets",type:"Vector<StickerSetCovered>"}],type:"messages.ArchivedStickers"},{id:946083368,predicate:"messages.stickerSetInstallResultSuccess",params:[],type:"messages.StickerSetInstallResult"},{id:904138920,predicate:"messages.stickerSetInstallResultArchive",params:[{name:"sets",type:"Vector<StickerSetCovered>"}],type:"messages.StickerSetInstallResult"},{id:1678812626,predicate:"stickerSetCovered",params:[{name:"set",type:"StickerSet"},{name:"cover",type:"Document"}],type:"StickerSetCovered"},{id:-1574314746,predicate:"updateConfig",params:[],type:"Update"},{id:861169551,predicate:"updatePtsChanged",params:[],type:"Update"},{id:-440664550,predicate:"inputMediaPhotoExternal",params:[{name:"flags",type:"#"},{name:"spoiler",type:"flags.1?true"},{name:"url",type:"string"},{name:"ttl_seconds",type:"flags.0?int"}],type:"InputMedia"},{id:-78455655,predicate:"inputMediaDocumentExternal",params:[{name:"flags",type:"#"},{name:"spoiler",type:"flags.1?true"},{name:"url",type:"string"},{name:"ttl_seconds",type:"flags.0?int"}],type:"InputMedia"},{id:872932635,predicate:"stickerSetMultiCovered",params:[{name:"set",type:"StickerSet"},{name:"covers",type:"Vector<Document>"}],type:"StickerSetCovered"},{id:-1361650766,predicate:"maskCoords",params:[{name:"n",type:"int"},{name:"x",type:"double"},{name:"y",type:"double"},{name:"zoom",type:"double"}],type:"MaskCoords"},{id:-1744710921,predicate:"documentAttributeHasStickers",params:[],type:"DocumentAttribute"},{id:1251549527,predicate:"inputStickeredMediaPhoto",params:[{name:"id",type:"InputPhoto"}],type:"InputStickeredMedia"},{id:70813275,predicate:"inputStickeredMediaDocument",params:[{name:"id",type:"InputDocument"}],type:"InputStickeredMedia"},{id:-1107729093,predicate:"game",params:[{name:"flags",type:"#"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"short_name",type:"string"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"Photo"},{name:"document",type:"flags.0?Document"}],type:"Game"},{id:1336154098,predicate:"inputBotInlineResultGame",params:[{name:"id",type:"string"},{name:"short_name",type:"string"},{name:"send_message",type:"InputBotInlineMessage"}],type:"InputBotInlineResult"},{id:1262639204,predicate:"inputBotInlineMessageGame",params:[{name:"flags",type:"#"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:-38694904,predicate:"messageMediaGame",params:[{name:"game",type:"Game"}],type:"MessageMedia"},{id:-750828557,predicate:"inputMediaGame",params:[{name:"id",type:"InputGame"}],type:"InputMedia"},{id:53231223,predicate:"inputGameID",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputGame"},{id:-1020139510,predicate:"inputGameShortName",params:[{name:"bot_id",type:"InputUser"},{name:"short_name",type:"string"}],type:"InputGame"},{id:1358175439,predicate:"keyboardButtonGame",params:[{name:"text",type:"string"}],type:"KeyboardButton"},{id:-1834538890,predicate:"messageActionGameScore",params:[{name:"game_id",type:"long"},{name:"score",type:"int"}],type:"MessageAction"},{id:1940093419,predicate:"highScore",params:[{name:"pos",type:"int"},{name:"user_id",type:"long"},{name:"score",type:"int"}],type:"HighScore"},{id:-1707344487,predicate:"messages.highScores",params:[{name:"scores",type:"Vector<HighScore>"},{name:"users",type:"Vector<User>"}],type:"messages.HighScores"},{id:1258196845,predicate:"updates.differenceTooLong",params:[{name:"pts",type:"int"}],type:"updates.Difference"},{id:791390623,predicate:"updateChannelWebPage",params:[{name:"channel_id",type:"long"},{name:"webpage",type:"WebPage"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-1663561404,predicate:"messages.chatsSlice",params:[{name:"count",type:"int"},{name:"chats",type:"Vector<Chat>"}],type:"messages.Chats"},{id:-599948721,predicate:"textEmpty",params:[],type:"RichText"},{id:1950782688,predicate:"textPlain",params:[{name:"text",type:"string"}],type:"RichText"},{id:1730456516,predicate:"textBold",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:-653089380,predicate:"textItalic",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:-1054465340,predicate:"textUnderline",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:-1678197867,predicate:"textStrike",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:1816074681,predicate:"textFixed",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:1009288385,predicate:"textUrl",params:[{name:"text",type:"RichText"},{name:"url",type:"string"},{name:"webpage_id",type:"long"}],type:"RichText"},{id:-564523562,predicate:"textEmail",params:[{name:"text",type:"RichText"},{name:"email",type:"string"}],type:"RichText"},{id:2120376535,predicate:"textConcat",params:[{name:"texts",type:"Vector<RichText>"}],type:"RichText"},{id:324435594,predicate:"pageBlockUnsupported",params:[],type:"PageBlock"},{id:1890305021,predicate:"pageBlockTitle",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-1879401953,predicate:"pageBlockSubtitle",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-1162877472,predicate:"pageBlockAuthorDate",params:[{name:"author",type:"RichText"},{name:"published_date",type:"int"}],type:"PageBlock"},{id:-1076861716,predicate:"pageBlockHeader",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-248793375,predicate:"pageBlockSubheader",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:1182402406,predicate:"pageBlockParagraph",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-1066346178,predicate:"pageBlockPreformatted",params:[{name:"text",type:"RichText"},{name:"language",type:"string"}],type:"PageBlock"},{id:1216809369,predicate:"pageBlockFooter",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-618614392,predicate:"pageBlockDivider",params:[],type:"PageBlock"},{id:-837994576,predicate:"pageBlockAnchor",params:[{name:"name",type:"string"}],type:"PageBlock"},{id:-454524911,predicate:"pageBlockList",params:[{name:"items",type:"Vector<PageListItem>"}],type:"PageBlock"},{id:641563686,predicate:"pageBlockBlockquote",params:[{name:"text",type:"RichText"},{name:"caption",type:"RichText"}],type:"PageBlock"},{id:1329878739,predicate:"pageBlockPullquote",params:[{name:"text",type:"RichText"},{name:"caption",type:"RichText"}],type:"PageBlock"},{id:391759200,predicate:"pageBlockPhoto",params:[{name:"flags",type:"#"},{name:"photo_id",type:"long"},{name:"caption",type:"PageCaption"},{name:"url",type:"flags.0?string"},{name:"webpage_id",type:"flags.0?long"}],type:"PageBlock"},{id:2089805750,predicate:"pageBlockVideo",params:[{name:"flags",type:"#"},{name:"autoplay",type:"flags.0?true"},{name:"loop",type:"flags.1?true"},{name:"video_id",type:"long"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:972174080,predicate:"pageBlockCover",params:[{name:"cover",type:"PageBlock"}],type:"PageBlock"},{id:-1468953147,predicate:"pageBlockEmbed",params:[{name:"flags",type:"#"},{name:"full_width",type:"flags.0?true"},{name:"allow_scrolling",type:"flags.3?true"},{name:"url",type:"flags.1?string"},{name:"html",type:"flags.2?string"},{name:"poster_photo_id",type:"flags.4?long"},{name:"w",type:"flags.5?int"},{name:"h",type:"flags.5?int"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:-229005301,predicate:"pageBlockEmbedPost",params:[{name:"url",type:"string"},{name:"webpage_id",type:"long"},{name:"author_photo_id",type:"long"},{name:"author",type:"string"},{name:"date",type:"int"},{name:"blocks",type:"Vector<PageBlock>"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:1705048653,predicate:"pageBlockCollage",params:[{name:"items",type:"Vector<PageBlock>"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:52401552,predicate:"pageBlockSlideshow",params:[{name:"items",type:"Vector<PageBlock>"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:1930545681,predicate:"webPageNotModified",params:[{name:"flags",type:"#"},{name:"cached_page_views",type:"flags.0?int"}],type:"WebPage"},{id:-88417185,predicate:"inputPrivacyKeyPhoneCall",params:[],type:"InputPrivacyKey"},{id:1030105979,predicate:"privacyKeyPhoneCall",params:[],type:"PrivacyKey"},{id:-580219064,predicate:"sendMessageGamePlayAction",params:[],type:"SendMessageAction"},{id:-2048646399,predicate:"phoneCallDiscardReasonMissed",params:[],type:"PhoneCallDiscardReason"},{id:-527056480,predicate:"phoneCallDiscardReasonDisconnect",params:[],type:"PhoneCallDiscardReason"},{id:1471006352,predicate:"phoneCallDiscardReasonHangup",params:[],type:"PhoneCallDiscardReason"},{id:-84416311,predicate:"phoneCallDiscardReasonBusy",params:[],type:"PhoneCallDiscardReason"},{id:1852826908,predicate:"updateDialogPinned",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"folder_id",type:"flags.1?int"},{name:"peer",type:"DialogPeer"}],type:"Update"},{id:-99664734,predicate:"updatePinnedDialogs",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.1?int"},{name:"order",type:"flags.0?Vector<DialogPeer>"}],type:"Update"},{id:2104790276,predicate:"dataJSON",params:[{name:"data",type:"string"}],type:"DataJSON"},{id:-2095595325,predicate:"updateBotWebhookJSON",params:[{name:"data",type:"DataJSON"}],type:"Update"},{id:-1684914010,predicate:"updateBotWebhookJSONQuery",params:[{name:"query_id",type:"long"},{name:"data",type:"DataJSON"},{name:"timeout",type:"int"}],type:"Update"},{id:-886477832,predicate:"labeledPrice",params:[{name:"label",type:"string"},{name:"amount",type:"long"}],type:"LabeledPrice"},{id:1572428309,predicate:"invoice",params:[{name:"flags",type:"#"},{name:"test",type:"flags.0?true"},{name:"name_requested",type:"flags.1?true"},{name:"phone_requested",type:"flags.2?true"},{name:"email_requested",type:"flags.3?true"},{name:"shipping_address_requested",type:"flags.4?true"},{name:"flexible",type:"flags.5?true"},{name:"phone_to_provider",type:"flags.6?true"},{name:"email_to_provider",type:"flags.7?true"},{name:"recurring",type:"flags.9?true"},{name:"currency",type:"string"},{name:"prices",type:"Vector<LabeledPrice>"},{name:"max_tip_amount",type:"flags.8?long"},{name:"suggested_tip_amounts",type:"flags.8?Vector<long>"},{name:"terms_url",type:"flags.10?string"}],type:"Invoice"},{id:-1900697899,predicate:"inputMediaInvoice",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.0?InputWebDocument"},{name:"invoice",type:"Invoice"},{name:"payload",type:"bytes"},{name:"provider",type:"string"},{name:"provider_data",type:"DataJSON"},{name:"start_param",type:"flags.1?string"},{name:"extended_media",type:"flags.2?InputMedia"}],type:"InputMedia"},{id:-368917890,predicate:"paymentCharge",params:[{name:"id",type:"string"},{name:"provider_charge_id",type:"string"}],type:"PaymentCharge"},{id:-1892568281,predicate:"messageActionPaymentSentMe",params:[{name:"flags",type:"#"},{name:"recurring_init",type:"flags.2?true"},{name:"recurring_used",type:"flags.3?true"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"payload",type:"bytes"},{name:"info",type:"flags.0?PaymentRequestedInfo"},{name:"shipping_option_id",type:"flags.1?string"},{name:"charge",type:"PaymentCharge"}],type:"MessageAction"},{id:-156940077,predicate:"messageMediaInvoice",params:[{name:"flags",type:"#"},{name:"shipping_address_requested",type:"flags.1?true"},{name:"test",type:"flags.3?true"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.0?WebDocument"},{name:"receipt_msg_id",type:"flags.2?int"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"start_param",type:"string"},{name:"extended_media",type:"flags.4?MessageExtendedMedia"}],type:"MessageMedia"},{id:512535275,predicate:"postAddress",params:[{name:"street_line1",type:"string"},{name:"street_line2",type:"string"},{name:"city",type:"string"},{name:"state",type:"string"},{name:"country_iso2",type:"string"},{name:"post_code",type:"string"}],type:"PostAddress"},{id:-1868808300,predicate:"paymentRequestedInfo",params:[{name:"flags",type:"#"},{name:"name",type:"flags.0?string"},{name:"phone",type:"flags.1?string"},{name:"email",type:"flags.2?string"},{name:"shipping_address",type:"flags.3?PostAddress"}],type:"PaymentRequestedInfo"},{id:-1344716869,predicate:"keyboardButtonBuy",params:[{name:"text",type:"string"}],type:"KeyboardButton"},{id:-1776926890,predicate:"messageActionPaymentSent",params:[{name:"flags",type:"#"},{name:"recurring_init",type:"flags.2?true"},{name:"recurring_used",type:"flags.3?true"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"invoice_slug",type:"flags.0?string"}],type:"MessageAction"},{id:-842892769,predicate:"paymentSavedCredentialsCard",params:[{name:"id",type:"string"},{name:"title",type:"string"}],type:"PaymentSavedCredentials"},{id:475467473,predicate:"webDocument",params:[{name:"url",type:"string"},{name:"access_hash",type:"long"},{name:"size",type:"int"},{name:"mime_type",type:"string"},{name:"attributes",type:"Vector<DocumentAttribute>"}],type:"WebDocument"},{id:-1678949555,predicate:"inputWebDocument",params:[{name:"url",type:"string"},{name:"size",type:"int"},{name:"mime_type",type:"string"},{name:"attributes",type:"Vector<DocumentAttribute>"}],type:"InputWebDocument"},{id:-1036396922,predicate:"inputWebFileLocation",params:[{name:"url",type:"string"},{name:"access_hash",type:"long"}],type:"InputWebFileLocation"},{id:568808380,predicate:"upload.webFile",params:[{name:"size",type:"int"},{name:"mime_type",type:"string"},{name:"file_type",type:"storage.FileType"},{name:"mtime",type:"int"},{name:"bytes",type:"bytes"}],type:"upload.WebFile"},{id:-1610250415,predicate:"payments.paymentForm",params:[{name:"flags",type:"#"},{name:"can_save_credentials",type:"flags.2?true"},{name:"password_missing",type:"flags.3?true"},{name:"form_id",type:"long"},{name:"bot_id",type:"long"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.5?WebDocument"},{name:"invoice",type:"Invoice"},{name:"provider_id",type:"long"},{name:"url",type:"string"},{name:"native_provider",type:"flags.4?string"},{name:"native_params",type:"flags.4?DataJSON"},{name:"additional_methods",type:"flags.6?Vector<PaymentFormMethod>"},{name:"saved_info",type:"flags.0?PaymentRequestedInfo"},{name:"saved_credentials",type:"flags.1?Vector<PaymentSavedCredentials>"},{name:"users",type:"Vector<User>"}],type:"payments.PaymentForm"},{id:-784000893,predicate:"payments.validatedRequestedInfo",params:[{name:"flags",type:"#"},{name:"id",type:"flags.0?string"},{name:"shipping_options",type:"flags.1?Vector<ShippingOption>"}],type:"payments.ValidatedRequestedInfo"},{id:1314881805,predicate:"payments.paymentResult",params:[{name:"updates",type:"Updates"}],type:"payments.PaymentResult"},{id:1891958275,predicate:"payments.paymentReceipt",params:[{name:"flags",type:"#"},{name:"date",type:"int"},{name:"bot_id",type:"long"},{name:"provider_id",type:"long"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.2?WebDocument"},{name:"invoice",type:"Invoice"},{name:"info",type:"flags.0?PaymentRequestedInfo"},{name:"shipping",type:"flags.1?ShippingOption"},{name:"tip_amount",type:"flags.3?long"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"credentials_title",type:"string"},{name:"users",type:"Vector<User>"}],type:"payments.PaymentReceipt"},{id:-74456004,predicate:"payments.savedInfo",params:[{name:"flags",type:"#"},{name:"has_saved_credentials",type:"flags.1?true"},{name:"saved_info",type:"flags.0?PaymentRequestedInfo"}],type:"payments.SavedInfo"},{id:-1056001329,predicate:"inputPaymentCredentialsSaved",params:[{name:"id",type:"string"},{name:"tmp_password",type:"bytes"}],type:"InputPaymentCredentials"},{id:873977640,predicate:"inputPaymentCredentials",params:[{name:"flags",type:"#"},{name:"save",type:"flags.0?true"},{name:"data",type:"DataJSON"}],type:"InputPaymentCredentials"},{id:-614138572,predicate:"account.tmpPassword",params:[{name:"tmp_password",type:"bytes"},{name:"valid_until",type:"int"}],type:"account.TmpPassword"},{id:-1239335713,predicate:"shippingOption",params:[{name:"id",type:"string"},{name:"title",type:"string"},{name:"prices",type:"Vector<LabeledPrice>"}],type:"ShippingOption"},{id:-1246823043,predicate:"updateBotShippingQuery",params:[{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"payload",type:"bytes"},{name:"shipping_address",type:"PostAddress"}],type:"Update"},{id:-1934976362,predicate:"updateBotPrecheckoutQuery",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"payload",type:"bytes"},{name:"info",type:"flags.0?PaymentRequestedInfo"},{name:"shipping_option_id",type:"flags.1?string"},{name:"currency",type:"string"},{name:"total_amount",type:"long"}],type:"Update"},{id:853188252,predicate:"inputStickerSetItem",params:[{name:"flags",type:"#"},{name:"document",type:"InputDocument"},{name:"emoji",type:"string"},{name:"mask_coords",type:"flags.0?MaskCoords"},{name:"keywords",type:"flags.1?string"}],type:"InputStickerSetItem"},{id:-1425052898,predicate:"updatePhoneCall",params:[{name:"phone_call",type:"PhoneCall"}],type:"Update"},{id:506920429,predicate:"inputPhoneCall",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputPhoneCall"},{id:1399245077,predicate:"phoneCallEmpty",params:[{name:"id",type:"long"}],type:"PhoneCall"},{id:-987599081,predicate:"phoneCallWaiting",params:[{name:"flags",type:"#"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"protocol",type:"PhoneCallProtocol"},{name:"receive_date",type:"flags.0?int"}],type:"PhoneCall"},{id:347139340,predicate:"phoneCallRequested",params:[{name:"flags",type:"#"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_a_hash",type:"bytes"},{name:"protocol",type:"PhoneCallProtocol"}],type:"PhoneCall"},{id:912311057,predicate:"phoneCallAccepted",params:[{name:"flags",type:"#"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_b",type:"bytes"},{name:"protocol",type:"PhoneCallProtocol"}],type:"PhoneCall"},{id:810769141,predicate:"phoneCall",params:[{name:"flags",type:"#"},{name:"p2p_allowed",type:"flags.5?true"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_a_or_b",type:"bytes"},{name:"key_fingerprint",type:"long"},{name:"protocol",type:"PhoneCallProtocol"},{name:"connections",type:"Vector<PhoneConnection>"},{name:"start_date",type:"int"},{name:"custom_parameters",type:"flags.7?DataJSON"}],type:"PhoneCall"},{id:1355435489,predicate:"phoneCallDiscarded",params:[{name:"flags",type:"#"},{name:"need_rating",type:"flags.2?true"},{name:"need_debug",type:"flags.3?true"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"reason",type:"flags.0?PhoneCallDiscardReason"},{name:"duration",type:"flags.1?int"}],type:"PhoneCall"},{id:-1665063993,predicate:"phoneConnection",params:[{name:"flags",type:"#"},{name:"tcp",type:"flags.0?true"},{name:"id",type:"long"},{name:"ip",type:"string"},{name:"ipv6",type:"string"},{name:"port",type:"int"},{name:"peer_tag",type:"bytes"}],type:"PhoneConnection"},{id:-58224696,predicate:"phoneCallProtocol",params:[{name:"flags",type:"#"},{name:"udp_p2p",type:"flags.0?true"},{name:"udp_reflector",type:"flags.1?true"},{name:"min_layer",type:"int"},{name:"max_layer",type:"int"},{name:"library_versions",type:"Vector<string>"}],type:"PhoneCallProtocol"},{id:-326966976,predicate:"phone.phoneCall",params:[{name:"phone_call",type:"PhoneCall"},{name:"users",type:"Vector<User>"}],type:"phone.PhoneCall"},{id:-2134272152,predicate:"inputMessagesFilterPhoneCalls",params:[{name:"flags",type:"#"},{name:"missed",type:"flags.0?true"}],type:"MessagesFilter"},{id:-2132731265,predicate:"messageActionPhoneCall",params:[{name:"flags",type:"#"},{name:"video",type:"flags.2?true"},{name:"call_id",type:"long"},{name:"reason",type:"flags.0?PhoneCallDiscardReason"},{name:"duration",type:"flags.1?int"}],type:"MessageAction"},{id:2054952868,predicate:"inputMessagesFilterRoundVoice",params:[],type:"MessagesFilter"},{id:-1253451181,predicate:"inputMessagesFilterRoundVideo",params:[],type:"MessagesFilter"},{id:-1997373508,predicate:"sendMessageRecordRoundAction",params:[],type:"SendMessageAction"},{id:608050278,predicate:"sendMessageUploadRoundAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:-242427324,predicate:"upload.fileCdnRedirect",params:[{name:"dc_id",type:"int"},{name:"file_token",type:"bytes"},{name:"encryption_key",type:"bytes"},{name:"encryption_iv",type:"bytes"},{name:"file_hashes",type:"Vector<FileHash>"}],type:"upload.File"},{id:-290921362,predicate:"upload.cdnFileReuploadNeeded",params:[{name:"request_token",type:"bytes"}],type:"upload.CdnFile"},{id:-1449145777,predicate:"upload.cdnFile",params:[{name:"bytes",type:"bytes"}],type:"upload.CdnFile"},{id:-914167110,predicate:"cdnPublicKey",params:[{name:"dc_id",type:"int"},{name:"public_key",type:"string"}],type:"CdnPublicKey"},{id:1462101002,predicate:"cdnConfig",params:[{name:"public_keys",type:"Vector<CdnPublicKey>"}],type:"CdnConfig"},{id:-283684427,predicate:"pageBlockChannel",params:[{name:"channel",type:"Chat"}],type:"PageBlock"},{id:-892239370,predicate:"langPackString",params:[{name:"key",type:"string"},{name:"value",type:"string"}],type:"LangPackString"},{id:1816636575,predicate:"langPackStringPluralized",params:[{name:"flags",type:"#"},{name:"key",type:"string"},{name:"zero_value",type:"flags.0?string"},{name:"one_value",type:"flags.1?string"},{name:"two_value",type:"flags.2?string"},{name:"few_value",type:"flags.3?string"},{name:"many_value",type:"flags.4?string"},{name:"other_value",type:"string"}],type:"LangPackString"},{id:695856818,predicate:"langPackStringDeleted",params:[{name:"key",type:"string"}],type:"LangPackString"},{id:-209337866,predicate:"langPackDifference",params:[{name:"lang_code",type:"string"},{name:"from_version",type:"int"},{name:"version",type:"int"},{name:"strings",type:"Vector<LangPackString>"}],type:"LangPackDifference"},{id:-288727837,predicate:"langPackLanguage",params:[{name:"flags",type:"#"},{name:"official",type:"flags.0?true"},{name:"rtl",type:"flags.2?true"},{name:"beta",type:"flags.3?true"},{name:"name",type:"string"},{name:"native_name",type:"string"},{name:"lang_code",type:"string"},{name:"base_lang_code",type:"flags.1?string"},{name:"plural_code",type:"string"},{name:"strings_count",type:"int"},{name:"translated_count",type:"int"},{name:"translations_url",type:"string"}],type:"LangPackLanguage"},{id:1180041828,predicate:"updateLangPackTooLong",params:[{name:"lang_code",type:"string"}],type:"Update"},{id:1442983757,predicate:"updateLangPack",params:[{name:"difference",type:"LangPackDifference"}],type:"Update"},{id:885242707,predicate:"channelParticipantAdmin",params:[{name:"flags",type:"#"},{name:"can_edit",type:"flags.0?true"},{name:"self",type:"flags.1?true"},{name:"user_id",type:"long"},{name:"inviter_id",type:"flags.1?long"},{name:"promoted_by",type:"long"},{name:"date",type:"int"},{name:"admin_rights",type:"ChatAdminRights"},{name:"rank",type:"flags.2?string"}],type:"ChannelParticipant"},{id:1844969806,predicate:"channelParticipantBanned",params:[{name:"flags",type:"#"},{name:"left",type:"flags.0?true"},{name:"peer",type:"Peer"},{name:"kicked_by",type:"long"},{name:"date",type:"int"},{name:"banned_rights",type:"ChatBannedRights"}],type:"ChannelParticipant"},{id:338142689,predicate:"channelParticipantsBanned",params:[{name:"q",type:"string"}],type:"ChannelParticipantsFilter"},{id:106343499,predicate:"channelParticipantsSearch",params:[{name:"q",type:"string"}],type:"ChannelParticipantsFilter"},{id:-421545947,predicate:"channelAdminLogEventActionChangeTitle",params:[{name:"prev_value",type:"string"},{name:"new_value",type:"string"}],type:"ChannelAdminLogEventAction"},{id:1427671598,predicate:"channelAdminLogEventActionChangeAbout",params:[{name:"prev_value",type:"string"},{name:"new_value",type:"string"}],type:"ChannelAdminLogEventAction"},{id:1783299128,predicate:"channelAdminLogEventActionChangeUsername",params:[{name:"prev_value",type:"string"},{name:"new_value",type:"string"}],type:"ChannelAdminLogEventAction"},{id:1129042607,predicate:"channelAdminLogEventActionChangePhoto",params:[{name:"prev_photo",type:"Photo"},{name:"new_photo",type:"Photo"}],type:"ChannelAdminLogEventAction"},{id:460916654,predicate:"channelAdminLogEventActionToggleInvites",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:648939889,predicate:"channelAdminLogEventActionToggleSignatures",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:-370660328,predicate:"channelAdminLogEventActionUpdatePinned",params:[{name:"message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:1889215493,predicate:"channelAdminLogEventActionEditMessage",params:[{name:"prev_message",type:"Message"},{name:"new_message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:1121994683,predicate:"channelAdminLogEventActionDeleteMessage",params:[{name:"message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:405815507,predicate:"channelAdminLogEventActionParticipantJoin",params:[],type:"ChannelAdminLogEventAction"},{id:-124291086,predicate:"channelAdminLogEventActionParticipantLeave",params:[],type:"ChannelAdminLogEventAction"},{id:-484690728,predicate:"channelAdminLogEventActionParticipantInvite",params:[{name:"participant",type:"ChannelParticipant"}],type:"ChannelAdminLogEventAction"},{id:-422036098,predicate:"channelAdminLogEventActionParticipantToggleBan",params:[{name:"prev_participant",type:"ChannelParticipant"},{name:"new_participant",type:"ChannelParticipant"}],type:"ChannelAdminLogEventAction"},{id:-714643696,predicate:"channelAdminLogEventActionParticipantToggleAdmin",params:[{name:"prev_participant",type:"ChannelParticipant"},{name:"new_participant",type:"ChannelParticipant"}],type:"ChannelAdminLogEventAction"},{id:531458253,predicate:"channelAdminLogEvent",params:[{name:"id",type:"long"},{name:"date",type:"int"},{name:"user_id",type:"long"},{name:"action",type:"ChannelAdminLogEventAction"}],type:"ChannelAdminLogEvent"},{id:-309659827,predicate:"channels.adminLogResults",params:[{name:"events",type:"Vector<ChannelAdminLogEvent>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"channels.AdminLogResults"},{id:-368018716,predicate:"channelAdminLogEventsFilter",params:[{name:"flags",type:"#"},{name:"join",type:"flags.0?true"},{name:"leave",type:"flags.1?true"},{name:"invite",type:"flags.2?true"},{name:"ban",type:"flags.3?true"},{name:"unban",type:"flags.4?true"},{name:"kick",type:"flags.5?true"},{name:"unkick",type:"flags.6?true"},{name:"promote",type:"flags.7?true"},{name:"demote",type:"flags.8?true"},{name:"info",type:"flags.9?true"},{name:"settings",type:"flags.10?true"},{name:"pinned",type:"flags.11?true"},{name:"edit",type:"flags.12?true"},{name:"delete",type:"flags.13?true"},{name:"group_call",type:"flags.14?true"},{name:"invites",type:"flags.15?true"},{name:"send",type:"flags.16?true"},{name:"forums",type:"flags.17?true"}],type:"ChannelAdminLogEventsFilter"},{id:511092620,predicate:"topPeerCategoryPhoneCalls",params:[],type:"TopPeerCategory"},{id:-2143067670,predicate:"pageBlockAudio",params:[{name:"audio_id",type:"long"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:1558266229,predicate:"popularContact",params:[{name:"client_id",type:"long"},{name:"importers",type:"int"}],type:"PopularContact"},{id:1200788123,predicate:"messageActionScreenshotTaken",params:[],type:"MessageAction"},{id:-1634752813,predicate:"messages.favedStickersNotModified",params:[],type:"messages.FavedStickers"},{id:750063767,predicate:"messages.favedStickers",params:[{name:"hash",type:"long"},{name:"packs",type:"Vector<StickerPack>"},{name:"stickers",type:"Vector<Document>"}],type:"messages.FavedStickers"},{id:-451831443,predicate:"updateFavedStickers",params:[],type:"Update"},{id:-366410403,predicate:"updateChannelReadMessagesContents",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"top_msg_id",type:"flags.0?int"},{name:"messages",type:"Vector<int>"}],type:"Update"},{id:-1040652646,predicate:"inputMessagesFilterMyMentions",params:[],type:"MessagesFilter"},{id:1887741886,predicate:"updateContactsReset",params:[],type:"Update"},{id:-1312568665,predicate:"channelAdminLogEventActionChangeStickerSet",params:[{name:"prev_stickerset",type:"InputStickerSet"},{name:"new_stickerset",type:"InputStickerSet"}],type:"ChannelAdminLogEventAction"},{id:-85549226,predicate:"messageActionCustomAction",params:[{name:"message",type:"string"}],type:"MessageAction"},{id:178373535,predicate:"inputPaymentCredentialsApplePay",params:[{name:"payment_data",type:"DataJSON"}],type:"InputPaymentCredentials"},{id:-419271411,predicate:"inputMessagesFilterGeo",params:[],type:"MessagesFilter"},{id:-530392189,predicate:"inputMessagesFilterContacts",params:[],type:"MessagesFilter"},{id:-1304443240,predicate:"updateChannelAvailableMessages",params:[{name:"channel_id",type:"long"},{name:"available_min_id",type:"int"}],type:"Update"},{id:1599903217,predicate:"channelAdminLogEventActionTogglePreHistoryHidden",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:-1759532989,predicate:"inputMediaGeoLive",params:[{name:"flags",type:"#"},{name:"stopped",type:"flags.0?true"},{name:"geo_point",type:"InputGeoPoint"},{name:"heading",type:"flags.2?int"},{name:"period",type:"flags.1?int"},{name:"proximity_notification_radius",type:"flags.3?int"}],type:"InputMedia"},{id:-1186937242,predicate:"messageMediaGeoLive",params:[{name:"flags",type:"#"},{name:"geo",type:"GeoPoint"},{name:"heading",type:"flags.0?int"},{name:"period",type:"int"},{name:"proximity_notification_radius",type:"flags.1?int"}],type:"MessageMedia"},{id:1189204285,predicate:"recentMeUrlUnknown",params:[{name:"url",type:"string"}],type:"RecentMeUrl"},{id:-1188296222,predicate:"recentMeUrlUser",params:[{name:"url",type:"string"},{name:"user_id",type:"long"}],type:"RecentMeUrl"},{id:-1294306862,predicate:"recentMeUrlChat",params:[{name:"url",type:"string"},{name:"chat_id",type:"long"}],type:"RecentMeUrl"},{id:-347535331,predicate:"recentMeUrlChatInvite",params:[{name:"url",type:"string"},{name:"chat_invite",type:"ChatInvite"}],type:"RecentMeUrl"},{id:-1140172836,predicate:"recentMeUrlStickerSet",params:[{name:"url",type:"string"},{name:"set",type:"StickerSetCovered"}],type:"RecentMeUrl"},{id:235081943,predicate:"help.recentMeUrls",params:[{name:"urls",type:"Vector<RecentMeUrl>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"help.RecentMeUrls"},{id:-266911767,predicate:"channels.channelParticipantsNotModified",params:[],type:"channels.ChannelParticipants"},{id:1951620897,predicate:"messages.messagesNotModified",params:[{name:"count",type:"int"}],type:"messages.Messages"},{id:482797855,predicate:"inputSingleMedia",params:[{name:"flags",type:"#"},{name:"media",type:"InputMedia"},{name:"random_id",type:"long"},{name:"message",type:"string"},{name:"entities",type:"flags.0?Vector<MessageEntity>"}],type:"InputSingleMedia"},{id:-1493633966,predicate:"webAuthorization",params:[{name:"hash",type:"long"},{name:"bot_id",type:"long"},{name:"domain",type:"string"},{name:"browser",type:"string"},{name:"platform",type:"string"},{name:"date_created",type:"int"},{name:"date_active",type:"int"},{name:"ip",type:"string"},{name:"region",type:"string"}],type:"WebAuthorization"},{id:-313079300,predicate:"account.webAuthorizations",params:[{name:"authorizations",type:"Vector<WebAuthorization>"},{name:"users",type:"Vector<User>"}],type:"account.WebAuthorizations"},{id:-1502174430,predicate:"inputMessageID",params:[{name:"id",type:"int"}],type:"InputMessage"},{id:-1160215659,predicate:"inputMessageReplyTo",params:[{name:"id",type:"int"}],type:"InputMessage"},{id:-2037963464,predicate:"inputMessagePinned",params:[],type:"InputMessage"},{id:-1687559349,predicate:"messageEntityPhone",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1280209983,predicate:"messageEntityCashtag",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-988359047,predicate:"messageActionBotAllowed",params:[{name:"flags",type:"#"},{name:"attach_menu",type:"flags.1?true"},{name:"from_request",type:"flags.3?true"},{name:"domain",type:"flags.0?string"},{name:"app",type:"flags.2?BotApp"}],type:"MessageAction"},{id:-55902537,predicate:"inputDialogPeer",params:[{name:"peer",type:"InputPeer"}],type:"InputDialogPeer"},{id:-445792507,predicate:"dialogPeer",params:[{name:"peer",type:"Peer"}],type:"DialogPeer"},{id:223655517,predicate:"messages.foundStickerSetsNotModified",params:[],type:"messages.FoundStickerSets"},{id:-1963942446,predicate:"messages.foundStickerSets",params:[{name:"hash",type:"long"},{name:"sets",type:"Vector<StickerSetCovered>"}],type:"messages.FoundStickerSets"},{id:-207944868,predicate:"fileHash",params:[{name:"offset",type:"long"},{name:"limit",type:"int"},{name:"hash",type:"bytes"}],type:"FileHash"},{id:-104284986,predicate:"webDocumentNoProxy",params:[{name:"url",type:"string"},{name:"size",type:"int"},{name:"mime_type",type:"string"},{name:"attributes",type:"Vector<DocumentAttribute>"}],type:"WebDocument"},{id:1968737087,predicate:"inputClientProxy",params:[{name:"address",type:"string"},{name:"port",type:"int"}],type:"InputClientProxy"},{id:-483352705,predicate:"help.termsOfServiceUpdateEmpty",params:[{name:"expires",type:"int"}],type:"help.TermsOfServiceUpdate"},{id:686618977,predicate:"help.termsOfServiceUpdate",params:[{name:"expires",type:"int"},{name:"terms_of_service",type:"help.TermsOfService"}],type:"help.TermsOfServiceUpdate"},{id:859091184,predicate:"inputSecureFileUploaded",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"md5_checksum",type:"string"},{name:"file_hash",type:"bytes"},{name:"secret",type:"bytes"}],type:"InputSecureFile"},{id:1399317950,predicate:"inputSecureFile",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputSecureFile"},{id:-876089816,predicate:"inputSecureFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputFileLocation"},{id:1679398724,predicate:"secureFileEmpty",params:[],type:"SecureFile"},{id:2097791614,predicate:"secureFile",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"size",type:"long"},{name:"dc_id",type:"int"},{name:"date",type:"int"},{name:"file_hash",type:"bytes"},{name:"secret",type:"bytes"}],type:"SecureFile"},{id:-1964327229,predicate:"secureData",params:[{name:"data",type:"bytes"},{name:"data_hash",type:"bytes"},{name:"secret",type:"bytes"}],type:"SecureData"},{id:2103482845,predicate:"securePlainPhone",params:[{name:"phone",type:"string"}],type:"SecurePlainData"},{id:569137759,predicate:"securePlainEmail",params:[{name:"email",type:"string"}],type:"SecurePlainData"},{id:-1658158621,predicate:"secureValueTypePersonalDetails",params:[],type:"SecureValueType"},{id:1034709504,predicate:"secureValueTypePassport",params:[],type:"SecureValueType"},{id:115615172,predicate:"secureValueTypeDriverLicense",params:[],type:"SecureValueType"},{id:-1596951477,predicate:"secureValueTypeIdentityCard",params:[],type:"SecureValueType"},{id:-1717268701,predicate:"secureValueTypeInternalPassport",params:[],type:"SecureValueType"},{id:-874308058,predicate:"secureValueTypeAddress",params:[],type:"SecureValueType"},{id:-63531698,predicate:"secureValueTypeUtilityBill",params:[],type:"SecureValueType"},{id:-1995211763,predicate:"secureValueTypeBankStatement",params:[],type:"SecureValueType"},{id:-1954007928,predicate:"secureValueTypeRentalAgreement",params:[],type:"SecureValueType"},{id:-1713143702,predicate:"secureValueTypePassportRegistration",params:[],type:"SecureValueType"},{id:-368907213,predicate:"secureValueTypeTemporaryRegistration",params:[],type:"SecureValueType"},{id:-1289704741,predicate:"secureValueTypePhone",params:[],type:"SecureValueType"},{id:-1908627474,predicate:"secureValueTypeEmail",params:[],type:"SecureValueType"},{id:411017418,predicate:"secureValue",params:[{name:"flags",type:"#"},{name:"type",type:"SecureValueType"},{name:"data",type:"flags.0?SecureData"},{name:"front_side",type:"flags.1?SecureFile"},{name:"reverse_side",type:"flags.2?SecureFile"},{name:"selfie",type:"flags.3?SecureFile"},{name:"translation",type:"flags.6?Vector<SecureFile>"},{name:"files",type:"flags.4?Vector<SecureFile>"},{name:"plain_data",type:"flags.5?SecurePlainData"},{name:"hash",type:"bytes"}],type:"SecureValue"},{id:-618540889,predicate:"inputSecureValue",params:[{name:"flags",type:"#"},{name:"type",type:"SecureValueType"},{name:"data",type:"flags.0?SecureData"},{name:"front_side",type:"flags.1?InputSecureFile"},{name:"reverse_side",type:"flags.2?InputSecureFile"},{name:"selfie",type:"flags.3?InputSecureFile"},{name:"translation",type:"flags.6?Vector<InputSecureFile>"},{name:"files",type:"flags.4?Vector<InputSecureFile>"},{name:"plain_data",type:"flags.5?SecurePlainData"}],type:"InputSecureValue"},{id:-316748368,predicate:"secureValueHash",params:[{name:"type",type:"SecureValueType"},{name:"hash",type:"bytes"}],type:"SecureValueHash"},{id:-391902247,predicate:"secureValueErrorData",params:[{name:"type",type:"SecureValueType"},{name:"data_hash",type:"bytes"},{name:"field",type:"string"},{name:"text",type:"string"}],type:"SecureValueError"},{id:12467706,predicate:"secureValueErrorFrontSide",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:-2037765467,predicate:"secureValueErrorReverseSide",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:-449327402,predicate:"secureValueErrorSelfie",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:2054162547,predicate:"secureValueErrorFile",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:1717706985,predicate:"secureValueErrorFiles",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"Vector<bytes>"},{name:"text",type:"string"}],type:"SecureValueError"},{id:871426631,predicate:"secureCredentialsEncrypted",params:[{name:"data",type:"bytes"},{name:"hash",type:"bytes"},{name:"secret",type:"bytes"}],type:"SecureCredentialsEncrypted"},{id:-1389486888,predicate:"account.authorizationForm",params:[{name:"flags",type:"#"},{name:"required_types",type:"Vector<SecureRequiredType>"},{name:"values",type:"Vector<SecureValue>"},{name:"errors",type:"Vector<SecureValueError>"},{name:"users",type:"Vector<User>"},{name:"privacy_policy_url",type:"flags.0?string"}],type:"account.AuthorizationForm"},{id:-2128640689,predicate:"account.sentEmailCode",params:[{name:"email_pattern",type:"string"},{name:"length",type:"int"}],type:"account.SentEmailCode"},{id:455635795,predicate:"messageActionSecureValuesSentMe",params:[{name:"values",type:"Vector<SecureValue>"},{name:"credentials",type:"SecureCredentialsEncrypted"}],type:"MessageAction"},{id:-648257196,predicate:"messageActionSecureValuesSent",params:[{name:"types",type:"Vector<SecureValueType>"}],type:"MessageAction"},{id:1722786150,predicate:"help.deepLinkInfoEmpty",params:[],type:"help.DeepLinkInfo"},{id:1783556146,predicate:"help.deepLinkInfo",params:[{name:"flags",type:"#"},{name:"update_app",type:"flags.0?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"}],type:"help.DeepLinkInfo"},{id:289586518,predicate:"savedPhoneContact",params:[{name:"phone",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"date",type:"int"}],type:"SavedContact"},{id:1304052993,predicate:"account.takeout",params:[{name:"id",type:"long"}],type:"account.Takeout"},{id:700340377,predicate:"inputTakeoutFileLocation",params:[],type:"InputFileLocation"},{id:-513517117,predicate:"updateDialogUnreadMark",params:[{name:"flags",type:"#"},{name:"unread",type:"flags.0?true"},{name:"peer",type:"DialogPeer"}],type:"Update"},{id:-253500010,predicate:"messages.dialogsNotModified",params:[{name:"count",type:"int"}],type:"messages.Dialogs"},{id:-1625153079,predicate:"inputWebFileGeoPointLocation",params:[{name:"geo_point",type:"InputGeoPoint"},{name:"access_hash",type:"long"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"zoom",type:"int"},{name:"scale",type:"int"}],type:"InputWebFileLocation"},{id:-1255369827,predicate:"contacts.topPeersDisabled",params:[],type:"contacts.TopPeers"},{id:-1685456582,predicate:"inputReportReasonCopyright",params:[],type:"ReportReason"},{id:-732254058,predicate:"passwordKdfAlgoUnknown",params:[],type:"PasswordKdfAlgo"},{id:4883767,predicate:"securePasswordKdfAlgoUnknown",params:[],type:"SecurePasswordKdfAlgo"},{id:-1141711456,predicate:"securePasswordKdfAlgoPBKDF2HMACSHA512iter100000",params:[{name:"salt",type:"bytes"}],type:"SecurePasswordKdfAlgo"},{id:-2042159726,predicate:"securePasswordKdfAlgoSHA512",params:[{name:"salt",type:"bytes"}],type:"SecurePasswordKdfAlgo"},{id:354925740,predicate:"secureSecretSettings",params:[{name:"secure_algo",type:"SecurePasswordKdfAlgo"},{name:"secure_secret",type:"bytes"},{name:"secure_secret_id",type:"long"}],type:"SecureSecretSettings"},{id:982592842,predicate:"passwordKdfAlgoSHA256SHA256PBKDF2HMACSHA512iter100000SHA256ModPow",params:[{name:"salt1",type:"bytes"},{name:"salt2",type:"bytes"},{name:"g",type:"int"},{name:"p",type:"bytes"}],type:"PasswordKdfAlgo"},{id:-1736378792,predicate:"inputCheckPasswordEmpty",params:[],type:"InputCheckPasswordSRP"},{id:-763367294,predicate:"inputCheckPasswordSRP",params:[{name:"srp_id",type:"long"},{name:"A",type:"bytes"},{name:"M1",type:"bytes"}],type:"InputCheckPasswordSRP"},{id:-2036501105,predicate:"secureValueError",params:[{name:"type",type:"SecureValueType"},{name:"hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:-1592506512,predicate:"secureValueErrorTranslationFile",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:878931416,predicate:"secureValueErrorTranslationFiles",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"Vector<bytes>"},{name:"text",type:"string"}],type:"SecureValueError"},{id:-2103600678,predicate:"secureRequiredType",params:[{name:"flags",type:"#"},{name:"native_names",type:"flags.0?true"},{name:"selfie_required",type:"flags.1?true"},{name:"translation_required",type:"flags.2?true"},{name:"type",type:"SecureValueType"}],type:"SecureRequiredType"},{id:41187252,predicate:"secureRequiredTypeOneOf",params:[{name:"types",type:"Vector<SecureRequiredType>"}],type:"SecureRequiredType"},{id:-1078332329,predicate:"help.passportConfigNotModified",params:[],type:"help.PassportConfig"},{id:-1600596305,predicate:"help.passportConfig",params:[{name:"hash",type:"int"},{name:"countries_langs",type:"DataJSON"}],type:"help.PassportConfig"},{id:488313413,predicate:"inputAppEvent",params:[{name:"time",type:"double"},{name:"type",type:"string"},{name:"peer",type:"long"},{name:"data",type:"JSONValue"}],type:"InputAppEvent"},{id:-1059185703,predicate:"jsonObjectValue",params:[{name:"key",type:"string"},{name:"value",type:"JSONValue"}],type:"JSONObjectValue"},{id:1064139624,predicate:"jsonNull",params:[],type:"JSONValue"},{id:-952869270,predicate:"jsonBool",params:[{name:"value",type:"Bool"}],type:"JSONValue"},{id:736157604,predicate:"jsonNumber",params:[{name:"value",type:"double"}],type:"JSONValue"},{id:-1222740358,predicate:"jsonString",params:[{name:"value",type:"string"}],type:"JSONValue"},{id:-146520221,predicate:"jsonArray",params:[{name:"value",type:"Vector<JSONValue>"}],type:"JSONValue"},{id:-1715350371,predicate:"jsonObject",params:[{name:"value",type:"Vector<JSONObjectValue>"}],type:"JSONValue"},{id:-1311015810,predicate:"inputNotifyBroadcasts",params:[],type:"InputNotifyPeer"},{id:-703403793,predicate:"notifyBroadcasts",params:[],type:"NotifyPeer"},{id:-311786236,predicate:"textSubscript",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:-939827711,predicate:"textSuperscript",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:55281185,predicate:"textMarked",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:483104362,predicate:"textPhone",params:[{name:"text",type:"RichText"},{name:"phone",type:"string"}],type:"RichText"},{id:136105807,predicate:"textImage",params:[{name:"document_id",type:"long"},{name:"w",type:"int"},{name:"h",type:"int"}],type:"RichText"},{id:504660880,predicate:"pageBlockKicker",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:878078826,predicate:"pageTableCell",params:[{name:"flags",type:"#"},{name:"header",type:"flags.0?true"},{name:"align_center",type:"flags.3?true"},{name:"align_right",type:"flags.4?true"},{name:"valign_middle",type:"flags.5?true"},{name:"valign_bottom",type:"flags.6?true"},{name:"text",type:"flags.7?RichText"},{name:"colspan",type:"flags.1?int"},{name:"rowspan",type:"flags.2?int"}],type:"PageTableCell"},{id:-524237339,predicate:"pageTableRow",params:[{name:"cells",type:"Vector<PageTableCell>"}],type:"PageTableRow"},{id:-1085412734,predicate:"pageBlockTable",params:[{name:"flags",type:"#"},{name:"bordered",type:"flags.0?true"},{name:"striped",type:"flags.1?true"},{name:"title",type:"RichText"},{name:"rows",type:"Vector<PageTableRow>"}],type:"PageBlock"},{id:1869903447,predicate:"pageCaption",params:[{name:"text",type:"RichText"},{name:"credit",type:"RichText"}],type:"PageCaption"},{id:-1188055347,predicate:"pageListItemText",params:[{name:"text",type:"RichText"}],type:"PageListItem"},{id:635466748,predicate:"pageListItemBlocks",params:[{name:"blocks",type:"Vector<PageBlock>"}],type:"PageListItem"},{id:1577484359,predicate:"pageListOrderedItemText",params:[{name:"num",type:"string"},{name:"text",type:"RichText"}],type:"PageListOrderedItem"},{id:-1730311882,predicate:"pageListOrderedItemBlocks",params:[{name:"num",type:"string"},{name:"blocks",type:"Vector<PageBlock>"}],type:"PageListOrderedItem"},{id:-1702174239,predicate:"pageBlockOrderedList",params:[{name:"items",type:"Vector<PageListOrderedItem>"}],type:"PageBlock"},{id:1987480557,predicate:"pageBlockDetails",params:[{name:"flags",type:"#"},{name:"open",type:"flags.0?true"},{name:"blocks",type:"Vector<PageBlock>"},{name:"title",type:"RichText"}],type:"PageBlock"},{id:-1282352120,predicate:"pageRelatedArticle",params:[{name:"flags",type:"#"},{name:"url",type:"string"},{name:"webpage_id",type:"long"},{name:"title",type:"flags.0?string"},{name:"description",type:"flags.1?string"},{name:"photo_id",type:"flags.2?long"},{name:"author",type:"flags.3?string"},{name:"published_date",type:"flags.4?int"}],type:"PageRelatedArticle"},{id:370236054,predicate:"pageBlockRelatedArticles",params:[{name:"title",type:"RichText"},{name:"articles",type:"Vector<PageRelatedArticle>"}],type:"PageBlock"},{id:-1538310410,predicate:"pageBlockMap",params:[{name:"geo",type:"GeoPoint"},{name:"zoom",type:"int"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:-1738178803,predicate:"page",params:[{name:"flags",type:"#"},{name:"part",type:"flags.0?true"},{name:"rtl",type:"flags.1?true"},{name:"v2",type:"flags.2?true"},{name:"url",type:"string"},{name:"blocks",type:"Vector<PageBlock>"},{name:"photos",type:"Vector<Photo>"},{name:"documents",type:"Vector<Document>"},{name:"views",type:"flags.3?int"}],type:"Page"},{id:-610373422,predicate:"inputPrivacyKeyPhoneP2P",params:[],type:"InputPrivacyKey"},{id:961092808,predicate:"privacyKeyPhoneP2P",params:[],type:"PrivacyKey"},{id:894777186,predicate:"textAnchor",params:[{name:"text",type:"RichText"},{name:"name",type:"string"}],type:"RichText"},{id:-1945767479,predicate:"help.supportName",params:[{name:"name",type:"string"}],type:"help.SupportName"},{id:-206688531,predicate:"help.userInfoEmpty",params:[],type:"help.UserInfo"},{id:32192344,predicate:"help.userInfo",params:[{name:"message",type:"string"},{name:"entities",type:"Vector<MessageEntity>"},{name:"author",type:"string"},{name:"date",type:"int"}],type:"help.UserInfo"},{id:-202219658,predicate:"messageActionContactSignUp",params:[],type:"MessageAction"},{id:-1398708869,predicate:"updateMessagePoll",params:[{name:"flags",type:"#"},{name:"poll_id",type:"long"},{name:"poll",type:"flags.0?Poll"},{name:"results",type:"PollResults"}],type:"Update"},{id:1823064809,predicate:"pollAnswer",params:[{name:"text",type:"string"},{name:"option",type:"bytes"}],type:"PollAnswer"},{id:-2032041631,predicate:"poll",params:[{name:"id",type:"long"},{name:"flags",type:"#"},{name:"closed",type:"flags.0?true"},{name:"public_voters",type:"flags.1?true"},{name:"multiple_choice",type:"flags.2?true"},{name:"quiz",type:"flags.3?true"},{name:"question",type:"string"},{name:"answers",type:"Vector<PollAnswer>"},{name:"close_period",type:"flags.4?int"},{name:"close_date",type:"flags.5?int"}],type:"Poll"},{id:997055186,predicate:"pollAnswerVoters",params:[{name:"flags",type:"#"},{name:"chosen",type:"flags.0?true"},{name:"correct",type:"flags.1?true"},{name:"option",type:"bytes"},{name:"voters",type:"int"}],type:"PollAnswerVoters"},{id:2061444128,predicate:"pollResults",params:[{name:"flags",type:"#"},{name:"min",type:"flags.0?true"},{name:"results",type:"flags.1?Vector<PollAnswerVoters>"},{name:"total_voters",type:"flags.2?int"},{name:"recent_voters",type:"flags.3?Vector<Peer>"},{name:"solution",type:"flags.4?string"},{name:"solution_entities",type:"flags.4?Vector<MessageEntity>"}],type:"PollResults"},{id:261416433,predicate:"inputMediaPoll",params:[{name:"flags",type:"#"},{name:"poll",type:"Poll"},{name:"correct_answers",type:"flags.0?Vector<bytes>"},{name:"solution",type:"flags.1?string"},{name:"solution_entities",type:"flags.1?Vector<MessageEntity>"}],type:"InputMedia"},{id:1272375192,predicate:"messageMediaPoll",params:[{name:"poll",type:"Poll"},{name:"results",type:"PollResults"}],type:"MessageMedia"},{id:-264117680,predicate:"chatOnlines",params:[{name:"onlines",type:"int"}],type:"ChatOnlines"},{id:1202287072,predicate:"statsURL",params:[{name:"url",type:"string"}],type:"StatsURL"},{id:-525288402,predicate:"photoStrippedSize",params:[{name:"type",type:"string"},{name:"bytes",type:"bytes"}],type:"PhotoSize"},{id:1605510357,predicate:"chatAdminRights",params:[{name:"flags",type:"#"},{name:"change_info",type:"flags.0?true"},{name:"post_messages",type:"flags.1?true"},{name:"edit_messages",type:"flags.2?true"},{name:"delete_messages",type:"flags.3?true"},{name:"ban_users",type:"flags.4?true"},{name:"invite_users",type:"flags.5?true"},{name:"pin_messages",type:"flags.7?true"},{name:"add_admins",type:"flags.9?true"},{name:"anonymous",type:"flags.10?true"},{name:"manage_call",type:"flags.11?true"},{name:"other",type:"flags.12?true"},{name:"manage_topics",type:"flags.13?true"},{name:"post_stories",type:"flags.14?true"},{name:"edit_stories",type:"flags.15?true"},{name:"delete_stories",type:"flags.16?true"}],type:"ChatAdminRights"},{id:-1626209256,predicate:"chatBannedRights",params:[{name:"flags",type:"#"},{name:"view_messages",type:"flags.0?true"},{name:"send_messages",type:"flags.1?true"},{name:"send_media",type:"flags.2?true"},{name:"send_stickers",type:"flags.3?true"},{name:"send_gifs",type:"flags.4?true"},{name:"send_games",type:"flags.5?true"},{name:"send_inline",type:"flags.6?true"},{name:"embed_links",type:"flags.7?true"},{name:"send_polls",type:"flags.8?true"},{name:"change_info",type:"flags.10?true"},{name:"invite_users",type:"flags.15?true"},{name:"pin_messages",type:"flags.17?true"},{name:"manage_topics",type:"flags.18?true"},{name:"send_photos",type:"flags.19?true"},{name:"send_videos",type:"flags.20?true"},{name:"send_roundvideos",type:"flags.21?true"},{name:"send_audios",type:"flags.22?true"},{name:"send_voices",type:"flags.23?true"},{name:"send_docs",type:"flags.24?true"},{name:"send_plain",type:"flags.25?true"},{name:"until_date",type:"int"}],type:"ChatBannedRights"},{id:1421875280,predicate:"updateChatDefaultBannedRights",params:[{name:"peer",type:"Peer"},{name:"default_banned_rights",type:"ChatBannedRights"},{name:"version",type:"int"}],type:"Update"},{id:-433014407,predicate:"inputWallPaper",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputWallPaper"},{id:1913199744,predicate:"inputWallPaperSlug",params:[{name:"slug",type:"string"}],type:"InputWallPaper"},{id:-1150621555,predicate:"channelParticipantsContacts",params:[{name:"q",type:"string"}],type:"ChannelParticipantsFilter"},{id:771095562,predicate:"channelAdminLogEventActionDefaultBannedRights",params:[{name:"prev_banned_rights",type:"ChatBannedRights"},{name:"new_banned_rights",type:"ChatBannedRights"}],type:"ChannelAdminLogEventAction"},{id:-1895328189,predicate:"channelAdminLogEventActionStopPoll",params:[{name:"message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:471437699,predicate:"account.wallPapersNotModified",params:[],type:"account.WallPapers"},{id:-842824308,predicate:"account.wallPapers",params:[{name:"hash",type:"long"},{name:"wallpapers",type:"Vector<WallPaper>"}],type:"account.WallPapers"},{id:-1390068360,predicate:"codeSettings",params:[{name:"flags",type:"#"},{name:"allow_flashcall",type:"flags.0?true"},{name:"current_number",type:"flags.1?true"},{name:"allow_app_hash",type:"flags.4?true"},{name:"allow_missed_call",type:"flags.5?true"},{name:"allow_firebase",type:"flags.7?true"},{name:"logout_tokens",type:"flags.6?Vector<bytes>"},{name:"token",type:"flags.8?string"},{name:"app_sandbox",type:"flags.8?Bool"}],type:"CodeSettings"},{id:925826256,predicate:"wallPaperSettings",params:[{name:"flags",type:"#"},{name:"blur",type:"flags.1?true"},{name:"motion",type:"flags.2?true"},{name:"background_color",type:"flags.0?int"},{name:"second_background_color",type:"flags.4?int"},{name:"third_background_color",type:"flags.5?int"},{name:"fourth_background_color",type:"flags.6?int"},{name:"intensity",type:"flags.3?int"},{name:"rotation",type:"flags.4?int"},{name:"emoticon",type:"flags.7?string"}],type:"WallPaperSettings"},{id:-1163561432,predicate:"autoDownloadSettings",params:[{name:"flags",type:"#"},{name:"disabled",type:"flags.0?true"},{name:"video_preload_large",type:"flags.1?true"},{name:"audio_preload_next",type:"flags.2?true"},{name:"phonecalls_less_data",type:"flags.3?true"},{name:"stories_preload",type:"flags.4?true"},{name:"photo_size_max",type:"int"},{name:"video_size_max",type:"long"},{name:"file_size_max",type:"long"},{name:"video_upload_maxbitrate",type:"int"},{name:"small_queue_active_operations_max",type:"int"},{name:"large_queue_active_operations_max",type:"int"}],type:"AutoDownloadSettings"},{id:1674235686,predicate:"account.autoDownloadSettings",params:[{name:"low",type:"AutoDownloadSettings"},{name:"medium",type:"AutoDownloadSettings"},{name:"high",type:"AutoDownloadSettings"}],type:"account.AutoDownloadSettings"},{id:-709641735,predicate:"emojiKeyword",params:[{name:"keyword",type:"string"},{name:"emoticons",type:"Vector<string>"}],type:"EmojiKeyword"},{id:594408994,predicate:"emojiKeywordDeleted",params:[{name:"keyword",type:"string"},{name:"emoticons",type:"Vector<string>"}],type:"EmojiKeyword"},{id:1556570557,predicate:"emojiKeywordsDifference",params:[{name:"lang_code",type:"string"},{name:"from_version",type:"int"},{name:"version",type:"int"},{name:"keywords",type:"Vector<EmojiKeyword>"}],type:"EmojiKeywordsDifference"},{id:-1519029347,predicate:"emojiURL",params:[{name:"url",type:"string"}],type:"EmojiURL"},{id:-1275374751,predicate:"emojiLanguage",params:[{name:"lang_code",type:"string"}],type:"EmojiLanguage"},{id:-1529000952,predicate:"inputPrivacyKeyForwards",params:[],type:"InputPrivacyKey"},{id:1777096355,predicate:"privacyKeyForwards",params:[],type:"PrivacyKey"},{id:1461304012,predicate:"inputPrivacyKeyProfilePhoto",params:[],type:"InputPrivacyKey"},{id:-1777000467,predicate:"privacyKeyProfilePhoto",params:[],type:"PrivacyKey"},{id:1075322878,predicate:"inputPhotoFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"thumb_size",type:"string"}],type:"InputFileLocation"},{id:-667654413,predicate:"inputPhotoLegacyFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"volume_id",type:"long"},{name:"local_id",type:"int"},{name:"secret",type:"long"}],type:"InputFileLocation"},{id:925204121,predicate:"inputPeerPhotoFileLocation",params:[{name:"flags",type:"#"},{name:"big",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"photo_id",type:"long"}],type:"InputFileLocation"},{id:-1652231205,predicate:"inputStickerSetThumb",params:[{name:"stickerset",type:"InputStickerSet"},{name:"thumb_version",type:"int"}],type:"InputFileLocation"},{id:-11252123,predicate:"folder",params:[{name:"flags",type:"#"},{name:"autofill_new_broadcasts",type:"flags.0?true"},{name:"autofill_public_groups",type:"flags.1?true"},{name:"autofill_new_correspondents",type:"flags.2?true"},{name:"id",type:"int"},{name:"title",type:"string"},{name:"photo",type:"flags.3?ChatPhoto"}],type:"Folder"},{id:1908216652,predicate:"dialogFolder",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.2?true"},{name:"folder",type:"Folder"},{name:"peer",type:"Peer"},{name:"top_message",type:"int"},{name:"unread_muted_peers_count",type:"int"},{name:"unread_unmuted_peers_count",type:"int"},{name:"unread_muted_messages_count",type:"int"},{name:"unread_unmuted_messages_count",type:"int"}],type:"Dialog"},{id:1684014375,predicate:"inputDialogPeerFolder",params:[{name:"folder_id",type:"int"}],type:"InputDialogPeer"},{id:1363483106,predicate:"dialogPeerFolder",params:[{name:"folder_id",type:"int"}],type:"DialogPeer"},{id:-70073706,predicate:"inputFolderPeer",params:[{name:"peer",type:"InputPeer"},{name:"folder_id",type:"int"}],type:"InputFolderPeer"},{id:-373643672,predicate:"folderPeer",params:[{name:"peer",type:"Peer"},{name:"folder_id",type:"int"}],type:"FolderPeer"},{id:422972864,predicate:"updateFolderPeers",params:[{name:"folder_peers",type:"Vector<FolderPeer>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:497305826,predicate:"inputUserFromMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"user_id",type:"long"}],type:"InputUser"},{id:1536380829,predicate:"inputChannelFromMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"channel_id",type:"long"}],type:"InputChannel"},{id:-1468331492,predicate:"inputPeerUserFromMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"user_id",type:"long"}],type:"InputPeer"},{id:-1121318848,predicate:"inputPeerChannelFromMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"channel_id",type:"long"}],type:"InputPeer"},{id:55761658,predicate:"inputPrivacyKeyPhoneNumber",params:[],type:"InputPrivacyKey"},{id:-778378131,predicate:"privacyKeyPhoneNumber",params:[],type:"PrivacyKey"},{id:-1472172887,predicate:"topPeerCategoryForwardUsers",params:[],type:"TopPeerCategory"},{id:-68239120,predicate:"topPeerCategoryForwardChats",params:[],type:"TopPeerCategory"},{id:84703944,predicate:"channelAdminLogEventActionChangeLinkedChat",params:[{name:"prev_value",type:"long"},{name:"new_value",type:"long"}],type:"ChannelAdminLogEventAction"},{id:-398136321,predicate:"messages.searchCounter",params:[{name:"flags",type:"#"},{name:"inexact",type:"flags.1?true"},{name:"filter",type:"MessagesFilter"},{name:"count",type:"int"}],type:"messages.SearchCounter"},{id:280464681,predicate:"keyboardButtonUrlAuth",params:[{name:"flags",type:"#"},{name:"text",type:"string"},{name:"fwd_text",type:"flags.0?string"},{name:"url",type:"string"},{name:"button_id",type:"int"}],type:"KeyboardButton"},{id:-802258988,predicate:"inputKeyboardButtonUrlAuth",params:[{name:"flags",type:"#"},{name:"request_write_access",type:"flags.0?true"},{name:"text",type:"string"},{name:"fwd_text",type:"flags.1?string"},{name:"url",type:"string"},{name:"bot",type:"InputUser"}],type:"KeyboardButton"},{id:-1831650802,predicate:"urlAuthResultRequest",params:[{name:"flags",type:"#"},{name:"request_write_access",type:"flags.0?true"},{name:"bot",type:"User"},{name:"domain",type:"string"}],type:"UrlAuthResult"},{id:-1886646706,predicate:"urlAuthResultAccepted",params:[{name:"url",type:"string"}],type:"UrlAuthResult"},{id:-1445536993,predicate:"urlAuthResultDefault",params:[],type:"UrlAuthResult"},{id:-2079962673,predicate:"inputPrivacyValueAllowChatParticipants",params:[{name:"chats",type:"Vector<long>"}],type:"InputPrivacyRule"},{id:-380694650,predicate:"inputPrivacyValueDisallowChatParticipants",params:[{name:"chats",type:"Vector<long>"}],type:"InputPrivacyRule"},{id:1796427406,predicate:"privacyValueAllowChatParticipants",params:[{name:"chats",type:"Vector<long>"}],type:"PrivacyRule"},{id:1103656293,predicate:"privacyValueDisallowChatParticipants",params:[{name:"chats",type:"Vector<long>"}],type:"PrivacyRule"},{id:-1672577397,predicate:"messageEntityUnderline",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-1090087980,predicate:"messageEntityStrike",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1786671974,predicate:"updatePeerSettings",params:[{name:"peer",type:"Peer"},{name:"settings",type:"PeerSettings"}],type:"Update"},{id:-1078612597,predicate:"channelLocationEmpty",params:[],type:"ChannelLocation"},{id:547062491,predicate:"channelLocation",params:[{name:"geo_point",type:"GeoPoint"},{name:"address",type:"string"}],type:"ChannelLocation"},{id:-901375139,predicate:"peerLocated",params:[{name:"peer",type:"Peer"},{name:"expires",type:"int"},{name:"distance",type:"int"}],type:"PeerLocated"},{id:-1263546448,predicate:"updatePeerLocated",params:[{name:"peers",type:"Vector<PeerLocated>"}],type:"Update"},{id:241923758,predicate:"channelAdminLogEventActionChangeLocation",params:[{name:"prev_value",type:"ChannelLocation"},{name:"new_value",type:"ChannelLocation"}],type:"ChannelAdminLogEventAction"},{id:-606798099,predicate:"inputReportReasonGeoIrrelevant",params:[],type:"ReportReason"},{id:1401984889,predicate:"channelAdminLogEventActionToggleSlowMode",params:[{name:"prev_value",type:"int"},{name:"new_value",type:"int"}],type:"ChannelAdminLogEventAction"},{id:1148485274,predicate:"auth.authorizationSignUpRequired",params:[{name:"flags",type:"#"},{name:"terms_of_service",type:"flags.0?help.TermsOfService"}],type:"auth.Authorization"},{id:-666824391,predicate:"payments.paymentVerificationNeeded",params:[{name:"url",type:"string"}],type:"payments.PaymentResult"},{id:42402760,predicate:"inputStickerSetAnimatedEmoji",params:[],type:"InputStickerSet"},{id:967122427,predicate:"updateNewScheduledMessage",params:[{name:"message",type:"Message"}],type:"Update"},{id:-1870238482,predicate:"updateDeleteScheduledMessages",params:[{name:"peer",type:"Peer"},{name:"messages",type:"Vector<int>"}],type:"Update"},{id:-797791052,predicate:"restrictionReason",params:[{name:"platform",type:"string"},{name:"reason",type:"string"},{name:"text",type:"string"}],type:"RestrictionReason"},{id:1012306921,predicate:"inputTheme",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputTheme"},{id:-175567375,predicate:"inputThemeSlug",params:[{name:"slug",type:"string"}],type:"InputTheme"},{id:-1609668650,predicate:"theme",params:[{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"default",type:"flags.1?true"},{name:"for_chat",type:"flags.5?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"slug",type:"string"},{name:"title",type:"string"},{name:"document",type:"flags.2?Document"},{name:"settings",type:"flags.3?Vector<ThemeSettings>"},{name:"emoticon",type:"flags.6?string"},{name:"installs_count",type:"flags.4?int"}],type:"Theme"},{id:-199313886,predicate:"account.themesNotModified",params:[],type:"account.Themes"},{id:-1707242387,predicate:"account.themes",params:[{name:"hash",type:"long"},{name:"themes",type:"Vector<Theme>"}],type:"account.Themes"},{id:-2112423005,predicate:"updateTheme",params:[{name:"theme",type:"Theme"}],type:"Update"},{id:-786326563,predicate:"inputPrivacyKeyAddedByPhone",params:[],type:"InputPrivacyKey"},{id:1124062251,predicate:"privacyKeyAddedByPhone",params:[],type:"PrivacyKey"},{id:-2027964103,predicate:"updateGeoLiveViewed",params:[{name:"peer",type:"Peer"},{name:"msg_id",type:"int"}],type:"Update"},{id:1448076945,predicate:"updateLoginToken",params:[],type:"Update"},{id:1654593920,predicate:"auth.loginToken",params:[{name:"expires",type:"int"},{name:"token",type:"bytes"}],type:"auth.LoginToken"},{id:110008598,predicate:"auth.loginTokenMigrateTo",params:[{name:"dc_id",type:"int"},{name:"token",type:"bytes"}],type:"auth.LoginToken"},{id:957176926,predicate:"auth.loginTokenSuccess",params:[{name:"authorization",type:"auth.Authorization"}],type:"auth.LoginToken"},{id:1474462241,predicate:"account.contentSettings",params:[{name:"flags",type:"#"},{name:"sensitive_enabled",type:"flags.0?true"},{name:"sensitive_can_change",type:"flags.1?true"}],type:"account.ContentSettings"},{id:-1456996667,predicate:"messages.inactiveChats",params:[{name:"dates",type:"Vector<int>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.InactiveChats"},{id:-1012849566,predicate:"baseThemeClassic",params:[],type:"BaseTheme"},{id:-69724536,predicate:"baseThemeDay",params:[],type:"BaseTheme"},{id:-1212997976,predicate:"baseThemeNight",params:[],type:"BaseTheme"},{id:1834973166,predicate:"baseThemeTinted",params:[],type:"BaseTheme"},{id:1527845466,predicate:"baseThemeArctic",params:[],type:"BaseTheme"},{id:-1770371538,predicate:"inputWallPaperNoFile",params:[{name:"id",type:"long"}],type:"InputWallPaper"},{id:-528465642,predicate:"wallPaperNoFile",params:[{name:"id",type:"long"},{name:"flags",type:"#"},{name:"default",type:"flags.1?true"},{name:"dark",type:"flags.4?true"},{name:"settings",type:"flags.2?WallPaperSettings"}],type:"WallPaper"},{id:-1881255857,predicate:"inputThemeSettings",params:[{name:"flags",type:"#"},{name:"message_colors_animated",type:"flags.2?true"},{name:"base_theme",type:"BaseTheme"},{name:"accent_color",type:"int"},{name:"outbox_accent_color",type:"flags.3?int"},{name:"message_colors",type:"flags.0?Vector<int>"},{name:"wallpaper",type:"flags.1?InputWallPaper"},{name:"wallpaper_settings",type:"flags.1?WallPaperSettings"}],type:"InputThemeSettings"},{id:-94849324,predicate:"themeSettings",params:[{name:"flags",type:"#"},{name:"message_colors_animated",type:"flags.2?true"},{name:"base_theme",type:"BaseTheme"},{name:"accent_color",type:"int"},{name:"outbox_accent_color",type:"flags.3?int"},{name:"message_colors",type:"flags.0?Vector<int>"},{name:"wallpaper",type:"flags.1?WallPaper"}],type:"ThemeSettings"},{id:1421174295,predicate:"webPageAttributeTheme",params:[{name:"flags",type:"#"},{name:"documents",type:"flags.0?Vector<Document>"},{name:"settings",type:"flags.1?ThemeSettings"}],type:"WebPageAttribute"},{id:619974263,predicate:"updateMessagePollVote",params:[{name:"poll_id",type:"long"},{name:"peer",type:"Peer"},{name:"options",type:"Vector<bytes>"},{name:"qts",type:"int"}],type:"Update"},{id:1218005070,predicate:"messages.votesList",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"votes",type:"Vector<MessagePeerVote>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"next_offset",type:"flags.0?string"}],type:"messages.VotesList"},{id:-1144565411,predicate:"keyboardButtonRequestPoll",params:[{name:"flags",type:"#"},{name:"quiz",type:"flags.0?Bool"},{name:"text",type:"string"}],type:"KeyboardButton"},{id:1981704948,predicate:"messageEntityBankCard",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-177732982,predicate:"bankCardOpenUrl",params:[{name:"url",type:"string"},{name:"name",type:"string"}],type:"BankCardOpenUrl"},{id:1042605427,predicate:"payments.bankCardData",params:[{name:"title",type:"string"},{name:"open_urls",type:"Vector<BankCardOpenUrl>"}],type:"payments.BankCardData"},{id:-118740917,predicate:"peerSelfLocated",params:[{name:"expires",type:"int"}],type:"PeerLocated"},{id:1605718587,predicate:"dialogFilter",params:[{name:"flags",type:"#"},{name:"contacts",type:"flags.0?true"},{name:"non_contacts",type:"flags.1?true"},{name:"groups",type:"flags.2?true"},{name:"broadcasts",type:"flags.3?true"},{name:"bots",type:"flags.4?true"},{name:"exclude_muted",type:"flags.11?true"},{name:"exclude_read",type:"flags.12?true"},{name:"exclude_archived",type:"flags.13?true"},{name:"id",type:"int"},{name:"title",type:"string"},{name:"emoticon",type:"flags.25?string"},{name:"color",type:"flags.27?int"},{name:"pinned_peers",type:"Vector<InputPeer>"},{name:"include_peers",type:"Vector<InputPeer>"},{name:"exclude_peers",type:"Vector<InputPeer>"}],type:"DialogFilter"},{id:2004110666,predicate:"dialogFilterSuggested",params:[{name:"filter",type:"DialogFilter"},{name:"description",type:"string"}],type:"DialogFilterSuggested"},{id:654302845,predicate:"updateDialogFilter",params:[{name:"flags",type:"#"},{name:"id",type:"int"},{name:"filter",type:"flags.0?DialogFilter"}],type:"Update"},{id:-1512627963,predicate:"updateDialogFilterOrder",params:[{name:"order",type:"Vector<int>"}],type:"Update"},{id:889491791,predicate:"updateDialogFilters",params:[],type:"Update"},{id:-1237848657,predicate:"statsDateRangeDays",params:[{name:"min_date",type:"int"},{name:"max_date",type:"int"}],type:"StatsDateRangeDays"},{id:-884757282,predicate:"statsAbsValueAndPrev",params:[{name:"current",type:"double"},{name:"previous",type:"double"}],type:"StatsAbsValueAndPrev"},{id:-875679776,predicate:"statsPercentValue",params:[{name:"part",type:"double"},{name:"total",type:"double"}],type:"StatsPercentValue"},{id:1244130093,predicate:"statsGraphAsync",params:[{name:"token",type:"string"}],type:"StatsGraph"},{id:-1092839390,predicate:"statsGraphError",params:[{name:"error",type:"string"}],type:"StatsGraph"},{id:-1901828938,predicate:"statsGraph",params:[{name:"flags",type:"#"},{name:"json",type:"DataJSON"},{name:"zoom_token",type:"flags.0?string"}],type:"StatsGraph"},{id:963421692,predicate:"stats.broadcastStats",params:[{name:"period",type:"StatsDateRangeDays"},{name:"followers",type:"StatsAbsValueAndPrev"},{name:"views_per_post",type:"StatsAbsValueAndPrev"},{name:"shares_per_post",type:"StatsAbsValueAndPrev"},{name:"reactions_per_post",type:"StatsAbsValueAndPrev"},{name:"views_per_story",type:"StatsAbsValueAndPrev"},{name:"shares_per_story",type:"StatsAbsValueAndPrev"},{name:"reactions_per_story",type:"StatsAbsValueAndPrev"},{name:"enabled_notifications",type:"StatsPercentValue"},{name:"growth_graph",type:"StatsGraph"},{name:"followers_graph",type:"StatsGraph"},{name:"mute_graph",type:"StatsGraph"},{name:"top_hours_graph",type:"StatsGraph"},{name:"interactions_graph",type:"StatsGraph"},{name:"iv_interactions_graph",type:"StatsGraph"},{name:"views_by_source_graph",type:"StatsGraph"},{name:"new_followers_by_source_graph",type:"StatsGraph"},{name:"languages_graph",type:"StatsGraph"},{name:"reactions_by_emotion_graph",type:"StatsGraph"},{name:"story_interactions_graph",type:"StatsGraph"},{name:"story_reactions_by_emotion_graph",type:"StatsGraph"},{name:"recent_posts_interactions",type:"Vector<PostInteractionCounters>"}],type:"stats.BroadcastStats"},{id:-428884101,predicate:"inputMediaDice",params:[{name:"emoticon",type:"string"}],type:"InputMedia"},{id:1065280907,predicate:"messageMediaDice",params:[{name:"value",type:"int"},{name:"emoticon",type:"string"}],type:"MessageMedia"},{id:-427863538,predicate:"inputStickerSetDice",params:[{name:"emoticon",type:"string"}],type:"InputStickerSet"},{id:-1728664459,predicate:"help.promoDataEmpty",params:[{name:"expires",type:"int"}],type:"help.PromoData"},{id:-1942390465,predicate:"help.promoData",params:[{name:"flags",type:"#"},{name:"proxy",type:"flags.0?true"},{name:"expires",type:"int"},{name:"peer",type:"Peer"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"psa_type",type:"flags.1?string"},{name:"psa_message",type:"flags.2?string"}],type:"help.PromoData"},{id:-567037804,predicate:"videoSize",params:[{name:"flags",type:"#"},{name:"type",type:"string"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"size",type:"int"},{name:"video_start_ts",type:"flags.0?double"}],type:"VideoSize"},{id:643940105,predicate:"updatePhoneCallSignalingData",params:[{name:"phone_call_id",type:"long"},{name:"data",type:"bytes"}],type:"Update"},{id:1634294960,predicate:"chatInvitePeek",params:[{name:"chat",type:"Chat"},{name:"expires",type:"int"}],type:"ChatInvite"},{id:-1660637285,predicate:"statsGroupTopPoster",params:[{name:"user_id",type:"long"},{name:"messages",type:"int"},{name:"avg_chars",type:"int"}],type:"StatsGroupTopPoster"},{id:-682079097,predicate:"statsGroupTopAdmin",params:[{name:"user_id",type:"long"},{name:"deleted",type:"int"},{name:"kicked",type:"int"},{name:"banned",type:"int"}],type:"StatsGroupTopAdmin"},{id:1398765469,predicate:"statsGroupTopInviter",params:[{name:"user_id",type:"long"},{name:"invitations",type:"int"}],type:"StatsGroupTopInviter"},{id:-276825834,predicate:"stats.megagroupStats",params:[{name:"period",type:"StatsDateRangeDays"},{name:"members",type:"StatsAbsValueAndPrev"},{name:"messages",type:"StatsAbsValueAndPrev"},{name:"viewers",type:"StatsAbsValueAndPrev"},{name:"posters",type:"StatsAbsValueAndPrev"},{name:"growth_graph",type:"StatsGraph"},{name:"members_graph",type:"StatsGraph"},{name:"new_members_by_source_graph",type:"StatsGraph"},{name:"languages_graph",type:"StatsGraph"},{name:"messages_graph",type:"StatsGraph"},{name:"actions_graph",type:"StatsGraph"},{name:"top_hours_graph",type:"StatsGraph"},{name:"weekdays_graph",type:"StatsGraph"},{name:"top_posters",type:"Vector<StatsGroupTopPoster>"},{name:"top_admins",type:"Vector<StatsGroupTopAdmin>"},{name:"top_inviters",type:"Vector<StatsGroupTopInviter>"},{name:"users",type:"Vector<User>"}],type:"stats.MegagroupStats"},{id:1934380235,predicate:"globalPrivacySettings",params:[{name:"flags",type:"#"},{name:"archive_and_mute_new_noncontact_peers",type:"flags.0?true"},{name:"keep_archived_unmuted",type:"flags.1?true"},{name:"keep_archived_folders",type:"flags.2?true"},{name:"hide_read_marks",type:"flags.3?true"},{name:"new_noncontact_peers_require_premium",type:"flags.4?true"}],type:"GlobalPrivacySettings"},{id:1667228533,predicate:"phoneConnectionWebrtc",params:[{name:"flags",type:"#"},{name:"turn",type:"flags.0?true"},{name:"stun",type:"flags.1?true"},{name:"id",type:"long"},{name:"ip",type:"string"},{name:"ipv6",type:"string"},{name:"port",type:"int"},{name:"username",type:"string"},{name:"password",type:"string"}],type:"PhoneConnection"},{id:1107543535,predicate:"help.countryCode",params:[{name:"flags",type:"#"},{name:"country_code",type:"string"},{name:"prefixes",type:"flags.0?Vector<string>"},{name:"patterns",type:"flags.1?Vector<string>"}],type:"help.CountryCode"},{id:-1014526429,predicate:"help.country",params:[{name:"flags",type:"#"},{name:"hidden",type:"flags.0?true"},{name:"iso2",type:"string"},{name:"default_name",type:"string"},{name:"name",type:"flags.1?string"},{name:"country_codes",type:"Vector<help.CountryCode>"}],type:"help.Country"},{id:-1815339214,predicate:"help.countriesListNotModified",params:[],type:"help.CountriesList"},{id:-2016381538,predicate:"help.countriesList",params:[{name:"countries",type:"Vector<help.Country>"},{name:"hash",type:"int"}],type:"help.CountriesList"},{id:1163625789,predicate:"messageViews",params:[{name:"flags",type:"#"},{name:"views",type:"flags.0?int"},{name:"forwards",type:"flags.1?int"},{name:"replies",type:"flags.2?MessageReplies"}],type:"MessageViews"},{id:-761649164,predicate:"updateChannelMessageForwards",params:[{name:"channel_id",type:"long"},{name:"id",type:"int"},{name:"forwards",type:"int"}],type:"Update"},{id:-96535659,predicate:"photoSizeProgressive",params:[{name:"type",type:"string"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"sizes",type:"Vector<int>"}],type:"PhotoSize"},{id:-1228606141,predicate:"messages.messageViews",params:[{name:"views",type:"Vector<MessageViews>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.MessageViews"},{id:-693004986,predicate:"updateReadChannelDiscussionInbox",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"top_msg_id",type:"int"},{name:"read_max_id",type:"int"},{name:"broadcast_id",type:"flags.0?long"},{name:"broadcast_post",type:"flags.0?int"}],type:"Update"},{id:1767677564,predicate:"updateReadChannelDiscussionOutbox",params:[{name:"channel_id",type:"long"},{name:"top_msg_id",type:"int"},{name:"read_max_id",type:"int"}],type:"Update"},{id:-1506535550,predicate:"messages.discussionMessage",params:[{name:"flags",type:"#"},{name:"messages",type:"Vector<Message>"},{name:"max_id",type:"flags.0?int"},{name:"read_inbox_max_id",type:"flags.1?int"},{name:"read_outbox_max_id",type:"flags.2?int"},{name:"unread_count",type:"int"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.DiscussionMessage"},{id:-1346631205,predicate:"messageReplyHeader",params:[{name:"flags",type:"#"},{name:"reply_to_scheduled",type:"flags.2?true"},{name:"forum_topic",type:"flags.3?true"},{name:"quote",type:"flags.9?true"},{name:"reply_to_msg_id",type:"flags.4?int"},{name:"reply_to_peer_id",type:"flags.0?Peer"},{name:"reply_from",type:"flags.5?MessageFwdHeader"},{name:"reply_media",type:"flags.8?MessageMedia"},{name:"reply_to_top_id",type:"flags.1?int"},{name:"quote_text",type:"flags.6?string"},{name:"quote_entities",type:"flags.7?Vector<MessageEntity>"},{name:"quote_offset",type:"flags.10?int"}],type:"MessageReplyHeader"},{id:-2083123262,predicate:"messageReplies",params:[{name:"flags",type:"#"},{name:"comments",type:"flags.0?true"},{name:"replies",type:"int"},{name:"replies_pts",type:"int"},{name:"recent_repliers",type:"flags.1?Vector<Peer>"},{name:"channel_id",type:"flags.0?long"},{name:"max_id",type:"flags.2?int"},{name:"read_max_id",type:"flags.3?int"}],type:"MessageReplies"},{id:-337610926,predicate:"updatePeerBlocked",params:[{name:"flags",type:"#"},{name:"blocked",type:"flags.0?true"},{name:"blocked_my_stories_from",type:"flags.1?true"},{name:"peer_id",type:"Peer"}],type:"Update"},{id:-386039788,predicate:"peerBlocked",params:[{name:"peer_id",type:"Peer"},{name:"date",type:"int"}],type:"PeerBlocked"},{id:-1937192669,predicate:"updateChannelUserTyping",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"top_msg_id",type:"flags.0?int"},{name:"from_id",type:"Peer"},{name:"action",type:"SendMessageAction"}],type:"Update"},{id:-1392895362,predicate:"inputMessageCallbackQuery",params:[{name:"id",type:"int"},{name:"query_id",type:"long"}],type:"InputMessage"},{id:453242886,predicate:"channelParticipantLeft",params:[{name:"peer",type:"Peer"}],type:"ChannelParticipant"},{id:-531931925,predicate:"channelParticipantsMentions",params:[{name:"flags",type:"#"},{name:"q",type:"flags.0?string"},{name:"top_msg_id",type:"flags.1?int"}],type:"ChannelParticipantsFilter"},{id:-309990731,predicate:"updatePinnedMessages",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"peer",type:"Peer"},{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:1538885128,predicate:"updatePinnedChannelMessages",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"channel_id",type:"long"},{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:464520273,predicate:"inputMessagesFilterPinned",params:[],type:"MessagesFilter"},{id:2145983508,predicate:"stats.messageStats",params:[{name:"views_graph",type:"StatsGraph"},{name:"reactions_by_emotion_graph",type:"StatsGraph"}],type:"stats.MessageStats"},{id:-1730095465,predicate:"messageActionGeoProximityReached",params:[{name:"from_id",type:"Peer"},{name:"to_id",type:"Peer"},{name:"distance",type:"int"}],type:"MessageAction"},{id:-668906175,predicate:"photoPathSize",params:[{name:"type",type:"string"},{name:"bytes",type:"bytes"}],type:"PhotoSize"},{id:-651419003,predicate:"speakingInGroupCallAction",params:[],type:"SendMessageAction"},{id:2004925620,predicate:"groupCallDiscarded",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"duration",type:"int"}],type:"GroupCall"},{id:-711498484,predicate:"groupCall",params:[{name:"flags",type:"#"},{name:"join_muted",type:"flags.1?true"},{name:"can_change_join_muted",type:"flags.2?true"},{name:"join_date_asc",type:"flags.6?true"},{name:"schedule_start_subscribed",type:"flags.8?true"},{name:"can_start_video",type:"flags.9?true"},{name:"record_video_active",type:"flags.11?true"},{name:"rtmp_stream",type:"flags.12?true"},{name:"listeners_hidden",type:"flags.13?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"participants_count",type:"int"},{name:"title",type:"flags.3?string"},{name:"stream_dc_id",type:"flags.4?int"},{name:"record_start_date",type:"flags.5?int"},{name:"schedule_date",type:"flags.7?int"},{name:"unmuted_video_count",type:"flags.10?int"},{name:"unmuted_video_limit",type:"int"},{name:"version",type:"int"}],type:"GroupCall"},{id:-659913713,predicate:"inputGroupCall",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputGroupCall"},{id:2047704898,predicate:"messageActionGroupCall",params:[{name:"flags",type:"#"},{name:"call",type:"InputGroupCall"},{name:"duration",type:"flags.0?int"}],type:"MessageAction"},{id:1345295095,predicate:"messageActionInviteToGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"users",type:"Vector<long>"}],type:"MessageAction"},{id:-341428482,predicate:"groupCallParticipant",params:[{name:"flags",type:"#"},{name:"muted",type:"flags.0?true"},{name:"left",type:"flags.1?true"},{name:"can_self_unmute",type:"flags.2?true"},{name:"just_joined",type:"flags.4?true"},{name:"versioned",type:"flags.5?true"},{name:"min",type:"flags.8?true"},{name:"muted_by_you",type:"flags.9?true"},{name:"volume_by_admin",type:"flags.10?true"},{name:"self",type:"flags.12?true"},{name:"video_joined",type:"flags.15?true"},{name:"peer",type:"Peer"},{name:"date",type:"int"},{name:"active_date",type:"flags.3?int"},{name:"source",type:"int"},{name:"volume",type:"flags.7?int"},{name:"about",type:"flags.11?string"},{name:"raise_hand_rating",type:"flags.13?long"},{name:"video",type:"flags.6?GroupCallParticipantVideo"},{name:"presentation",type:"flags.14?GroupCallParticipantVideo"}],type:"GroupCallParticipant"},{id:-124097970,predicate:"updateChat",params:[{name:"chat_id",type:"long"}],type:"Update"},{id:-219423922,predicate:"updateGroupCallParticipants",params:[{name:"call",type:"InputGroupCall"},{name:"participants",type:"Vector<GroupCallParticipant>"},{name:"version",type:"int"}],type:"Update"},{id:347227392,predicate:"updateGroupCall",params:[{name:"chat_id",type:"long"},{name:"call",type:"GroupCall"}],type:"Update"},{id:-1636664659,predicate:"phone.groupCall",params:[{name:"call",type:"GroupCall"},{name:"participants",type:"Vector<GroupCallParticipant>"},{name:"participants_next_offset",type:"string"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"phone.GroupCall"},{id:-193506890,predicate:"phone.groupParticipants",params:[{name:"count",type:"int"},{name:"participants",type:"Vector<GroupCallParticipant>"},{name:"next_offset",type:"string"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"version",type:"int"}],type:"phone.GroupParticipants"},{id:813821341,predicate:"inlineQueryPeerTypeSameBotPM",params:[],type:"InlineQueryPeerType"},{id:-2093215828,predicate:"inlineQueryPeerTypePM",params:[],type:"InlineQueryPeerType"},{id:-681130742,predicate:"inlineQueryPeerTypeChat",params:[],type:"InlineQueryPeerType"},{id:1589952067,predicate:"inlineQueryPeerTypeMegagroup",params:[],type:"InlineQueryPeerType"},{id:1664413338,predicate:"inlineQueryPeerTypeBroadcast",params:[],type:"InlineQueryPeerType"},{id:589338437,predicate:"channelAdminLogEventActionStartGroupCall",params:[{name:"call",type:"InputGroupCall"}],type:"ChannelAdminLogEventAction"},{id:-610299584,predicate:"channelAdminLogEventActionDiscardGroupCall",params:[{name:"call",type:"InputGroupCall"}],type:"ChannelAdminLogEventAction"},{id:-115071790,predicate:"channelAdminLogEventActionParticipantMute",params:[{name:"participant",type:"GroupCallParticipant"}],type:"ChannelAdminLogEventAction"},{id:-431740480,predicate:"channelAdminLogEventActionParticipantUnmute",params:[{name:"participant",type:"GroupCallParticipant"}],type:"ChannelAdminLogEventAction"},{id:1456906823,predicate:"channelAdminLogEventActionToggleGroupCallSetting",params:[{name:"join_muted",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:-1966921727,predicate:"inputPaymentCredentialsGooglePay",params:[{name:"payment_token",type:"DataJSON"}],type:"InputPaymentCredentials"},{id:375566091,predicate:"messages.historyImport",params:[{name:"id",type:"long"}],type:"messages.HistoryImport"},{id:-606432698,predicate:"sendMessageHistoryImportAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:1578088377,predicate:"messages.historyImportParsed",params:[{name:"flags",type:"#"},{name:"pm",type:"flags.0?true"},{name:"group",type:"flags.1?true"},{name:"title",type:"flags.2?string"}],type:"messages.HistoryImportParsed"},{id:-170010905,predicate:"inputReportReasonFake",params:[],type:"ReportReason"},{id:-275956116,predicate:"messages.affectedFoundMessages",params:[{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"offset",type:"int"},{name:"messages",type:"Vector<int>"}],type:"messages.AffectedFoundMessages"},{id:1007897979,predicate:"messageActionSetMessagesTTL",params:[{name:"flags",type:"#"},{name:"period",type:"int"},{name:"auto_setting_from",type:"flags.0?long"}],type:"MessageAction"},{id:-1147422299,predicate:"updatePeerHistoryTTL",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"ttl_period",type:"flags.0?int"}],type:"Update"},{id:-796432838,predicate:"updateChatParticipant",params:[{name:"flags",type:"#"},{name:"chat_id",type:"long"},{name:"date",type:"int"},{name:"actor_id",type:"long"},{name:"user_id",type:"long"},{name:"prev_participant",type:"flags.0?ChatParticipant"},{name:"new_participant",type:"flags.1?ChatParticipant"},{name:"invite",type:"flags.2?ExportedChatInvite"},{name:"qts",type:"int"}],type:"Update"},{id:-1738720581,predicate:"updateChannelParticipant",params:[{name:"flags",type:"#"},{name:"via_chatlist",type:"flags.3?true"},{name:"channel_id",type:"long"},{name:"date",type:"int"},{name:"actor_id",type:"long"},{name:"user_id",type:"long"},{name:"prev_participant",type:"flags.0?ChannelParticipant"},{name:"new_participant",type:"flags.1?ChannelParticipant"},{name:"invite",type:"flags.2?ExportedChatInvite"},{name:"qts",type:"int"}],type:"Update"},{id:-997782967,predicate:"updateBotStopped",params:[{name:"user_id",type:"long"},{name:"date",type:"int"},{name:"stopped",type:"Bool"},{name:"qts",type:"int"}],type:"Update"},{id:-1940201511,predicate:"chatInviteImporter",params:[{name:"flags",type:"#"},{name:"requested",type:"flags.0?true"},{name:"via_chatlist",type:"flags.3?true"},{name:"user_id",type:"long"},{name:"date",type:"int"},{name:"about",type:"flags.2?string"},{name:"approved_by",type:"flags.1?long"}],type:"ChatInviteImporter"},{id:-1111085620,predicate:"messages.exportedChatInvites",params:[{name:"count",type:"int"},{name:"invites",type:"Vector<ExportedChatInvite>"},{name:"users",type:"Vector<User>"}],type:"messages.ExportedChatInvites"},{id:410107472,predicate:"messages.exportedChatInvite",params:[{name:"invite",type:"ExportedChatInvite"},{name:"users",type:"Vector<User>"}],type:"messages.ExportedChatInvite"},{id:572915951,predicate:"messages.exportedChatInviteReplaced",params:[{name:"invite",type:"ExportedChatInvite"},{name:"new_invite",type:"ExportedChatInvite"},{name:"users",type:"Vector<User>"}],type:"messages.ExportedChatInvite"},{id:-2118733814,predicate:"messages.chatInviteImporters",params:[{name:"count",type:"int"},{name:"importers",type:"Vector<ChatInviteImporter>"},{name:"users",type:"Vector<User>"}],type:"messages.ChatInviteImporters"},{id:-219353309,predicate:"chatAdminWithInvites",params:[{name:"admin_id",type:"long"},{name:"invites_count",type:"int"},{name:"revoked_invites_count",type:"int"}],type:"ChatAdminWithInvites"},{id:-1231326505,predicate:"messages.chatAdminsWithInvites",params:[{name:"admins",type:"Vector<ChatAdminWithInvites>"},{name:"users",type:"Vector<User>"}],type:"messages.ChatAdminsWithInvites"},{id:-23084712,predicate:"channelAdminLogEventActionParticipantJoinByInvite",params:[{name:"flags",type:"#"},{name:"via_chatlist",type:"flags.0?true"},{name:"invite",type:"ExportedChatInvite"}],type:"ChannelAdminLogEventAction"},{id:1515256996,predicate:"channelAdminLogEventActionExportedInviteDelete",params:[{name:"invite",type:"ExportedChatInvite"}],type:"ChannelAdminLogEventAction"},{id:1091179342,predicate:"channelAdminLogEventActionExportedInviteRevoke",params:[{name:"invite",type:"ExportedChatInvite"}],type:"ChannelAdminLogEventAction"},{id:-384910503,predicate:"channelAdminLogEventActionExportedInviteEdit",params:[{name:"prev_invite",type:"ExportedChatInvite"},{name:"new_invite",type:"ExportedChatInvite"}],type:"ChannelAdminLogEventAction"},{id:1048537159,predicate:"channelAdminLogEventActionParticipantVolume",params:[{name:"participant",type:"GroupCallParticipant"}],type:"ChannelAdminLogEventAction"},{id:1855199800,predicate:"channelAdminLogEventActionChangeHistoryTTL",params:[{name:"prev_value",type:"int"},{name:"new_value",type:"int"}],type:"ChannelAdminLogEventAction"},{id:-1571952873,predicate:"messages.checkedHistoryImportPeer",params:[{name:"confirm_text",type:"string"}],type:"messages.CheckedHistoryImportPeer"},{id:93890858,predicate:"inputGroupCallStream",params:[{name:"flags",type:"#"},{name:"call",type:"InputGroupCall"},{name:"time_ms",type:"long"},{name:"scale",type:"int"},{name:"video_channel",type:"flags.0?int"},{name:"video_quality",type:"flags.0?int"}],type:"InputFileLocation"},{id:-1343921601,predicate:"phone.joinAsPeers",params:[{name:"peers",type:"Vector<Peer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"phone.JoinAsPeers"},{id:541839704,predicate:"phone.exportedGroupCallInvite",params:[{name:"link",type:"string"}],type:"phone.ExportedGroupCallInvite"},{id:-672693723,predicate:"inputBotInlineMessageMediaInvoice",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.0?InputWebDocument"},{name:"invoice",type:"Invoice"},{name:"payload",type:"bytes"},{name:"provider",type:"string"},{name:"provider_data",type:"DataJSON"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:894081801,predicate:"botInlineMessageMediaInvoice",params:[{name:"flags",type:"#"},{name:"shipping_address_requested",type:"flags.1?true"},{name:"test",type:"flags.3?true"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.0?WebDocument"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:-1281329567,predicate:"messageActionGroupCallScheduled",params:[{name:"call",type:"InputGroupCall"},{name:"schedule_date",type:"int"}],type:"MessageAction"},{id:-592373577,predicate:"groupCallParticipantVideoSourceGroup",params:[{name:"semantics",type:"string"},{name:"sources",type:"Vector<int>"}],type:"GroupCallParticipantVideoSourceGroup"},{id:1735736008,predicate:"groupCallParticipantVideo",params:[{name:"flags",type:"#"},{name:"paused",type:"flags.0?true"},{name:"endpoint",type:"string"},{name:"source_groups",type:"Vector<GroupCallParticipantVideoSourceGroup>"},{name:"audio_source",type:"flags.1?int"}],type:"GroupCallParticipantVideo"},{id:192428418,predicate:"updateGroupCallConnection",params:[{name:"flags",type:"#"},{name:"presentation",type:"flags.0?true"},{name:"params",type:"DataJSON"}],type:"Update"},{id:-2046910401,predicate:"stickers.suggestedShortName",params:[{name:"short_name",type:"string"}],type:"stickers.SuggestedShortName"},{id:795652779,predicate:"botCommandScopeDefault",params:[],type:"BotCommandScope"},{id:1011811544,predicate:"botCommandScopeUsers",params:[],type:"BotCommandScope"},{id:1877059713,predicate:"botCommandScopeChats",params:[],type:"BotCommandScope"},{id:-1180016534,predicate:"botCommandScopeChatAdmins",params:[],type:"BotCommandScope"},{id:-610432643,predicate:"botCommandScopePeer",params:[{name:"peer",type:"InputPeer"}],type:"BotCommandScope"},{id:1071145937,predicate:"botCommandScopePeerAdmins",params:[{name:"peer",type:"InputPeer"}],type:"BotCommandScope"},{id:169026035,predicate:"botCommandScopePeerUser",params:[{name:"peer",type:"InputPeer"},{name:"user_id",type:"InputUser"}],type:"BotCommandScope"},{id:-478701471,predicate:"account.resetPasswordFailedWait",params:[{name:"retry_date",type:"int"}],type:"account.ResetPasswordResult"},{id:-370148227,predicate:"account.resetPasswordRequestedWait",params:[{name:"until_date",type:"int"}],type:"account.ResetPasswordResult"},{id:-383330754,predicate:"account.resetPasswordOk",params:[],type:"account.ResetPasswordResult"},{id:1299263278,predicate:"updateBotCommands",params:[{name:"peer",type:"Peer"},{name:"bot_id",type:"long"},{name:"commands",type:"Vector<BotCommand>"}],type:"Update"},{id:-1434950843,predicate:"messageActionSetChatTheme",params:[{name:"emoticon",type:"string"}],type:"MessageAction"},{id:-1336228175,predicate:"sendMessageChooseStickerAction",params:[],type:"SendMessageAction"},{id:-313293833,predicate:"sponsoredMessage",params:[{name:"flags",type:"#"},{name:"recommended",type:"flags.5?true"},{name:"show_peer_photo",type:"flags.6?true"},{name:"can_report",type:"flags.12?true"},{name:"random_id",type:"bytes"},{name:"from_id",type:"flags.3?Peer"},{name:"chat_invite",type:"flags.4?ChatInvite"},{name:"chat_invite_hash",type:"flags.4?string"},{name:"channel_post",type:"flags.2?int"},{name:"start_param",type:"flags.0?string"},{name:"webpage",type:"flags.9?SponsoredWebPage"},{name:"app",type:"flags.10?BotApp"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"button_text",type:"flags.11?string"},{name:"sponsor_info",type:"flags.7?string"},{name:"additional_info",type:"flags.8?string"}],type:"SponsoredMessage"},{id:-907141753,predicate:"messages.sponsoredMessages",params:[{name:"flags",type:"#"},{name:"posts_between",type:"flags.0?int"},{name:"messages",type:"Vector<SponsoredMessage>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.SponsoredMessages"},{id:215889721,predicate:"inputStickerSetAnimatedEmojiAnimations",params:[],type:"InputStickerSet"},{id:630664139,predicate:"sendMessageEmojiInteraction",params:[{name:"emoticon",type:"string"},{name:"msg_id",type:"int"},{name:"interaction",type:"DataJSON"}],type:"SendMessageAction"},{id:-1234857938,predicate:"sendMessageEmojiInteractionSeen",params:[{name:"emoticon",type:"string"}],type:"SendMessageAction"},{id:-1227287081,predicate:"inputBotInlineMessageID64",params:[{name:"dc_id",type:"int"},{name:"owner_id",type:"long"},{name:"id",type:"int"},{name:"access_hash",type:"long"}],type:"InputBotInlineMessageID"},{id:-911191137,predicate:"searchResultsCalendarPeriod",params:[{name:"date",type:"int"},{name:"min_msg_id",type:"int"},{name:"max_msg_id",type:"int"},{name:"count",type:"int"}],type:"SearchResultsCalendarPeriod"},{id:343859772,predicate:"messages.searchResultsCalendar",params:[{name:"flags",type:"#"},{name:"inexact",type:"flags.0?true"},{name:"count",type:"int"},{name:"min_date",type:"int"},{name:"min_msg_id",type:"int"},{name:"offset_id_offset",type:"flags.1?int"},{name:"periods",type:"Vector<SearchResultsCalendarPeriod>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.SearchResultsCalendar"},{id:2137295719,predicate:"searchResultPosition",params:[{name:"msg_id",type:"int"},{name:"date",type:"int"},{name:"offset",type:"int"}],type:"SearchResultsPosition"},{id:1404185519,predicate:"messages.searchResultsPositions",params:[{name:"count",type:"int"},{name:"positions",type:"Vector<SearchResultsPosition>"}],type:"messages.SearchResultsPositions"},{id:-339958837,predicate:"messageActionChatJoinedByRequest",params:[],type:"MessageAction"},{id:1885586395,predicate:"updatePendingJoinRequests",params:[{name:"peer",type:"Peer"},{name:"requests_pending",type:"int"},{name:"recent_requesters",type:"Vector<long>"}],type:"Update"},{id:299870598,predicate:"updateBotChatInviteRequester",params:[{name:"peer",type:"Peer"},{name:"date",type:"int"},{name:"user_id",type:"long"},{name:"about",type:"string"},{name:"invite",type:"ExportedChatInvite"},{name:"qts",type:"int"}],type:"Update"},{id:-1347021750,predicate:"channelAdminLogEventActionParticipantJoinByRequest",params:[{name:"invite",type:"ExportedChatInvite"},{name:"approved_by",type:"long"}],type:"ChannelAdminLogEventAction"},{id:-376962181,predicate:"inputKeyboardButtonUserProfile",params:[{name:"text",type:"string"},{name:"user_id",type:"InputUser"}],type:"KeyboardButton"},{id:814112961,predicate:"keyboardButtonUserProfile",params:[{name:"text",type:"string"},{name:"user_id",type:"long"}],type:"KeyboardButton"},{id:-191450938,predicate:"channels.sendAsPeers",params:[{name:"peers",type:"Vector<SendAsPeer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"channels.SendAsPeers"},{id:-886388890,predicate:"channelAdminLogEventActionToggleNoForwards",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:-738646805,predicate:"messages.stickerSetNotModified",params:[],type:"messages.StickerSet"},{id:997004590,predicate:"users.userFull",params:[{name:"full_user",type:"UserFull"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"users.UserFull"},{id:1753266509,predicate:"messages.peerSettings",params:[{name:"settings",type:"PeerSettings"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.PeerSettings"},{id:663693416,predicate:"channelAdminLogEventActionSendMessage",params:[{name:"message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:-702884114,predicate:"auth.codeTypeMissedCall",params:[],type:"auth.CodeType"},{id:-2113903484,predicate:"auth.sentCodeTypeMissedCall",params:[{name:"prefix",type:"string"},{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:-1012759713,predicate:"auth.loggedOut",params:[{name:"flags",type:"#"},{name:"future_auth_token",type:"flags.0?bytes"}],type:"auth.LoggedOut"},{id:1578843320,predicate:"updateMessageReactions",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"msg_id",type:"int"},{name:"top_msg_id",type:"flags.0?int"},{name:"reactions",type:"MessageReactions"}],type:"Update"},{id:-1546531968,predicate:"reactionCount",params:[{name:"flags",type:"#"},{name:"chosen_order",type:"flags.0?int"},{name:"reaction",type:"Reaction"},{name:"count",type:"int"}],type:"ReactionCount"},{id:1328256121,predicate:"messageReactions",params:[{name:"flags",type:"#"},{name:"min",type:"flags.0?true"},{name:"can_see_list",type:"flags.2?true"},{name:"reactions_as_tags",type:"flags.3?true"},{name:"results",type:"Vector<ReactionCount>"},{name:"recent_reactions",type:"flags.1?Vector<MessagePeerReaction>"}],type:"MessageReactions"},{id:834488621,predicate:"messages.messageReactionsList",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"reactions",type:"Vector<MessagePeerReaction>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"next_offset",type:"flags.0?string"}],type:"messages.MessageReactionsList"},{id:-1065882623,predicate:"availableReaction",params:[{name:"flags",type:"#"},{name:"inactive",type:"flags.0?true"},{name:"premium",type:"flags.2?true"},{name:"reaction",type:"string"},{name:"title",type:"string"},{name:"static_icon",type:"Document"},{name:"appear_animation",type:"Document"},{name:"select_animation",type:"Document"},{name:"activate_animation",type:"Document"},{name:"effect_animation",type:"Document"},{name:"around_animation",type:"flags.1?Document"},{name:"center_icon",type:"flags.1?Document"}],type:"AvailableReaction"},{id:-1626924713,predicate:"messages.availableReactionsNotModified",params:[],type:"messages.AvailableReactions"},{id:1989032621,predicate:"messages.availableReactions",params:[{name:"hash",type:"int"},{name:"reactions",type:"Vector<AvailableReaction>"}],type:"messages.AvailableReactions"},{id:852137487,predicate:"messageEntitySpoiler",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-1102180616,predicate:"channelAdminLogEventActionChangeAvailableReactions",params:[{name:"prev_value",type:"ChatReactions"},{name:"new_value",type:"ChatReactions"}],type:"ChannelAdminLogEventAction"},{id:-1938180548,predicate:"messagePeerReaction",params:[{name:"flags",type:"#"},{name:"big",type:"flags.0?true"},{name:"unread",type:"flags.1?true"},{name:"my",type:"flags.2?true"},{name:"peer_id",type:"Peer"},{name:"date",type:"int"},{name:"reaction",type:"Reaction"}],type:"MessagePeerReaction"},{id:-2132064081,predicate:"groupCallStreamChannel",params:[{name:"channel",type:"int"},{name:"scale",type:"int"},{name:"last_timestamp_ms",type:"long"}],type:"GroupCallStreamChannel"},{id:-790330702,predicate:"phone.groupCallStreamChannels",params:[{name:"channels",type:"Vector<GroupCallStreamChannel>"}],type:"phone.GroupCallStreamChannels"},{id:177124030,predicate:"inputReportReasonIllegalDrugs",params:[],type:"ReportReason"},{id:-1631091139,predicate:"inputReportReasonPersonalDetails",params:[],type:"ReportReason"},{id:767505458,predicate:"phone.groupCallStreamRtmpUrl",params:[{name:"url",type:"string"},{name:"key",type:"string"}],type:"phone.GroupCallStreamRtmpUrl"},{id:1165423600,predicate:"attachMenuBotIconColor",params:[{name:"name",type:"string"},{name:"color",type:"int"}],type:"AttachMenuBotIconColor"},{id:-1297663893,predicate:"attachMenuBotIcon",params:[{name:"flags",type:"#"},{name:"name",type:"string"},{name:"icon",type:"Document"},{name:"colors",type:"flags.0?Vector<AttachMenuBotIconColor>"}],type:"AttachMenuBotIcon"},{id:-653423106,predicate:"attachMenuBot",params:[{name:"flags",type:"#"},{name:"inactive",type:"flags.0?true"},{name:"has_settings",type:"flags.1?true"},{name:"request_write_access",type:"flags.2?true"},{name:"show_in_attach_menu",type:"flags.3?true"},{name:"show_in_side_menu",type:"flags.4?true"},{name:"side_menu_disclaimer_needed",type:"flags.5?true"},{name:"bot_id",type:"long"},{name:"short_name",type:"string"},{name:"peer_types",type:"flags.3?Vector<AttachMenuPeerType>"},{name:"icons",type:"Vector<AttachMenuBotIcon>"}],type:"AttachMenuBot"},{id:-237467044,predicate:"attachMenuBotsNotModified",params:[],type:"AttachMenuBots"},{id:1011024320,predicate:"attachMenuBots",params:[{name:"hash",type:"long"},{name:"bots",type:"Vector<AttachMenuBot>"},{name:"users",type:"Vector<User>"}],type:"AttachMenuBots"},{id:-1816172929,predicate:"attachMenuBotsBot",params:[{name:"bot",type:"AttachMenuBot"},{name:"users",type:"Vector<User>"}],type:"AttachMenuBotsBot"},{id:397910539,predicate:"updateAttachMenuBots",params:[],type:"Update"},{id:202659196,predicate:"webViewResultUrl",params:[{name:"query_id",type:"long"},{name:"url",type:"string"}],type:"WebViewResult"},{id:-2010155333,predicate:"simpleWebViewResultUrl",params:[{name:"url",type:"string"}],type:"SimpleWebViewResult"},{id:211046684,predicate:"webViewMessageSent",params:[{name:"flags",type:"#"},{name:"msg_id",type:"flags.0?InputBotInlineMessageID"}],type:"WebViewMessageSent"},{id:361936797,predicate:"updateWebViewResultSent",params:[{name:"query_id",type:"long"}],type:"Update"},{id:326529584,predicate:"keyboardButtonWebView",params:[{name:"text",type:"string"},{name:"url",type:"string"}],type:"KeyboardButton"},{id:-1598009252,predicate:"keyboardButtonSimpleWebView",params:[{name:"text",type:"string"},{name:"url",type:"string"}],type:"KeyboardButton"},{id:1205698681,predicate:"messageActionWebViewDataSentMe",params:[{name:"text",type:"string"},{name:"data",type:"string"}],type:"MessageAction"},{id:-1262252875,predicate:"messageActionWebViewDataSent",params:[{name:"text",type:"string"}],type:"MessageAction"},{id:347625491,predicate:"updateBotMenuButton",params:[{name:"bot_id",type:"long"},{name:"button",type:"BotMenuButton"}],type:"Update"},{id:1966318984,predicate:"botMenuButtonDefault",params:[],type:"BotMenuButton"},{id:1113113093,predicate:"botMenuButtonCommands",params:[],type:"BotMenuButton"},{id:-944407322,predicate:"botMenuButton",params:[{name:"text",type:"string"},{name:"url",type:"string"}],type:"BotMenuButton"},{id:-67704655,predicate:"account.savedRingtonesNotModified",params:[],type:"account.SavedRingtones"},{id:-1041683259,predicate:"account.savedRingtones",params:[{name:"hash",type:"long"},{name:"ringtones",type:"Vector<Document>"}],type:"account.SavedRingtones"},{id:1960361625,predicate:"updateSavedRingtones",params:[],type:"Update"},{id:-1746354498,predicate:"notificationSoundDefault",params:[],type:"NotificationSound"},{id:1863070943,predicate:"notificationSoundNone",params:[],type:"NotificationSound"},{id:-2096391452,predicate:"notificationSoundLocal",params:[{name:"title",type:"string"},{name:"data",type:"string"}],type:"NotificationSound"},{id:-9666487,predicate:"notificationSoundRingtone",params:[{name:"id",type:"long"}],type:"NotificationSound"},{id:-1222230163,predicate:"account.savedRingtone",params:[],type:"account.SavedRingtone"},{id:523271863,predicate:"account.savedRingtoneConverted",params:[{name:"document",type:"Document"}],type:"account.SavedRingtone"},{id:2104224014,predicate:"attachMenuPeerTypeSameBotPM",params:[],type:"AttachMenuPeerType"},{id:-1020528102,predicate:"attachMenuPeerTypeBotPM",params:[],type:"AttachMenuPeerType"},{id:-247016673,predicate:"attachMenuPeerTypePM",params:[],type:"AttachMenuPeerType"},{id:84480319,predicate:"attachMenuPeerTypeChat",params:[],type:"AttachMenuPeerType"},{id:2080104188,predicate:"attachMenuPeerTypeBroadcast",params:[],type:"AttachMenuPeerType"},{id:-317687113,predicate:"chatInvitePublicJoinRequests",params:[],type:"ExportedChatInvite"},{id:-977967015,predicate:"inputInvoiceMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"InputInvoice"},{id:-1020867857,predicate:"inputInvoiceSlug",params:[{name:"slug",type:"string"}],type:"InputInvoice"},{id:-1362048039,predicate:"payments.exportedInvoice",params:[{name:"url",type:"string"}],type:"payments.ExportedInvoice"},{id:8703322,predicate:"updateTranscribedAudio",params:[{name:"flags",type:"#"},{name:"pending",type:"flags.0?true"},{name:"peer",type:"Peer"},{name:"msg_id",type:"int"},{name:"transcription_id",type:"long"},{name:"text",type:"string"}],type:"Update"},{id:-809903785,predicate:"messages.transcribedAudio",params:[{name:"flags",type:"#"},{name:"pending",type:"flags.0?true"},{name:"transcription_id",type:"long"},{name:"text",type:"string"},{name:"trial_remains_num",type:"flags.1?int"},{name:"trial_remains_until_date",type:"flags.1?int"}],type:"messages.TranscribedAudio"},{id:909284270,predicate:"dialogFilterDefault",params:[],type:"DialogFilter"},{id:1395946908,predicate:"help.premiumPromo",params:[{name:"status_text",type:"string"},{name:"status_entities",type:"Vector<MessageEntity>"},{name:"video_sections",type:"Vector<string>"},{name:"videos",type:"Vector<Document>"},{name:"period_options",type:"Vector<PremiumSubscriptionOption>"},{name:"users",type:"Vector<User>"}],type:"help.PremiumPromo"},{id:-925956616,predicate:"messageEntityCustomEmoji",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"document_id",type:"long"}],type:"MessageEntity"},{id:-48981863,predicate:"documentAttributeCustomEmoji",params:[{name:"flags",type:"#"},{name:"free",type:"flags.0?true"},{name:"text_color",type:"flags.1?true"},{name:"alt",type:"string"},{name:"stickerset",type:"InputStickerSet"}],type:"DocumentAttribute"},{id:1087454222,predicate:"stickerSetFullCovered",params:[{name:"set",type:"StickerSet"},{name:"packs",type:"Vector<StickerPack>"},{name:"keywords",type:"Vector<StickerKeyword>"},{name:"documents",type:"Vector<Document>"}],type:"StickerSetCovered"},{id:-1502273946,predicate:"inputStorePaymentPremiumSubscription",params:[{name:"flags",type:"#"},{name:"restore",type:"flags.0?true"},{name:"upgrade",type:"flags.1?true"}],type:"InputStorePaymentPurpose"},{id:1634697192,predicate:"inputStorePaymentGiftPremium",params:[{name:"user_id",type:"InputUser"},{name:"currency",type:"string"},{name:"amount",type:"long"}],type:"InputStorePaymentPurpose"},{id:-935499028,predicate:"messageActionGiftPremium",params:[{name:"flags",type:"#"},{name:"currency",type:"string"},{name:"amount",type:"long"},{name:"months",type:"int"},{name:"crypto_currency",type:"flags.0?string"},{name:"crypto_amount",type:"flags.0?long"}],type:"MessageAction"},{id:1958953753,predicate:"premiumGiftOption",params:[{name:"flags",type:"#"},{name:"months",type:"int"},{name:"currency",type:"string"},{name:"amount",type:"long"},{name:"bot_url",type:"string"},{name:"store_product",type:"flags.0?string"}],type:"PremiumGiftOption"},{id:-930399486,predicate:"inputStickerSetPremiumGifts",params:[],type:"InputStickerSet"},{id:-78886548,predicate:"updateReadFeaturedEmojiStickers",params:[],type:"Update"},{id:-1360618136,predicate:"inputPrivacyKeyVoiceMessages",params:[],type:"InputPrivacyKey"},{id:110621716,predicate:"privacyKeyVoiceMessages",params:[],type:"PrivacyKey"},{id:-1996951013,predicate:"paymentFormMethod",params:[{name:"url",type:"string"},{name:"title",type:"string"}],type:"PaymentFormMethod"},{id:-193992412,predicate:"inputWebFileAudioAlbumThumbLocation",params:[{name:"flags",type:"#"},{name:"small",type:"flags.2?true"},{name:"document",type:"flags.0?InputDocument"},{name:"title",type:"flags.1?string"},{name:"performer",type:"flags.1?string"}],type:"InputWebFileLocation"},{id:769727150,predicate:"emojiStatusEmpty",params:[],type:"EmojiStatus"},{id:-1835310691,predicate:"emojiStatus",params:[{name:"document_id",type:"long"}],type:"EmojiStatus"},{id:-97474361,predicate:"emojiStatusUntil",params:[{name:"document_id",type:"long"},{name:"until",type:"int"}],type:"EmojiStatus"},{id:674706841,predicate:"updateUserEmojiStatus",params:[{name:"user_id",type:"long"},{name:"emoji_status",type:"EmojiStatus"}],type:"Update"},{id:821314523,predicate:"updateRecentEmojiStatuses",params:[],type:"Update"},{id:-796072379,predicate:"account.emojiStatusesNotModified",params:[],type:"account.EmojiStatuses"},{id:-1866176559,predicate:"account.emojiStatuses",params:[{name:"hash",type:"long"},{name:"statuses",type:"Vector<EmojiStatus>"}],type:"account.EmojiStatuses"},{id:2046153753,predicate:"reactionEmpty",params:[],type:"Reaction"},{id:455247544,predicate:"reactionEmoji",params:[{name:"emoticon",type:"string"}],type:"Reaction"},{id:-1992950669,predicate:"reactionCustomEmoji",params:[{name:"document_id",type:"long"}],type:"Reaction"},{id:-352570692,predicate:"chatReactionsNone",params:[],type:"ChatReactions"},{id:1385335754,predicate:"chatReactionsAll",params:[{name:"flags",type:"#"},{name:"allow_custom",type:"flags.0?true"}],type:"ChatReactions"},{id:1713193015,predicate:"chatReactionsSome",params:[{name:"reactions",type:"Vector<Reaction>"}],type:"ChatReactions"},{id:-1334846497,predicate:"messages.reactionsNotModified",params:[],type:"messages.Reactions"},{id:-352454890,predicate:"messages.reactions",params:[{name:"hash",type:"long"},{name:"reactions",type:"Vector<Reaction>"}],type:"messages.Reactions"},{id:1870160884,predicate:"updateRecentReactions",params:[],type:"Update"},{id:-2030252155,predicate:"updateMoveStickerSetToTop",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"emojis",type:"flags.1?true"},{name:"stickerset",type:"long"}],type:"Update"},{id:-196020837,predicate:"auth.sentCodeTypeEmailCode",params:[{name:"flags",type:"#"},{name:"apple_signin_allowed",type:"flags.0?true"},{name:"google_signin_allowed",type:"flags.1?true"},{name:"email_pattern",type:"string"},{name:"length",type:"int"},{name:"reset_available_period",type:"flags.3?int"},{name:"reset_pending_date",type:"flags.4?int"}],type:"auth.SentCodeType"},{id:-1521934870,predicate:"auth.sentCodeTypeSetUpEmailRequired",params:[{name:"flags",type:"#"},{name:"apple_signin_allowed",type:"flags.0?true"},{name:"google_signin_allowed",type:"flags.1?true"}],type:"auth.SentCodeType"},{id:1128644211,predicate:"emailVerifyPurposeLoginSetup",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"}],type:"EmailVerifyPurpose"},{id:1383932651,predicate:"emailVerifyPurposeLoginChange",params:[],type:"EmailVerifyPurpose"},{id:-1141565819,predicate:"emailVerifyPurposePassport",params:[],type:"EmailVerifyPurpose"},{id:-1842457175,predicate:"emailVerificationCode",params:[{name:"code",type:"string"}],type:"EmailVerification"},{id:-611279166,predicate:"emailVerificationGoogle",params:[{name:"token",type:"string"}],type:"EmailVerification"},{id:-1764723459,predicate:"emailVerificationApple",params:[{name:"token",type:"string"}],type:"EmailVerification"},{id:731303195,predicate:"account.emailVerified",params:[{name:"email",type:"string"}],type:"account.EmailVerified"},{id:-507835039,predicate:"account.emailVerifiedLogin",params:[{name:"email",type:"string"},{name:"sent_code",type:"auth.SentCode"}],type:"account.EmailVerified"},{id:1596792306,predicate:"premiumSubscriptionOption",params:[{name:"flags",type:"#"},{name:"current",type:"flags.1?true"},{name:"can_purchase_upgrade",type:"flags.2?true"},{name:"transaction",type:"flags.3?string"},{name:"months",type:"int"},{name:"currency",type:"string"},{name:"amount",type:"long"},{name:"bot_url",type:"string"},{name:"store_product",type:"flags.0?string"}],type:"PremiumSubscriptionOption"},{id:80008398,predicate:"inputStickerSetEmojiGenericAnimations",params:[],type:"InputStickerSet"},{id:701560302,predicate:"inputStickerSetEmojiDefaultStatuses",params:[],type:"InputStickerSet"},{id:-1206095820,predicate:"sendAsPeer",params:[{name:"flags",type:"#"},{name:"premium_required",type:"flags.0?true"},{name:"peer",type:"Peer"}],type:"SendAsPeer"},{id:-1386050360,predicate:"messageExtendedMediaPreview",params:[{name:"flags",type:"#"},{name:"w",type:"flags.0?int"},{name:"h",type:"flags.0?int"},{name:"thumb",type:"flags.1?PhotoSize"},{name:"video_duration",type:"flags.2?int"}],type:"MessageExtendedMedia"},{id:-297296796,predicate:"messageExtendedMedia",params:[{name:"media",type:"MessageMedia"}],type:"MessageExtendedMedia"},{id:1517529484,predicate:"updateMessageExtendedMedia",params:[{name:"peer",type:"Peer"},{name:"msg_id",type:"int"},{name:"extended_media",type:"MessageExtendedMedia"}],type:"Update"},{id:-50416996,predicate:"stickerKeyword",params:[{name:"document_id",type:"long"},{name:"keyword",type:"Vector<string>"}],type:"StickerKeyword"},{id:-1274595769,predicate:"username",params:[{name:"flags",type:"#"},{name:"editable",type:"flags.0?true"},{name:"active",type:"flags.1?true"},{name:"username",type:"string"}],type:"Username"},{id:-263212119,predicate:"channelAdminLogEventActionChangeUsernames",params:[{name:"prev_value",type:"Vector<string>"},{name:"new_value",type:"Vector<string>"}],type:"ChannelAdminLogEventAction"},{id:46949251,predicate:"channelAdminLogEventActionToggleForum",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:1483767080,predicate:"channelAdminLogEventActionCreateTopic",params:[{name:"topic",type:"ForumTopic"}],type:"ChannelAdminLogEventAction"},{id:-261103096,predicate:"channelAdminLogEventActionEditTopic",params:[{name:"prev_topic",type:"ForumTopic"},{name:"new_topic",type:"ForumTopic"}],type:"ChannelAdminLogEventAction"},{id:-1374254839,predicate:"channelAdminLogEventActionDeleteTopic",params:[{name:"topic",type:"ForumTopic"}],type:"ChannelAdminLogEventAction"},{id:1569535291,predicate:"channelAdminLogEventActionPinTopic",params:[{name:"flags",type:"#"},{name:"prev_topic",type:"flags.0?ForumTopic"},{name:"new_topic",type:"flags.1?ForumTopic"}],type:"ChannelAdminLogEventAction"},{id:37687451,predicate:"forumTopicDeleted",params:[{name:"id",type:"int"}],type:"ForumTopic"},{id:1903173033,predicate:"forumTopic",params:[{name:"flags",type:"#"},{name:"my",type:"flags.1?true"},{name:"closed",type:"flags.2?true"},{name:"pinned",type:"flags.3?true"},{name:"short",type:"flags.5?true"},{name:"hidden",type:"flags.6?true"},{name:"id",type:"int"},{name:"date",type:"int"},{name:"title",type:"string"},{name:"icon_color",type:"int"},{name:"icon_emoji_id",type:"flags.0?long"},{name:"top_message",type:"int"},{name:"read_inbox_max_id",type:"int"},{name:"read_outbox_max_id",type:"int"},{name:"unread_count",type:"int"},{name:"unread_mentions_count",type:"int"},{name:"unread_reactions_count",type:"int"},{name:"from_id",type:"Peer"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"draft",type:"flags.4?DraftMessage"}],type:"ForumTopic"},{id:913709011,predicate:"messages.forumTopics",params:[{name:"flags",type:"#"},{name:"order_by_create_date",type:"flags.0?true"},{name:"count",type:"int"},{name:"topics",type:"Vector<ForumTopic>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"pts",type:"int"}],type:"messages.ForumTopics"},{id:228168278,predicate:"messageActionTopicCreate",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"icon_color",type:"int"},{name:"icon_emoji_id",type:"flags.0?long"}],type:"MessageAction"},{id:-1064024032,predicate:"messageActionTopicEdit",params:[{name:"flags",type:"#"},{name:"title",type:"flags.0?string"},{name:"icon_emoji_id",type:"flags.1?long"},{name:"closed",type:"flags.2?Bool"},{name:"hidden",type:"flags.3?Bool"}],type:"MessageAction"},{id:422509539,predicate:"updateChannelPinnedTopic",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"channel_id",type:"long"},{name:"topic_id",type:"int"}],type:"Update"},{id:1548122514,predicate:"inputNotifyForumTopic",params:[{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"int"}],type:"InputNotifyPeer"},{id:577659656,predicate:"notifyForumTopic",params:[{name:"peer",type:"Peer"},{name:"top_msg_id",type:"int"}],type:"NotifyPeer"},{id:1153562857,predicate:"inputStickerSetEmojiDefaultTopicIcons",params:[],type:"InputStickerSet"},{id:406407439,predicate:"messages.sponsoredMessagesEmpty",params:[],type:"messages.SponsoredMessages"},{id:-31881726,predicate:"updateChannelPinnedTopics",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"order",type:"flags.0?Vector<int>"}],type:"Update"},{id:1135897376,predicate:"defaultHistoryTTL",params:[{name:"period",type:"int"}],type:"DefaultHistoryTTL"},{id:116234636,predicate:"auth.codeTypeFragmentSms",params:[],type:"auth.CodeType"},{id:-648651719,predicate:"auth.sentCodeTypeFragmentSms",params:[{name:"url",type:"string"},{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:1103040667,predicate:"exportedContactToken",params:[{name:"url",type:"string"},{name:"expires",type:"int"}],type:"ExportedContactToken"},{id:1693675004,predicate:"channelAdminLogEventActionToggleAntiSpam",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:1474192222,predicate:"messageActionSuggestProfilePhoto",params:[{name:"photo",type:"Photo"}],type:"MessageAction"},{id:2008112412,predicate:"stickerSetNoCovered",params:[{name:"set",type:"StickerSet"}],type:"StickerSetCovered"},{id:542282808,predicate:"updateUser",params:[{name:"user_id",type:"long"}],type:"Update"},{id:596704836,predicate:"auth.sentCodeSuccess",params:[{name:"authorization",type:"auth.Authorization"}],type:"auth.SentCode"},{id:827428507,predicate:"messageActionRequestedPeer",params:[{name:"button_id",type:"int"},{name:"peers",type:"Vector<Peer>"}],type:"MessageAction"},{id:1597737472,predicate:"requestPeerTypeUser",params:[{name:"flags",type:"#"},{name:"bot",type:"flags.0?Bool"},{name:"premium",type:"flags.1?Bool"}],type:"RequestPeerType"},{id:-906990053,predicate:"requestPeerTypeChat",params:[{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"bot_participant",type:"flags.5?true"},{name:"has_username",type:"flags.3?Bool"},{name:"forum",type:"flags.4?Bool"},{name:"user_admin_rights",type:"flags.1?ChatAdminRights"},{name:"bot_admin_rights",type:"flags.2?ChatAdminRights"}],type:"RequestPeerType"},{id:865857388,predicate:"requestPeerTypeBroadcast",params:[{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"has_username",type:"flags.3?Bool"},{name:"user_admin_rights",type:"flags.1?ChatAdminRights"},{name:"bot_admin_rights",type:"flags.2?ChatAdminRights"}],type:"RequestPeerType"},{id:1406648280,predicate:"keyboardButtonRequestPeer",params:[{name:"text",type:"string"},{name:"button_id",type:"int"},{name:"peer_type",type:"RequestPeerType"},{name:"max_quantity",type:"int"}],type:"KeyboardButton"},{id:1209970170,predicate:"emojiListNotModified",params:[],type:"EmojiList"},{id:2048790993,predicate:"emojiList",params:[{name:"hash",type:"long"},{name:"document_id",type:"Vector<long>"}],type:"EmojiList"},{id:-444918734,predicate:"auth.sentCodeTypeFirebaseSms",params:[{name:"flags",type:"#"},{name:"nonce",type:"flags.0?bytes"},{name:"receipt",type:"flags.1?string"},{name:"push_timeout",type:"flags.1?int"},{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:2056961449,predicate:"emojiGroup",params:[{name:"title",type:"string"},{name:"icon_emoji_id",type:"long"},{name:"emoticons",type:"Vector<string>"}],type:"EmojiGroup"},{id:1874111879,predicate:"messages.emojiGroupsNotModified",params:[],type:"messages.EmojiGroups"},{id:-2011186869,predicate:"messages.emojiGroups",params:[{name:"hash",type:"int"},{name:"groups",type:"Vector<EmojiGroup>"}],type:"messages.EmojiGroups"},{id:-128171716,predicate:"videoSizeEmojiMarkup",params:[{name:"emoji_id",type:"long"},{name:"background_colors",type:"Vector<int>"}],type:"VideoSize"},{id:228623102,predicate:"videoSizeStickerMarkup",params:[{name:"stickerset",type:"InputStickerSet"},{name:"sticker_id",type:"long"},{name:"background_colors",type:"Vector<int>"}],type:"VideoSize"},{id:1964978502,predicate:"textWithEntities",params:[{name:"text",type:"string"},{name:"entities",type:"Vector<MessageEntity>"}],type:"TextWithEntities"},{id:870003448,predicate:"messages.translateResult",params:[{name:"result",type:"Vector<TextWithEntities>"}],type:"messages.TranslatedText"},{id:-934791986,predicate:"autoSaveSettings",params:[{name:"flags",type:"#"},{name:"photos",type:"flags.0?true"},{name:"videos",type:"flags.1?true"},{name:"video_max_size",type:"flags.2?long"}],type:"AutoSaveSettings"},{id:-2124403385,predicate:"autoSaveException",params:[{name:"peer",type:"Peer"},{name:"settings",type:"AutoSaveSettings"}],type:"AutoSaveException"},{id:1279133341,predicate:"account.autoSaveSettings",params:[{name:"users_settings",type:"AutoSaveSettings"},{name:"chats_settings",type:"AutoSaveSettings"},{name:"broadcasts_settings",type:"AutoSaveSettings"},{name:"exceptions",type:"Vector<AutoSaveException>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"account.AutoSaveSettings"},{id:-335171433,predicate:"updateAutoSaveSettings",params:[],type:"Update"},{id:2094949405,predicate:"help.appConfigNotModified",params:[],type:"help.AppConfig"},{id:-585598930,predicate:"help.appConfig",params:[{name:"hash",type:"int"},{name:"config",type:"JSONValue"}],type:"help.AppConfig"},{id:-1457472134,predicate:"inputBotAppID",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputBotApp"},{id:-1869872121,predicate:"inputBotAppShortName",params:[{name:"bot_id",type:"InputUser"},{name:"short_name",type:"string"}],type:"InputBotApp"},{id:1571189943,predicate:"botAppNotModified",params:[],type:"BotApp"},{id:-1778593322,predicate:"botApp",params:[{name:"flags",type:"#"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"short_name",type:"string"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"Photo"},{name:"document",type:"flags.0?Document"},{name:"hash",type:"long"}],type:"BotApp"},{id:-347034123,predicate:"messages.botApp",params:[{name:"flags",type:"#"},{name:"inactive",type:"flags.0?true"},{name:"request_write_access",type:"flags.1?true"},{name:"has_settings",type:"flags.2?true"},{name:"app",type:"BotApp"}],type:"messages.BotApp"},{id:1008422669,predicate:"appWebViewResultUrl",params:[{name:"url",type:"string"}],type:"AppWebViewResult"},{id:-1250781739,predicate:"inlineBotWebView",params:[{name:"text",type:"string"},{name:"url",type:"string"}],type:"InlineBotWebView"},{id:1246753138,predicate:"readParticipantDate",params:[{name:"user_id",type:"long"},{name:"date",type:"int"}],type:"ReadParticipantDate"},{id:-1612542300,predicate:"dialogFilterChatlist",params:[{name:"flags",type:"#"},{name:"has_my_invites",type:"flags.26?true"},{name:"id",type:"int"},{name:"title",type:"string"},{name:"emoticon",type:"flags.25?string"},{name:"color",type:"flags.27?int"},{name:"pinned_peers",type:"Vector<InputPeer>"},{name:"include_peers",type:"Vector<InputPeer>"}],type:"DialogFilter"},{id:-203367885,predicate:"inputChatlistDialogFilter",params:[{name:"filter_id",type:"int"}],type:"InputChatlist"},{id:206668204,predicate:"exportedChatlistInvite",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"url",type:"string"},{name:"peers",type:"Vector<Peer>"}],type:"ExportedChatlistInvite"},{id:283567014,predicate:"chatlists.exportedChatlistInvite",params:[{name:"filter",type:"DialogFilter"},{name:"invite",type:"ExportedChatlistInvite"}],type:"chatlists.ExportedChatlistInvite"},{id:279670215,predicate:"chatlists.exportedInvites",params:[{name:"invites",type:"Vector<ExportedChatlistInvite>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"chatlists.ExportedInvites"},{id:-91752871,predicate:"chatlists.chatlistInviteAlready",params:[{name:"filter_id",type:"int"},{name:"missing_peers",type:"Vector<Peer>"},{name:"already_peers",type:"Vector<Peer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"chatlists.ChatlistInvite"},{id:500007837,predicate:"chatlists.chatlistInvite",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"emoticon",type:"flags.0?string"},{name:"peers",type:"Vector<Peer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"chatlists.ChatlistInvite"},{id:-1816295539,predicate:"chatlists.chatlistUpdates",params:[{name:"missing_peers",type:"Vector<Peer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"chatlists.ChatlistUpdates"},{id:1348510708,predicate:"messageActionSetChatWallPaper",params:[{name:"flags",type:"#"},{name:"same",type:"flags.0?true"},{name:"for_both",type:"flags.1?true"},{name:"wallpaper",type:"WallPaper"}],type:"MessageAction"},{id:-391678544,predicate:"bots.botInfo",params:[{name:"name",type:"string"},{name:"about",type:"string"},{name:"description",type:"string"}],type:"bots.BotInfo"},{id:238759180,predicate:"inlineQueryPeerTypeBotPM",params:[],type:"InlineQueryPeerType"},{id:-1228133028,predicate:"messagePeerVote",params:[{name:"peer",type:"Peer"},{name:"option",type:"bytes"},{name:"date",type:"int"}],type:"MessagePeerVote"},{id:1959634180,predicate:"messagePeerVoteInputOption",params:[{name:"peer",type:"Peer"},{name:"date",type:"int"}],type:"MessagePeerVote"},{id:1177089766,predicate:"messagePeerVoteMultiple",params:[{name:"peer",type:"Peer"},{name:"options",type:"Vector<bytes>"},{name:"date",type:"int"}],type:"MessagePeerVote"},{id:941870144,predicate:"inputPrivacyKeyAbout",params:[],type:"InputPrivacyKey"},{id:-1534675103,predicate:"privacyKeyAbout",params:[],type:"PrivacyKey"},{id:1035529315,predicate:"sponsoredWebPage",params:[{name:"flags",type:"#"},{name:"url",type:"string"},{name:"site_name",type:"string"},{name:"photo",type:"flags.0?Photo"}],type:"SponsoredWebPage"},{id:-1923523370,predicate:"storyViews",params:[{name:"flags",type:"#"},{name:"has_viewers",type:"flags.1?true"},{name:"views_count",type:"int"},{name:"forwards_count",type:"flags.2?int"},{name:"reactions",type:"flags.3?Vector<ReactionCount>"},{name:"reactions_count",type:"flags.4?int"},{name:"recent_viewers",type:"flags.0?Vector<long>"}],type:"StoryViews"},{id:1374088783,predicate:"storyItemDeleted",params:[{name:"id",type:"int"}],type:"StoryItem"},{id:-5388013,predicate:"storyItemSkipped",params:[{name:"flags",type:"#"},{name:"close_friends",type:"flags.8?true"},{name:"id",type:"int"},{name:"date",type:"int"},{name:"expire_date",type:"int"}],type:"StoryItem"},{id:2041735716,predicate:"storyItem",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.5?true"},{name:"public",type:"flags.7?true"},{name:"close_friends",type:"flags.8?true"},{name:"min",type:"flags.9?true"},{name:"noforwards",type:"flags.10?true"},{name:"edited",type:"flags.11?true"},{name:"contacts",type:"flags.12?true"},{name:"selected_contacts",type:"flags.13?true"},{name:"out",type:"flags.16?true"},{name:"id",type:"int"},{name:"date",type:"int"},{name:"from_id",type:"flags.18?Peer"},{name:"fwd_from",type:"flags.17?StoryFwdHeader"},{name:"expire_date",type:"int"},{name:"caption",type:"flags.0?string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"media",type:"MessageMedia"},{name:"media_areas",type:"flags.14?Vector<MediaArea>"},{name:"privacy",type:"flags.2?Vector<PrivacyRule>"},{name:"views",type:"flags.3?StoryViews"},{name:"sent_reaction",type:"flags.15?Reaction"}],type:"StoryItem"},{id:1974712216,predicate:"updateStory",params:[{name:"peer",type:"Peer"},{name:"story",type:"StoryItem"}],type:"Update"},{id:-145845461,predicate:"updateReadStories",params:[{name:"peer",type:"Peer"},{name:"max_id",type:"int"}],type:"Update"},{id:291044926,predicate:"stories.allStoriesNotModified",params:[{name:"flags",type:"#"},{name:"state",type:"string"},{name:"stealth_mode",type:"StoriesStealthMode"}],type:"stories.AllStories"},{id:1862033025,predicate:"stories.allStories",params:[{name:"flags",type:"#"},{name:"has_more",type:"flags.0?true"},{name:"count",type:"int"},{name:"state",type:"string"},{name:"peer_stories",type:"Vector<PeerStories>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"stealth_mode",type:"StoriesStealthMode"}],type:"stories.AllStories"},{id:1574486984,predicate:"stories.stories",params:[{name:"count",type:"int"},{name:"stories",type:"Vector<StoryItem>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"stories.Stories"},{id:793067081,predicate:"inputPrivacyValueAllowCloseFriends",params:[],type:"InputPrivacyRule"},{id:-135735141,predicate:"privacyValueAllowCloseFriends",params:[],type:"PrivacyRule"},{id:-1329730875,predicate:"storyView",params:[{name:"flags",type:"#"},{name:"blocked",type:"flags.0?true"},{name:"blocked_my_stories_from",type:"flags.1?true"},{name:"user_id",type:"long"},{name:"date",type:"int"},{name:"reaction",type:"flags.2?Reaction"}],type:"StoryView"},{id:1507299269,predicate:"stories.storyViewsList",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"views_count",type:"int"},{name:"forwards_count",type:"int"},{name:"reactions_count",type:"int"},{name:"views",type:"Vector<StoryView>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"next_offset",type:"flags.0?string"}],type:"stories.StoryViewsList"},{id:-560009955,predicate:"stories.storyViews",params:[{name:"views",type:"Vector<StoryViews>"},{name:"users",type:"Vector<User>"}],type:"stories.StoryViews"},{id:583071445,predicate:"inputReplyToMessage",params:[{name:"flags",type:"#"},{name:"reply_to_msg_id",type:"int"},{name:"top_msg_id",type:"flags.0?int"},{name:"reply_to_peer_id",type:"flags.1?InputPeer"},{name:"quote_text",type:"flags.2?string"},{name:"quote_entities",type:"flags.3?Vector<MessageEntity>"},{name:"quote_offset",type:"flags.4?int"}],type:"InputReplyTo"},{id:1484862010,predicate:"inputReplyToStory",params:[{name:"peer",type:"InputPeer"},{name:"story_id",type:"int"}],type:"InputReplyTo"},{id:240843065,predicate:"messageReplyStoryHeader",params:[{name:"peer",type:"Peer"},{name:"story_id",type:"int"}],type:"MessageReplyHeader"},{id:468923833,predicate:"updateStoryID",params:[{name:"id",type:"int"},{name:"random_id",type:"long"}],type:"Update"},{id:1070138683,predicate:"exportedStoryLink",params:[{name:"link",type:"string"}],type:"ExportedStoryLink"},{id:-1979852936,predicate:"inputMediaStory",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"int"}],type:"InputMedia"},{id:1758159491,predicate:"messageMediaStory",params:[{name:"flags",type:"#"},{name:"via_mention",type:"flags.1?true"},{name:"peer",type:"Peer"},{name:"id",type:"int"},{name:"story",type:"flags.0?StoryItem"}],type:"MessageMedia"},{id:781501415,predicate:"webPageAttributeStory",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"id",type:"int"},{name:"story",type:"flags.0?StoryItem"}],type:"WebPageAttribute"},{id:1898850301,predicate:"storiesStealthMode",params:[{name:"flags",type:"#"},{name:"active_until_date",type:"flags.0?int"},{name:"cooldown_until_date",type:"flags.1?int"}],type:"StoriesStealthMode"},{id:738741697,predicate:"updateStoriesStealthMode",params:[{name:"stealth_mode",type:"StoriesStealthMode"}],type:"Update"},{id:64088654,predicate:"mediaAreaCoordinates",params:[{name:"x",type:"double"},{name:"y",type:"double"},{name:"w",type:"double"},{name:"h",type:"double"},{name:"rotation",type:"double"}],type:"MediaAreaCoordinates"},{id:-1098720356,predicate:"mediaAreaVenue",params:[{name:"coordinates",type:"MediaAreaCoordinates"},{name:"geo",type:"GeoPoint"},{name:"title",type:"string"},{name:"address",type:"string"},{name:"provider",type:"string"},{name:"venue_id",type:"string"},{name:"venue_type",type:"string"}],type:"MediaArea"},{id:-1300094593,predicate:"inputMediaAreaVenue",params:[{name:"coordinates",type:"MediaAreaCoordinates"},{name:"query_id",type:"long"},{name:"result_id",type:"string"}],type:"MediaArea"},{id:-544523486,predicate:"mediaAreaGeoPoint",params:[{name:"coordinates",type:"MediaAreaCoordinates"},{name:"geo",type:"GeoPoint"}],type:"MediaArea"},{id:2103604867,predicate:"updateSentStoryReaction",params:[{name:"peer",type:"Peer"},{name:"story_id",type:"int"},{name:"reaction",type:"Reaction"}],type:"Update"},{id:340088945,predicate:"mediaAreaSuggestedReaction",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"flipped",type:"flags.1?true"},{name:"coordinates",type:"MediaAreaCoordinates"},{name:"reaction",type:"Reaction"}],type:"MediaArea"},{id:-1707742823,predicate:"peerStories",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"max_read_id",type:"flags.0?int"},{name:"stories",type:"Vector<StoryItem>"}],type:"PeerStories"},{id:-890861720,predicate:"stories.peerStories",params:[{name:"stories",type:"PeerStories"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"stories.PeerStories"},{id:-44166467,predicate:"messages.webPage",params:[{name:"webpage",type:"WebPage"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.WebPage"},{id:-1551868097,predicate:"inputStorePaymentPremiumGiftCode",params:[{name:"flags",type:"#"},{name:"users",type:"Vector<InputUser>"},{name:"boost_peer",type:"flags.0?InputPeer"},{name:"currency",type:"string"},{name:"amount",type:"long"}],type:"InputStorePaymentPurpose"},{id:369444042,predicate:"inputStorePaymentPremiumGiveaway",params:[{name:"flags",type:"#"},{name:"only_new_subscribers",type:"flags.0?true"},{name:"winners_are_visible",type:"flags.3?true"},{name:"boost_peer",type:"InputPeer"},{name:"additional_peers",type:"flags.1?Vector<InputPeer>"},{name:"countries_iso2",type:"flags.2?Vector<string>"},{name:"prize_description",type:"flags.4?string"},{name:"random_id",type:"long"},{name:"until_date",type:"int"},{name:"currency",type:"string"},{name:"amount",type:"long"}],type:"InputStorePaymentPurpose"},{id:-1734841331,predicate:"inputInvoicePremiumGiftCode",params:[{name:"purpose",type:"InputStorePaymentPurpose"},{name:"option",type:"PremiumGiftCodeOption"}],type:"InputInvoice"},{id:629052971,predicate:"premiumGiftCodeOption",params:[{name:"flags",type:"#"},{name:"users",type:"int"},{name:"months",type:"int"},{name:"store_product",type:"flags.0?string"},{name:"store_quantity",type:"flags.1?int"},{name:"currency",type:"string"},{name:"amount",type:"long"}],type:"PremiumGiftCodeOption"},{id:675942550,predicate:"payments.checkedGiftCode",params:[{name:"flags",type:"#"},{name:"via_giveaway",type:"flags.2?true"},{name:"from_id",type:"flags.4?Peer"},{name:"giveaway_msg_id",type:"flags.3?int"},{name:"to_id",type:"flags.0?long"},{name:"date",type:"int"},{name:"months",type:"int"},{name:"used_date",type:"flags.1?int"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"payments.CheckedGiftCode"},{id:-626162256,predicate:"messageMediaGiveaway",params:[{name:"flags",type:"#"},{name:"only_new_subscribers",type:"flags.0?true"},{name:"winners_are_visible",type:"flags.2?true"},{name:"channels",type:"Vector<long>"},{name:"countries_iso2",type:"flags.1?Vector<string>"},{name:"prize_description",type:"flags.3?string"},{name:"quantity",type:"int"},{name:"months",type:"int"},{name:"until_date",type:"int"}],type:"MessageMedia"},{id:1737240073,predicate:"messageActionGiftCode",params:[{name:"flags",type:"#"},{name:"via_giveaway",type:"flags.0?true"},{name:"unclaimed",type:"flags.2?true"},{name:"boost_peer",type:"flags.1?Peer"},{name:"months",type:"int"},{name:"slug",type:"string"},{name:"currency",type:"flags.2?string"},{name:"amount",type:"flags.2?long"},{name:"crypto_currency",type:"flags.3?string"},{name:"crypto_amount",type:"flags.3?long"}],type:"MessageAction"},{id:858499565,predicate:"messageActionGiveawayLaunch",params:[],type:"MessageAction"},{id:1130879648,predicate:"payments.giveawayInfo",params:[{name:"flags",type:"#"},{name:"participating",type:"flags.0?true"},{name:"preparing_results",type:"flags.3?true"},{name:"start_date",type:"int"},{name:"joined_too_early_date",type:"flags.1?int"},{name:"admin_disallowed_chat_id",type:"flags.2?long"},{name:"disallowed_country",type:"flags.4?string"}],type:"payments.GiveawayInfo"},{id:13456752,predicate:"payments.giveawayInfoResults",params:[{name:"flags",type:"#"},{name:"winner",type:"flags.0?true"},{name:"refunded",type:"flags.1?true"},{name:"start_date",type:"int"},{name:"gift_code_slug",type:"flags.0?string"},{name:"finish_date",type:"int"},{name:"winners_count",type:"int"},{name:"activated_count",type:"int"}],type:"payments.GiveawayInfo"},{id:34469328,predicate:"messageEntityBlockquote",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-1303143084,predicate:"prepaidGiveaway",params:[{name:"id",type:"long"},{name:"months",type:"int"},{name:"quantity",type:"int"},{name:"date",type:"int"}],type:"PrepaidGiveaway"},{id:-1038383031,predicate:"inputMediaWebPage",params:[{name:"flags",type:"#"},{name:"force_large_media",type:"flags.0?true"},{name:"force_small_media",type:"flags.1?true"},{name:"optional",type:"flags.2?true"},{name:"url",type:"string"}],type:"InputMedia"},{id:-1109605104,predicate:"inputBotInlineMessageMediaWebPage",params:[{name:"flags",type:"#"},{name:"invert_media",type:"flags.3?true"},{name:"force_large_media",type:"flags.4?true"},{name:"force_small_media",type:"flags.5?true"},{name:"optional",type:"flags.6?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"url",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:-2137335386,predicate:"botInlineMessageMediaWebPage",params:[{name:"flags",type:"#"},{name:"invert_media",type:"flags.3?true"},{name:"force_large_media",type:"flags.4?true"},{name:"force_small_media",type:"flags.5?true"},{name:"manual",type:"flags.7?true"},{name:"safe",type:"flags.8?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"url",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:706514033,predicate:"boost",params:[{name:"flags",type:"#"},{name:"gift",type:"flags.1?true"},{name:"giveaway",type:"flags.2?true"},{name:"unclaimed",type:"flags.3?true"},{name:"id",type:"string"},{name:"user_id",type:"flags.0?long"},{name:"giveaway_msg_id",type:"flags.2?int"},{name:"date",type:"int"},{name:"expires",type:"int"},{name:"used_gift_slug",type:"flags.4?string"},{name:"multiplier",type:"flags.5?int"}],type:"Boost"},{id:-2030542532,predicate:"premium.boostsList",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"boosts",type:"Vector<Boost>"},{name:"next_offset",type:"flags.0?string"},{name:"users",type:"Vector<User>"}],type:"premium.BoostsList"},{id:-1001897636,predicate:"myBoost",params:[{name:"flags",type:"#"},{name:"slot",type:"int"},{name:"peer",type:"flags.0?Peer"},{name:"date",type:"int"},{name:"expires",type:"int"},{name:"cooldown_until_date",type:"flags.1?int"}],type:"MyBoost"},{id:-1696454430,predicate:"premium.myBoosts",params:[{name:"my_boosts",type:"Vector<MyBoost>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"premium.MyBoosts"},{id:1230586490,predicate:"premium.boostsStatus",params:[{name:"flags",type:"#"},{name:"my_boost",type:"flags.2?true"},{name:"level",type:"int"},{name:"current_level_boosts",type:"int"},{name:"boosts",type:"int"},{name:"gift_boosts",type:"flags.4?int"},{name:"next_level_boosts",type:"flags.0?int"},{name:"premium_audience",type:"flags.1?StatsPercentValue"},{name:"boost_url",type:"string"},{name:"prepaid_giveaways",type:"flags.3?Vector<PrepaidGiveaway>"},{name:"my_boost_slots",type:"flags.2?Vector<int>"}],type:"premium.BoostsStatus"},{id:-1873947492,predicate:"updateBotChatBoost",params:[{name:"peer",type:"Peer"},{name:"boost",type:"Boost"},{name:"qts",type:"int"}],type:"Update"},{id:129403168,predicate:"updateChannelViewForumAsMessages",params:[{name:"channel_id",type:"long"},{name:"enabled",type:"Bool"}],type:"Update"},{id:715107781,predicate:"messageActionGiveawayResults",params:[{name:"winners_count",type:"int"},{name:"unclaimed_count",type:"int"}],type:"MessageAction"},{id:-1371598819,predicate:"updatePeerWallpaper",params:[{name:"flags",type:"#"},{name:"wallpaper_overridden",type:"flags.1?true"},{name:"peer",type:"Peer"},{name:"wallpaper",type:"flags.0?WallPaper"}],type:"Update"},{id:-1205411504,predicate:"storyFwdHeader",params:[{name:"flags",type:"#"},{name:"modified",type:"flags.3?true"},{name:"from",type:"flags.0?Peer"},{name:"from_name",type:"flags.1?string"},{name:"story_id",type:"flags.2?int"}],type:"StoryFwdHeader"},{id:-419066241,predicate:"postInteractionCountersMessage",params:[{name:"msg_id",type:"int"},{name:"views",type:"int"},{name:"forwards",type:"int"},{name:"reactions",type:"int"}],type:"PostInteractionCounters"},{id:-1974989273,predicate:"postInteractionCountersStory",params:[{name:"story_id",type:"int"},{name:"views",type:"int"},{name:"forwards",type:"int"},{name:"reactions",type:"int"}],type:"PostInteractionCounters"},{id:1355613820,predicate:"stats.storyStats",params:[{name:"views_graph",type:"StatsGraph"},{name:"reactions_by_emotion_graph",type:"StatsGraph"}],type:"stats.StoryStats"},{id:32685898,predicate:"publicForwardMessage",params:[{name:"message",type:"Message"}],type:"PublicForward"},{id:-302797360,predicate:"publicForwardStory",params:[{name:"peer",type:"Peer"},{name:"story",type:"StoryItem"}],type:"PublicForward"},{id:-1828487648,predicate:"stats.publicForwards",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"forwards",type:"Vector<PublicForward>"},{name:"next_offset",type:"flags.0?string"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"stats.PublicForwards"},{id:-1253352753,predicate:"peerColor",params:[{name:"flags",type:"#"},{name:"color",type:"flags.0?int"},{name:"background_emoji_id",type:"flags.1?long"}],type:"PeerColor"},{id:639736408,predicate:"help.peerColorSet",params:[{name:"colors",type:"Vector<int>"}],type:"help.PeerColorSet"},{id:1987928555,predicate:"help.peerColorProfileSet",params:[{name:"palette_colors",type:"Vector<int>"},{name:"bg_colors",type:"Vector<int>"},{name:"story_colors",type:"Vector<int>"}],type:"help.PeerColorSet"},{id:-1377014082,predicate:"help.peerColorOption",params:[{name:"flags",type:"#"},{name:"hidden",type:"flags.0?true"},{name:"color_id",type:"int"},{name:"colors",type:"flags.1?help.PeerColorSet"},{name:"dark_colors",type:"flags.2?help.PeerColorSet"},{name:"channel_min_level",type:"flags.3?int"},{name:"group_min_level",type:"flags.4?int"}],type:"help.PeerColorOption"},{id:732034510,predicate:"help.peerColorsNotModified",params:[],type:"help.PeerColors"},{id:16313608,predicate:"help.peerColors",params:[{name:"hash",type:"int"},{name:"colors",type:"Vector<help.PeerColorOption>"}],type:"help.PeerColors"},{id:-963047320,predicate:"messageMediaGiveawayResults",params:[{name:"flags",type:"#"},{name:"only_new_subscribers",type:"flags.0?true"},{name:"refunded",type:"flags.2?true"},{name:"channel_id",type:"long"},{name:"additional_peers_count",type:"flags.3?int"},{name:"launch_msg_id",type:"int"},{name:"winners_count",type:"int"},{name:"unclaimed_count",type:"int"},{name:"winners",type:"Vector<long>"},{name:"months",type:"int"},{name:"prize_description",type:"flags.1?string"},{name:"until_date",type:"int"}],type:"MessageMedia"},{id:1620104917,predicate:"storyReaction",params:[{name:"peer_id",type:"Peer"},{name:"date",type:"int"},{name:"reaction",type:"Reaction"}],type:"StoryReaction"},{id:-1146411453,predicate:"storyReactionPublicForward",params:[{name:"message",type:"Message"}],type:"StoryReaction"},{id:-808644845,predicate:"storyReactionPublicRepost",params:[{name:"peer_id",type:"Peer"},{name:"story",type:"StoryItem"}],type:"StoryReaction"},{id:-1436583780,predicate:"stories.storyReactionsList",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"reactions",type:"Vector<StoryReaction>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"next_offset",type:"flags.0?string"}],type:"stories.StoryReactionsList"},{id:-1870436597,predicate:"storyViewPublicForward",params:[{name:"flags",type:"#"},{name:"blocked",type:"flags.0?true"},{name:"blocked_my_stories_from",type:"flags.1?true"},{name:"message",type:"Message"}],type:"StoryView"},{id:-1116418231,predicate:"storyViewPublicRepost",params:[{name:"flags",type:"#"},{name:"blocked",type:"flags.0?true"},{name:"blocked_my_stories_from",type:"flags.1?true"},{name:"peer_id",type:"Peer"},{name:"story",type:"StoryItem"}],type:"StoryView"},{id:1469507456,predicate:"channelAdminLogEventActionChangePeerColor",params:[{name:"prev_value",type:"PeerColor"},{name:"new_value",type:"PeerColor"}],type:"ChannelAdminLogEventAction"},{id:1581742885,predicate:"channelAdminLogEventActionChangeProfilePeerColor",params:[{name:"prev_value",type:"PeerColor"},{name:"new_value",type:"PeerColor"}],type:"ChannelAdminLogEventAction"},{id:834362706,predicate:"channelAdminLogEventActionChangeWallpaper",params:[{name:"prev_value",type:"WallPaper"},{name:"new_value",type:"WallPaper"}],type:"ChannelAdminLogEventAction"},{id:1051328177,predicate:"channelAdminLogEventActionChangeEmojiStatus",params:[{name:"prev_value",type:"EmojiStatus"},{name:"new_value",type:"EmojiStatus"}],type:"ChannelAdminLogEventAction"},{id:1232373075,predicate:"inputStickerSetEmojiChannelDefaultStatuses",params:[],type:"InputStickerSet"},{id:1996756655,predicate:"mediaAreaChannelPost",params:[{name:"coordinates",type:"MediaAreaCoordinates"},{name:"channel_id",type:"long"},{name:"msg_id",type:"int"}],type:"MediaArea"},{id:577893055,predicate:"inputMediaAreaChannelPost",params:[{name:"coordinates",type:"MediaAreaCoordinates"},{name:"channel",type:"InputChannel"},{name:"msg_id",type:"int"}],type:"MediaArea"},{id:-1407069234,predicate:"updateBotMessageReaction",params:[{name:"peer",type:"Peer"},{name:"msg_id",type:"int"},{name:"date",type:"int"},{name:"actor",type:"Peer"},{name:"old_reactions",type:"Vector<Reaction>"},{name:"new_reactions",type:"Vector<Reaction>"},{name:"qts",type:"int"}],type:"Update"},{id:164329305,predicate:"updateBotMessageReactions",params:[{name:"peer",type:"Peer"},{name:"msg_id",type:"int"},{name:"date",type:"int"},{name:"reactions",type:"Vector<ReactionCount>"},{name:"qts",type:"int"}],type:"Update"},{id:-1115174036,predicate:"savedDialog",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.2?true"},{name:"peer",type:"Peer"},{name:"top_message",type:"int"}],type:"SavedDialog"},{id:-1364222348,predicate:"updateSavedDialogPinned",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"peer",type:"DialogPeer"}],type:"Update"},{id:1751942566,predicate:"updatePinnedSavedDialogs",params:[{name:"flags",type:"#"},{name:"order",type:"flags.0?Vector<DialogPeer>"}],type:"Update"},{id:-130358751,predicate:"messages.savedDialogs",params:[{name:"dialogs",type:"Vector<SavedDialog>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.SavedDialogs"},{id:1153080793,predicate:"messages.savedDialogsSlice",params:[{name:"count",type:"int"},{name:"dialogs",type:"Vector<SavedDialog>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.SavedDialogs"},{id:-1071681560,predicate:"messages.savedDialogsNotModified",params:[{name:"count",type:"int"}],type:"messages.SavedDialogs"},{id:-881854424,predicate:"savedReactionTag",params:[{name:"flags",type:"#"},{name:"reaction",type:"Reaction"},{name:"title",type:"flags.0?string"},{name:"count",type:"int"}],type:"SavedReactionTag"},{id:-2003084817,predicate:"messages.savedReactionTagsNotModified",params:[],type:"messages.SavedReactionTags"},{id:844731658,predicate:"messages.savedReactionTags",params:[{name:"tags",type:"Vector<SavedReactionTag>"},{name:"hash",type:"long"}],type:"messages.SavedReactionTags"},{id:969307186,predicate:"updateSavedReactionTags",params:[],type:"Update"},{id:1001931436,predicate:"outboxReadDate",params:[{name:"date",type:"int"}],type:"OutboxReadDate"},{id:-872240531,predicate:"messageActionBoostApply",params:[{name:"boosts",type:"int"}],type:"MessageAction"},{id:1188577451,predicate:"channelAdminLogEventActionChangeEmojiStickerSet",params:[{name:"prev_stickerset",type:"InputStickerSet"},{name:"new_stickerset",type:"InputStickerSet"}],type:"ChannelAdminLogEventAction"},{id:-594852657,predicate:"smsjobs.eligibleToJoin",params:[{name:"terms_url",type:"string"},{name:"monthly_sent_sms",type:"int"}],type:"smsjobs.EligibilityToJoin"},{id:720277905,predicate:"smsjobs.status",params:[{name:"flags",type:"#"},{name:"allow_international",type:"flags.0?true"},{name:"recent_sent",type:"int"},{name:"recent_since",type:"int"},{name:"recent_remains",type:"int"},{name:"total_sent",type:"int"},{name:"total_since",type:"int"},{name:"last_gift_slug",type:"flags.1?string"},{name:"terms_url",type:"string"}],type:"smsjobs.Status"},{id:-245208620,predicate:"updateSmsJob",params:[{name:"job_id",type:"string"}],type:"Update"},{id:-425595208,predicate:"smsJob",params:[{name:"job_id",type:"string"},{name:"phone_number",type:"string"},{name:"text",type:"string"}],type:"SmsJob"},{id:302717625,predicate:"businessWeeklyOpen",params:[{name:"start_minute",type:"int"},{name:"end_minute",type:"int"}],type:"BusinessWeeklyOpen"},{id:-1936543592,predicate:"businessWorkHours",params:[{name:"flags",type:"#"},{name:"open_now",type:"flags.0?true"},{name:"timezone_id",type:"string"},{name:"weekly_open",type:"Vector<BusinessWeeklyOpen>"}],type:"BusinessWorkHours"},{id:-1403249929,predicate:"businessLocation",params:[{name:"flags",type:"#"},{name:"geo_point",type:"flags.0?GeoPoint"},{name:"address",type:"string"}],type:"BusinessLocation"},{id:1871393450,predicate:"inputBusinessRecipients",params:[{name:"flags",type:"#"},{name:"existing_chats",type:"flags.0?true"},{name:"new_chats",type:"flags.1?true"},{name:"contacts",type:"flags.2?true"},{name:"non_contacts",type:"flags.3?true"},{name:"exclude_selected",type:"flags.5?true"},{name:"users",type:"flags.4?Vector<InputUser>"}],type:"InputBusinessRecipients"},{id:554733559,predicate:"businessRecipients",params:[{name:"flags",type:"#"},{name:"existing_chats",type:"flags.0?true"},{name:"new_chats",type:"flags.1?true"},{name:"contacts",type:"flags.2?true"},{name:"non_contacts",type:"flags.3?true"},{name:"exclude_selected",type:"flags.5?true"},{name:"users",type:"flags.4?Vector<long>"}],type:"BusinessRecipients"},{id:-910564679,predicate:"businessAwayMessageScheduleAlways",params:[],type:"BusinessAwayMessageSchedule"},{id:-1007487743,predicate:"businessAwayMessageScheduleOutsideWorkHours",params:[],type:"BusinessAwayMessageSchedule"},{id:-867328308,predicate:"businessAwayMessageScheduleCustom",params:[{name:"start_date",type:"int"},{name:"end_date",type:"int"}],type:"BusinessAwayMessageSchedule"},{id:26528571,predicate:"inputBusinessGreetingMessage",params:[{name:"shortcut_id",type:"int"},{name:"recipients",type:"InputBusinessRecipients"},{name:"no_activity_days",type:"int"}],type:"InputBusinessGreetingMessage"},{id:-451302485,predicate:"businessGreetingMessage",params:[{name:"shortcut_id",type:"int"},{name:"recipients",type:"BusinessRecipients"},{name:"no_activity_days",type:"int"}],type:"BusinessGreetingMessage"},{id:-2094959136,predicate:"inputBusinessAwayMessage",params:[{name:"flags",type:"#"},{name:"offline_only",type:"flags.0?true"},{name:"shortcut_id",type:"int"},{name:"schedule",type:"BusinessAwayMessageSchedule"},{name:"recipients",type:"InputBusinessRecipients"}],type:"InputBusinessAwayMessage"},{id:-283809188,predicate:"businessAwayMessage",params:[{name:"flags",type:"#"},{name:"offline_only",type:"flags.0?true"},{name:"shortcut_id",type:"int"},{name:"schedule",type:"BusinessAwayMessageSchedule"},{name:"recipients",type:"BusinessRecipients"}],type:"BusinessAwayMessage"},{id:-7173643,predicate:"timezone",params:[{name:"id",type:"string"},{name:"name",type:"string"},{name:"utc_offset",type:"int"}],type:"Timezone"},{id:-1761146676,predicate:"help.timezonesListNotModified",params:[],type:"help.TimezonesList"},{id:2071260529,predicate:"help.timezonesList",params:[{name:"timezones",type:"Vector<Timezone>"},{name:"hash",type:"int"}],type:"help.TimezonesList"},{id:110563371,predicate:"quickReply",params:[{name:"shortcut_id",type:"int"},{name:"shortcut",type:"string"},{name:"top_message",type:"int"},{name:"count",type:"int"}],type:"QuickReply"},{id:609840449,predicate:"inputQuickReplyShortcut",params:[{name:"shortcut",type:"string"}],type:"InputQuickReplyShortcut"},{id:18418929,predicate:"inputQuickReplyShortcutId",params:[{name:"shortcut_id",type:"int"}],type:"InputQuickReplyShortcut"},{id:-963811691,predicate:"messages.quickReplies",params:[{name:"quick_replies",type:"Vector<QuickReply>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.QuickReplies"},{id:1603398491,predicate:"messages.quickRepliesNotModified",params:[],type:"messages.QuickReplies"},{id:-112784718,predicate:"updateQuickReplies",params:[{name:"quick_replies",type:"Vector<QuickReply>"}],type:"Update"},{id:-180508905,predicate:"updateNewQuickReply",params:[{name:"quick_reply",type:"QuickReply"}],type:"Update"},{id:1407644140,predicate:"updateDeleteQuickReply",params:[{name:"shortcut_id",type:"int"}],type:"Update"},{id:1040518415,predicate:"updateQuickReplyMessage",params:[{name:"message",type:"Message"}],type:"Update"},{id:1450174413,predicate:"updateDeleteQuickReplyMessages",params:[{name:"shortcut_id",type:"int"},{name:"messages",type:"Vector<int>"}],type:"Update"},{id:-1123645951,predicate:"connectedBot",params:[{name:"flags",type:"#"},{name:"can_reply",type:"flags.0?true"},{name:"bot_id",type:"long"},{name:"recipients",type:"BusinessBotRecipients"}],type:"ConnectedBot"},{id:400029819,predicate:"account.connectedBots",params:[{name:"connected_bots",type:"Vector<ConnectedBot>"},{name:"users",type:"Vector<User>"}],type:"account.ConnectedBots"},{id:718878489,predicate:"messages.dialogFilters",params:[{name:"flags",type:"#"},{name:"tags_enabled",type:"flags.0?true"},{name:"filters",type:"Vector<DialogFilter>"}],type:"messages.DialogFilters"},{id:1821253126,predicate:"birthday",params:[{name:"flags",type:"#"},{name:"day",type:"int"},{name:"month",type:"int"},{name:"year",type:"flags.0?int"}],type:"Birthday"},{id:-1964652166,predicate:"updateBotBusinessConnect",params:[{name:"connection",type:"BotBusinessConnection"},{name:"qts",type:"int"}],type:"Update"},{id:-1646578564,predicate:"updateBotNewBusinessMessage",params:[{name:"flags",type:"#"},{name:"connection_id",type:"string"},{name:"message",type:"Message"},{name:"reply_to_message",type:"flags.0?Message"},{name:"qts",type:"int"}],type:"Update"},{id:132077692,predicate:"updateBotEditBusinessMessage",params:[{name:"flags",type:"#"},{name:"connection_id",type:"string"},{name:"message",type:"Message"},{name:"reply_to_message",type:"flags.0?Message"},{name:"qts",type:"int"}],type:"Update"},{id:-1607821266,predicate:"updateBotDeleteBusinessMessage",params:[{name:"connection_id",type:"string"},{name:"peer",type:"Peer"},{name:"messages",type:"Vector<int>"},{name:"qts",type:"int"}],type:"Update"},{id:-1989921868,predicate:"botBusinessConnection",params:[{name:"flags",type:"#"},{name:"can_reply",type:"flags.0?true"},{name:"disabled",type:"flags.1?true"},{name:"connection_id",type:"string"},{name:"user_id",type:"long"},{name:"dc_id",type:"int"},{name:"date",type:"int"}],type:"BotBusinessConnection"},{id:163867085,predicate:"inputBusinessIntro",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"sticker",type:"flags.0?InputDocument"}],type:"InputBusinessIntro"},{id:1510606445,predicate:"businessIntro",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"sticker",type:"flags.0?Document"}],type:"BusinessIntro"},{id:-83926371,predicate:"messages.myStickers",params:[{name:"count",type:"int"},{name:"sets",type:"Vector<StickerSetCovered>"}],type:"messages.MyStickers"},{id:-476815191,predicate:"inputCollectibleUsername",params:[{name:"username",type:"string"}],type:"InputCollectible"},{id:-1562241884,predicate:"inputCollectiblePhone",params:[{name:"phone",type:"string"}],type:"InputCollectible"},{id:1857945489,predicate:"fragment.collectibleInfo",params:[{name:"purchase_date",type:"int"},{name:"currency",type:"string"},{name:"amount",type:"long"},{name:"crypto_currency",type:"string"},{name:"crypto_amount",type:"long"},{name:"url",type:"string"}],type:"fragment.CollectibleInfo"},{id:-991587810,predicate:"inputBusinessBotRecipients",params:[{name:"flags",type:"#"},{name:"existing_chats",type:"flags.0?true"},{name:"new_chats",type:"flags.1?true"},{name:"contacts",type:"flags.2?true"},{name:"non_contacts",type:"flags.3?true"},{name:"exclude_selected",type:"flags.5?true"},{name:"users",type:"flags.4?Vector<InputUser>"},{name:"exclude_users",type:"flags.6?Vector<InputUser>"}],type:"InputBusinessBotRecipients"},{id:-1198722189,predicate:"businessBotRecipients",params:[{name:"flags",type:"#"},{name:"existing_chats",type:"flags.0?true"},{name:"new_chats",type:"flags.1?true"},{name:"contacts",type:"flags.2?true"},{name:"non_contacts",type:"flags.3?true"},{name:"exclude_selected",type:"flags.5?true"},{name:"users",type:"flags.4?Vector<long>"},{name:"exclude_users",type:"flags.6?Vector<long>"}],type:"BusinessBotRecipients"},{id:496600883,predicate:"contactBirthday",params:[{name:"contact_id",type:"long"},{name:"birthday",type:"Birthday"}],type:"ContactBirthday"},{id:290452237,predicate:"contacts.contactBirthdays",params:[{name:"contacts",type:"Vector<ContactBirthday>"},{name:"users",type:"Vector<User>"}],type:"contacts.ContactBirthdays"},{id:-698740276,predicate:"inputPrivacyKeyBirthday",params:[],type:"InputPrivacyKey"},{id:536913176,predicate:"privacyKeyBirthday",params:[],type:"PrivacyKey"},{id:2009975281,predicate:"inputPrivacyValueAllowPremium",params:[],type:"InputPrivacyRule"},{id:-320241333,predicate:"privacyValueAllowPremium",params:[],type:"PrivacyRule"},{id:1653379620,predicate:"missingInvitee",params:[{name:"flags",type:"#"},{name:"premium_would_allow_invite",type:"flags.0?true"},{name:"premium_required_for_pm",type:"flags.1?true"},{name:"user_id",type:"long"}],type:"MissingInvitee"},{id:2136862630,predicate:"messages.invitedUsers",params:[{name:"updates",type:"Updates"},{name:"missing_invitees",type:"Vector<MissingInvitee>"}],type:"messages.InvitedUsers"},{id:292003751,predicate:"inputBusinessChatLink",params:[{name:"flags",type:"#"},{name:"message",type:"string"},{name:"entities",type:"flags.0?Vector<MessageEntity>"},{name:"title",type:"flags.1?string"}],type:"InputBusinessChatLink"},{id:-1263638929,predicate:"businessChatLink",params:[{name:"flags",type:"#"},{name:"link",type:"string"},{name:"message",type:"string"},{name:"entities",type:"flags.0?Vector<MessageEntity>"},{name:"title",type:"flags.1?string"},{name:"views",type:"int"}],type:"BusinessChatLink"},{id:-331111727,predicate:"account.businessChatLinks",params:[{name:"links",type:"Vector<BusinessChatLink>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"account.BusinessChatLinks"},{id:-1708937439,predicate:"account.resolvedBusinessChatLinks",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"message",type:"string"},{name:"entities",type:"flags.0?Vector<MessageEntity>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"account.ResolvedBusinessChatLinks"},{id:-701500310,predicate:"requestedPeerUser",params:[{name:"flags",type:"#"},{name:"user_id",type:"long"},{name:"first_name",type:"flags.0?string"},{name:"last_name",type:"flags.0?string"},{name:"username",type:"flags.1?string"},{name:"photo",type:"flags.2?Photo"}],type:"RequestedPeer"},{id:1929860175,predicate:"requestedPeerChat",params:[{name:"flags",type:"#"},{name:"chat_id",type:"long"},{name:"title",type:"flags.0?string"},{name:"photo",type:"flags.2?Photo"}],type:"RequestedPeer"},{id:-1952185372,predicate:"requestedPeerChannel",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"title",type:"flags.0?string"},{name:"username",type:"flags.1?string"},{name:"photo",type:"flags.2?Photo"}],type:"RequestedPeer"},{id:-1816979384,predicate:"messageActionRequestedPeerSentMe",params:[{name:"button_id",type:"int"},{name:"peers",type:"Vector<RequestedPeer>"}],type:"MessageAction"},{id:-916050683,predicate:"inputKeyboardButtonRequestPeer",params:[{name:"flags",type:"#"},{name:"name_requested",type:"flags.0?true"},{name:"username_requested",type:"flags.1?true"},{name:"photo_requested",type:"flags.2?true"},{name:"text",type:"string"},{name:"button_id",type:"int"},{name:"peer_type",type:"RequestPeerType"},{name:"max_quantity",type:"int"}],type:"KeyboardButton"},{id:1124938064,predicate:"sponsoredMessageReportOption",params:[{name:"text",type:"string"},{name:"option",type:"bytes"}],type:"SponsoredMessageReportOption"},{id:-2073059774,predicate:"channels.sponsoredMessageReportResultChooseOption",params:[{name:"title",type:"string"},{name:"options",type:"Vector<SponsoredMessageReportOption>"}],type:"channels.SponsoredMessageReportResult"},{id:1044107055,predicate:"channels.sponsoredMessageReportResultAdsHidden",params:[],type:"channels.SponsoredMessageReportResult"},{id:-1384544183,predicate:"channels.sponsoredMessageReportResultReported",params:[],type:"channels.SponsoredMessageReportResult"},{id:-797226067,predicate:"stats.broadcastRevenueStats",params:[{name:"top_hours_graph",type:"StatsGraph"},{name:"revenue_graph",type:"StatsGraph"},{name:"current_balance",type:"long"},{name:"available_balance",type:"long"},{name:"overall_revenue",type:"long"},{name:"usd_rate",type:"double"}],type:"stats.BroadcastRevenueStats"},{id:-328886473,predicate:"stats.broadcastRevenueWithdrawalUrl",params:[{name:"url",type:"string"}],type:"stats.BroadcastRevenueWithdrawalUrl"},{id:1434332356,predicate:"broadcastRevenueTransactionProceeds",params:[{name:"amount",type:"long"},{name:"from_date",type:"int"},{name:"to_date",type:"int"}],type:"BroadcastRevenueTransaction"},{id:1515784568,predicate:"broadcastRevenueTransactionWithdrawal",params:[{name:"flags",type:"#"},{name:"pending",type:"flags.0?true"},{name:"failed",type:"flags.2?true"},{name:"amount",type:"long"},{name:"date",type:"int"},{name:"provider",type:"string"},{name:"transaction_date",type:"flags.1?int"},{name:"transaction_url",type:"flags.1?string"}],type:"BroadcastRevenueTransaction"},{id:1121127726,predicate:"broadcastRevenueTransactionRefund",params:[{name:"amount",type:"long"},{name:"date",type:"int"},{name:"provider",type:"string"}],type:"BroadcastRevenueTransaction"},{id:-2028632986,predicate:"stats.broadcastRevenueTransactions",params:[{name:"count",type:"int"},{name:"transactions",type:"Vector<BroadcastRevenueTransaction>"}],type:"stats.BroadcastRevenueTransactions"}],methods:[{id:-878758099,method:"invokeAfterMsg",params:[{name:"msg_id",type:"long"},{name:"query",type:"!X"}],type:"X"},{id:1036301552,method:"invokeAfterMsgs",params:[{name:"msg_ids",type:"Vector<long>"},{name:"query",type:"!X"}],type:"X"},{id:-1502141361,method:"auth.sendCode",params:[{name:"phone_number",type:"string"},{name:"api_id",type:"int"},{name:"api_hash",type:"string"},{name:"settings",type:"CodeSettings"}],type:"auth.SentCode"},{id:-1429752041,method:"auth.signUp",params:[{name:"flags",type:"#"},{name:"no_joined_notifications",type:"flags.0?true"},{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"}],type:"auth.Authorization"},{id:-1923962543,method:"auth.signIn",params:[{name:"flags",type:"#"},{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"phone_code",type:"flags.0?string"},{name:"email_verification",type:"flags.1?EmailVerification"}],type:"auth.Authorization"},{id:1047706137,method:"auth.logOut",params:[],type:"auth.LoggedOut"},{id:-1616179942,method:"auth.resetAuthorizations",params:[],type:"Bool"},{id:-440401971,method:"auth.exportAuthorization",params:[{name:"dc_id",type:"int"}],type:"auth.ExportedAuthorization"},{id:-1518699091,method:"auth.importAuthorization",params:[{name:"id",type:"long"},{name:"bytes",type:"bytes"}],type:"auth.Authorization"},{id:-841733627,method:"auth.bindTempAuthKey",params:[{name:"perm_auth_key_id",type:"long"},{name:"nonce",type:"long"},{name:"expires_at",type:"int"},{name:"encrypted_message",type:"bytes"}],type:"Bool"},{id:-326762118,method:"account.registerDevice",params:[{name:"flags",type:"#"},{name:"no_muted",type:"flags.0?true"},{name:"token_type",type:"int"},{name:"token",type:"string"},{name:"app_sandbox",type:"Bool"},{name:"secret",type:"bytes"},{name:"other_uids",type:"Vector<long>"}],type:"Bool"},{id:1779249670,method:"account.unregisterDevice",params:[{name:"token_type",type:"int"},{name:"token",type:"string"},{name:"other_uids",type:"Vector<long>"}],type:"Bool"},{id:-2067899501,method:"account.updateNotifySettings",params:[{name:"peer",type:"InputNotifyPeer"},{name:"settings",type:"InputPeerNotifySettings"}],type:"Bool"},{id:313765169,method:"account.getNotifySettings",params:[{name:"peer",type:"InputNotifyPeer"}],type:"PeerNotifySettings"},{id:-612493497,method:"account.resetNotifySettings",params:[],type:"Bool"},{id:2018596725,method:"account.updateProfile",params:[{name:"flags",type:"#"},{name:"first_name",type:"flags.0?string"},{name:"last_name",type:"flags.1?string"},{name:"about",type:"flags.2?string"}],type:"User"},{id:1713919532,method:"account.updateStatus",params:[{name:"offline",type:"Bool"}],type:"Bool"},{id:127302966,method:"account.getWallPapers",params:[{name:"hash",type:"long"}],type:"account.WallPapers"},{id:-977650298,method:"account.reportPeer",params:[{name:"peer",type:"InputPeer"},{name:"reason",type:"ReportReason"},{name:"message",type:"string"}],type:"Bool"},{id:227648840,method:"users.getUsers",params:[{name:"id",type:"Vector<InputUser>"}],type:"Vector<User>"},{id:-1240508136,method:"users.getFullUser",params:[{name:"id",type:"InputUser"}],type:"users.UserFull"},{id:2061264541,method:"contacts.getContactIDs",params:[{name:"hash",type:"long"}],type:"Vector<int>"},{id:-995929106,method:"contacts.getStatuses",params:[],type:"Vector<ContactStatus>"},{id:1574346258,method:"contacts.getContacts",params:[{name:"hash",type:"long"}],type:"contacts.Contacts"},{id:746589157,method:"contacts.importContacts",params:[{name:"contacts",type:"Vector<InputContact>"}],type:"contacts.ImportedContacts"},{id:157945344,method:"contacts.deleteContacts",params:[{name:"id",type:"Vector<InputUser>"}],type:"Updates"},{id:269745566,method:"contacts.deleteByPhones",params:[{name:"phones",type:"Vector<string>"}],type:"Bool"},{id:774801204,method:"contacts.block",params:[{name:"flags",type:"#"},{name:"my_stories_from",type:"flags.0?true"},{name:"id",type:"InputPeer"}],type:"Bool"},{id:-1252994264,method:"contacts.unblock",params:[{name:"flags",type:"#"},{name:"my_stories_from",type:"flags.0?true"},{name:"id",type:"InputPeer"}],type:"Bool"},{id:-1702457472,method:"contacts.getBlocked",params:[{name:"flags",type:"#"},{name:"my_stories_from",type:"flags.0?true"},{name:"offset",type:"int"},{name:"limit",type:"int"}],type:"contacts.Blocked"},{id:1673946374,method:"messages.getMessages",params:[{name:"id",type:"Vector<InputMessage>"}],type:"messages.Messages"},{id:-1594569905,method:"messages.getDialogs",params:[{name:"flags",type:"#"},{name:"exclude_pinned",type:"flags.0?true"},{name:"folder_id",type:"flags.1?int"},{name:"offset_date",type:"int"},{name:"offset_id",type:"int"},{name:"offset_peer",type:"InputPeer"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.Dialogs"},{id:1143203525,method:"messages.getHistory",params:[{name:"peer",type:"InputPeer"},{name:"offset_id",type:"int"},{name:"offset_date",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:703497338,method:"messages.search",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"q",type:"string"},{name:"from_id",type:"flags.0?InputPeer"},{name:"saved_peer_id",type:"flags.2?InputPeer"},{name:"saved_reaction",type:"flags.3?Vector<Reaction>"},{name:"top_msg_id",type:"flags.1?int"},{name:"filter",type:"MessagesFilter"},{name:"min_date",type:"int"},{name:"max_date",type:"int"},{name:"offset_id",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:238054714,method:"messages.readHistory",params:[{name:"peer",type:"InputPeer"},{name:"max_id",type:"int"}],type:"messages.AffectedMessages"},{id:-1332768214,method:"messages.deleteHistory",params:[{name:"flags",type:"#"},{name:"just_clear",type:"flags.0?true"},{name:"revoke",type:"flags.1?true"},{name:"peer",type:"InputPeer"},{name:"max_id",type:"int"},{name:"min_date",type:"flags.2?int"},{name:"max_date",type:"flags.3?int"}],type:"messages.AffectedHistory"},{id:-443640366,method:"messages.deleteMessages",params:[{name:"flags",type:"#"},{name:"revoke",type:"flags.0?true"},{name:"id",type:"Vector<int>"}],type:"messages.AffectedMessages"},{id:94983360,method:"messages.receivedMessages",params:[{name:"max_id",type:"int"}],type:"Vector<ReceivedNotifyMessage>"},{id:1486110434,method:"messages.setTyping",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"},{name:"action",type:"SendMessageAction"}],type:"Bool"},{id:-537394132,method:"messages.sendMessage",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"clear_draft",type:"flags.7?true"},{name:"noforwards",type:"flags.14?true"},{name:"update_stickersets_order",type:"flags.15?true"},{name:"invert_media",type:"flags.16?true"},{name:"peer",type:"InputPeer"},{name:"reply_to",type:"flags.0?InputReplyTo"},{name:"message",type:"string"},{name:"random_id",type:"long"},{name:"reply_markup",type:"flags.2?ReplyMarkup"},{name:"entities",type:"flags.3?Vector<MessageEntity>"},{name:"schedule_date",type:"flags.10?int"},{name:"send_as",type:"flags.13?InputPeer"},{name:"quick_reply_shortcut",type:"flags.17?InputQuickReplyShortcut"}],type:"Updates"},{id:2077646913,method:"messages.sendMedia",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"clear_draft",type:"flags.7?true"},{name:"noforwards",type:"flags.14?true"},{name:"update_stickersets_order",type:"flags.15?true"},{name:"invert_media",type:"flags.16?true"},{name:"peer",type:"InputPeer"},{name:"reply_to",type:"flags.0?InputReplyTo"},{name:"media",type:"InputMedia"},{name:"message",type:"string"},{name:"random_id",type:"long"},{name:"reply_markup",type:"flags.2?ReplyMarkup"},{name:"entities",type:"flags.3?Vector<MessageEntity>"},{name:"schedule_date",type:"flags.10?int"},{name:"send_as",type:"flags.13?InputPeer"},{name:"quick_reply_shortcut",type:"flags.17?InputQuickReplyShortcut"}],type:"Updates"},{id:-721186296,method:"messages.forwardMessages",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"with_my_score",type:"flags.8?true"},{name:"drop_author",type:"flags.11?true"},{name:"drop_media_captions",type:"flags.12?true"},{name:"noforwards",type:"flags.14?true"},{name:"from_peer",type:"InputPeer"},{name:"id",type:"Vector<int>"},{name:"random_id",type:"Vector<long>"},{name:"to_peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.9?int"},{name:"schedule_date",type:"flags.10?int"},{name:"send_as",type:"flags.13?InputPeer"},{name:"quick_reply_shortcut",type:"flags.17?InputQuickReplyShortcut"}],type:"Updates"},{id:-820669733,method:"messages.reportSpam",params:[{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-270948702,method:"messages.getPeerSettings",params:[{name:"peer",type:"InputPeer"}],type:"messages.PeerSettings"},{id:-1991005362,method:"messages.report",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"},{name:"reason",type:"ReportReason"},{name:"message",type:"string"}],type:"Bool"},{id:1240027791,method:"messages.getChats",params:[{name:"id",type:"Vector<long>"}],type:"messages.Chats"},{id:-1364194508,method:"messages.getFullChat",params:[{name:"chat_id",type:"long"}],type:"messages.ChatFull"},{id:1937260541,method:"messages.editChatTitle",params:[{name:"chat_id",type:"long"},{name:"title",type:"string"}],type:"Updates"},{id:903730804,method:"messages.editChatPhoto",params:[{name:"chat_id",type:"long"},{name:"photo",type:"InputChatPhoto"}],type:"Updates"},{id:-876162809,method:"messages.addChatUser",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"InputUser"},{name:"fwd_limit",type:"int"}],type:"messages.InvitedUsers"},{id:-1575461717,method:"messages.deleteChatUser",params:[{name:"flags",type:"#"},{name:"revoke_history",type:"flags.0?true"},{name:"chat_id",type:"long"},{name:"user_id",type:"InputUser"}],type:"Updates"},{id:-1831936556,method:"messages.createChat",params:[{name:"flags",type:"#"},{name:"users",type:"Vector<InputUser>"},{name:"title",type:"string"},{name:"ttl_period",type:"flags.0?int"}],type:"messages.InvitedUsers"},{id:-304838614,method:"updates.getState",params:[],type:"updates.State"},{id:432207715,method:"updates.getDifference",params:[{name:"flags",type:"#"},{name:"pts",type:"int"},{name:"pts_limit",type:"flags.1?int"},{name:"pts_total_limit",type:"flags.0?int"},{name:"date",type:"int"},{name:"qts",type:"int"},{name:"qts_limit",type:"flags.2?int"}],type:"updates.Difference"},{id:166207545,method:"photos.updateProfilePhoto",params:[{name:"flags",type:"#"},{name:"fallback",type:"flags.0?true"},{name:"bot",type:"flags.1?InputUser"},{name:"id",type:"InputPhoto"}],type:"photos.Photo"},{id:59286453,method:"photos.uploadProfilePhoto",params:[{name:"flags",type:"#"},{name:"fallback",type:"flags.3?true"},{name:"bot",type:"flags.5?InputUser"},{name:"file",type:"flags.0?InputFile"},{name:"video",type:"flags.1?InputFile"},{name:"video_start_ts",type:"flags.2?double"},{name:"video_emoji_markup",type:"flags.4?VideoSize"}],type:"photos.Photo"},{id:-2016444625,method:"photos.deletePhotos",params:[{name:"id",type:"Vector<InputPhoto>"}],type:"Vector<long>"},{id:-1291540959,method:"upload.saveFilePart",params:[{name:"file_id",type:"long"},{name:"file_part",type:"int"},{name:"bytes",type:"bytes"}],type:"Bool"},{id:-1101843010,method:"upload.getFile",params:[{name:"flags",type:"#"},{name:"precise",type:"flags.0?true"},{name:"cdn_supported",type:"flags.1?true"},{name:"location",type:"InputFileLocation"},{name:"offset",type:"long"},{name:"limit",type:"int"}],type:"upload.File"},{id:-990308245,method:"help.getConfig",params:[],type:"Config"},{id:531836966,method:"help.getNearestDc",params:[],type:"NearestDc"},{id:1378703997,method:"help.getAppUpdate",params:[{name:"source",type:"string"}],type:"help.AppUpdate"},{id:1295590211,method:"help.getInviteText",params:[],type:"help.InviteText"},{id:-1848823128,method:"photos.getUserPhotos",params:[{name:"user_id",type:"InputUser"},{name:"offset",type:"int"},{name:"max_id",type:"long"},{name:"limit",type:"int"}],type:"photos.Photos"},{id:651135312,method:"messages.getDhConfig",params:[{name:"version",type:"int"},{name:"random_length",type:"int"}],type:"messages.DhConfig"},{id:-162681021,method:"messages.requestEncryption",params:[{name:"user_id",type:"InputUser"},{name:"random_id",type:"int"},{name:"g_a",type:"bytes"}],type:"EncryptedChat"},{id:1035731989,method:"messages.acceptEncryption",params:[{name:"peer",type:"InputEncryptedChat"},{name:"g_b",type:"bytes"},{name:"key_fingerprint",type:"long"}],type:"EncryptedChat"},{id:-208425312,method:"messages.discardEncryption",params:[{name:"flags",type:"#"},{name:"delete_history",type:"flags.0?true"},{name:"chat_id",type:"int"}],type:"Bool"},{id:2031374829,method:"messages.setEncryptedTyping",params:[{name:"peer",type:"InputEncryptedChat"},{name:"typing",type:"Bool"}],type:"Bool"},{id:2135648522,method:"messages.readEncryptedHistory",params:[{name:"peer",type:"InputEncryptedChat"},{name:"max_date",type:"int"}],type:"Bool"},{id:1157265941,method:"messages.sendEncrypted",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.0?true"},{name:"peer",type:"InputEncryptedChat"},{name:"random_id",type:"long"},{name:"data",type:"bytes"}],type:"messages.SentEncryptedMessage"},{id:1431914525,method:"messages.sendEncryptedFile",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.0?true"},{name:"peer",type:"InputEncryptedChat"},{name:"random_id",type:"long"},{name:"data",type:"bytes"},{name:"file",type:"InputEncryptedFile"}],type:"messages.SentEncryptedMessage"},{id:852769188,method:"messages.sendEncryptedService",params:[{name:"peer",type:"InputEncryptedChat"},{name:"random_id",type:"long"},{name:"data",type:"bytes"}],type:"messages.SentEncryptedMessage"},{id:1436924774,method:"messages.receivedQueue",params:[{name:"max_qts",type:"int"}],type:"Vector<long>"},{id:1259113487,method:"messages.reportEncryptedSpam",params:[{name:"peer",type:"InputEncryptedChat"}],type:"Bool"},{id:-562337987,method:"upload.saveBigFilePart",params:[{name:"file_id",type:"long"},{name:"file_part",type:"int"},{name:"file_total_parts",type:"int"},{name:"bytes",type:"bytes"}],type:"Bool"},{id:-1043505495,method:"initConnection",params:[{name:"flags",type:"#"},{name:"api_id",type:"int"},{name:"device_model",type:"string"},{name:"system_version",type:"string"},{name:"app_version",type:"string"},{name:"system_lang_code",type:"string"},{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"},{name:"proxy",type:"flags.0?InputClientProxy"},{name:"params",type:"flags.1?JSONValue"},{name:"query",type:"!X"}],type:"X"},{id:-1663104819,method:"help.getSupport",params:[],type:"help.Support"},{id:916930423,method:"messages.readMessageContents",params:[{name:"id",type:"Vector<int>"}],type:"messages.AffectedMessages"},{id:655677548,method:"account.checkUsername",params:[{name:"username",type:"string"}],type:"Bool"},{id:1040964988,method:"account.updateUsername",params:[{name:"username",type:"string"}],type:"User"},{id:301470424,method:"contacts.search",params:[{name:"q",type:"string"},{name:"limit",type:"int"}],type:"contacts.Found"},{id:-623130288,method:"account.getPrivacy",params:[{name:"key",type:"InputPrivacyKey"}],type:"account.PrivacyRules"},{id:-906486552,method:"account.setPrivacy",params:[{name:"key",type:"InputPrivacyKey"},{name:"rules",type:"Vector<InputPrivacyRule>"}],type:"account.PrivacyRules"},{id:-1564422284,method:"account.deleteAccount",params:[{name:"flags",type:"#"},{name:"reason",type:"string"},{name:"password",type:"flags.0?InputCheckPasswordSRP"}],type:"Bool"},{id:150761757,method:"account.getAccountTTL",params:[],type:"AccountDaysTTL"},{id:608323678,method:"account.setAccountTTL",params:[{name:"ttl",type:"AccountDaysTTL"}],type:"Bool"},{id:-627372787,method:"invokeWithLayer",params:[{name:"layer",type:"int"},{name:"query",type:"!X"}],type:"X"},{id:-113456221,method:"contacts.resolveUsername",params:[{name:"username",type:"string"}],type:"contacts.ResolvedPeer"},{id:-2108208411,method:"account.sendChangePhoneCode",params:[{name:"phone_number",type:"string"},{name:"settings",type:"CodeSettings"}],type:"auth.SentCode"},{id:1891839707,method:"account.changePhone",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"phone_code",type:"string"}],type:"User"},{id:-710552671,method:"messages.getStickers",params:[{name:"emoticon",type:"string"},{name:"hash",type:"long"}],type:"messages.Stickers"},{id:-1197432408,method:"messages.getAllStickers",params:[{name:"hash",type:"long"}],type:"messages.AllStickers"},{id:954152242,method:"account.updateDeviceLocked",params:[{name:"period",type:"int"}],type:"Bool"},{id:1738800940,method:"auth.importBotAuthorization",params:[{name:"flags",type:"int"},{name:"api_id",type:"int"},{name:"api_hash",type:"string"},{name:"bot_auth_token",type:"string"}],type:"auth.Authorization"},{id:-1956073268,method:"messages.getWebPagePreview",params:[{name:"flags",type:"#"},{name:"message",type:"string"},{name:"entities",type:"flags.3?Vector<MessageEntity>"}],type:"MessageMedia"},{id:-484392616,method:"account.getAuthorizations",params:[],type:"account.Authorizations"},{id:-545786948,method:"account.resetAuthorization",params:[{name:"hash",type:"long"}],type:"Bool"},{id:1418342645,method:"account.getPassword",params:[],type:"account.Password"},{id:-1663767815,method:"account.getPasswordSettings",params:[{name:"password",type:"InputCheckPasswordSRP"}],type:"account.PasswordSettings"},{id:-1516564433,method:"account.updatePasswordSettings",params:[{name:"password",type:"InputCheckPasswordSRP"},{name:"new_settings",type:"account.PasswordInputSettings"}],type:"Bool"},{id:-779399914,method:"auth.checkPassword",params:[{name:"password",type:"InputCheckPasswordSRP"}],type:"auth.Authorization"},{id:-661144474,method:"auth.requestPasswordRecovery",params:[],type:"auth.PasswordRecovery"},{id:923364464,method:"auth.recoverPassword",params:[{name:"flags",type:"#"},{name:"code",type:"string"},{name:"new_settings",type:"flags.0?account.PasswordInputSettings"}],type:"auth.Authorization"},{id:-1080796745,method:"invokeWithoutUpdates",params:[{name:"query",type:"!X"}],type:"X"},{id:-1607670315,method:"messages.exportChatInvite",params:[{name:"flags",type:"#"},{name:"legacy_revoke_permanent",type:"flags.2?true"},{name:"request_needed",type:"flags.3?true"},{name:"peer",type:"InputPeer"},{name:"expire_date",type:"flags.0?int"},{name:"usage_limit",type:"flags.1?int"},{name:"title",type:"flags.4?string"}],type:"ExportedChatInvite"},{id:1051570619,method:"messages.checkChatInvite",params:[{name:"hash",type:"string"}],type:"ChatInvite"},{id:1817183516,method:"messages.importChatInvite",params:[{name:"hash",type:"string"}],type:"Updates"},{id:-928977804,method:"messages.getStickerSet",params:[{name:"stickerset",type:"InputStickerSet"},{name:"hash",type:"int"}],type:"messages.StickerSet"},{id:-946871200,method:"messages.installStickerSet",params:[{name:"stickerset",type:"InputStickerSet"},{name:"archived",type:"Bool"}],type:"messages.StickerSetInstallResult"},{id:-110209570,method:"messages.uninstallStickerSet",params:[{name:"stickerset",type:"InputStickerSet"}],type:"Bool"},{id:-421563528,method:"messages.startBot",params:[{name:"bot",type:"InputUser"},{name:"peer",type:"InputPeer"},{name:"random_id",type:"long"},{name:"start_param",type:"string"}],type:"Updates"},{id:1468322785,method:"messages.getMessagesViews",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"},{name:"increment",type:"Bool"}],type:"messages.MessageViews"},{id:-871347913,method:"channels.readHistory",params:[{name:"channel",type:"InputChannel"},{name:"max_id",type:"int"}],type:"Bool"},{id:-2067661490,method:"channels.deleteMessages",params:[{name:"channel",type:"InputChannel"},{name:"id",type:"Vector<int>"}],type:"messages.AffectedMessages"},{id:-196443371,method:"channels.reportSpam",params:[{name:"channel",type:"InputChannel"},{name:"participant",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Bool"},{id:-1383294429,method:"channels.getMessages",params:[{name:"channel",type:"InputChannel"},{name:"id",type:"Vector<InputMessage>"}],type:"messages.Messages"},{id:2010044880,method:"channels.getParticipants",params:[{name:"channel",type:"InputChannel"},{name:"filter",type:"ChannelParticipantsFilter"},{name:"offset",type:"int"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"channels.ChannelParticipants"},{id:-1599378234,method:"channels.getParticipant",params:[{name:"channel",type:"InputChannel"},{name:"participant",type:"InputPeer"}],type:"channels.ChannelParticipant"},{id:176122811,method:"channels.getChannels",params:[{name:"id",type:"Vector<InputChannel>"}],type:"messages.Chats"},{id:141781513,method:"channels.getFullChannel",params:[{name:"channel",type:"InputChannel"}],type:"messages.ChatFull"},{id:-1862244601,method:"channels.createChannel",params:[{name:"flags",type:"#"},{name:"broadcast",type:"flags.0?true"},{name:"megagroup",type:"flags.1?true"},{name:"for_import",type:"flags.3?true"},{name:"forum",type:"flags.5?true"},{name:"title",type:"string"},{name:"about",type:"string"},{name:"geo_point",type:"flags.2?InputGeoPoint"},{name:"address",type:"flags.2?string"},{name:"ttl_period",type:"flags.4?int"}],type:"Updates"},{id:-751007486,method:"channels.editAdmin",params:[{name:"channel",type:"InputChannel"},{name:"user_id",type:"InputUser"},{name:"admin_rights",type:"ChatAdminRights"},{name:"rank",type:"string"}],type:"Updates"},{id:1450044624,method:"channels.editTitle",params:[{name:"channel",type:"InputChannel"},{name:"title",type:"string"}],type:"Updates"},{id:-248621111,method:"channels.editPhoto",params:[{name:"channel",type:"InputChannel"},{name:"photo",type:"InputChatPhoto"}],type:"Updates"},{id:283557164,method:"channels.checkUsername",params:[{name:"channel",type:"InputChannel"},{name:"username",type:"string"}],type:"Bool"},{id:890549214,method:"channels.updateUsername",params:[{name:"channel",type:"InputChannel"},{name:"username",type:"string"}],type:"Bool"},{id:615851205,method:"channels.joinChannel",params:[{name:"channel",type:"InputChannel"}],type:"Updates"},{id:-130635115,method:"channels.leaveChannel",params:[{name:"channel",type:"InputChannel"}],type:"Updates"},{id:-907854508,method:"channels.inviteToChannel",params:[{name:"channel",type:"InputChannel"},{name:"users",type:"Vector<InputUser>"}],type:"messages.InvitedUsers"},{id:-1072619549,method:"channels.deleteChannel",params:[{name:"channel",type:"InputChannel"}],type:"Updates"},{id:51854712,method:"updates.getChannelDifference",params:[{name:"flags",type:"#"},{name:"force",type:"flags.0?true"},{name:"channel",type:"InputChannel"},{name:"filter",type:"ChannelMessagesFilter"},{name:"pts",type:"int"},{name:"limit",type:"int"}],type:"updates.ChannelDifference"},{id:-1470377534,method:"messages.editChatAdmin",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"InputUser"},{name:"is_admin",type:"Bool"}],type:"Bool"},{id:-1568189671,method:"messages.migrateChat",params:[{name:"chat_id",type:"long"}],type:"Updates"},{id:1271290010,method:"messages.searchGlobal",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.0?int"},{name:"q",type:"string"},{name:"filter",type:"MessagesFilter"},{name:"min_date",type:"int"},{name:"max_date",type:"int"},{name:"offset_rate",type:"int"},{name:"offset_peer",type:"InputPeer"},{name:"offset_id",type:"int"},{name:"limit",type:"int"}],type:"messages.Messages"},{id:2016638777,method:"messages.reorderStickerSets",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"emojis",type:"flags.1?true"},{name:"order",type:"Vector<long>"}],type:"Bool"},{id:-1309538785,method:"messages.getDocumentByHash",params:[{name:"sha256",type:"bytes"},{name:"size",type:"long"},{name:"mime_type",type:"string"}],type:"Document"},{id:1559270965,method:"messages.getSavedGifs",params:[{name:"hash",type:"long"}],type:"messages.SavedGifs"},{id:846868683,method:"messages.saveGif",params:[{name:"id",type:"InputDocument"},{name:"unsave",type:"Bool"}],type:"Bool"},{id:1364105629,method:"messages.getInlineBotResults",params:[{name:"flags",type:"#"},{name:"bot",type:"InputUser"},{name:"peer",type:"InputPeer"},{name:"geo_point",type:"flags.0?InputGeoPoint"},{name:"query",type:"string"},{name:"offset",type:"string"}],type:"messages.BotResults"},{id:-1156406247,method:"messages.setInlineBotResults",params:[{name:"flags",type:"#"},{name:"gallery",type:"flags.0?true"},{name:"private",type:"flags.1?true"},{name:"query_id",type:"long"},{name:"results",type:"Vector<InputBotInlineResult>"},{name:"cache_time",type:"int"},{name:"next_offset",type:"flags.2?string"},{name:"switch_pm",type:"flags.3?InlineBotSwitchPM"},{name:"switch_webview",type:"flags.4?InlineBotWebView"}],type:"Bool"},{id:1052698730,method:"messages.sendInlineBotResult",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"clear_draft",type:"flags.7?true"},{name:"hide_via",type:"flags.11?true"},{name:"peer",type:"InputPeer"},{name:"reply_to",type:"flags.0?InputReplyTo"},{name:"random_id",type:"long"},{name:"query_id",type:"long"},{name:"id",type:"string"},{name:"schedule_date",type:"flags.10?int"},{name:"send_as",type:"flags.13?InputPeer"},{name:"quick_reply_shortcut",type:"flags.17?InputQuickReplyShortcut"}],type:"Updates"},{id:-432034325,method:"channels.exportMessageLink",params:[{name:"flags",type:"#"},{name:"grouped",type:"flags.0?true"},{name:"thread",type:"flags.1?true"},{name:"channel",type:"InputChannel"},{name:"id",type:"int"}],type:"ExportedMessageLink"},{id:527021574,method:"channels.toggleSignatures",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:1056025023,method:"auth.resendCode",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"}],type:"auth.SentCode"},{id:520357240,method:"auth.cancelCode",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"}],type:"Bool"},{id:-39416522,method:"messages.getMessageEditData",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"int"}],type:"messages.MessageEditData"},{id:-539934715,method:"messages.editMessage",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"invert_media",type:"flags.16?true"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"message",type:"flags.11?string"},{name:"media",type:"flags.14?InputMedia"},{name:"reply_markup",type:"flags.2?ReplyMarkup"},{name:"entities",type:"flags.3?Vector<MessageEntity>"},{name:"schedule_date",type:"flags.15?int"},{name:"quick_reply_shortcut_id",type:"flags.17?int"}],type:"Updates"},{id:-2091549254,method:"messages.editInlineBotMessage",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"invert_media",type:"flags.16?true"},{name:"id",type:"InputBotInlineMessageID"},{name:"message",type:"flags.11?string"},{name:"media",type:"flags.14?InputMedia"},{name:"reply_markup",type:"flags.2?ReplyMarkup"},{name:"entities",type:"flags.3?Vector<MessageEntity>"}],type:"Bool"},{id:-1824339449,method:"messages.getBotCallbackAnswer",params:[{name:"flags",type:"#"},{name:"game",type:"flags.1?true"},{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"data",type:"flags.0?bytes"},{name:"password",type:"flags.2?InputCheckPasswordSRP"}],type:"messages.BotCallbackAnswer"},{id:-712043766,method:"messages.setBotCallbackAnswer",params:[{name:"flags",type:"#"},{name:"alert",type:"flags.1?true"},{name:"query_id",type:"long"},{name:"message",type:"flags.0?string"},{name:"url",type:"flags.2?string"},{name:"cache_time",type:"int"}],type:"Bool"},{id:-1758168906,method:"contacts.getTopPeers",params:[{name:"flags",type:"#"},{name:"correspondents",type:"flags.0?true"},{name:"bots_pm",type:"flags.1?true"},{name:"bots_inline",type:"flags.2?true"},{name:"phone_calls",type:"flags.3?true"},{name:"forward_users",type:"flags.4?true"},{name:"forward_chats",type:"flags.5?true"},{name:"groups",type:"flags.10?true"},{name:"channels",type:"flags.15?true"},{name:"offset",type:"int"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"contacts.TopPeers"},{id:451113900,method:"contacts.resetTopPeerRating",params:[{name:"category",type:"TopPeerCategory"},{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-462373635,method:"messages.getPeerDialogs",params:[{name:"peers",type:"Vector<InputDialogPeer>"}],type:"messages.PeerDialogs"},{id:2146678790,method:"messages.saveDraft",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"invert_media",type:"flags.6?true"},{name:"reply_to",type:"flags.4?InputReplyTo"},{name:"peer",type:"InputPeer"},{name:"message",type:"string"},{name:"entities",type:"flags.3?Vector<MessageEntity>"},{name:"media",type:"flags.5?InputMedia"}],type:"Bool"},{id:1782549861,method:"messages.getAllDrafts",params:[],type:"Updates"},{id:1685588756,method:"messages.getFeaturedStickers",params:[{name:"hash",type:"long"}],type:"messages.FeaturedStickers"},{id:1527873830,method:"messages.readFeaturedStickers",params:[{name:"id",type:"Vector<long>"}],type:"Bool"},{id:-1649852357,method:"messages.getRecentStickers",params:[{name:"flags",type:"#"},{name:"attached",type:"flags.0?true"},{name:"hash",type:"long"}],type:"messages.RecentStickers"},{id:958863608,method:"messages.saveRecentSticker",params:[{name:"flags",type:"#"},{name:"attached",type:"flags.0?true"},{name:"id",type:"InputDocument"},{name:"unsave",type:"Bool"}],type:"Bool"},{id:-1986437075,method:"messages.clearRecentStickers",params:[{name:"flags",type:"#"},{name:"attached",type:"flags.0?true"}],type:"Bool"},{id:1475442322,method:"messages.getArchivedStickers",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"emojis",type:"flags.1?true"},{name:"offset_id",type:"long"},{name:"limit",type:"int"}],type:"messages.ArchivedStickers"},{id:457157256,method:"account.sendConfirmPhoneCode",params:[{name:"hash",type:"string"},{name:"settings",type:"CodeSettings"}],type:"auth.SentCode"},{id:1596029123,method:"account.confirmPhone",params:[{name:"phone_code_hash",type:"string"},{name:"phone_code",type:"string"}],type:"Bool"},{id:-122669393,method:"channels.getAdminedPublicChannels",params:[{name:"flags",type:"#"},{name:"by_location",type:"flags.0?true"},{name:"check_limit",type:"flags.1?true"},{name:"for_personal",type:"flags.2?true"}],type:"messages.Chats"},{id:1678738104,method:"messages.getMaskStickers",params:[{name:"hash",type:"long"}],type:"messages.AllStickers"},{id:-866424884,method:"messages.getAttachedStickers",params:[{name:"media",type:"InputStickeredMedia"}],type:"Vector<StickerSetCovered>"},{id:-1907842680,method:"auth.dropTempAuthKeys",params:[{name:"except_auth_keys",type:"Vector<long>"}],type:"Bool"},{id:-1896289088,method:"messages.setGameScore",params:[{name:"flags",type:"#"},{name:"edit_message",type:"flags.0?true"},{name:"force",type:"flags.1?true"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"user_id",type:"InputUser"},{name:"score",type:"int"}],type:"Updates"},{id:363700068,method:"messages.setInlineGameScore",params:[{name:"flags",type:"#"},{name:"edit_message",type:"flags.0?true"},{name:"force",type:"flags.1?true"},{name:"id",type:"InputBotInlineMessageID"},{name:"user_id",type:"InputUser"},{name:"score",type:"int"}],type:"Bool"},{id:-400399203,method:"messages.getGameHighScores",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"user_id",type:"InputUser"}],type:"messages.HighScores"},{id:258170395,method:"messages.getInlineGameHighScores",params:[{name:"id",type:"InputBotInlineMessageID"},{name:"user_id",type:"InputUser"}],type:"messages.HighScores"},{id:-468934396,method:"messages.getCommonChats",params:[{name:"user_id",type:"InputUser"},{name:"max_id",type:"long"},{name:"limit",type:"int"}],type:"messages.Chats"},{id:-333262899,method:"help.setBotUpdatesStatus",params:[{name:"pending_updates_count",type:"int"},{name:"message",type:"string"}],type:"Bool"},{id:-1919511901,method:"messages.getWebPage",params:[{name:"url",type:"string"},{name:"hash",type:"int"}],type:"messages.WebPage"},{id:-1489903017,method:"messages.toggleDialogPin",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"peer",type:"InputDialogPeer"}],type:"Bool"},{id:991616823,method:"messages.reorderPinnedDialogs",params:[{name:"flags",type:"#"},{name:"force",type:"flags.0?true"},{name:"folder_id",type:"int"},{name:"order",type:"Vector<InputDialogPeer>"}],type:"Bool"},{id:-692498958,method:"messages.getPinnedDialogs",params:[{name:"folder_id",type:"int"}],type:"messages.PeerDialogs"},{id:-1440257555,method:"bots.sendCustomRequest",params:[{name:"custom_method",type:"string"},{name:"params",type:"DataJSON"}],type:"DataJSON"},{id:-434028723,method:"bots.answerWebhookJSONQuery",params:[{name:"query_id",type:"long"},{name:"data",type:"DataJSON"}],type:"Bool"},{id:619086221,method:"upload.getWebFile",params:[{name:"location",type:"InputWebFileLocation"},{name:"offset",type:"int"},{name:"limit",type:"int"}],type:"upload.WebFile"},{id:924093883,method:"payments.getPaymentForm",params:[{name:"flags",type:"#"},{name:"invoice",type:"InputInvoice"},{name:"theme_params",type:"flags.0?DataJSON"}],type:"payments.PaymentForm"},{id:611897804,method:"payments.getPaymentReceipt",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"payments.PaymentReceipt"},{id:-1228345045,method:"payments.validateRequestedInfo",params:[{name:"flags",type:"#"},{name:"save",type:"flags.0?true"},{name:"invoice",type:"InputInvoice"},{name:"info",type:"PaymentRequestedInfo"}],type:"payments.ValidatedRequestedInfo"},{id:755192367,method:"payments.sendPaymentForm",params:[{name:"flags",type:"#"},{name:"form_id",type:"long"},{name:"invoice",type:"InputInvoice"},{name:"requested_info_id",type:"flags.0?string"},{name:"shipping_option_id",type:"flags.1?string"},{name:"credentials",type:"InputPaymentCredentials"},{name:"tip_amount",type:"flags.2?long"}],type:"payments.PaymentResult"},{id:1151208273,method:"account.getTmpPassword",params:[{name:"password",type:"InputCheckPasswordSRP"},{name:"period",type:"int"}],type:"account.TmpPassword"},{id:578650699,method:"payments.getSavedInfo",params:[],type:"payments.SavedInfo"},{id:-667062079,method:"payments.clearSavedInfo",params:[{name:"flags",type:"#"},{name:"credentials",type:"flags.0?true"},{name:"info",type:"flags.1?true"}],type:"Bool"},{id:-436833542,method:"messages.setBotShippingResults",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"error",type:"flags.0?string"},{name:"shipping_options",type:"flags.1?Vector<ShippingOption>"}],type:"Bool"},{id:163765653,method:"messages.setBotPrecheckoutResults",params:[{name:"flags",type:"#"},{name:"success",type:"flags.1?true"},{name:"query_id",type:"long"},{name:"error",type:"flags.0?string"}],type:"Bool"},{id:-1876841625,method:"stickers.createStickerSet",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"emojis",type:"flags.5?true"},{name:"text_color",type:"flags.6?true"},{name:"user_id",type:"InputUser"},{name:"title",type:"string"},{name:"short_name",type:"string"},{name:"thumb",type:"flags.2?InputDocument"},{name:"stickers",type:"Vector<InputStickerSetItem>"},{name:"software",type:"flags.3?string"}],type:"messages.StickerSet"},{id:-143257775,method:"stickers.removeStickerFromSet",params:[{name:"sticker",type:"InputDocument"}],type:"messages.StickerSet"},{id:-4795190,method:"stickers.changeStickerPosition",params:[{name:"sticker",type:"InputDocument"},{name:"position",type:"int"}],type:"messages.StickerSet"},{id:-2041315650,method:"stickers.addStickerToSet",params:[{name:"stickerset",type:"InputStickerSet"},{name:"sticker",type:"InputStickerSetItem"}],type:"messages.StickerSet"},{id:345405816,method:"messages.uploadMedia",params:[{name:"flags",type:"#"},{name:"business_connection_id",type:"flags.0?string"},{name:"peer",type:"InputPeer"},{name:"media",type:"InputMedia"}],type:"MessageMedia"},{id:1430593449,method:"phone.getCallConfig",params:[],type:"DataJSON"},{id:1124046573,method:"phone.requestCall",params:[{name:"flags",type:"#"},{name:"video",type:"flags.0?true"},{name:"user_id",type:"InputUser"},{name:"random_id",type:"int"},{name:"g_a_hash",type:"bytes"},{name:"protocol",type:"PhoneCallProtocol"}],type:"phone.PhoneCall"},{id:1003664544,method:"phone.acceptCall",params:[{name:"peer",type:"InputPhoneCall"},{name:"g_b",type:"bytes"},{name:"protocol",type:"PhoneCallProtocol"}],type:"phone.PhoneCall"},{id:788404002,method:"phone.confirmCall",params:[{name:"peer",type:"InputPhoneCall"},{name:"g_a",type:"bytes"},{name:"key_fingerprint",type:"long"},{name:"protocol",type:"PhoneCallProtocol"}],type:"phone.PhoneCall"},{id:399855457,method:"phone.receivedCall",params:[{name:"peer",type:"InputPhoneCall"}],type:"Bool"},{id:-1295269440,method:"phone.discardCall",params:[{name:"flags",type:"#"},{name:"video",type:"flags.0?true"},{name:"peer",type:"InputPhoneCall"},{name:"duration",type:"int"},{name:"reason",type:"PhoneCallDiscardReason"},{name:"connection_id",type:"long"}],type:"Updates"},{id:1508562471,method:"phone.setCallRating",params:[{name:"flags",type:"#"},{name:"user_initiative",type:"flags.0?true"},{name:"peer",type:"InputPhoneCall"},{name:"rating",type:"int"},{name:"comment",type:"string"}],type:"Updates"},{id:662363518,method:"phone.saveCallDebug",params:[{name:"peer",type:"InputPhoneCall"},{name:"debug",type:"DataJSON"}],type:"Bool"},{id:962554330,method:"upload.getCdnFile",params:[{name:"file_token",type:"bytes"},{name:"offset",type:"long"},{name:"limit",type:"int"}],type:"upload.CdnFile"},{id:-1691921240,method:"upload.reuploadCdnFile",params:[{name:"file_token",type:"bytes"},{name:"request_token",type:"bytes"}],type:"Vector<FileHash>"},{id:1375900482,method:"help.getCdnConfig",params:[],type:"CdnConfig"},{id:-219008246,method:"langpack.getLangPack",params:[{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"}],type:"LangPackDifference"},{id:-269862909,method:"langpack.getStrings",params:[{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"},{name:"keys",type:"Vector<string>"}],type:"Vector<LangPackString>"},{id:-845657435,method:"langpack.getDifference",params:[{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"},{name:"from_version",type:"int"}],type:"LangPackDifference"},{id:1120311183,method:"langpack.getLanguages",params:[{name:"lang_pack",type:"string"}],type:"Vector<LangPackLanguage>"},{id:-1763259007,method:"channels.editBanned",params:[{name:"channel",type:"InputChannel"},{name:"participant",type:"InputPeer"},{name:"banned_rights",type:"ChatBannedRights"}],type:"Updates"},{id:870184064,method:"channels.getAdminLog",params:[{name:"flags",type:"#"},{name:"channel",type:"InputChannel"},{name:"q",type:"string"},{name:"events_filter",type:"flags.0?ChannelAdminLogEventsFilter"},{name:"admins",type:"flags.1?Vector<InputUser>"},{name:"max_id",type:"long"},{name:"min_id",type:"long"},{name:"limit",type:"int"}],type:"channels.AdminLogResults"},{id:-1847836879,method:"upload.getCdnFileHashes",params:[{name:"file_token",type:"bytes"},{name:"offset",type:"long"}],type:"Vector<FileHash>"},{id:-1589618665,method:"messages.sendScreenshotNotification",params:[{name:"peer",type:"InputPeer"},{name:"reply_to",type:"InputReplyTo"},{name:"random_id",type:"long"}],type:"Updates"},{id:-359881479,method:"channels.setStickers",params:[{name:"channel",type:"InputChannel"},{name:"stickerset",type:"InputStickerSet"}],type:"Bool"},{id:82946729,method:"messages.getFavedStickers",params:[{name:"hash",type:"long"}],type:"messages.FavedStickers"},{id:-1174420133,method:"messages.faveSticker",params:[{name:"id",type:"InputDocument"},{name:"unfave",type:"Bool"}],type:"Bool"},{id:-357180360,method:"channels.readMessageContents",params:[{name:"channel",type:"InputChannel"},{name:"id",type:"Vector<int>"}],type:"Bool"},{id:-2020263951,method:"contacts.resetSaved",params:[],type:"Bool"},{id:-251140208,method:"messages.getUnreadMentions",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"},{name:"offset_id",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"}],type:"messages.Messages"},{id:-1683319225,method:"channels.deleteHistory",params:[{name:"flags",type:"#"},{name:"for_everyone",type:"flags.0?true"},{name:"channel",type:"InputChannel"},{name:"max_id",type:"int"}],type:"Updates"},{id:1036054804,method:"help.getRecentMeUrls",params:[{name:"referer",type:"string"}],type:"help.RecentMeUrls"},{id:-356796084,method:"channels.togglePreHistoryHidden",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:921026381,method:"messages.readMentions",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"}],type:"messages.AffectedHistory"},{id:1881817312,method:"messages.getRecentLocations",params:[{name:"peer",type:"InputPeer"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:211175177,method:"messages.sendMultiMedia",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"clear_draft",type:"flags.7?true"},{name:"noforwards",type:"flags.14?true"},{name:"update_stickersets_order",type:"flags.15?true"},{name:"invert_media",type:"flags.16?true"},{name:"peer",type:"InputPeer"},{name:"reply_to",type:"flags.0?InputReplyTo"},{name:"multi_media",type:"Vector<InputSingleMedia>"},{name:"schedule_date",type:"flags.10?int"},{name:"send_as",type:"flags.13?InputPeer"},{name:"quick_reply_shortcut",type:"flags.17?InputQuickReplyShortcut"}],type:"Updates"},{id:1347929239,method:"messages.uploadEncryptedFile",params:[{name:"peer",type:"InputEncryptedChat"},{name:"file",type:"InputEncryptedFile"}],type:"EncryptedFile"},{id:405695855,method:"account.getWebAuthorizations",params:[],type:"account.WebAuthorizations"},{id:755087855,method:"account.resetWebAuthorization",params:[{name:"hash",type:"long"}],type:"Bool"},{id:1747789204,method:"account.resetWebAuthorizations",params:[],type:"Bool"},{id:896555914,method:"messages.searchStickerSets",params:[{name:"flags",type:"#"},{name:"exclude_featured",type:"flags.0?true"},{name:"q",type:"string"},{name:"hash",type:"long"}],type:"messages.FoundStickerSets"},{id:-1856595926,method:"upload.getFileHashes",params:[{name:"location",type:"InputFileLocation"},{name:"offset",type:"long"}],type:"Vector<FileHash>"},{id:749019089,method:"help.getTermsOfServiceUpdate",params:[],type:"help.TermsOfServiceUpdate"},{id:-294455398,method:"help.acceptTermsOfService",params:[{name:"id",type:"DataJSON"}],type:"Bool"},{id:-1299661699,method:"account.getAllSecureValues",params:[],type:"Vector<SecureValue>"},{id:1936088002,method:"account.getSecureValue",params:[{name:"types",type:"Vector<SecureValueType>"}],type:"Vector<SecureValue>"},{id:-1986010339,method:"account.saveSecureValue",params:[{name:"value",type:"InputSecureValue"},{name:"secure_secret_id",type:"long"}],type:"SecureValue"},{id:-1199522741,method:"account.deleteSecureValue",params:[{name:"types",type:"Vector<SecureValueType>"}],type:"Bool"},{id:-1865902923,method:"users.setSecureValueErrors",params:[{name:"id",type:"InputUser"},{name:"errors",type:"Vector<SecureValueError>"}],type:"Bool"},{id:-1456907910,method:"account.getAuthorizationForm",params:[{name:"bot_id",type:"long"},{name:"scope",type:"string"},{name:"public_key",type:"string"}],type:"account.AuthorizationForm"},{id:-202552205,method:"account.acceptAuthorization",params:[{name:"bot_id",type:"long"},{name:"scope",type:"string"},{name:"public_key",type:"string"},{name:"value_hashes",type:"Vector<SecureValueHash>"},{name:"credentials",type:"SecureCredentialsEncrypted"}],type:"Bool"},{id:-1516022023,method:"account.sendVerifyPhoneCode",params:[{name:"phone_number",type:"string"},{name:"settings",type:"CodeSettings"}],type:"auth.SentCode"},{id:1305716726,method:"account.verifyPhone",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"phone_code",type:"string"}],type:"Bool"},{id:-1730136133,method:"account.sendVerifyEmailCode",params:[{name:"purpose",type:"EmailVerifyPurpose"},{name:"email",type:"string"}],type:"account.SentEmailCode"},{id:53322959,method:"account.verifyEmail",params:[{name:"purpose",type:"EmailVerifyPurpose"},{name:"verification",type:"EmailVerification"}],type:"account.EmailVerified"},{id:1072547679,method:"help.getDeepLinkInfo",params:[{name:"path",type:"string"}],type:"help.DeepLinkInfo"},{id:-2098076769,method:"contacts.getSaved",params:[],type:"Vector<SavedContact>"},{id:-2092831552,method:"channels.getLeftChannels",params:[{name:"offset",type:"int"}],type:"messages.Chats"},{id:-1896617296,method:"account.initTakeoutSession",params:[{name:"flags",type:"#"},{name:"contacts",type:"flags.0?true"},{name:"message_users",type:"flags.1?true"},{name:"message_chats",type:"flags.2?true"},{name:"message_megagroups",type:"flags.3?true"},{name:"message_channels",type:"flags.4?true"},{name:"files",type:"flags.5?true"},{name:"file_max_size",type:"flags.5?long"}],type:"account.Takeout"},{id:489050862,method:"account.finishTakeoutSession",params:[{name:"flags",type:"#"},{name:"success",type:"flags.0?true"}],type:"Bool"},{id:486505992,method:"messages.getSplitRanges",params:[],type:"Vector<MessageRange>"},{id:911373810,method:"invokeWithMessagesRange",params:[{name:"range",type:"MessageRange"},{name:"query",type:"!X"}],type:"X"},{id:-1398145746,method:"invokeWithTakeout",params:[{name:"takeout_id",type:"long"},{name:"query",type:"!X"}],type:"X"},{id:-1031349873,method:"messages.markDialogUnread",params:[{name:"flags",type:"#"},{name:"unread",type:"flags.0?true"},{name:"peer",type:"InputDialogPeer"}],type:"Bool"},{id:585256482,method:"messages.getDialogUnreadMarks",params:[],type:"Vector<DialogPeer>"},{id:-2062238246,method:"contacts.toggleTopPeers",params:[{name:"enabled",type:"Bool"}],type:"Bool"},{id:2119757468,method:"messages.clearAllDrafts",params:[],type:"Bool"},{id:1642330196,method:"help.getAppConfig",params:[{name:"hash",type:"int"}],type:"help.AppConfig"},{id:1862465352,method:"help.saveAppLog",params:[{name:"events",type:"Vector<InputAppEvent>"}],type:"Bool"},{id:-966677240,method:"help.getPassportConfig",params:[{name:"hash",type:"int"}],type:"help.PassportConfig"},{id:1784243458,method:"langpack.getLanguage",params:[{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"}],type:"LangPackLanguage"},{id:-760547348,method:"messages.updatePinnedMessage",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.0?true"},{name:"unpin",type:"flags.1?true"},{name:"pm_oneside",type:"flags.2?true"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"}],type:"Updates"},{id:-1881204448,method:"account.confirmPasswordEmail",params:[{name:"code",type:"string"}],type:"Bool"},{id:2055154197,method:"account.resendPasswordEmail",params:[],type:"Bool"},{id:-1043606090,method:"account.cancelPasswordEmail",params:[],type:"Bool"},{id:-748624084,method:"help.getSupportName",params:[],type:"help.SupportName"},{id:59377875,method:"help.getUserInfo",params:[{name:"user_id",type:"InputUser"}],type:"help.UserInfo"},{id:1723407216,method:"help.editUserInfo",params:[{name:"user_id",type:"InputUser"},{name:"message",type:"string"},{name:"entities",type:"Vector<MessageEntity>"}],type:"help.UserInfo"},{id:-1626880216,method:"account.getContactSignUpNotification",params:[],type:"Bool"},{id:-806076575,method:"account.setContactSignUpNotification",params:[{name:"silent",type:"Bool"}],type:"Bool"},{id:1398240377,method:"account.getNotifyExceptions",params:[{name:"flags",type:"#"},{name:"compare_sound",type:"flags.1?true"},{name:"compare_stories",type:"flags.2?true"},{name:"peer",type:"flags.0?InputNotifyPeer"}],type:"Updates"},{id:283795844,method:"messages.sendVote",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"options",type:"Vector<bytes>"}],type:"Updates"},{id:1941660731,method:"messages.getPollResults",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"Updates"},{id:1848369232,method:"messages.getOnlines",params:[{name:"peer",type:"InputPeer"}],type:"ChatOnlines"},{id:-554301545,method:"messages.editChatAbout",params:[{name:"peer",type:"InputPeer"},{name:"about",type:"string"}],type:"Bool"},{id:-1517917375,method:"messages.editChatDefaultBannedRights",params:[{name:"peer",type:"InputPeer"},{name:"banned_rights",type:"ChatBannedRights"}],type:"Updates"},{id:-57811990,method:"account.getWallPaper",params:[{name:"wallpaper",type:"InputWallPaper"}],type:"WallPaper"},{id:-476410109,method:"account.uploadWallPaper",params:[{name:"flags",type:"#"},{name:"for_chat",type:"flags.0?true"},{name:"file",type:"InputFile"},{name:"mime_type",type:"string"},{name:"settings",type:"WallPaperSettings"}],type:"WallPaper"},{id:1817860919,method:"account.saveWallPaper",params:[{name:"wallpaper",type:"InputWallPaper"},{name:"unsave",type:"Bool"},{name:"settings",type:"WallPaperSettings"}],type:"Bool"},{id:-18000023,method:"account.installWallPaper",params:[{name:"wallpaper",type:"InputWallPaper"},{name:"settings",type:"WallPaperSettings"}],type:"Bool"},{id:-1153722364,method:"account.resetWallPapers",params:[],type:"Bool"},{id:1457130303,method:"account.getAutoDownloadSettings",params:[],type:"account.AutoDownloadSettings"},{id:1995661875,method:"account.saveAutoDownloadSettings",params:[{name:"flags",type:"#"},{name:"low",type:"flags.0?true"},{name:"high",type:"flags.1?true"},{name:"settings",type:"AutoDownloadSettings"}],type:"Bool"},{id:899735650,method:"messages.getEmojiKeywords",params:[{name:"lang_code",type:"string"}],type:"EmojiKeywordsDifference"},{id:352892591,method:"messages.getEmojiKeywordsDifference",params:[{name:"lang_code",type:"string"},{name:"from_version",type:"int"}],type:"EmojiKeywordsDifference"},{id:1318675378,method:"messages.getEmojiKeywordsLanguages",params:[{name:"lang_codes",type:"Vector<string>"}],type:"Vector<EmojiLanguage>"},{id:-709817306,method:"messages.getEmojiURL",params:[{name:"lang_code",type:"string"}],type:"EmojiURL"},{id:1749536939,method:"folders.editPeerFolders",params:[{name:"folder_peers",type:"Vector<InputFolderPeer>"}],type:"Updates"},{id:465367808,method:"messages.getSearchCounters",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"saved_peer_id",type:"flags.2?InputPeer"},{name:"top_msg_id",type:"flags.0?int"},{name:"filters",type:"Vector<MessagesFilter>"}],type:"Vector<messages.SearchCounter>"},{id:-170208392,method:"channels.getGroupsForDiscussion",params:[],type:"messages.Chats"},{id:1079520178,method:"channels.setDiscussionGroup",params:[{name:"broadcast",type:"InputChannel"},{name:"group",type:"InputChannel"}],type:"Bool"},{id:428848198,method:"messages.requestUrlAuth",params:[{name:"flags",type:"#"},{name:"peer",type:"flags.1?InputPeer"},{name:"msg_id",type:"flags.1?int"},{name:"button_id",type:"flags.1?int"},{name:"url",type:"flags.2?string"}],type:"UrlAuthResult"},{id:-1322487515,method:"messages.acceptUrlAuth",params:[{name:"flags",type:"#"},{name:"write_allowed",type:"flags.0?true"},{name:"peer",type:"flags.1?InputPeer"},{name:"msg_id",type:"flags.1?int"},{name:"button_id",type:"flags.1?int"},{name:"url",type:"flags.2?string"}],type:"UrlAuthResult"},{id:1336717624,method:"messages.hidePeerSettingsBar",params:[{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-386636848,method:"contacts.addContact",params:[{name:"flags",type:"#"},{name:"add_phone_privacy_exception",type:"flags.0?true"},{name:"id",type:"InputUser"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"phone",type:"string"}],type:"Updates"},{id:-130964977,method:"contacts.acceptContact",params:[{name:"id",type:"InputUser"}],type:"Updates"},{id:-1892102881,method:"channels.editCreator",params:[{name:"channel",type:"InputChannel"},{name:"user_id",type:"InputUser"},{name:"password",type:"InputCheckPasswordSRP"}],type:"Updates"},{id:-750207932,method:"contacts.getLocated",params:[{name:"flags",type:"#"},{name:"background",type:"flags.1?true"},{name:"geo_point",type:"InputGeoPoint"},{name:"self_expires",type:"flags.0?int"}],type:"Updates"},{id:1491484525,method:"channels.editLocation",params:[{name:"channel",type:"InputChannel"},{name:"geo_point",type:"InputGeoPoint"},{name:"address",type:"string"}],type:"Bool"},{id:-304832784,method:"channels.toggleSlowMode",params:[{name:"channel",type:"InputChannel"},{name:"seconds",type:"int"}],type:"Updates"},{id:-183077365,method:"messages.getScheduledHistory",params:[{name:"peer",type:"InputPeer"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:-1111817116,method:"messages.getScheduledMessages",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"messages.Messages"},{id:-1120369398,method:"messages.sendScheduledMessages",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Updates"},{id:1504586518,method:"messages.deleteScheduledMessages",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Updates"},{id:473805619,method:"account.uploadTheme",params:[{name:"flags",type:"#"},{name:"file",type:"InputFile"},{name:"thumb",type:"flags.0?InputFile"},{name:"file_name",type:"string"},{name:"mime_type",type:"string"}],type:"Document"},{id:1697530880,method:"account.createTheme",params:[{name:"flags",type:"#"},{name:"slug",type:"string"},{name:"title",type:"string"},{name:"document",type:"flags.2?InputDocument"},{name:"settings",type:"flags.3?Vector<InputThemeSettings>"}],type:"Theme"},{id:737414348,method:"account.updateTheme",params:[{name:"flags",type:"#"},{name:"format",type:"string"},{name:"theme",type:"InputTheme"},{name:"slug",type:"flags.0?string"},{name:"title",type:"flags.1?string"},{name:"document",type:"flags.2?InputDocument"},{name:"settings",type:"flags.3?Vector<InputThemeSettings>"}],type:"Theme"},{id:-229175188,method:"account.saveTheme",params:[{name:"theme",type:"InputTheme"},{name:"unsave",type:"Bool"}],type:"Bool"},{id:-953697477,method:"account.installTheme",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"theme",type:"flags.1?InputTheme"},{name:"format",type:"flags.2?string"},{name:"base_theme",type:"flags.3?BaseTheme"}],type:"Bool"},{id:978872812,method:"account.getTheme",params:[{name:"format",type:"string"},{name:"theme",type:"InputTheme"}],type:"Theme"},{id:1913054296,method:"account.getThemes",params:[{name:"format",type:"string"},{name:"hash",type:"long"}],type:"account.Themes"},{id:-1210022402,method:"auth.exportLoginToken",params:[{name:"api_id",type:"int"},{name:"api_hash",type:"string"},{name:"except_ids",type:"Vector<long>"}],type:"auth.LoginToken"},{id:-1783866140,method:"auth.importLoginToken",params:[{name:"token",type:"bytes"}],type:"auth.LoginToken"},{id:-392909491,method:"auth.acceptLoginToken",params:[{name:"token",type:"bytes"}],type:"Authorization"},{id:-1250643605,method:"account.setContentSettings",params:[{name:"flags",type:"#"},{name:"sensitive_enabled",type:"flags.0?true"}],type:"Bool"},{id:-1952756306,method:"account.getContentSettings",params:[],type:"account.ContentSettings"},{id:300429806,method:"channels.getInactiveChannels",params:[],type:"messages.InactiveChats"},{id:1705865692,method:"account.getMultiWallPapers",params:[{name:"wallpapers",type:"Vector<InputWallPaper>"}],type:"Vector<WallPaper>"},{id:-1200736242,method:"messages.getPollVotes",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"option",type:"flags.0?bytes"},{name:"offset",type:"flags.1?string"},{name:"limit",type:"int"}],type:"messages.VotesList"},{id:-1257951254,method:"messages.toggleStickerSets",params:[{name:"flags",type:"#"},{name:"uninstall",type:"flags.0?true"},{name:"archive",type:"flags.1?true"},{name:"unarchive",type:"flags.2?true"},{name:"stickersets",type:"Vector<InputStickerSet>"}],type:"Bool"},{id:779736953,method:"payments.getBankCardData",params:[{name:"number",type:"string"}],type:"payments.BankCardData"},{id:-271283063,method:"messages.getDialogFilters",params:[],type:"messages.DialogFilters"},{id:-1566780372,method:"messages.getSuggestedDialogFilters",params:[],type:"Vector<DialogFilterSuggested>"},{id:450142282,method:"messages.updateDialogFilter",params:[{name:"flags",type:"#"},{name:"id",type:"int"},{name:"filter",type:"flags.0?DialogFilter"}],type:"Bool"},{id:-983318044,method:"messages.updateDialogFiltersOrder",params:[{name:"order",type:"Vector<int>"}],type:"Bool"},{id:-1421720550,method:"stats.getBroadcastStats",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"channel",type:"InputChannel"}],type:"stats.BroadcastStats"},{id:1646092192,method:"stats.loadAsyncGraph",params:[{name:"flags",type:"#"},{name:"token",type:"string"},{name:"x",type:"flags.0?long"}],type:"StatsGraph"},{id:-1486204014,method:"stickers.setStickerSetThumb",params:[{name:"flags",type:"#"},{name:"stickerset",type:"InputStickerSet"},{name:"thumb",type:"flags.0?InputDocument"},{name:"thumb_document_id",type:"flags.1?long"}],type:"messages.StickerSet"},{id:85399130,method:"bots.setBotCommands",params:[{name:"scope",type:"BotCommandScope"},{name:"lang_code",type:"string"},{name:"commands",type:"Vector<BotCommand>"}],type:"Bool"},{id:2127598753,method:"messages.getOldFeaturedStickers",params:[{name:"offset",type:"int"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.FeaturedStickers"},{id:-1063816159,method:"help.getPromoData",params:[],type:"help.PromoData"},{id:505748629,method:"help.hidePromoData",params:[{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-8744061,method:"phone.sendSignalingData",params:[{name:"peer",type:"InputPhoneCall"},{name:"data",type:"bytes"}],type:"Bool"},{id:-589330937,method:"stats.getMegagroupStats",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"channel",type:"InputChannel"}],type:"stats.MegagroupStats"},{id:-349483786,method:"account.getGlobalPrivacySettings",params:[],type:"GlobalPrivacySettings"},{id:517647042,method:"account.setGlobalPrivacySettings",params:[{name:"settings",type:"GlobalPrivacySettings"}],type:"GlobalPrivacySettings"},{id:-183649631,method:"help.dismissSuggestion",params:[{name:"peer",type:"InputPeer"},{name:"suggestion",type:"string"}],type:"Bool"},{id:1935116200,method:"help.getCountriesList",params:[{name:"lang_code",type:"string"},{name:"hash",type:"int"}],type:"help.CountriesList"},{id:584962828,method:"messages.getReplies",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"offset_id",type:"int"},{name:"offset_date",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:1147761405,method:"messages.getDiscussionMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"messages.DiscussionMessage"},{id:-147740172,method:"messages.readDiscussion",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"read_max_id",type:"int"}],type:"Bool"},{id:698914348,method:"contacts.blockFromReplies",params:[{name:"flags",type:"#"},{name:"delete_message",type:"flags.0?true"},{name:"delete_history",type:"flags.1?true"},{name:"report_spam",type:"flags.2?true"},{name:"msg_id",type:"int"}],type:"Updates"},{id:1595212100,method:"stats.getMessagePublicForwards",params:[{name:"channel",type:"InputChannel"},{name:"msg_id",type:"int"},{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"stats.PublicForwards"},{id:-1226791947,method:"stats.getMessageStats",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"channel",type:"InputChannel"},{name:"msg_id",type:"int"}],type:"stats.MessageStats"},{id:-299714136,method:"messages.unpinAllMessages",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"}],type:"messages.AffectedHistory"},{id:1221445336,method:"phone.createGroupCall",params:[{name:"flags",type:"#"},{name:"rtmp_stream",type:"flags.2?true"},{name:"peer",type:"InputPeer"},{name:"random_id",type:"int"},{name:"title",type:"flags.0?string"},{name:"schedule_date",type:"flags.1?int"}],type:"Updates"},{id:-1322057861,method:"phone.joinGroupCall",params:[{name:"flags",type:"#"},{name:"muted",type:"flags.0?true"},{name:"video_stopped",type:"flags.2?true"},{name:"call",type:"InputGroupCall"},{name:"join_as",type:"InputPeer"},{name:"invite_hash",type:"flags.1?string"},{name:"params",type:"DataJSON"}],type:"Updates"},{id:1342404601,method:"phone.leaveGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"source",type:"int"}],type:"Updates"},{id:2067345760,method:"phone.inviteToGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"users",type:"Vector<InputUser>"}],type:"Updates"},{id:2054648117,method:"phone.discardGroupCall",params:[{name:"call",type:"InputGroupCall"}],type:"Updates"},{id:1958458429,method:"phone.toggleGroupCallSettings",params:[{name:"flags",type:"#"},{name:"reset_invite_hash",type:"flags.1?true"},{name:"call",type:"InputGroupCall"},{name:"join_muted",type:"flags.0?Bool"}],type:"Updates"},{id:68699611,method:"phone.getGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"limit",type:"int"}],type:"phone.GroupCall"},{id:-984033109,method:"phone.getGroupParticipants",params:[{name:"call",type:"InputGroupCall"},{name:"ids",type:"Vector<InputPeer>"},{name:"sources",type:"Vector<int>"},{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"phone.GroupParticipants"},{id:-1248003721,method:"phone.checkGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"sources",type:"Vector<int>"}],type:"Vector<int>"},{id:1540419152,method:"messages.deleteChat",params:[{name:"chat_id",type:"long"}],type:"Bool"},{id:-104078327,method:"messages.deletePhoneCallHistory",params:[{name:"flags",type:"#"},{name:"revoke",type:"flags.0?true"}],type:"messages.AffectedFoundMessages"},{id:1140726259,method:"messages.checkHistoryImport",params:[{name:"import_head",type:"string"}],type:"messages.HistoryImportParsed"},{id:873008187,method:"messages.initHistoryImport",params:[{name:"peer",type:"InputPeer"},{name:"file",type:"InputFile"},{name:"media_count",type:"int"}],type:"messages.HistoryImport"},{id:713433234,method:"messages.uploadImportedMedia",params:[{name:"peer",type:"InputPeer"},{name:"import_id",type:"long"},{name:"file_name",type:"string"},{name:"media",type:"InputMedia"}],type:"MessageMedia"},{id:-1271008444,method:"messages.startHistoryImport",params:[{name:"peer",type:"InputPeer"},{name:"import_id",type:"long"}],type:"Bool"},{id:-1565154314,method:"messages.getExportedChatInvites",params:[{name:"flags",type:"#"},{name:"revoked",type:"flags.3?true"},{name:"peer",type:"InputPeer"},{name:"admin_id",type:"InputUser"},{name:"offset_date",type:"flags.2?int"},{name:"offset_link",type:"flags.2?string"},{name:"limit",type:"int"}],type:"messages.ExportedChatInvites"},{id:1937010524,method:"messages.getExportedChatInvite",params:[{name:"peer",type:"InputPeer"},{name:"link",type:"string"}],type:"messages.ExportedChatInvite"},{id:-1110823051,method:"messages.editExportedChatInvite",params:[{name:"flags",type:"#"},{name:"revoked",type:"flags.2?true"},{name:"peer",type:"InputPeer"},{name:"link",type:"string"},{name:"expire_date",type:"flags.0?int"},{name:"usage_limit",type:"flags.1?int"},{name:"request_needed",type:"flags.3?Bool"},{name:"title",type:"flags.4?string"}],type:"messages.ExportedChatInvite"},{id:1452833749,method:"messages.deleteRevokedExportedChatInvites",params:[{name:"peer",type:"InputPeer"},{name:"admin_id",type:"InputUser"}],type:"Bool"},{id:-731601877,method:"messages.deleteExportedChatInvite",params:[{name:"peer",type:"InputPeer"},{name:"link",type:"string"}],type:"Bool"},{id:958457583,method:"messages.getAdminsWithInvites",params:[{name:"peer",type:"InputPeer"}],type:"messages.ChatAdminsWithInvites"},{id:-553329330,method:"messages.getChatInviteImporters",params:[{name:"flags",type:"#"},{name:"requested",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"link",type:"flags.1?string"},{name:"q",type:"flags.2?string"},{name:"offset_date",type:"int"},{name:"offset_user",type:"InputUser"},{name:"limit",type:"int"}],type:"messages.ChatInviteImporters"},{id:-1207017500,method:"messages.setHistoryTTL",params:[{name:"peer",type:"InputPeer"},{name:"period",type:"int"}],type:"Updates"},{id:-91437323,method:"account.reportProfilePhoto",params:[{name:"peer",type:"InputPeer"},{name:"photo_id",type:"InputPhoto"},{name:"reason",type:"ReportReason"},{name:"message",type:"string"}],type:"Bool"},{id:187239529,method:"channels.convertToGigagroup",params:[{name:"channel",type:"InputChannel"}],type:"Updates"},{id:1573261059,method:"messages.checkHistoryImportPeer",params:[{name:"peer",type:"InputPeer"}],type:"messages.CheckedHistoryImportPeer"},{id:-248985848,method:"phone.toggleGroupCallRecord",params:[{name:"flags",type:"#"},{name:"start",type:"flags.0?true"},{name:"video",type:"flags.2?true"},{name:"call",type:"InputGroupCall"},{name:"title",type:"flags.1?string"},{name:"video_portrait",type:"flags.2?Bool"}],type:"Updates"},{id:-1524155713,method:"phone.editGroupCallParticipant",params:[{name:"flags",type:"#"},{name:"call",type:"InputGroupCall"},{name:"participant",type:"InputPeer"},{name:"muted",type:"flags.0?Bool"},{name:"volume",type:"flags.1?int"},{name:"raise_hand",type:"flags.2?Bool"},{name:"video_stopped",type:"flags.3?Bool"},{name:"video_paused",type:"flags.4?Bool"},{name:"presentation_paused",type:"flags.5?Bool"}],type:"Updates"},{id:480685066,method:"phone.editGroupCallTitle",params:[{name:"call",type:"InputGroupCall"},{name:"title",type:"string"}],type:"Updates"},{id:-277077702,method:"phone.getGroupCallJoinAs",params:[{name:"peer",type:"InputPeer"}],type:"phone.JoinAsPeers"},{id:-425040769,method:"phone.exportGroupCallInvite",params:[{name:"flags",type:"#"},{name:"can_self_unmute",type:"flags.0?true"},{name:"call",type:"InputGroupCall"}],type:"phone.ExportedGroupCallInvite"},{id:563885286,method:"phone.toggleGroupCallStartSubscription",params:[{name:"call",type:"InputGroupCall"},{name:"subscribed",type:"Bool"}],type:"Updates"},{id:1451287362,method:"phone.startScheduledGroupCall",params:[{name:"call",type:"InputGroupCall"}],type:"Updates"},{id:1465786252,method:"phone.saveDefaultGroupCallJoinAs",params:[{name:"peer",type:"InputPeer"},{name:"join_as",type:"InputPeer"}],type:"Bool"},{id:-873829436,method:"phone.joinGroupCallPresentation",params:[{name:"call",type:"InputGroupCall"},{name:"params",type:"DataJSON"}],type:"Updates"},{id:475058500,method:"phone.leaveGroupCallPresentation",params:[{name:"call",type:"InputGroupCall"}],type:"Updates"},{id:676017721,method:"stickers.checkShortName",params:[{name:"short_name",type:"string"}],type:"Bool"},{id:1303364867,method:"stickers.suggestShortName",params:[{name:"title",type:"string"}],type:"stickers.SuggestedShortName"},{id:1032708345,method:"bots.resetBotCommands",params:[{name:"scope",type:"BotCommandScope"},{name:"lang_code",type:"string"}],type:"Bool"},{id:-481554986,method:"bots.getBotCommands",params:[{name:"scope",type:"BotCommandScope"},{name:"lang_code",type:"string"}],type:"Vector<BotCommand>"},{id:-1828139493,method:"account.resetPassword",params:[],type:"account.ResetPasswordResult"},{id:1284770294,method:"account.declinePasswordReset",params:[],type:"Bool"},{id:221691769,method:"auth.checkRecoveryPassword",params:[{name:"code",type:"string"}],type:"Bool"},{id:-700916087,method:"account.getChatThemes",params:[{name:"hash",type:"long"}],type:"account.Themes"},{id:-432283329,method:"messages.setChatTheme",params:[{name:"peer",type:"InputPeer"},{name:"emoticon",type:"string"}],type:"Updates"},{id:-1095836780,method:"channels.viewSponsoredMessage",params:[{name:"channel",type:"InputChannel"},{name:"random_id",type:"bytes"}],type:"Bool"},{id:-333377601,method:"channels.getSponsoredMessages",params:[{name:"channel",type:"InputChannel"}],type:"messages.SponsoredMessages"},{id:834782287,method:"messages.getMessageReadParticipants",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"Vector<ReadParticipantDate>"},{id:1789130429,method:"messages.getSearchResultsCalendar",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"saved_peer_id",type:"flags.2?InputPeer"},{name:"filter",type:"MessagesFilter"},{name:"offset_id",type:"int"},{name:"offset_date",type:"int"}],type:"messages.SearchResultsCalendar"},{id:-1669386480,method:"messages.getSearchResultsPositions",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"saved_peer_id",type:"flags.2?InputPeer"},{name:"filter",type:"MessagesFilter"},{name:"offset_id",type:"int"},{name:"limit",type:"int"}],type:"messages.SearchResultsPositions"},{id:2145904661,method:"messages.hideChatJoinRequest",params:[{name:"flags",type:"#"},{name:"approved",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"user_id",type:"InputUser"}],type:"Updates"},{id:-528091926,method:"messages.hideAllChatJoinRequests",params:[{name:"flags",type:"#"},{name:"approved",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"link",type:"flags.1?string"}],type:"Updates"},{id:-1323389022,method:"messages.toggleNoForwards",params:[{name:"peer",type:"InputPeer"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:-855777386,method:"messages.saveDefaultSendAs",params:[{name:"peer",type:"InputPeer"},{name:"send_as",type:"InputPeer"}],type:"Bool"},{id:231174382,method:"channels.getSendAs",params:[{name:"peer",type:"InputPeer"}],type:"channels.SendAsPeers"},{id:-1081501024,method:"account.setAuthorizationTTL",params:[{name:"authorization_ttl_days",type:"int"}],type:"Bool"},{id:1089766498,method:"account.changeAuthorizationSettings",params:[{name:"flags",type:"#"},{name:"confirmed",type:"flags.3?true"},{name:"hash",type:"long"},{name:"encrypted_requests_disabled",type:"flags.0?Bool"},{name:"call_requests_disabled",type:"flags.1?Bool"}],type:"Bool"},{id:913655003,method:"channels.deleteParticipantHistory",params:[{name:"channel",type:"InputChannel"},{name:"participant",type:"InputPeer"}],type:"messages.AffectedHistory"},{id:-754091820,method:"messages.sendReaction",params:[{name:"flags",type:"#"},{name:"big",type:"flags.1?true"},{name:"add_to_recent",type:"flags.2?true"},{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"reaction",type:"flags.0?Vector<Reaction>"}],type:"Updates"},{id:-1950707482,method:"messages.getMessagesReactions",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Updates"},{id:1176190792,method:"messages.getMessageReactionsList",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"reaction",type:"flags.0?Reaction"},{name:"offset",type:"flags.1?string"},{name:"limit",type:"int"}],type:"messages.MessageReactionsList"},{id:-21928079,method:"messages.setChatAvailableReactions",params:[{name:"peer",type:"InputPeer"},{name:"available_reactions",type:"ChatReactions"}],type:"Updates"},{id:417243308,method:"messages.getAvailableReactions",params:[{name:"hash",type:"int"}],type:"messages.AvailableReactions"},{id:1330094102,method:"messages.setDefaultReaction",params:[{name:"reaction",type:"Reaction"}],type:"Bool"},{id:1662529584,method:"messages.translateText",params:[{name:"flags",type:"#"},{name:"peer",type:"flags.0?InputPeer"},{name:"id",type:"flags.0?Vector<int>"},{name:"text",type:"flags.1?Vector<TextWithEntities>"},{name:"to_lang",type:"string"}],type:"messages.TranslatedText"},{id:841173339,method:"messages.getUnreadReactions",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"},{name:"offset_id",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"}],type:"messages.Messages"},{id:1420459918,method:"messages.readReactions",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"}],type:"messages.AffectedHistory"},{id:-1963375804,method:"contacts.resolvePhone",params:[{name:"phone",type:"string"}],type:"contacts.ResolvedPeer"},{id:447879488,method:"phone.getGroupCallStreamChannels",params:[{name:"call",type:"InputGroupCall"}],type:"phone.GroupCallStreamChannels"},{id:-558650433,method:"phone.getGroupCallStreamRtmpUrl",params:[{name:"peer",type:"InputPeer"},{name:"revoke",type:"Bool"}],type:"phone.GroupCallStreamRtmpUrl"},{id:276705696,method:"messages.searchSentMedia",params:[{name:"q",type:"string"},{name:"filter",type:"MessagesFilter"},{name:"limit",type:"int"}],type:"messages.Messages"},{id:385663691,method:"messages.getAttachMenuBots",params:[{name:"hash",type:"long"}],type:"AttachMenuBots"},{id:1998676370,method:"messages.getAttachMenuBot",params:[{name:"bot",type:"InputUser"}],type:"AttachMenuBotsBot"},{id:1777704297,method:"messages.toggleBotInAttachMenu",params:[{name:"flags",type:"#"},{name:"write_allowed",type:"flags.0?true"},{name:"bot",type:"InputUser"},{name:"enabled",type:"Bool"}],type:"Bool"},{id:647873217,method:"messages.requestWebView",params:[{name:"flags",type:"#"},{name:"from_bot_menu",type:"flags.4?true"},{name:"silent",type:"flags.5?true"},{name:"peer",type:"InputPeer"},{name:"bot",type:"InputUser"},{name:"url",type:"flags.1?string"},{name:"start_param",type:"flags.3?string"},{name:"theme_params",type:"flags.2?DataJSON"},{name:"platform",type:"string"},{name:"reply_to",type:"flags.0?InputReplyTo"},{name:"send_as",type:"flags.13?InputPeer"}],type:"WebViewResult"},{id:-1328014717,method:"messages.prolongWebView",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"peer",type:"InputPeer"},{name:"bot",type:"InputUser"},{name:"query_id",type:"long"},{name:"reply_to",type:"flags.0?InputReplyTo"},{name:"send_as",type:"flags.13?InputPeer"}],type:"Bool"},{id:440815626,method:"messages.requestSimpleWebView",params:[{name:"flags",type:"#"},{name:"from_switch_webview",type:"flags.1?true"},{name:"from_side_menu",type:"flags.2?true"},{name:"bot",type:"InputUser"},{name:"url",type:"flags.3?string"},{name:"start_param",type:"flags.4?string"},{name:"theme_params",type:"flags.0?DataJSON"},{name:"platform",type:"string"}],type:"SimpleWebViewResult"},{id:172168437,method:"messages.sendWebViewResultMessage",params:[{name:"bot_query_id",type:"string"},{name:"result",type:"InputBotInlineResult"}],type:"WebViewMessageSent"},{id:-603831608,method:"messages.sendWebViewData",params:[{name:"bot",type:"InputUser"},{name:"random_id",type:"long"},{name:"button_text",type:"string"},{name:"data",type:"string"}],type:"Updates"},{id:1157944655,method:"bots.setBotMenuButton",params:[{name:"user_id",type:"InputUser"},{name:"button",type:"BotMenuButton"}],type:"Bool"},{id:-1671369944,method:"bots.getBotMenuButton",params:[{name:"user_id",type:"InputUser"}],type:"BotMenuButton"},{id:-510647672,method:"account.getSavedRingtones",params:[{name:"hash",type:"long"}],type:"account.SavedRingtones"},{id:1038768899,method:"account.saveRingtone",params:[{name:"id",type:"InputDocument"},{name:"unsave",type:"Bool"}],type:"account.SavedRingtone"},{id:-2095414366,method:"account.uploadRingtone",params:[{name:"file",type:"InputFile"},{name:"file_name",type:"string"},{name:"mime_type",type:"string"}],type:"Document"},{id:2021942497,method:"bots.setBotBroadcastDefaultAdminRights",params:[{name:"admin_rights",type:"ChatAdminRights"}],type:"Bool"},{id:-1839281686,method:"bots.setBotGroupDefaultAdminRights",params:[{name:"admin_rights",type:"ChatAdminRights"}],type:"Bool"},{id:1092913030,method:"phone.saveCallLog",params:[{name:"peer",type:"InputPhoneCall"},{name:"file",type:"InputFile"}],type:"Bool"},{id:-456419968,method:"channels.toggleJoinToSend",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:1277789622,method:"channels.toggleJoinRequest",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:261206117,method:"payments.exportInvoice",params:[{name:"invoice_media",type:"InputMedia"}],type:"payments.ExportedInvoice"},{id:647928393,method:"messages.transcribeAudio",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"messages.TranscribedAudio"},{id:2132608815,method:"messages.rateTranscribedAudio",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"transcription_id",type:"long"},{name:"good",type:"Bool"}],type:"Bool"},{id:-2131921795,method:"payments.assignAppStoreTransaction",params:[{name:"receipt",type:"bytes"},{name:"purpose",type:"InputStorePaymentPurpose"}],type:"Updates"},{id:-537046829,method:"payments.assignPlayMarketTransaction",params:[{name:"receipt",type:"DataJSON"},{name:"purpose",type:"InputStorePaymentPurpose"}],type:"Updates"},{id:-1614700874,method:"payments.canPurchasePremium",params:[{name:"purpose",type:"InputStorePaymentPurpose"}],type:"Bool"},{id:-1206152236,method:"help.getPremiumPromo",params:[],type:"help.PremiumPromo"},{id:-643100844,method:"messages.getCustomEmojiDocuments",params:[{name:"document_id",type:"Vector<long>"}],type:"Vector<Document>"},{id:-67329649,method:"messages.getEmojiStickers",params:[{name:"hash",type:"long"}],type:"messages.AllStickers"},{id:248473398,method:"messages.getFeaturedEmojiStickers",params:[{name:"hash",type:"long"}],type:"messages.FeaturedStickers"},{id:-70001045,method:"account.updateEmojiStatus",params:[{name:"emoji_status",type:"EmojiStatus"}],type:"Bool"},{id:-696962170,method:"account.getDefaultEmojiStatuses",params:[{name:"hash",type:"long"}],type:"account.EmojiStatuses"},{id:257392901,method:"account.getRecentEmojiStatuses",params:[{name:"hash",type:"long"}],type:"account.EmojiStatuses"},{id:404757166,method:"account.clearRecentEmojiStatuses",params:[],type:"Bool"},{id:1063567478,method:"messages.reportReaction",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"reaction_peer",type:"InputPeer"}],type:"Bool"},{id:-1149164102,method:"messages.getTopReactions",params:[{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.Reactions"},{id:960896434,method:"messages.getRecentReactions",params:[{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.Reactions"},{id:-1644236876,method:"messages.clearRecentReactions",params:[],type:"Bool"},{id:-2064119788,method:"messages.getExtendedMedia",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Updates"},{id:767062953,method:"auth.importWebTokenAuthorization",params:[{name:"api_id",type:"int"},{name:"api_hash",type:"string"},{name:"web_auth_token",type:"string"}],type:"auth.Authorization"},{id:-279966037,method:"account.reorderUsernames",params:[{name:"order",type:"Vector<string>"}],type:"Bool"},{id:1490465654,method:"account.toggleUsername",params:[{name:"username",type:"string"},{name:"active",type:"Bool"}],type:"Bool"},{id:-1268978403,method:"channels.reorderUsernames",params:[{name:"channel",type:"InputChannel"},{name:"order",type:"Vector<string>"}],type:"Bool"},{id:1358053637,method:"channels.toggleUsername",params:[{name:"channel",type:"InputChannel"},{name:"username",type:"string"},{name:"active",type:"Bool"}],type:"Bool"},{id:170155475,method:"channels.deactivateAllUsernames",params:[{name:"channel",type:"InputChannel"}],type:"Bool"},{id:-1540781271,method:"channels.toggleForum",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:-200539612,method:"channels.createForumTopic",params:[{name:"flags",type:"#"},{name:"channel",type:"InputChannel"},{name:"title",type:"string"},{name:"icon_color",type:"flags.0?int"},{name:"icon_emoji_id",type:"flags.3?long"},{name:"random_id",type:"long"},{name:"send_as",type:"flags.2?InputPeer"}],type:"Updates"},{id:233136337,method:"channels.getForumTopics",params:[{name:"flags",type:"#"},{name:"channel",type:"InputChannel"},{name:"q",type:"flags.0?string"},{name:"offset_date",type:"int"},{name:"offset_id",type:"int"},{name:"offset_topic",type:"int"},{name:"limit",type:"int"}],type:"messages.ForumTopics"},{id:-1333584199,method:"channels.getForumTopicsByID",params:[{name:"channel",type:"InputChannel"},{name:"topics",type:"Vector<int>"}],type:"messages.ForumTopics"},{id:-186670715,method:"channels.editForumTopic",params:[{name:"flags",type:"#"},{name:"channel",type:"InputChannel"},{name:"topic_id",type:"int"},{name:"title",type:"flags.0?string"},{name:"icon_emoji_id",type:"flags.1?long"},{name:"closed",type:"flags.2?Bool"},{name:"hidden",type:"flags.3?Bool"}],type:"Updates"},{id:1814925350,method:"channels.updatePinnedForumTopic",params:[{name:"channel",type:"InputChannel"},{name:"topic_id",type:"int"},{name:"pinned",type:"Bool"}],type:"Updates"},{id:876830509,method:"channels.deleteTopicHistory",params:[{name:"channel",type:"InputChannel"},{name:"top_msg_id",type:"int"}],type:"messages.AffectedHistory"},{id:693150095,method:"channels.reorderPinnedForumTopics",params:[{name:"flags",type:"#"},{name:"force",type:"flags.0?true"},{name:"channel",type:"InputChannel"},{name:"order",type:"Vector<int>"}],type:"Updates"},{id:1760814315,method:"channels.toggleAntiSpam",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:-1471109485,method:"channels.reportAntiSpamFalsePositive",params:[{name:"channel",type:"InputChannel"},{name:"msg_id",type:"int"}],type:"Bool"},{id:-1632299963,method:"messages.setDefaultHistoryTTL",params:[{name:"period",type:"int"}],type:"Bool"},{id:1703637384,method:"messages.getDefaultHistoryTTL",params:[],type:"DefaultHistoryTTL"},{id:-127582169,method:"contacts.exportContactToken",params:[],type:"ExportedContactToken"},{id:318789512,method:"contacts.importContactToken",params:[{name:"token",type:"string"}],type:"User"},{id:-515093903,method:"photos.uploadContactProfilePhoto",params:[{name:"flags",type:"#"},{name:"suggest",type:"flags.3?true"},{name:"save",type:"flags.4?true"},{name:"user_id",type:"InputUser"},{name:"file",type:"flags.0?InputFile"},{name:"video",type:"flags.1?InputFile"},{name:"video_start_ts",type:"flags.2?double"},{name:"video_emoji_markup",type:"flags.5?VideoSize"}],type:"photos.Photo"},{id:1785624660,method:"channels.toggleParticipantsHidden",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:-1850552224,method:"messages.sendBotRequestedPeer",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"button_id",type:"int"},{name:"requested_peers",type:"Vector<InputPeer>"}],type:"Updates"},{id:-495647960,method:"account.getDefaultProfilePhotoEmojis",params:[{name:"hash",type:"long"}],type:"EmojiList"},{id:-1856479058,method:"account.getDefaultGroupPhotoEmojis",params:[{name:"hash",type:"long"}],type:"EmojiList"},{id:-1991881904,method:"auth.requestFirebaseSms",params:[{name:"flags",type:"#"},{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"safety_net_token",type:"flags.0?string"},{name:"ios_push_secret",type:"flags.1?string"}],type:"Bool"},{id:1955122779,method:"messages.getEmojiGroups",params:[{name:"hash",type:"int"}],type:"messages.EmojiGroups"},{id:785209037,method:"messages.getEmojiStatusGroups",params:[{name:"hash",type:"int"}],type:"messages.EmojiGroups"},{id:564480243,method:"messages.getEmojiProfilePhotoGroups",params:[{name:"hash",type:"int"}],type:"messages.EmojiGroups"},{id:739360983,method:"messages.searchCustomEmoji",params:[{name:"emoticon",type:"string"},{name:"hash",type:"long"}],type:"EmojiList"},{id:-461589127,method:"messages.togglePeerTranslations",params:[{name:"flags",type:"#"},{name:"disabled",type:"flags.0?true"},{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-1379156774,method:"account.getAutoSaveSettings",params:[],type:"account.AutoSaveSettings"},{id:-694451359,method:"account.saveAutoSaveSettings",params:[{name:"flags",type:"#"},{name:"users",type:"flags.0?true"},{name:"chats",type:"flags.1?true"},{name:"broadcasts",type:"flags.2?true"},{name:"peer",type:"flags.3?InputPeer"},{name:"settings",type:"AutoSaveSettings"}],type:"Bool"},{id:1404829728,method:"account.deleteAutoSaveExceptions",params:[],type:"Bool"},{id:-179077444,method:"stickers.changeSticker",params:[{name:"flags",type:"#"},{name:"sticker",type:"InputDocument"},{name:"emoji",type:"flags.0?string"},{name:"mask_coords",type:"flags.1?MaskCoords"},{name:"keywords",type:"flags.2?string"}],type:"messages.StickerSet"},{id:306912256,method:"stickers.renameStickerSet",params:[{name:"stickerset",type:"InputStickerSet"},{name:"title",type:"string"}],type:"messages.StickerSet"},{id:-2022685804,method:"stickers.deleteStickerSet",params:[{name:"stickerset",type:"InputStickerSet"}],type:"Bool"},{id:889046467,method:"messages.getBotApp",params:[{name:"app",type:"InputBotApp"},{name:"hash",type:"long"}],type:"messages.BotApp"},{id:-1940243652,method:"messages.requestAppWebView",params:[{name:"flags",type:"#"},{name:"write_allowed",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"app",type:"InputBotApp"},{name:"start_param",type:"flags.1?string"},{name:"theme_params",type:"flags.2?DataJSON"},{name:"platform",type:"string"}],type:"AppWebViewResult"},{id:282013987,method:"bots.setBotInfo",params:[{name:"flags",type:"#"},{name:"bot",type:"flags.2?InputUser"},{name:"lang_code",type:"string"},{name:"name",type:"flags.3?string"},{name:"about",type:"flags.0?string"},{name:"description",type:"flags.1?string"}],type:"Bool"},{id:-589753091,method:"bots.getBotInfo",params:[{name:"flags",type:"#"},{name:"bot",type:"flags.0?InputUser"},{name:"lang_code",type:"string"}],type:"bots.BotInfo"},{id:2123760019,method:"auth.resetLoginEmail",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"}],type:"auth.SentCode"},{id:-2072885362,method:"chatlists.exportChatlistInvite",params:[{name:"chatlist",type:"InputChatlist"},{name:"title",type:"string"},{name:"peers",type:"Vector<InputPeer>"}],type:"chatlists.ExportedChatlistInvite"},{id:1906072670,method:"chatlists.deleteExportedInvite",params:[{name:"chatlist",type:"InputChatlist"},{name:"slug",type:"string"}],type:"Bool"},{id:1698543165,method:"chatlists.editExportedInvite",params:[{name:"flags",type:"#"},{name:"chatlist",type:"InputChatlist"},{name:"slug",type:"string"},{name:"title",type:"flags.1?string"},{name:"peers",type:"flags.2?Vector<InputPeer>"}],type:"ExportedChatlistInvite"},{id:-838608253,method:"chatlists.getExportedInvites",params:[{name:"chatlist",type:"InputChatlist"}],type:"chatlists.ExportedInvites"},{id:1103171583,method:"chatlists.checkChatlistInvite",params:[{name:"slug",type:"string"}],type:"chatlists.ChatlistInvite"},{id:-1498291302,method:"chatlists.joinChatlistInvite",params:[{name:"slug",type:"string"},{name:"peers",type:"Vector<InputPeer>"}],type:"Updates"},{id:-1992190687,method:"chatlists.getChatlistUpdates",params:[{name:"chatlist",type:"InputChatlist"}],type:"chatlists.ChatlistUpdates"},{id:-527828747,method:"chatlists.joinChatlistUpdates",params:[{name:"chatlist",type:"InputChatlist"},{name:"peers",type:"Vector<InputPeer>"}],type:"Updates"},{id:1726252795,method:"chatlists.hideChatlistUpdates",params:[{name:"chatlist",type:"InputChatlist"}],type:"Bool"},{id:-37955820,method:"chatlists.getLeaveChatlistSuggestions",params:[{name:"chatlist",type:"InputChatlist"}],type:"Vector<Peer>"},{id:1962598714,method:"chatlists.leaveChatlist",params:[{name:"chatlist",type:"InputChatlist"},{name:"peers",type:"Vector<InputPeer>"}],type:"Updates"},{id:-1760972350,method:"bots.reorderUsernames",params:[{name:"bot",type:"InputUser"},{name:"order",type:"Vector<string>"}],type:"Bool"},{id:87861619,method:"bots.toggleUsername",params:[{name:"bot",type:"InputUser"},{name:"username",type:"string"},{name:"active",type:"Bool"}],type:"Bool"},{id:-1879389471,method:"messages.setChatWallPaper",params:[{name:"flags",type:"#"},{name:"for_both",type:"flags.3?true"},{name:"revert",type:"flags.4?true"},{name:"peer",type:"InputPeer"},{name:"wallpaper",type:"flags.0?InputWallPaper"},{name:"settings",type:"flags.2?WallPaperSettings"},{name:"id",type:"flags.1?int"}],type:"Updates"},{id:-896866118,method:"account.invalidateSignInCodes",params:[{name:"codes",type:"Vector<string>"}],type:"Bool"},{id:414170259,method:"channels.clickSponsoredMessage",params:[{name:"channel",type:"InputChannel"},{name:"random_id",type:"bytes"}],type:"Bool"},{id:-1167653392,method:"contacts.editCloseFriends",params:[{name:"id",type:"Vector<long>"}],type:"Bool"},{id:-941629475,method:"stories.canSendStory",params:[{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-454661813,method:"stories.sendStory",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.2?true"},{name:"noforwards",type:"flags.4?true"},{name:"fwd_modified",type:"flags.7?true"},{name:"peer",type:"InputPeer"},{name:"media",type:"InputMedia"},{name:"media_areas",type:"flags.5?Vector<MediaArea>"},{name:"caption",type:"flags.0?string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"privacy_rules",type:"Vector<InputPrivacyRule>"},{name:"random_id",type:"long"},{name:"period",type:"flags.3?int"},{name:"fwd_from_id",type:"flags.6?InputPeer"},{name:"fwd_from_story",type:"flags.6?int"}],type:"Updates"},{id:-1249658298,method:"stories.editStory",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"media",type:"flags.0?InputMedia"},{name:"media_areas",type:"flags.3?Vector<MediaArea>"},{name:"caption",type:"flags.1?string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"privacy_rules",type:"flags.2?Vector<InputPrivacyRule>"}],type:"Updates"},{id:-1369842849,method:"stories.deleteStories",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Vector<int>"},{id:-1703566865,method:"stories.togglePinned",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"},{name:"pinned",type:"Bool"}],type:"Vector<int>"},{id:-290400731,method:"stories.getAllStories",params:[{name:"flags",type:"#"},{name:"next",type:"flags.1?true"},{name:"hidden",type:"flags.2?true"},{name:"state",type:"flags.0?string"}],type:"stories.AllStories"},{id:1478600156,method:"stories.getPinnedStories",params:[{name:"peer",type:"InputPeer"},{name:"offset_id",type:"int"},{name:"limit",type:"int"}],type:"stories.Stories"},{id:-1271586794,method:"stories.getStoriesArchive",params:[{name:"peer",type:"InputPeer"},{name:"offset_id",type:"int"},{name:"limit",type:"int"}],type:"stories.Stories"},{id:1467271796,method:"stories.getStoriesByID",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"stories.Stories"},{id:2082822084,method:"stories.toggleAllStoriesHidden",params:[{name:"hidden",type:"Bool"}],type:"Bool"},{id:-1521034552,method:"stories.readStories",params:[{name:"peer",type:"InputPeer"},{name:"max_id",type:"int"}],type:"Vector<int>"},{id:-1308456197,method:"stories.incrementStoryViews",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Bool"},{id:2127707223,method:"stories.getStoryViewsList",params:[{name:"flags",type:"#"},{name:"just_contacts",type:"flags.0?true"},{name:"reactions_first",type:"flags.2?true"},{name:"forwards_first",type:"flags.3?true"},{name:"peer",type:"InputPeer"},{name:"q",type:"flags.1?string"},{name:"id",type:"int"},{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"stories.StoryViewsList"},{id:685862088,method:"stories.getStoriesViews",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"stories.StoryViews"},{id:2072899360,method:"stories.exportStoryLink",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"int"}],type:"ExportedStoryLink"},{id:421788300,method:"stories.report",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"},{name:"reason",type:"ReportReason"},{name:"message",type:"string"}],type:"Bool"},{id:1471926630,method:"stories.activateStealthMode",params:[{name:"flags",type:"#"},{name:"past",type:"flags.0?true"},{name:"future",type:"flags.1?true"}],type:"Updates"},{id:-1798939530,method:"contacts.setBlocked",params:[{name:"flags",type:"#"},{name:"my_stories_from",type:"flags.0?true"},{name:"id",type:"Vector<InputPeer>"},{name:"limit",type:"int"}],type:"Bool"},{id:2144810674,method:"stories.sendReaction",params:[{name:"flags",type:"#"},{name:"add_to_recent",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"story_id",type:"int"},{name:"reaction",type:"Reaction"}],type:"Updates"},{id:324662502,method:"bots.canSendMessage",params:[{name:"bot",type:"InputUser"}],type:"Bool"},{id:-248323089,method:"bots.allowSendMessage",params:[{name:"bot",type:"InputUser"}],type:"Updates"},{id:142591463,method:"bots.invokeWebViewCustomMethod",params:[{name:"bot",type:"InputUser"},{name:"custom_method",type:"string"},{name:"params",type:"DataJSON"}],type:"DataJSON"},{id:743103056,method:"stories.getPeerStories",params:[{name:"peer",type:"InputPeer"}],type:"stories.PeerStories"},{id:-1688541191,method:"stories.getAllReadPeerStories",params:[],type:"Updates"},{id:1398375363,method:"stories.getPeerMaxIDs",params:[{name:"id",type:"Vector<InputPeer>"}],type:"Vector<int>"},{id:-1519744160,method:"stories.getChatsToSend",params:[],type:"messages.Chats"},{id:-1123805756,method:"stories.togglePeerStoriesHidden",params:[{name:"peer",type:"InputPeer"},{name:"hidden",type:"Bool"}],type:"Bool"},{id:660060756,method:"payments.getPremiumGiftCodeOptions",params:[{name:"flags",type:"#"},{name:"boost_peer",type:"flags.0?InputPeer"}],type:"Vector<PremiumGiftCodeOption>"},{id:-1907247935,method:"payments.checkGiftCode",params:[{name:"slug",type:"string"}],type:"payments.CheckedGiftCode"},{id:-152934316,method:"payments.applyGiftCode",params:[{name:"slug",type:"string"}],type:"Updates"},{id:-198994907,method:"payments.getGiveawayInfo",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"payments.GiveawayInfo"},{id:1609928480,method:"payments.launchPrepaidGiveaway",params:[{name:"peer",type:"InputPeer"},{name:"giveaway_id",type:"long"},{name:"purpose",type:"InputStorePaymentPurpose"}],type:"Updates"},{id:2096079197,method:"account.updateColor",params:[{name:"flags",type:"#"},{name:"for_profile",type:"flags.1?true"},{name:"color",type:"flags.2?int"},{name:"background_emoji_id",type:"flags.0?long"}],type:"Bool"},{id:-659933583,method:"channels.updateColor",params:[{name:"flags",type:"#"},{name:"for_profile",type:"flags.1?true"},{name:"channel",type:"InputChannel"},{name:"color",type:"flags.2?int"},{name:"background_emoji_id",type:"flags.0?long"}],type:"Updates"},{id:-1509246514,method:"account.getDefaultBackgroundEmojis",params:[{name:"hash",type:"long"}],type:"EmojiList"},{id:1626764896,method:"premium.getBoostsList",params:[{name:"flags",type:"#"},{name:"gifts",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"premium.BoostsList"},{id:199719754,method:"premium.getMyBoosts",params:[],type:"premium.MyBoosts"},{id:1803396934,method:"premium.applyBoost",params:[{name:"flags",type:"#"},{name:"slots",type:"flags.0?Vector<int>"},{name:"peer",type:"InputPeer"}],type:"premium.MyBoosts"},{id:70197089,method:"premium.getBoostsStatus",params:[{name:"peer",type:"InputPeer"}],type:"premium.BoostsStatus"},{id:965037343,method:"premium.getUserBoosts",params:[{name:"peer",type:"InputPeer"},{name:"user_id",type:"InputUser"}],type:"premium.BoostsList"},{id:-1757889771,method:"channels.toggleViewForumAsMessages",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:-1833678516,method:"messages.searchEmojiStickerSets",params:[{name:"flags",type:"#"},{name:"exclude_featured",type:"flags.0?true"},{name:"q",type:"string"},{name:"hash",type:"long"}],type:"messages.FoundStickerSets"},{id:-2085155433,method:"channels.getChannelRecommendations",params:[{name:"channel",type:"InputChannel"}],type:"messages.Chats"},{id:927985472,method:"stats.getStoryStats",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"}],type:"stats.StoryStats"},{id:-1505526026,method:"stats.getStoryPublicForwards",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"stats.PublicForwards"},{id:-629083089,method:"help.getPeerColors",params:[{name:"hash",type:"int"}],type:"help.PeerColors"},{id:-1412453891,method:"help.getPeerProfileColors",params:[{name:"hash",type:"int"}],type:"help.PeerColors"},{id:-1179482081,method:"stories.getStoryReactionsList",params:[{name:"flags",type:"#"},{name:"forwards_first",type:"flags.2?true"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"reaction",type:"flags.0?Reaction"},{name:"offset",type:"flags.1?string"},{name:"limit",type:"int"}],type:"stories.StoryReactionsList"},{id:-254548312,method:"channels.updateEmojiStatus",params:[{name:"channel",type:"InputChannel"},{name:"emoji_status",type:"EmojiStatus"}],type:"Updates"},{id:1999087573,method:"account.getChannelDefaultEmojiStatuses",params:[{name:"hash",type:"long"}],type:"account.EmojiStatuses"},{id:900325589,method:"account.getChannelRestrictedStatusEmojis",params:[{name:"hash",type:"long"}],type:"EmojiList"},{id:1401016858,method:"messages.getSavedDialogs",params:[{name:"flags",type:"#"},{name:"exclude_pinned",type:"flags.0?true"},{name:"offset_date",type:"int"},{name:"offset_id",type:"int"},{name:"offset_peer",type:"InputPeer"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.SavedDialogs"},{id:1033519437,method:"messages.getSavedHistory",params:[{name:"peer",type:"InputPeer"},{name:"offset_id",type:"int"},{name:"offset_date",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:1855459371,method:"messages.deleteSavedHistory",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"max_id",type:"int"},{name:"min_date",type:"flags.2?int"},{name:"max_date",type:"flags.3?int"}],type:"messages.AffectedHistory"},{id:-700607264,method:"messages.getPinnedSavedDialogs",params:[],type:"messages.SavedDialogs"},{id:-1400783906,method:"messages.toggleSavedDialogPin",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"peer",type:"InputDialogPeer"}],type:"Bool"},{id:-1955502713,method:"messages.reorderPinnedSavedDialogs",params:[{name:"flags",type:"#"},{name:"force",type:"flags.0?true"},{name:"order",type:"Vector<InputDialogPeer>"}],type:"Bool"},{id:909631579,method:"messages.getSavedReactionTags",params:[{name:"flags",type:"#"},{name:"peer",type:"flags.0?InputPeer"},{name:"hash",type:"long"}],type:"messages.SavedReactionTags"},{id:1613331948,method:"messages.updateSavedReactionTag",params:[{name:"flags",type:"#"},{name:"reaction",type:"Reaction"},{name:"title",type:"flags.0?string"}],type:"Bool"},{id:-1107741656,method:"messages.getDefaultTagReactions",params:[{name:"hash",type:"long"}],type:"messages.Reactions"},{id:-1941176739,method:"messages.getOutboxReadDate",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"OutboxReadDate"},{id:-1507677680,method:"users.getIsPremiumRequiredToContact",params:[{name:"id",type:"Vector<InputUser>"}],type:"Vector<Bool>"},{id:-1388733202,method:"channels.setBoostsToUnblockRestrictions",params:[{name:"channel",type:"InputChannel"},{name:"boosts",type:"int"}],type:"Updates"},{id:1020866743,method:"channels.setEmojiStickers",params:[{name:"channel",type:"InputChannel"},{name:"stickerset",type:"InputStickerSet"}],type:"Bool"},{id:249313744,method:"smsjobs.isEligibleToJoin",params:[],type:"smsjobs.EligibilityToJoin"},{id:-1488007635,method:"smsjobs.join",params:[],type:"Bool"},{id:-1734824589,method:"smsjobs.leave",params:[],type:"Bool"},{id:155164863,method:"smsjobs.updateSettings",params:[{name:"flags",type:"#"},{name:"allow_international",type:"flags.0?true"}],type:"Bool"},{id:279353576,method:"smsjobs.getStatus",params:[],type:"smsjobs.Status"},{id:2005766191,method:"smsjobs.getSmsJob",params:[{name:"job_id",type:"string"}],type:"SmsJob"},{id:1327415076,method:"smsjobs.finishJob",params:[{name:"flags",type:"#"},{name:"job_id",type:"string"},{name:"error",type:"flags.0?string"}],type:"Bool"},{id:1236468288,method:"help.getTimezonesList",params:[{name:"hash",type:"int"}],type:"help.TimezonesList"},{id:1258348646,method:"account.updateBusinessWorkHours",params:[{name:"flags",type:"#"},{name:"business_work_hours",type:"flags.0?BusinessWorkHours"}],type:"Bool"},{id:-1637149926,method:"account.updateBusinessLocation",params:[{name:"flags",type:"#"},{name:"geo_point",type:"flags.1?InputGeoPoint"},{name:"address",type:"flags.0?string"}],type:"Bool"},{id:1724755908,method:"account.updateBusinessGreetingMessage",params:[{name:"flags",type:"#"},{name:"message",type:"flags.0?InputBusinessGreetingMessage"}],type:"Bool"},{id:-1570078811,method:"account.updateBusinessAwayMessage",params:[{name:"flags",type:"#"},{name:"message",type:"flags.0?InputBusinessAwayMessage"}],type:"Bool"},{id:-729550168,method:"messages.getQuickReplies",params:[{name:"hash",type:"long"}],type:"messages.QuickReplies"},{id:1613961479,method:"messages.reorderQuickReplies",params:[{name:"order",type:"Vector<int>"}],type:"Bool"},{id:-237962285,method:"messages.checkQuickReplyShortcut",params:[{name:"shortcut",type:"string"}],type:"Bool"},{id:1543519471,method:"messages.editQuickReplyShortcut",params:[{name:"shortcut_id",type:"int"},{name:"shortcut",type:"string"}],type:"Bool"},{id:1019234112,method:"messages.deleteQuickReplyShortcut",params:[{name:"shortcut_id",type:"int"}],type:"Bool"},{id:-1801153085,method:"messages.getQuickReplyMessages",params:[{name:"flags",type:"#"},{name:"shortcut_id",type:"int"},{name:"id",type:"flags.0?Vector<int>"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:1819610593,method:"messages.sendQuickReplyMessages",params:[{name:"peer",type:"InputPeer"},{name:"shortcut_id",type:"int"},{name:"id",type:"Vector<int>"},{name:"random_id",type:"Vector<long>"}],type:"Updates"},{id:-519706352,method:"messages.deleteQuickReplyMessages",params:[{name:"shortcut_id",type:"int"},{name:"id",type:"Vector<int>"}],type:"Updates"},{id:1138250269,method:"account.updateConnectedBot",params:[{name:"flags",type:"#"},{name:"can_reply",type:"flags.0?true"},{name:"deleted",type:"flags.1?true"},{name:"bot",type:"InputUser"},{name:"recipients",type:"InputBusinessBotRecipients"}],type:"Updates"},{id:1319421967,method:"account.getConnectedBots",params:[],type:"account.ConnectedBots"},{id:-47326647,method:"messages.toggleDialogFilterTags",params:[{name:"enabled",type:"Bool"}],type:"Bool"},{id:-584540274,method:"invokeWithBusinessConnection",params:[{name:"connection_id",type:"string"},{name:"query",type:"!X"}],type:"X"},{id:1990746736,method:"account.getBotBusinessConnection",params:[{name:"connection_id",type:"string"}],type:"Updates"},{id:-1508585420,method:"account.updateBusinessIntro",params:[{name:"flags",type:"#"},{name:"intro",type:"flags.0?InputBusinessIntro"}],type:"Bool"},{id:1184253338,method:"stickers.replaceSticker",params:[{name:"sticker",type:"InputDocument"},{name:"new_sticker",type:"InputStickerSetItem"}],type:"messages.StickerSet"},{id:-793386500,method:"messages.getMyStickers",params:[{name:"offset_id",type:"long"},{name:"limit",type:"int"}],type:"messages.MyStickers"},{id:-1105295942,method:"fragment.getCollectibleInfo",params:[{name:"collectible",type:"InputCollectible"}],type:"fragment.CollectibleInfo"},{id:1684934807,method:"account.toggleConnectedBotPaused",params:[{name:"peer",type:"InputPeer"},{name:"paused",type:"Bool"}],type:"Bool"},{id:1581481689,method:"account.disablePeerConnectedBot",params:[{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-865203183,method:"account.updateBirthday",params:[{name:"flags",type:"#"},{name:"birthday",type:"flags.0?Birthday"}],type:"Bool"},{id:-621959068,method:"contacts.getBirthdays",params:[],type:"contacts.ContactBirthdays"},{id:-2007898482,method:"account.createBusinessChatLink",params:[{name:"link",type:"InputBusinessChatLink"}],type:"BusinessChatLink"},{id:-1942744913,method:"account.editBusinessChatLink",params:[{name:"slug",type:"string"},{name:"link",type:"InputBusinessChatLink"}],type:"BusinessChatLink"},{id:1611085428,method:"account.deleteBusinessChatLink",params:[{name:"slug",type:"string"}],type:"Bool"},{id:1869667809,method:"account.getBusinessChatLinks",params:[],type:"account.BusinessChatLinks"},{id:1418913262,method:"account.resolveBusinessChatLink",params:[{name:"slug",type:"string"}],type:"account.ResolvedBusinessChatLinks"},{id:-649919008,method:"account.updatePersonalChannel",params:[{name:"channel",type:"InputChannel"}],type:"Bool"},{id:-1349519687,method:"channels.reportSponsoredMessage",params:[{name:"channel",type:"InputChannel"},{name:"random_id",type:"bytes"},{name:"option",type:"bytes"}],type:"channels.SponsoredMessageReportResult"},{id:1977595505,method:"stats.getBroadcastRevenueStats",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"channel",type:"InputChannel"}],type:"stats.BroadcastRevenueStats"},{id:711323507,method:"stats.getBroadcastRevenueWithdrawalUrl",params:[{name:"channel",type:"InputChannel"},{name:"password",type:"InputCheckPasswordSRP"}],type:"stats.BroadcastRevenueWithdrawalUrl"},{id:6891535,method:"stats.getBroadcastRevenueTransactions",params:[{name:"channel",type:"InputChannel"},{name:"offset",type:"int"},{name:"limit",type:"int"}],type:"stats.BroadcastRevenueTransactions"},{id:-1696000743,method:"channels.restrictSponsoredMessages",params:[{name:"channel",type:"InputChannel"},{name:"restricted",type:"Bool"}],type:"Updates"}]},layer:177},pako_inflate_min={exports:{}};/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */(function(d,e){(function(t,r){r(e)})(commonjsGlobal,function(t){var r=(Z,ne,q,ge)=>{let ye=65535&Z|0,ce=Z>>>16&65535|0,Ie=0;for(;q!==0;){Ie=q>2e3?2e3:q,q-=Ie;do ye=ye+ne[ge++]|0,ce=ce+ye|0;while(--Ie);ye%=65521,ce%=65521}return ye|ce<<16|0};const s=new Uint32Array((()=>{let Z,ne=[];for(var q=0;q<256;q++){Z=q;for(var ge=0;ge<8;ge++)Z=1&Z?3988292384^Z>>>1:Z>>>1;ne[q]=Z}return ne})());var a=(Z,ne,q,ge)=>{const ye=s,ce=ge+q;Z^=-1;for(let Ie=ge;Ie<ce;Ie++)Z=Z>>>8^ye[255&(Z^ne[Ie])];return-1^Z};const n=16209;var o=function(Z,ne){let q,ge,ye,ce,Ie,_e,Re,le,ue,Oe,Te,ve,Ne,Ve,xe,Fe,qe,Se,De,ze,Ae,je,We,$e;const Je=Z.state;q=Z.next_in,We=Z.input,ge=q+(Z.avail_in-5),ye=Z.next_out,$e=Z.output,ce=ye-(ne-Z.avail_out),Ie=ye+(Z.avail_out-257),_e=Je.dmax,Re=Je.wsize,le=Je.whave,ue=Je.wnext,Oe=Je.window,Te=Je.hold,ve=Je.bits,Ne=Je.lencode,Ve=Je.distcode,xe=(1<<Je.lenbits)-1,Fe=(1<<Je.distbits)-1;e:do{ve<15&&(Te+=We[q++]<<ve,ve+=8,Te+=We[q++]<<ve,ve+=8),qe=Ne[Te&xe];t:for(;;){if(Se=qe>>>24,Te>>>=Se,ve-=Se,Se=qe>>>16&255,Se===0)$e[ye++]=65535&qe;else{if(!(16&Se)){if(!(64&Se)){qe=Ne[(65535&qe)+(Te&(1<<Se)-1)];continue t}if(32&Se){Je.mode=16191;break e}Z.msg="invalid literal/length code",Je.mode=n;break e}De=65535&qe,Se&=15,Se&&(ve<Se&&(Te+=We[q++]<<ve,ve+=8),De+=Te&(1<<Se)-1,Te>>>=Se,ve-=Se),ve<15&&(Te+=We[q++]<<ve,ve+=8,Te+=We[q++]<<ve,ve+=8),qe=Ve[Te&Fe];r:for(;;){if(Se=qe>>>24,Te>>>=Se,ve-=Se,Se=qe>>>16&255,!(16&Se)){if(!(64&Se)){qe=Ve[(65535&qe)+(Te&(1<<Se)-1)];continue r}Z.msg="invalid distance code",Je.mode=n;break e}if(ze=65535&qe,Se&=15,ve<Se&&(Te+=We[q++]<<ve,ve+=8,ve<Se&&(Te+=We[q++]<<ve,ve+=8)),ze+=Te&(1<<Se)-1,ze>_e){Z.msg="invalid distance too far back",Je.mode=n;break e}if(Te>>>=Se,ve-=Se,Se=ye-ce,ze>Se){if(Se=ze-Se,Se>le&&Je.sane){Z.msg="invalid distance too far back",Je.mode=n;break e}if(Ae=0,je=Oe,ue===0){if(Ae+=Re-Se,Se<De){De-=Se;do $e[ye++]=Oe[Ae++];while(--Se);Ae=ye-ze,je=$e}}else if(ue<Se){if(Ae+=Re+ue-Se,Se-=ue,Se<De){De-=Se;do $e[ye++]=Oe[Ae++];while(--Se);if(Ae=0,ue<De){Se=ue,De-=Se;do $e[ye++]=Oe[Ae++];while(--Se);Ae=ye-ze,je=$e}}}else if(Ae+=ue-Se,Se<De){De-=Se;do $e[ye++]=Oe[Ae++];while(--Se);Ae=ye-ze,je=$e}for(;De>2;)$e[ye++]=je[Ae++],$e[ye++]=je[Ae++],$e[ye++]=je[Ae++],De-=3;De&&($e[ye++]=je[Ae++],De>1&&($e[ye++]=je[Ae++]))}else{Ae=ye-ze;do $e[ye++]=$e[Ae++],$e[ye++]=$e[Ae++],$e[ye++]=$e[Ae++],De-=3;while(De>2);De&&($e[ye++]=$e[Ae++],De>1&&($e[ye++]=$e[Ae++]))}break}}break}}while(q<ge&&ye<Ie);De=ve>>3,q-=De,ve-=De<<3,Te&=(1<<ve)-1,Z.next_in=q,Z.next_out=ye,Z.avail_in=q<ge?ge-q+5:5-(q-ge),Z.avail_out=ye<Ie?Ie-ye+257:257-(ye-Ie),Je.hold=Te,Je.bits=ve};const p=15,c=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),f=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),l=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),u=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var g=(Z,ne,q,ge,ye,ce,Ie,_e)=>{const Re=_e.bits;let le,ue,Oe,Te,ve,Ne,Ve=0,xe=0,Fe=0,qe=0,Se=0,De=0,ze=0,Ae=0,je=0,We=0,$e=null;const Je=new Uint16Array(16),Ye=new Uint16Array(16);let Xe,Ze,Qe,et=null;for(Ve=0;Ve<=p;Ve++)Je[Ve]=0;for(xe=0;xe<ge;xe++)Je[ne[q+xe]]++;for(Se=Re,qe=p;qe>=1&&Je[qe]===0;qe--);if(Se>qe&&(Se=qe),qe===0)return ye[ce++]=20971520,ye[ce++]=20971520,_e.bits=1,0;for(Fe=1;Fe<qe&&Je[Fe]===0;Fe++);for(Se<Fe&&(Se=Fe),Ae=1,Ve=1;Ve<=p;Ve++)if(Ae<<=1,Ae-=Je[Ve],Ae<0)return-1;if(Ae>0&&(Z===0||qe!==1))return-1;for(Ye[1]=0,Ve=1;Ve<p;Ve++)Ye[Ve+1]=Ye[Ve]+Je[Ve];for(xe=0;xe<ge;xe++)ne[q+xe]!==0&&(Ie[Ye[ne[q+xe]]++]=xe);if(Z===0?($e=et=Ie,Ne=20):Z===1?($e=c,et=f,Ne=257):($e=l,et=u,Ne=0),We=0,xe=0,Ve=Fe,ve=ce,De=Se,ze=0,Oe=-1,je=1<<Se,Te=je-1,Z===1&&je>852||Z===2&&je>592)return 1;for(;;){Xe=Ve-ze,Ie[xe]+1<Ne?(Ze=0,Qe=Ie[xe]):Ie[xe]>=Ne?(Ze=et[Ie[xe]-Ne],Qe=$e[Ie[xe]-Ne]):(Ze=96,Qe=0),le=1<<Ve-ze,ue=1<<De,Fe=ue;do ue-=le,ye[ve+(We>>ze)+ue]=Xe<<24|Ze<<16|Qe|0;while(ue!==0);for(le=1<<Ve-1;We&le;)le>>=1;if(le!==0?(We&=le-1,We+=le):We=0,xe++,--Je[Ve]==0){if(Ve===qe)break;Ve=ne[q+Ie[xe]]}if(Ve>Se&&(We&Te)!==Oe){for(ze===0&&(ze=Se),ve+=Fe,De=Ve-ze,Ae=1<<De;De+ze<qe&&(Ae-=Je[De+ze],!(Ae<=0));)De++,Ae<<=1;if(je+=1<<De,Z===1&&je>852||Z===2&&je>592)return 1;Oe=We&Te,ye[Oe]=Se<<24|De<<16|ve-ce|0}}return We!==0&&(ye[ve+We]=Ve-ze<<24|64<<16|0),_e.bits=Se,0},y={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{Z_FINISH:b,Z_BLOCK:I,Z_TREES:S,Z_OK:A,Z_STREAM_END:k,Z_NEED_DICT:T,Z_STREAM_ERROR:O,Z_DATA_ERROR:$,Z_MEM_ERROR:K,Z_BUF_ERROR:ee,Z_DEFLATED:Q}=y,te=16180,N=16190,m=16191,_=16192,h=16194,v=16199,E=16200,M=16206,P=16209,D=Z=>(Z>>>24&255)+(Z>>>8&65280)+((65280&Z)<<8)+((255&Z)<<24);function w(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const B=Z=>{if(!Z)return 1;const ne=Z.state;return!ne||ne.strm!==Z||ne.mode<te||ne.mode>16211?1:0},x=Z=>{if(B(Z))return O;const ne=Z.state;return Z.total_in=Z.total_out=ne.total=0,Z.msg="",ne.wrap&&(Z.adler=1&ne.wrap),ne.mode=te,ne.last=0,ne.havedict=0,ne.flags=-1,ne.dmax=32768,ne.head=null,ne.hold=0,ne.bits=0,ne.lencode=ne.lendyn=new Int32Array(852),ne.distcode=ne.distdyn=new Int32Array(592),ne.sane=1,ne.back=-1,A},U=Z=>{if(B(Z))return O;const ne=Z.state;return ne.wsize=0,ne.whave=0,ne.wnext=0,x(Z)},X=(Z,ne)=>{let q;if(B(Z))return O;const ge=Z.state;return ne<0?(q=0,ne=-ne):(q=5+(ne>>4),ne<48&&(ne&=15)),ne&&(ne<8||ne>15)?O:(ge.window!==null&&ge.wbits!==ne&&(ge.window=null),ge.wrap=q,ge.wbits=ne,U(Z))},se=(Z,ne)=>{if(!Z)return O;const q=new w;Z.state=q,q.strm=Z,q.window=null,q.mode=te;const ge=X(Z,ne);return ge!==A&&(Z.state=null),ge};let J,L,G=!0;const re=Z=>{if(G){J=new Int32Array(512),L=new Int32Array(32);let ne=0;for(;ne<144;)Z.lens[ne++]=8;for(;ne<256;)Z.lens[ne++]=9;for(;ne<280;)Z.lens[ne++]=7;for(;ne<288;)Z.lens[ne++]=8;for(g(1,Z.lens,0,288,J,0,Z.work,{bits:9}),ne=0;ne<32;)Z.lens[ne++]=5;g(2,Z.lens,0,32,L,0,Z.work,{bits:5}),G=!1}Z.lencode=J,Z.lenbits=9,Z.distcode=L,Z.distbits=5},fe=(Z,ne,q,ge)=>{let ye;const ce=Z.state;return ce.window===null&&(ce.wsize=1<<ce.wbits,ce.wnext=0,ce.whave=0,ce.window=new Uint8Array(ce.wsize)),ge>=ce.wsize?(ce.window.set(ne.subarray(q-ce.wsize,q),0),ce.wnext=0,ce.whave=ce.wsize):(ye=ce.wsize-ce.wnext,ye>ge&&(ye=ge),ce.window.set(ne.subarray(q-ge,q-ge+ye),ce.wnext),(ge-=ye)?(ce.window.set(ne.subarray(q-ge,q),0),ce.wnext=ge,ce.whave=ce.wsize):(ce.wnext+=ye,ce.wnext===ce.wsize&&(ce.wnext=0),ce.whave<ce.wsize&&(ce.whave+=ye))),0};var z={inflateReset:U,inflateReset2:X,inflateResetKeep:x,inflateInit:Z=>se(Z,15),inflateInit2:se,inflate:(Z,ne)=>{let q,ge,ye,ce,Ie,_e,Re,le,ue,Oe,Te,ve,Ne,Ve,xe,Fe,qe,Se,De,ze,Ae,je,We=0;const $e=new Uint8Array(4);let Je,Ye;const Xe=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(B(Z)||!Z.output||!Z.input&&Z.avail_in!==0)return O;q=Z.state,q.mode===m&&(q.mode=_),Ie=Z.next_out,ye=Z.output,Re=Z.avail_out,ce=Z.next_in,ge=Z.input,_e=Z.avail_in,le=q.hold,ue=q.bits,Oe=_e,Te=Re,je=A;e:for(;;)switch(q.mode){case te:if(q.wrap===0){q.mode=_;break}for(;ue<16;){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}if(2&q.wrap&&le===35615){q.wbits===0&&(q.wbits=15),q.check=0,$e[0]=255&le,$e[1]=le>>>8&255,q.check=a(q.check,$e,2,0),le=0,ue=0,q.mode=16181;break}if(q.head&&(q.head.done=!1),!(1&q.wrap)||(((255&le)<<8)+(le>>8))%31){Z.msg="incorrect header check",q.mode=P;break}if((15&le)!==Q){Z.msg="unknown compression method",q.mode=P;break}if(le>>>=4,ue-=4,Ae=8+(15&le),q.wbits===0&&(q.wbits=Ae),Ae>15||Ae>q.wbits){Z.msg="invalid window size",q.mode=P;break}q.dmax=1<<q.wbits,q.flags=0,Z.adler=q.check=1,q.mode=512&le?16189:m,le=0,ue=0;break;case 16181:for(;ue<16;){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}if(q.flags=le,(255&q.flags)!==Q){Z.msg="unknown compression method",q.mode=P;break}if(57344&q.flags){Z.msg="unknown header flags set",q.mode=P;break}q.head&&(q.head.text=le>>8&1),512&q.flags&&4&q.wrap&&($e[0]=255&le,$e[1]=le>>>8&255,q.check=a(q.check,$e,2,0)),le=0,ue=0,q.mode=16182;case 16182:for(;ue<32;){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}q.head&&(q.head.time=le),512&q.flags&&4&q.wrap&&($e[0]=255&le,$e[1]=le>>>8&255,$e[2]=le>>>16&255,$e[3]=le>>>24&255,q.check=a(q.check,$e,4,0)),le=0,ue=0,q.mode=16183;case 16183:for(;ue<16;){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}q.head&&(q.head.xflags=255&le,q.head.os=le>>8),512&q.flags&&4&q.wrap&&($e[0]=255&le,$e[1]=le>>>8&255,q.check=a(q.check,$e,2,0)),le=0,ue=0,q.mode=16184;case 16184:if(1024&q.flags){for(;ue<16;){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}q.length=le,q.head&&(q.head.extra_len=le),512&q.flags&&4&q.wrap&&($e[0]=255&le,$e[1]=le>>>8&255,q.check=a(q.check,$e,2,0)),le=0,ue=0}else q.head&&(q.head.extra=null);q.mode=16185;case 16185:if(1024&q.flags&&(ve=q.length,ve>_e&&(ve=_e),ve&&(q.head&&(Ae=q.head.extra_len-q.length,q.head.extra||(q.head.extra=new Uint8Array(q.head.extra_len)),q.head.extra.set(ge.subarray(ce,ce+ve),Ae)),512&q.flags&&4&q.wrap&&(q.check=a(q.check,ge,ve,ce)),_e-=ve,ce+=ve,q.length-=ve),q.length))break e;q.length=0,q.mode=16186;case 16186:if(2048&q.flags){if(_e===0)break e;ve=0;do Ae=ge[ce+ve++],q.head&&Ae&&q.length<65536&&(q.head.name+=String.fromCharCode(Ae));while(Ae&&ve<_e);if(512&q.flags&&4&q.wrap&&(q.check=a(q.check,ge,ve,ce)),_e-=ve,ce+=ve,Ae)break e}else q.head&&(q.head.name=null);q.length=0,q.mode=16187;case 16187:if(4096&q.flags){if(_e===0)break e;ve=0;do Ae=ge[ce+ve++],q.head&&Ae&&q.length<65536&&(q.head.comment+=String.fromCharCode(Ae));while(Ae&&ve<_e);if(512&q.flags&&4&q.wrap&&(q.check=a(q.check,ge,ve,ce)),_e-=ve,ce+=ve,Ae)break e}else q.head&&(q.head.comment=null);q.mode=16188;case 16188:if(512&q.flags){for(;ue<16;){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}if(4&q.wrap&&le!==(65535&q.check)){Z.msg="header crc mismatch",q.mode=P;break}le=0,ue=0}q.head&&(q.head.hcrc=q.flags>>9&1,q.head.done=!0),Z.adler=q.check=0,q.mode=m;break;case 16189:for(;ue<32;){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}Z.adler=q.check=D(le),le=0,ue=0,q.mode=N;case N:if(q.havedict===0)return Z.next_out=Ie,Z.avail_out=Re,Z.next_in=ce,Z.avail_in=_e,q.hold=le,q.bits=ue,T;Z.adler=q.check=1,q.mode=m;case m:if(ne===I||ne===S)break e;case _:if(q.last){le>>>=7&ue,ue-=7&ue,q.mode=M;break}for(;ue<3;){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}switch(q.last=1&le,le>>>=1,ue-=1,3&le){case 0:q.mode=16193;break;case 1:if(re(q),q.mode=v,ne===S){le>>>=2,ue-=2;break e}break;case 2:q.mode=16196;break;case 3:Z.msg="invalid block type",q.mode=P}le>>>=2,ue-=2;break;case 16193:for(le>>>=7&ue,ue-=7&ue;ue<32;){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}if((65535&le)!=(le>>>16^65535)){Z.msg="invalid stored block lengths",q.mode=P;break}if(q.length=65535&le,le=0,ue=0,q.mode=h,ne===S)break e;case h:q.mode=16195;case 16195:if(ve=q.length,ve){if(ve>_e&&(ve=_e),ve>Re&&(ve=Re),ve===0)break e;ye.set(ge.subarray(ce,ce+ve),Ie),_e-=ve,ce+=ve,Re-=ve,Ie+=ve,q.length-=ve;break}q.mode=m;break;case 16196:for(;ue<14;){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}if(q.nlen=257+(31&le),le>>>=5,ue-=5,q.ndist=1+(31&le),le>>>=5,ue-=5,q.ncode=4+(15&le),le>>>=4,ue-=4,q.nlen>286||q.ndist>30){Z.msg="too many length or distance symbols",q.mode=P;break}q.have=0,q.mode=16197;case 16197:for(;q.have<q.ncode;){for(;ue<3;){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}q.lens[Xe[q.have++]]=7&le,le>>>=3,ue-=3}for(;q.have<19;)q.lens[Xe[q.have++]]=0;if(q.lencode=q.lendyn,q.lenbits=7,Je={bits:q.lenbits},je=g(0,q.lens,0,19,q.lencode,0,q.work,Je),q.lenbits=Je.bits,je){Z.msg="invalid code lengths set",q.mode=P;break}q.have=0,q.mode=16198;case 16198:for(;q.have<q.nlen+q.ndist;){for(;We=q.lencode[le&(1<<q.lenbits)-1],xe=We>>>24,Fe=We>>>16&255,qe=65535&We,!(xe<=ue);){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}if(qe<16)le>>>=xe,ue-=xe,q.lens[q.have++]=qe;else{if(qe===16){for(Ye=xe+2;ue<Ye;){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}if(le>>>=xe,ue-=xe,q.have===0){Z.msg="invalid bit length repeat",q.mode=P;break}Ae=q.lens[q.have-1],ve=3+(3&le),le>>>=2,ue-=2}else if(qe===17){for(Ye=xe+3;ue<Ye;){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}le>>>=xe,ue-=xe,Ae=0,ve=3+(7&le),le>>>=3,ue-=3}else{for(Ye=xe+7;ue<Ye;){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}le>>>=xe,ue-=xe,Ae=0,ve=11+(127&le),le>>>=7,ue-=7}if(q.have+ve>q.nlen+q.ndist){Z.msg="invalid bit length repeat",q.mode=P;break}for(;ve--;)q.lens[q.have++]=Ae}}if(q.mode===P)break;if(q.lens[256]===0){Z.msg="invalid code -- missing end-of-block",q.mode=P;break}if(q.lenbits=9,Je={bits:q.lenbits},je=g(1,q.lens,0,q.nlen,q.lencode,0,q.work,Je),q.lenbits=Je.bits,je){Z.msg="invalid literal/lengths set",q.mode=P;break}if(q.distbits=6,q.distcode=q.distdyn,Je={bits:q.distbits},je=g(2,q.lens,q.nlen,q.ndist,q.distcode,0,q.work,Je),q.distbits=Je.bits,je){Z.msg="invalid distances set",q.mode=P;break}if(q.mode=v,ne===S)break e;case v:q.mode=E;case E:if(_e>=6&&Re>=258){Z.next_out=Ie,Z.avail_out=Re,Z.next_in=ce,Z.avail_in=_e,q.hold=le,q.bits=ue,o(Z,Te),Ie=Z.next_out,ye=Z.output,Re=Z.avail_out,ce=Z.next_in,ge=Z.input,_e=Z.avail_in,le=q.hold,ue=q.bits,q.mode===m&&(q.back=-1);break}for(q.back=0;We=q.lencode[le&(1<<q.lenbits)-1],xe=We>>>24,Fe=We>>>16&255,qe=65535&We,!(xe<=ue);){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}if(Fe&&!(240&Fe)){for(Se=xe,De=Fe,ze=qe;We=q.lencode[ze+((le&(1<<Se+De)-1)>>Se)],xe=We>>>24,Fe=We>>>16&255,qe=65535&We,!(Se+xe<=ue);){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}le>>>=Se,ue-=Se,q.back+=Se}if(le>>>=xe,ue-=xe,q.back+=xe,q.length=qe,Fe===0){q.mode=16205;break}if(32&Fe){q.back=-1,q.mode=m;break}if(64&Fe){Z.msg="invalid literal/length code",q.mode=P;break}q.extra=15&Fe,q.mode=16201;case 16201:if(q.extra){for(Ye=q.extra;ue<Ye;){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}q.length+=le&(1<<q.extra)-1,le>>>=q.extra,ue-=q.extra,q.back+=q.extra}q.was=q.length,q.mode=16202;case 16202:for(;We=q.distcode[le&(1<<q.distbits)-1],xe=We>>>24,Fe=We>>>16&255,qe=65535&We,!(xe<=ue);){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}if(!(240&Fe)){for(Se=xe,De=Fe,ze=qe;We=q.distcode[ze+((le&(1<<Se+De)-1)>>Se)],xe=We>>>24,Fe=We>>>16&255,qe=65535&We,!(Se+xe<=ue);){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}le>>>=Se,ue-=Se,q.back+=Se}if(le>>>=xe,ue-=xe,q.back+=xe,64&Fe){Z.msg="invalid distance code",q.mode=P;break}q.offset=qe,q.extra=15&Fe,q.mode=16203;case 16203:if(q.extra){for(Ye=q.extra;ue<Ye;){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}q.offset+=le&(1<<q.extra)-1,le>>>=q.extra,ue-=q.extra,q.back+=q.extra}if(q.offset>q.dmax){Z.msg="invalid distance too far back",q.mode=P;break}q.mode=16204;case 16204:if(Re===0)break e;if(ve=Te-Re,q.offset>ve){if(ve=q.offset-ve,ve>q.whave&&q.sane){Z.msg="invalid distance too far back",q.mode=P;break}ve>q.wnext?(ve-=q.wnext,Ne=q.wsize-ve):Ne=q.wnext-ve,ve>q.length&&(ve=q.length),Ve=q.window}else Ve=ye,Ne=Ie-q.offset,ve=q.length;ve>Re&&(ve=Re),Re-=ve,q.length-=ve;do ye[Ie++]=Ve[Ne++];while(--ve);q.length===0&&(q.mode=E);break;case 16205:if(Re===0)break e;ye[Ie++]=q.length,Re--,q.mode=E;break;case M:if(q.wrap){for(;ue<32;){if(_e===0)break e;_e--,le|=ge[ce++]<<ue,ue+=8}if(Te-=Re,Z.total_out+=Te,q.total+=Te,4&q.wrap&&Te&&(Z.adler=q.check=q.flags?a(q.check,ye,Te,Ie-Te):r(q.check,ye,Te,Ie-Te)),Te=Re,4&q.wrap&&(q.flags?le:D(le))!==q.check){Z.msg="incorrect data check",q.mode=P;break}le=0,ue=0}q.mode=16207;case 16207:if(q.wrap&&q.flags){for(;ue<32;){if(_e===0)break e;_e--,le+=ge[ce++]<<ue,ue+=8}if(4&q.wrap&&le!==(4294967295&q.total)){Z.msg="incorrect length check",q.mode=P;break}le=0,ue=0}q.mode=16208;case 16208:je=k;break e;case P:je=$;break e;case 16210:return K;default:return O}return Z.next_out=Ie,Z.avail_out=Re,Z.next_in=ce,Z.avail_in=_e,q.hold=le,q.bits=ue,(q.wsize||Te!==Z.avail_out&&q.mode<P&&(q.mode<M||ne!==b))&&fe(Z,Z.output,Z.next_out,Te-Z.avail_out),Oe-=Z.avail_in,Te-=Z.avail_out,Z.total_in+=Oe,Z.total_out+=Te,q.total+=Te,4&q.wrap&&Te&&(Z.adler=q.check=q.flags?a(q.check,ye,Te,Z.next_out-Te):r(q.check,ye,Te,Z.next_out-Te)),Z.data_type=q.bits+(q.last?64:0)+(q.mode===m?128:0)+(q.mode===v||q.mode===h?256:0),(Oe===0&&Te===0||ne===b)&&je===A&&(je=ee),je},inflateEnd:Z=>{if(B(Z))return O;let ne=Z.state;return ne.window&&(ne.window=null),Z.state=null,A},inflateGetHeader:(Z,ne)=>{if(B(Z))return O;const q=Z.state;return 2&q.wrap?(q.head=ne,ne.done=!1,A):O},inflateSetDictionary:(Z,ne)=>{const q=ne.length;let ge,ye,ce;return B(Z)?O:(ge=Z.state,ge.wrap!==0&&ge.mode!==N?O:ge.mode===N&&(ye=1,ye=r(ye,ne,q,0),ye!==ge.check)?$:(ce=fe(Z,ne,q,q),ce?(ge.mode=16210,K):(ge.havedict=1,A)))},inflateInfo:"pako inflate (from Nodeca project)"};const H=(Z,ne)=>Object.prototype.hasOwnProperty.call(Z,ne);var de=function(Z){const ne=Array.prototype.slice.call(arguments,1);for(;ne.length;){const q=ne.shift();if(q){if(typeof q!="object")throw new TypeError(q+"must be non-object");for(const ge in q)H(q,ge)&&(Z[ge]=q[ge])}}return Z},me=Z=>{let ne=0;for(let ge=0,ye=Z.length;ge<ye;ge++)ne+=Z[ge].length;const q=new Uint8Array(ne);for(let ge=0,ye=0,ce=Z.length;ge<ce;ge++){let Ie=Z[ge];q.set(Ie,ye),ye+=Ie.length}return q};let we=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{we=!1}const Pe=new Uint8Array(256);for(let Z=0;Z<256;Z++)Pe[Z]=Z>=252?6:Z>=248?5:Z>=240?4:Z>=224?3:Z>=192?2:1;Pe[254]=Pe[254]=1;var ke=Z=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(Z);let ne,q,ge,ye,ce,Ie=Z.length,_e=0;for(ye=0;ye<Ie;ye++)q=Z.charCodeAt(ye),(64512&q)==55296&&ye+1<Ie&&(ge=Z.charCodeAt(ye+1),(64512&ge)==56320&&(q=65536+(q-55296<<10)+(ge-56320),ye++)),_e+=q<128?1:q<2048?2:q<65536?3:4;for(ne=new Uint8Array(_e),ce=0,ye=0;ce<_e;ye++)q=Z.charCodeAt(ye),(64512&q)==55296&&ye+1<Ie&&(ge=Z.charCodeAt(ye+1),(64512&ge)==56320&&(q=65536+(q-55296<<10)+(ge-56320),ye++)),q<128?ne[ce++]=q:q<2048?(ne[ce++]=192|q>>>6,ne[ce++]=128|63&q):q<65536?(ne[ce++]=224|q>>>12,ne[ce++]=128|q>>>6&63,ne[ce++]=128|63&q):(ne[ce++]=240|q>>>18,ne[ce++]=128|q>>>12&63,ne[ce++]=128|q>>>6&63,ne[ce++]=128|63&q);return ne},Ue=(Z,ne)=>{const q=ne||Z.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(Z.subarray(0,ne));let ge,ye;const ce=new Array(2*q);for(ye=0,ge=0;ge<q;){let Ie=Z[ge++];if(Ie<128){ce[ye++]=Ie;continue}let _e=Pe[Ie];if(_e>4)ce[ye++]=65533,ge+=_e-1;else{for(Ie&=_e===2?31:_e===3?15:7;_e>1&&ge<q;)Ie=Ie<<6|63&Z[ge++],_e--;_e>1?ce[ye++]=65533:Ie<65536?ce[ye++]=Ie:(Ie-=65536,ce[ye++]=55296|Ie>>10&1023,ce[ye++]=56320|1023&Ie)}}return((Ie,_e)=>{if(_e<65534&&Ie.subarray&&we)return String.fromCharCode.apply(null,Ie.length===_e?Ie:Ie.subarray(0,_e));let Re="";for(let le=0;le<_e;le++)Re+=String.fromCharCode(Ie[le]);return Re})(ce,ye)},he=(Z,ne)=>{(ne=ne||Z.length)>Z.length&&(ne=Z.length);let q=ne-1;for(;q>=0&&(192&Z[q])==128;)q--;return q<0||q===0?ne:q+Pe[Z[q]]>ne?q:ne},Ge={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Be=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},He=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ke=Object.prototype.toString,{Z_NO_FLUSH:be,Z_FINISH:Le,Z_OK:V,Z_STREAM_END:W,Z_NEED_DICT:ae,Z_STREAM_ERROR:oe,Z_DATA_ERROR:F,Z_MEM_ERROR:C}=y;function R(Z){this.options=de({chunkSize:65536,windowBits:15,to:""},Z||{});const ne=this.options;ne.raw&&ne.windowBits>=0&&ne.windowBits<16&&(ne.windowBits=-ne.windowBits,ne.windowBits===0&&(ne.windowBits=-15)),!(ne.windowBits>=0&&ne.windowBits<16)||Z&&Z.windowBits||(ne.windowBits+=32),ne.windowBits>15&&ne.windowBits<48&&!(15&ne.windowBits)&&(ne.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Be,this.strm.avail_out=0;let q=z.inflateInit2(this.strm,ne.windowBits);if(q!==V)throw new Error(Ge[q]);if(this.header=new He,z.inflateGetHeader(this.strm,this.header),ne.dictionary&&(typeof ne.dictionary=="string"?ne.dictionary=ke(ne.dictionary):Ke.call(ne.dictionary)==="[object ArrayBuffer]"&&(ne.dictionary=new Uint8Array(ne.dictionary)),ne.raw&&(q=z.inflateSetDictionary(this.strm,ne.dictionary),q!==V)))throw new Error(Ge[q])}function j(Z,ne){const q=new R(ne);if(q.push(Z),q.err)throw q.msg||Ge[q.err];return q.result}R.prototype.push=function(Z,ne){const q=this.strm,ge=this.options.chunkSize,ye=this.options.dictionary;let ce,Ie,_e;if(this.ended)return!1;for(Ie=ne===~~ne?ne:ne===!0?Le:be,Ke.call(Z)==="[object ArrayBuffer]"?q.input=new Uint8Array(Z):q.input=Z,q.next_in=0,q.avail_in=q.input.length;;){for(q.avail_out===0&&(q.output=new Uint8Array(ge),q.next_out=0,q.avail_out=ge),ce=z.inflate(q,Ie),ce===ae&&ye&&(ce=z.inflateSetDictionary(q,ye),ce===V?ce=z.inflate(q,Ie):ce===F&&(ce=ae));q.avail_in>0&&ce===W&&q.state.wrap>0&&Z[q.next_in]!==0;)z.inflateReset(q),ce=z.inflate(q,Ie);switch(ce){case oe:case F:case ae:case C:return this.onEnd(ce),this.ended=!0,!1}if(_e=q.avail_out,q.next_out&&(q.avail_out===0||ce===W))if(this.options.to==="string"){let Re=he(q.output,q.next_out),le=q.next_out-Re,ue=Ue(q.output,Re);q.next_out=le,q.avail_out=ge-le,le&&q.output.set(q.output.subarray(Re,Re+le),0),this.onData(ue)}else this.onData(q.output.length===q.next_out?q.output:q.output.subarray(0,q.next_out));if(ce!==V||_e!==0){if(ce===W)return ce=z.inflateEnd(this.strm),this.onEnd(ce),this.ended=!0,!0;if(q.avail_in===0)break}}return!0},R.prototype.onData=function(Z){this.chunks.push(Z)},R.prototype.onEnd=function(Z){Z===V&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=me(this.chunks)),this.chunks=[],this.err=Z,this.msg=this.strm.msg};var Y=R,ie=j,pe=function(Z,ne){return(ne=ne||{}).raw=!0,j(Z,ne)},Me=j,Ce=y,Ee={Inflate:Y,inflate:ie,inflateRaw:pe,ungzip:Me,constants:Ce};t.Inflate=Y,t.constants=Ce,t.default=Ee,t.inflate=ie,t.inflateRaw=pe,t.ungzip=Me,Object.defineProperty(t,"__esModule",{value:!0})})})(pako_inflate_min,pako_inflate_min.exports);var pako_inflate_minExports=pako_inflate_min.exports,pako=getDefaultExportFromCjs(pako_inflate_minExports);function gzipUncompress(d,e){return pako.inflate(d,void 0)}function intToUint(d){return d>>>0}function ulongFromInts(d,e){return d=intToUint(d),e=intToUint(e),bigInt(d).shiftLeft(32).add(bigInt(e))}const boolFalse=+Schema.API.constructors.find(d=>d.predicate==="boolFalse").id,boolTrue=+Schema.API.constructors.find(d=>d.predicate==="boolTrue").id,vector=+Schema.API.constructors.find(d=>d.predicate==="vector").id,gzipPacked=+Schema.MTProto.constructors.find(d=>d.predicate==="gzip_packed").id,sliceMethod="slice";class TLSerialization{constructor(e={}){this.maxLength=2048,this.offset=0,this.mtproto=!1,this.debug=!1,this.maxLength=e.startMaxLength||2048,this.mtproto=e.mtproto||!1,this.createBuffer()}createBuffer(){this.buffer=new ArrayBuffer(this.maxLength),this.intView=new Int32Array(this.buffer),this.byteView=new Uint8Array(this.buffer)}getArray(){const e=new ArrayBuffer(this.offset),t=new Int32Array(e);return t.set(this.intView.subarray(0,this.offset/4)),t}getBuffer(){return this.getArray().buffer}getBytes(e=!0){if(e){const r=new ArrayBuffer(this.offset),s=new Uint8Array(r);return s.set(this.byteView.subarray(0,this.offset)),s}const t=new Array(this.offset);for(let r=0;r<this.offset;++r)t[r]=this.byteView[r];return t}getOffset(){return this.offset}checkLength(e){if(this.offset+e<this.maxLength)return;this.maxLength=Math.ceil(Math.max(this.maxLength*2,this.offset+e+16)/4)*4;const t=this.buffer,r=new Int32Array(t);this.createBuffer(),new Int32Array(this.buffer).set(r)}writeInt(e,t){this.debug&&console.log(">>>",e.toString(16),e,t);const r=this.offset/4;return this.checkLength(4),this.intView[r]=e,this.offset+=4,r}storeInt(e,t){return this.writeInt(e,(t||"")+":int")}storeBool(e,t){e?this.writeInt(boolTrue,(t||"")+":bool"):this.writeInt(boolFalse,(t||"")+":bool")}storeLongP(e,t,r){this.writeInt(t,(r||"")+":long[low]"),this.writeInt(e,(r||"")+":long[high]")}storeLong(e,t){if(Array.isArray(e))return e.length===2?this.storeLongP(e[0],e[1],t):this.storeIntBytes(e,64,t);const r=bigIntToUnsigned(bigInt(e)),{quotient:s,remainder:a}=r.divmod(4294967296),n=s.toJSNumber(),o=a.toJSNumber();this.writeInt(o,(t||"")+":long[low]"),this.writeInt(n,(t||"")+":long[high]")}storeDouble(e,t){const r=new ArrayBuffer(8),s=new Int32Array(r),a=new Float64Array(r);a[0]=e,this.writeInt(s[0],(t||"")+":double[low]"),this.writeInt(s[1],(t||"")+":double[high]")}storeString(e,t){this.debug&&console.log(">>>",e,(t||"")+":string"),e===void 0&&(e="");const r=unescape(encodeURIComponent(e));this.checkLength(r.length+8);const s=r.length;s<=253?this.byteView[this.offset++]=s:(this.byteView[this.offset++]=254,this.byteView[this.offset++]=s&255,this.byteView[this.offset++]=(s&65280)>>8,this.byteView[this.offset++]=(s&16711680)>>16);for(let a=0;a<s;++a)this.byteView[this.offset++]=r.charCodeAt(a);for(;this.offset%4;)this.byteView[this.offset++]=0}storeBytes(e,t){e instanceof ArrayBuffer?e=new Uint8Array(e):e===void 0&&(e=[]),this.debug&&console.log(">>>",bytesToHex(e),(t||"")+":bytes");const r=e.length;for(this.checkLength(r+8),r<=253?this.byteView[this.offset++]=r:(this.byteView[this.offset++]=254,this.byteView[this.offset++]=r&255,this.byteView[this.offset++]=(r&65280)>>8,this.byteView[this.offset++]=(r&16711680)>>16),this.byteView.set(e,this.offset),this.offset+=r;this.offset%4;)this.byteView[this.offset++]=0}storeIntBytes(e,t,r){e instanceof ArrayBuffer&&(e=new Uint8Array(e));const s=e.length;if(t%32||s*8!==t){const a=new Error("Invalid bits: "+t+", "+s);throw console.error(a,e,r),a}this.debug&&console.log(">>>",bytesToHex(e),(r||"")+":int"+t),this.checkLength(s),this.byteView.set(e,this.offset),this.offset+=s}storeRawBytes(e,t){e instanceof ArrayBuffer&&(e=new Uint8Array(e));const r=e.length;this.debug&&console.log(">>>",bytesToHex(e),t||""),this.checkLength(r),this.byteView.set(e,this.offset),this.offset+=r}storeMethod(e,t){const s=(this.mtproto?Schema.MTProto:Schema.API).methods.find(a=>a.method===e);if(!s)throw new Error("No method "+e+" found");return this.storeInt(s.id,e+"[id]"),this.storeBody(t,s,e),s.type}storeObject(e,t,r){switch(t){case"#":e||(e=0);case"int":return this.storeInt(e,r);case"long":return this.storeLong(e,r);case"int128":return this.storeIntBytes(e,128,r);case"int256":return this.storeIntBytes(e,256,r);case"int512":return this.storeIntBytes(e,512,r);case"string":return this.storeString(e,r);case"bytes":return this.storeBytes(e,r);case"double":return this.storeDouble(e,r);case"Bool":return this.storeBool(e,r);case"true":return}if(Array.isArray(e)){if(t.substr(0,6)==="Vector")this.writeInt(vector,r+"[id]");else if(t.substr(0,6)!=="vector")throw new Error("Invalid vector type "+t);const p=t.substr(7,t.length-8);this.writeInt(e.length,r+"[count]");for(let c=0;c<e.length;++c)this.storeObject(e[c],p,r+"["+c+"]");return!0}else if(t.substr(0,6).toLowerCase()==="vector")throw new Error("Invalid vector object");if(!isObject(e))throw new Error("Invalid object for type "+t);const s=this.mtproto?Schema.MTProto:Schema.API,a=e._;let n=!1;const o=s.constructors.find(p=>p.predicate===a);if((n=t.charAt(0)==="%")&&(t=t.substr(1)),!o)throw new Error("No predicate "+a+" found");return a===t&&(n=!0),n||this.writeInt(o.id,r+"["+a+"][id]"),this.storeBody(e,o,r+"["+a+"]"),o.type}storeBody(e,t,r){const s=e.pFlags||e;let a;for(const n of t.params){let o=n.type;if(o.indexOf("?")!==-1){const f=o.split("?"),l=f[0].split(".");if(f[1]==="true"?s?.[n.name]:e[n.name]!==void 0)a[l[0]].flags|=1<<+l[1];else continue;o=f[1]}const p=o==="#";p&&((a??(a={}))[n.name]={flags:0});const c=this.storeObject(p?a[n.name].flags:e[n.name],o,r+"["+n.name+"]");p&&(a[n.name].offset=c)}for(const n in a){const{flags:o,offset:p}=a[n];this.intView[p]=o}}}class TLDeserialization{constructor(e,t={}){this.offset=0,this.mtproto=!1,e instanceof ArrayBuffer?(this.buffer=e,this.intView=new Int32Array(e),this.byteView=new Uint8Array(this.buffer)):(this.buffer=e.buffer,this.intView=new Int32Array(e.buffer,e.byteOffset,e.byteLength/4),this.byteView=e),this.override=t.override||{},this.mtproto=!!t.mtproto,this.debug=t.debug!==void 0?t.debug:!1}readInt(e){if(this.byteView.length-this.offset<4)throw console.error(this.byteView,this.offset),new Error("Nothing to fetch: "+e);const t=this.intView[this.offset/4];return this.debug&&console.log("<<<",t.toString(16),t,e,this.byteView.slice(this.offset-16,this.offset+16),bytesToHex(this.byteView.slice(this.offset-16,this.offset+16))),this.offset+=4,t}fetchInt(e){return this.readInt((e||"")+":int")}fetchDouble(e){const t=new ArrayBuffer(8),r=new Int32Array(t),s=new Float64Array(t);return r[0]=this.readInt((e||"")+":double[low]"),r[1]=this.readInt((e||"")+":double[high]"),s[0]}fetchLong(e){const t=this.readInt((e||"")+":long[low]"),r=this.readInt((e||"")+":long[high]");let s=ulongFromInts(r,t);return this.mtproto||(s=bigIntToSigned(s)),!this.mtproto&&safeBigInt.greaterOrEquals(s.abs())?s.toJSNumber():s.toString(10)}fetchBool(e){const t=this.readInt((e||"")+":bool");return t===boolTrue?!0:t===boolFalse?!1:(this.offset-=4,this.fetchObject("Object",e))}fetchString(e){let t=this.byteView[this.offset++];t===254&&(t=this.byteView[this.offset++]|this.byteView[this.offset++]<<8|this.byteView[this.offset++]<<16);let r="";for(let a=0;a<t;++a)r+=String.fromCharCode(this.byteView[this.offset++]);for(;this.offset%4;)++this.offset;let s;try{s=decodeURIComponent(escape(r))}catch{s=r}return this.debug&&console.log("<<<",s,(e||"")+":string"),s}fetchBytes(e){let t=this.byteView[this.offset++];t===254&&(t=this.byteView[this.offset++]|this.byteView[this.offset++]<<8|this.byteView[this.offset++]<<16);const r=this.byteView[sliceMethod](this.offset,this.offset+t);for(this.offset+=t;this.offset%4;)++this.offset;return this.debug&&console.log("<<<",bytesToHex(r),(e||"")+":bytes"),r}fetchIntBytes(e,t=!0,r){if(e%32)throw new Error("Invalid bits: "+e);const s=e/8;if(t){const n=this.byteView[sliceMethod](this.offset,this.offset+s);return this.offset+=s,n}const a=new Array(s);for(let n=0;n<s;++n)a[n]=this.byteView[this.offset++];return this.debug&&console.log("<<<",bytesToHex(a),(r||"")+":int"+e),a}fetchRawBytes(e,t=!0,r){if(e===!1&&(e=this.readInt((r||"")+"_length"),e>this.byteView.byteLength))throw new Error("Invalid raw bytes length: "+e+", buffer len: "+this.byteView.byteLength);if(t){const a=new Uint8Array(e);return a.set(this.byteView[sliceMethod](this.offset,this.offset+e)),this.offset+=e,a}const s=new Array(e);for(let a=0;a<e;++a)s[a]=this.byteView[this.offset++];return this.debug&&console.log("<<<",bytesToHex(s),r||""),s}fetchVector(e,t){const r=this.readInt(t+"[count]"),s=new Array(r);if(r>0){const a=e.substr(7,e.length-8);for(let n=0;n<r;++n)s[n]=this.fetchObject(a,t+"["+n+"]")}return s}fetchObject(e,t){switch(e){case"#":case"int":return this.fetchInt(t);case"long":return this.fetchLong(t);case"int128":return this.fetchIntBytes(128,!0,t);case"int256":return this.fetchIntBytes(256,!0,t);case"int512":return this.fetchIntBytes(512,!0,t);case"string":return this.fetchString(t);case"bytes":return this.fetchBytes(t);case"double":return this.fetchDouble(t);case"Bool":return this.fetchBool(t);case"true":return!0}if(t=t||e||"Object",e.charAt(0)==="v"&&e.substr(1,5)==="ector")return this.fetchVector(e,t);const r=this.mtproto?Schema.MTProto:Schema.API;let s=null,a=!1;if(e.charAt(0)==="%"){const c=e.substr(1);if(s=r.constructors.find(f=>f.type===c),!s)throw new Error("Constructor not found for type: "+e)}else{const c=this.readInt(t+"[id]");if(c===gzipPacked){const u=this.fetchBytes(t+"[packed_string]"),g=gzipUncompress(u);return new TLDeserialization(g).fetchObject(e,t)}if(c===vector)return this.fetchVector(e,t);let f=r.constructorsIndex;if(!f){r.constructorsIndex=f={};for(let u=0,g=r.constructors.length;u<g;++u)f[r.constructors[u].id]=u}const l=f[c];if(l!==void 0&&(s=r.constructors[l]),!s&&this.mtproto){const u=Schema.API;for(let g=0,y=u.constructors.length;g<y;++g)if(+u.constructors[g].id===c){s=u.constructors[g],delete this.mtproto,a=!0;break}}if(!s){console.error("Constructor not found:",c);let u,g;try{u=this.fetchInt(t),g=this.fetchInt(t)}catch{}throw new Error("Constructor not found: "+c+" "+u+" "+g+" "+t)}}const n=s.predicate,o={_:n},p=(this.mtproto?"mt_":"")+n;if(this.override[p])this.override[p](o,t+"["+n+"]");else{let c={};for(let f=0,l=s.params.length;f<l;++f){const u=s.params[f];let g=u.type;const y=g==="#";y&&(o.pFlags??(o.pFlags={}),(c??(c={}))[u.name]=0);const b=g.indexOf("?")!==-1;if(b){const S=g.split("?"),A=S[0].split(".");if(!(c[A[0]]&1<<+A[1]))continue;g=S[1]}const I=this.fetchObject(g,t+"["+n+"]["+u.name+"]");b&&g==="true"?o.pFlags[u.name]=I:(y?c:o)[u.name]=I}}return a&&(this.mtproto=!0),e==="JSONValue"?this.formatJSONValue(o):o}formatJSONValue(e){if(!e._)return e;switch(e._){case"jsonNull":return null;case"jsonObject":{const t={},r=e.value;for(let s=0,a=r.length;s<a;++s){const n=r[s];t[n.key]=this.formatJSONValue(n.value)}return t}default:return e.value}}getOffset(){return this.offset}setOffset(e){this.offset=e}}MOUNT_CLASS_TO.TLDeserialization=TLDeserialization;MOUNT_CLASS_TO.TLSerialization=TLSerialization;function addPadding(d,e=16,t,r=!1,s=!1){const a=d.byteLength||d.length,n=r?e-a:e-a%e;if(n>0&&n<e){const o=new Uint8Array(n);if(t)for(let p=0;p<n;++p)o[p]=0;else randomize(o);return d instanceof ArrayBuffer?(s?bufferConcats(o,d):bufferConcats(d,o)).buffer:d instanceof Uint8Array?s?bufferConcats(o,d):bufferConcats(d,o):s?[...o].concat(d):d.concat([...o])}return d}function longToBytes(d){const e=bigIntToBytes(bigInt(d)).reverse();return addPadding(e,8,!0,!1,!1)}function convertToUint8Array(d){return d instanceof Uint8Array?d:typeof d=="string"?new TextEncoder().encode(d):new Uint8Array(d)}function sortLongsArray(d){return d.map(e=>bigInt(e)).sort((e,t)=>e.compare(t)).map(e=>e.toString(10))}const HTTP_POLLING_NEEDED_FOR_FILES=!0,CHECK_CONNECTION_MAX_PERIOD=15,DRAIN_TIMEOUT=1e4,delays={client:{disconnectDelayMin:7,disconnectDelayMax:20,pingInterval:2e3,pingMaxTime:5,connectionTimeout:5e3},file:{disconnectDelayMin:10,disconnectDelayMax:24,pingInterval:3e3,pingMaxTime:7,connectionTimeout:7500}},RESEND_OPTIONS={notContentRelated:!0,noSchedule:!0},HTTP_WAIT_OPTIONS={notContentRelated:!0,canCleanup:!0,longPoll:!0};let invokeAfterMsgConstructor,networkerTempId=0;class MTPNetworker{constructor(e,t,r,s,a,n,o={}){this.networkerFactory=e,this.timeManager=t,this.dcId=r,this.authKey=s,this.authKeyId=a,this.lastServerMessages=new Set,this.sentMessages={},this.pendingMessages={},this.pendingAcks=[],this.pendingResendReq=[],this.sentResendReq=new Map,this.nextReq=0,this.checkConnectionPeriod=0,this.offline=!1,this.isOnline=!1,this.status=ConnectionStatus.Closed,this.lastResponseTime=0,this.debug=Modes.debug,this.activeRequests=0,this.sendPingDelayDisconnect=()=>{if(this.pingDelayDisconnectDeferred||!this.transport||!this.transport.connected)return;const c=this.pingDelayDisconnectDeferred=deferredPromise(),f=this.delays,l=this.delays.pingMaxTime,u=Math.min(this.lastPingTime??0,l),g=Math.round(f.disconnectDelayMin+u/l*(f.disconnectDelayMax-f.disconnectDelayMin)),y=g*1e3,b=this.lastPingStartTime=Date.now(),I=this.lastPingDelayDisconnectId=randomLong(),S={notContentRelated:!0,canCleanup:!0};this.wrapMtpCall("ping_delay_disconnect",{ping_id:I,disconnect_delay:g},S);const A=this.log.bindPrefix("sendPingDelayDisconnect");A.debug(`ping, timeout=${y}, lastPingTime=${this.lastPingTime}, msgId=${S.messageId}, pingId=${I}`);const k=ctx.setTimeout(c.reject.bind(c),y),T=K=>{clearTimeout(k);const ee=Date.now()-b;if(this.lastPingTime=ee/1e3,A.debug(`pong, reason='${K}', time=${u}, msgId=${S.messageId}`),ee>y)throw void 0;return pause(Math.max(0,this.delays.pingInterval-ee))},O=()=>{clearTimeout(k);const K=this.transport;this.pingDelayDisconnectDeferred!==c||!K?.connection||(A.error("catch, closing connection",this.lastPingTime,S.messageId),K.connection.close())},$=()=>{this.pingDelayDisconnectDeferred===c&&(this.pingDelayDisconnectDeferred=void 0,this.sendPingDelayDisconnect())};c.then(T).catch(O).finally($)},this.checkLongPoll=()=>{if(this.isFileNetworker&&!HTTP_POLLING_NEEDED_FOR_FILES)return;const c=this.log.bindPrefix("checkLongPoll");if(this.offline||this.longPollPending&&Date.now()<this.longPollPending||this.isStopped()){c("no lp this time");return}c("check",this.longPollPending);const f=this.cleanupSent();sessionStorage.get("dc").then(l=>{if(f&&(l!==this.dcId||this.sleepAfter&&Date.now()>this.sleepAfter)){c.warn("send long-poll for DC is delayed",this.sleepAfter);return}this.sendLongPoll()})},this.checkConnection=c=>{const f=this.log.bindPrefix("checkConnection");if(f("check connection",c),this.clearCheckConnectionTimeout(),!this.transport){f.warn("no transport for checkConnection");return}const l=new TLSerialization({mtproto:!0}),u=randomLong();l.storeMethod("ping",{ping_id:u});const g={msg_id:this.timeManager.generateId(),seq_no:this.generateSeqNo(!0),body:l.getBytes(!0)};this.offline&&this.setConnectionStatus(ConnectionStatus.Connecting),this.sendEncryptedRequest(g).then(()=>{f("got ping"),this.toggleOffline(!1)},()=>{f("still error, delay",this.checkConnectionPeriod*1e3),this.checkConnectionTimeout=ctx.setTimeout(()=>this.checkConnection("from failed checkConnection request"),this.checkConnectionPeriod*1e3|0),this.checkConnectionPeriod=Math.min(CHECK_CONNECTION_MAX_PERIOD,this.checkConnectionPeriod*1.5)})},this.authKeyUint8=convertToUint8Array(this.authKey),this.serverSalt=convertToUint8Array(n),this.isFileUpload=!!o.fileUpload,this.isFileDownload=!!o.fileDownload,this.isFileNetworker=this.isFileUpload||this.isFileDownload,this.delays=this.isFileNetworker?delays.file:delays.client;const p=this.isFileUpload?"-U":this.isFileDownload?"-D":"";this.name="NET-"+r+p,this.log=logger(this.name+(p?"":"-C")+"-"+networkerTempId++,LogTypes.Log|LogTypes.Error|LogTypes.Warn|(this.debug?LogTypes.Debug:0)),this.log("constructor"),this.updateSession()}updateSession(){this.seqNo=0,this.prevSessionId=this.sessionId,this.sessionId=randomize(new Uint8Array(8))}updateSentMessage(e){const t=this.log.bindPrefix("updateSentMessage"),r=this.sentMessages[e];if(!r)return t.error("no sentMessage",e),!1;if(t("updating",r),delete this.sentMessages[e],r.container){let s=!1;if(forEachReverse(r.inner,(a,n)=>{const o=this.updateSentMessage(a);o?r.inner[n]=o.msg_id:(r.inner.splice(n,1),s=!0)}),s&&!r.inner.length){t("deleted container",r);return}}return r.msg_id=this.timeManager.generateId(),r.seq_no=this.generateSeqNo(r.notContentRelated),t("old and new",e,r.msg_id),this.sentMessages[r.msg_id]=r,r}generateSeqNo(e){let t=this.seqNo*2;return e||(t++,this.seqNo++),t}wrapMtpCall(e,t,r){const s=new TLSerialization({mtproto:!0});s.storeMethod(e,t);const a=this.timeManager.generateId(),n=this.generateSeqNo(),o={msg_id:a,seq_no:n,body:s.getBytes(!0),humanReadable:e};return Modes.debug&&this.log("MT call",e,t,a,n),this.pushMessage(o,r)}wrapMtpMessage(e,t){const r=new TLSerialization({mtproto:!0});r.storeObject(e,"Object");const s=this.timeManager.generateId(),a=this.generateSeqNo(t.notContentRelated),n={msg_id:s,seq_no:a,body:r.getBytes(!0),humanReadable:e._};return Modes.debug&&this.log("MT message",e,s,a),this.pushMessage(n,t)}wrapApiCall(e,t={},r={}){const s=this.log.bindPrefix("wrapApiCall"),a=new TLSerialization(r);if(!this.connectionInited){s("adding invokeWithLayer");const c=Schema.API.methods.find(l=>l.method==="invokeWithLayer");if(!c)throw new Error("no invokeWithLayer!");a.storeInt(+c.id,"invokeWithLayer"),a.storeInt(Schema.layer,"layer");const f=Schema.API.methods.find(l=>l.method==="initConnection");if(!f)throw new Error("no initConnection!");a.storeInt(+f.id,"initConnection"),a.storeInt(0,"flags"),a.storeInt(App.id,"api_id"),a.storeString(getEnvironment().USER_AGENT||"Unknown UserAgent","device_model"),a.storeString(navigator.platform||"Unknown Platform","system_version"),a.storeString(App.version+(App.isMainDomain?" "+App.suffix:""),"app_version"),a.storeString(navigator.language||"en","system_lang_code"),a.storeString(App.langPack,"lang_pack"),a.storeString(this.networkerFactory.language,"lang_code")}if(r.afterMessageId){if(invokeAfterMsgConstructor===void 0){const c=Schema.API.methods.find(f=>f.method==="invokeAfterMsg");invokeAfterMsgConstructor=c?+c.id:0}invokeAfterMsgConstructor?(s("store invokeAfterMsg"),a.storeInt(invokeAfterMsgConstructor,"invokeAfterMsg"),a.storeLong(r.afterMessageId,"msg_id")):s.error("no invokeAfterMsg")}r.resultType=a.storeMethod(e,t);const n=this.timeManager.generateId(),o=this.generateSeqNo(),p={msg_id:n,seq_no:o,body:a.getBytes(!0),isAPI:!0,humanReadable:e};return s("call",e,p,t,r),this.pushMessage(p,r)}changeTransport(e){const t=this.transport;t&&(t.destroy(),this.clearNextReq(),this.connectionInited=!1,this.longPollInterval&&(clearInterval(this.longPollInterval),this.longPollInterval=void 0),this.clearCheckConnectionTimeout()),this.log("change transport",e,t),this.clearPingDelayDisconnect(),this.transport=e,e&&(e.networker=this,e instanceof HTTP&&((!this.isFileNetworker||HTTP_POLLING_NEEDED_FOR_FILES)&&(this.longPollInterval=ctx.setInterval(this.checkLongPoll,1e4),this.checkLongPoll()),this.checkConnection("changed transport")),e.connection&&e.connected&&this.setConnectionStatus(ConnectionStatus.Connected),this.resend())}destroy(){this.log("destroy")}forceReconnectTimeout(){this.transport.reconnect?this.transport.reconnect():this.resend()}forceReconnect(){this.transport.forceReconnect?this.transport.forceReconnect():this.checkConnection("force reconnect")}clearPingDelayDisconnect(){const e=this.pingDelayDisconnectDeferred;this.pingDelayDisconnectDeferred=void 0,this.lastPingDelayDisconnectId=void 0,e&&e.reject()}sendLongPoll(){const e=this.log.bindPrefix("sendLongPoll");if(this.sendingLongPoll){e("already sending");return}this.sendingLongPoll=!0;const t=25e3;this.longPollPending=Date.now()+t,e("send",this.longPollPending),this.wrapMtpCall("http_wait",{max_delay:500,wait_after:150,max_wait:t},{...HTTP_WAIT_OPTIONS,noResponse:!0}).then(()=>{e("success"),this.longPollPending=void 0,setTimeout(this.checkLongPoll,0)},r=>{e("failed",r)}).finally(()=>{this.sendingLongPoll=void 0})}clearCheckConnectionTimeout(){this.checkConnectionTimeout&&(clearTimeout(this.checkConnectionTimeout),this.checkConnectionTimeout=void 0)}toggleOffline(e){if(this.offline!==e)if(this.offline=e,this.clearCheckConnectionTimeout(),e){this.clearNextReq(),this.checkConnectionPeriod<1.5&&(this.checkConnectionPeriod=0);const t=this.checkConnectionPeriod*1e3|0;this.checkConnectionRetryAt=Date.now()+t,this.setConnectionStatus(ConnectionStatus.Closed,this.checkConnectionRetryAt),this.checkConnectionTimeout=ctx.setTimeout(()=>this.checkConnection("from toggleOffline"),t),this.checkConnectionPeriod=Math.min(CHECK_CONNECTION_MAX_PERIOD,(1+this.checkConnectionPeriod)*1.5)}else this.onTransportOpen(),this.checkLongPoll();else this.setConnectionStatus(e?ConnectionStatus.Closed:ConnectionStatus.Connected,e?this.checkConnectionRetryAt:void 0)}handleSentEncryptedRequestHTTP(e,t,r){e.then(async s=>(this.toggleOffline(!1),await this.onTransportData(s),this.checkLongPoll(),this.checkConnectionPeriod=Math.max(1.1,Math.sqrt(this.checkConnectionPeriod)),!0),s=>(this.log.error("encrypted request failed",s,t),this.pushResend(t.msg_id),this.toggleOffline(!0),!1)).then(s=>{const a=this.sentMessages;r.forEach(n=>{const o=a[n];if(o){const{deferred:p}=o;delete a[n],delete this.pendingMessages[n],s?p.resolve():p.reject()}})})}pushMessage(e,t){let r;return(!t.notContentRelated||t.noResponse)&&(r=deferredPromise()),this.sentMessages[e.msg_id]=Object.assign(e,t,r?{deferred:r}:void 0),this.pendingMessages[e.msg_id]=0,t.noSchedule||this.scheduleRequest(),isObject(t)&&(t.messageId=e.msg_id),r}attachPromise(e,t){const r=setTimeout(()=>{this.lastResponseTime&&Date.now()-this.lastResponseTime<this.delays.connectionTimeout||(this.log.error("timeout",t),this.isOnline&&this.setConnectionStatus(ConnectionStatus.TimedOut))},this.delays.connectionTimeout);e.catch(noop$2).finally(()=>{clearTimeout(r),this.setConnectionStatus(ConnectionStatus.Connected),--this.activeRequests,this.setDrainTimeout()}),++this.activeRequests,this.onDrainTimeout&&(clearTimeout(this.onDrainTimeout),this.onDrainTimeout=void 0)}setDrainTimeout(){!this.activeRequests&&this.onDrain&&!this.onDrainTimeout&&(this.onDrainTimeout=ctx.setTimeout(()=>{this.onDrainTimeout=void 0,this.log("drain"),this.onDrain()},DRAIN_TIMEOUT))}setConnectionStatus(e,t,r=!0){const s=e===ConnectionStatus.Connected,a=this.status!==e;this.isOnline=s,this.status=e,a&&(this.networkerFactory.onConnectionStatusChange&&this.networkerFactory.onConnectionStatusChange({_:"networkerStatus",status:e,dcId:this.dcId,name:this.name,isFileNetworker:this.isFileNetworker,isFileDownload:this.isFileDownload,isFileUpload:this.isFileUpload,retryAt:t}),this.isOnline&&r&&this.scheduleRequest(),this.transport?.connection&&(this.clearPingDelayDisconnect(),this.sendPingDelayDisconnect()))}onTransportOpen(){this.setConnectionStatus(ConnectionStatus.Connected),this.cleanupSent(),this.resend()}pushResend(e,t=100){const r=this.log.bindPrefix("pushResend"),s=this.sentMessages[e];if(!s){r.warn("no sentMessage",e);return}const a=t?Date.now()+t:0;if(s.container){for(const n of s.inner)this.pushResend(n,t);r("deleting container",e),delete this.sentMessages[e]}else{if(this.pendingMessages[e]!==void 0&&this.pendingMessages[e]<=a){r("already pending",e);return}this.pendingMessages[e]=a}s.acked&&r.error("acked message?",s),r("push",s,t),this.scheduleRequest(t)}async getMsgKey(e,t){const r=t?0:8,s=bufferConcats(this.authKeyUint8.subarray(88+r,88+r+32),e),a=await cryptoMessagePort.invokeCrypto("sha256",s);return new Uint8Array(a).subarray(8,24)}async getAesKeyIv(e,t){const r=t?0:8,s=new Uint8Array(52),a=new Uint8Array(52),n=[];s.set(e,0),s.set(this.authKeyUint8.subarray(r,r+36),16),n.push(cryptoMessagePort.invokeCrypto("sha256",s)),a.set(this.authKeyUint8.subarray(40+r,40+r+36),0),a.set(e,36),n.push(cryptoMessagePort.invokeCrypto("sha256",a));const o=await Promise.all(n),p=new Uint8Array(32),c=new Uint8Array(32),f=new Uint8Array(o[0]),l=new Uint8Array(o[1]);return p.set(f.subarray(0,8)),p.set(l.subarray(8,24),8),p.set(f.subarray(24,32),24),c.set(l.subarray(0,8)),c.set(f.subarray(8,24),8),c.set(l.subarray(24,32),24),[p,c]}isStopped(){return this.networkerFactory.akStopped&&!this.isFileNetworker}performScheduledRequest(){const e=this.log.bindPrefix("performScheduledRequest");if(this.isStopped())return e("is stopped"),!1;let t=!1,r,s;if(r=s=!1,this.pendingAcks.length){const u=this.pendingAcks.splice(0,Math.min(8192,this.pendingAcks.length));this.wrapMtpMessage({_:"msgs_ack",msg_ids:u},{canCleanup:!0,notContentRelated:!0,noSchedule:!0}),e.debug("acking messages",u),this.pendingAcks.length&&(t=!0)}const a=this.pendingResendReq.length;if(a){const u=this.pendingResendReq.splice(0,Math.min(8192,a)),g={...RESEND_OPTIONS,resending:new Set(u)};this.wrapMtpMessage({_:"msg_resend_req",msg_ids:u},g);const y=this.sentMessages[g.messageId];u.forEach(b=>{this.sentResendReq.set(b,y)}),e.debug("resending requests",g.messageId,u),r=!0,this.pendingResendReq.length&&(t=!0)}let n;const o=[];let p=0;const c=sortLongsArray(Object.keys(this.pendingMessages));for(const u of c){const g=this.sentMessages[u];if(g?.body){const y=g.body.length+32;if(p+y>655360&&(e.warn("length overflow",g,o),t=!0,n))break;o.push(g),p+=y,g.isAPI?r=!0:g.longPoll&&(s=!0),n=g}else e.error("no body",g,u);delete this.pendingMessages[u]}if(this.transport instanceof HTTP&&r&&!s){const u={...HTTP_WAIT_OPTIONS,noSchedule:!0};this.wrapMtpCall("http_wait",{max_delay:500,wait_after:150,max_wait:3e3},u);const g=this.sentMessages[u.messageId];o.push(g),delete this.pendingMessages[g.msg_id],e("appended http_wait",g.msg_id)}if(!o.length){e("no messages to send");return}let f;if(f=o.filter(u=>u.noResponse).map(u=>u.msg_id),o.length>1){const u=this.generateContainerMessage(p,o);n=u.messageWithBody,this.sentMessages[n.msg_id]=u.message}else this.sentMessages[n.msg_id]=n;const l=this.sendEncryptedRequest(n);this.transport instanceof HTTP&&this.handleSentEncryptedRequestHTTP(l,n,f),this.cleanupSent(),t&&(e("scheduling next request because of overflow"),this.scheduleRequest())}generateContainerMessage(e,t){const r=new TLSerialization({mtproto:!0,startMaxLength:e+64});r.storeInt(1945237724,"CONTAINER[id]"),r.storeInt(t.length,"CONTAINER[count]");const s=t.map((n,o)=>(r.storeLong(n.msg_id,"CONTAINER["+o+"][msg_id]"),r.storeInt(n.seq_no,"CONTAINER["+o+"][seq_no]"),r.storeInt(n.body.length,"CONTAINER["+o+"][bytes]"),r.storeRawBytes(n.body,"CONTAINER["+o+"][body]"),n.msg_id)),a={msg_id:this.timeManager.generateId(),seq_no:this.generateSeqNo(!0),container:!0,inner:s,notContentRelated:!0};return this.log.warn("container",a.msg_id,a.seq_no,s),{message:a,messageWithBody:Object.assign({body:r.getBytes(!0)},a)}}async getEncryptedMessage(e){const t=await this.getMsgKey(e,!0),r=await this.getAesKeyIv(t,!0);return{bytes:await cryptoMessagePort.invokeCrypto("aes-encrypt",e,r[0],r[1]),msgKey:t}}async getDecryptedMessage(e,t){const r=await this.getAesKeyIv(e,!1);return cryptoMessagePort.invokeCrypto("aes-decrypt",t,r[0],r[1])}async getEncryptedOutput(e){const t=new TLSerialization({startMaxLength:e.body.length+2048});t.storeIntBytes(this.serverSalt,64,"salt"),t.storeIntBytes(this.sessionId,64,"session_id"),t.storeLong(e.msg_id,"message_id"),t.storeInt(e.seq_no,"seq_no"),t.storeInt(e.body.length,"message_data_length"),t.storeRawBytes(e.body,"message_data");const r=t.getBuffer(),s=16-t.getOffset()%16+16*(1+nextRandomUint(8)%5),a=randomize(new Uint8Array(s)),n=bufferConcats(r,a),o=await this.getEncryptedMessage(n),p=new TLSerialization({startMaxLength:o.bytes.length+256});return p.storeIntBytes(this.authKeyId,64,"auth_key_id"),p.storeIntBytes(o.msgKey,128,"msg_key"),p.storeRawBytes(o.bytes,"encrypted_data"),p.getBytes(!0)}async sendEncryptedRequest(e){const t=this.log.bindPrefix("sendEncryptedRequest"),r=await this.getEncryptedOutput(e);this.transport||t.error("trying to send something when offline",this.transport,this),t.debug("sending",e,[e.msg_id].concat(e.inner||[]),r.length);const s=this.transport?this.transport.send(r):Promise.reject({});if(!(this.transport instanceof HTTP))return s;const a={code:406,type:"NETWORK_BAD_RESPONSE",transport:this.transport};return s.then(n=>{if(!n?.byteLength)throw a;return n},n=>{throw!n.message&&!n.type&&(n=Object.assign(a,{type:"NETWORK_BAD_REQUEST",originalError:n})),n})}async onTransportData(e,t=Date.now()){const r=await this.parseResponse(e);this.processMessage(r.response,r.messageId,r.sessionId,t)}async parseResponse(e){this.lastResponseTime=Date.now();let t=new TLDeserialization(e);const r=t.fetchIntBytes(64,!0,"auth_key_id");if(!bytesCmp(r,this.authKeyId))throw new Error("[MT] Invalid server auth_key_id: "+bytesToHex(r));const s=t.fetchIntBytes(128,!0,"msg_key"),a=t.fetchRawBytes(e.byteLength-t.getOffset(),!0,"encrypted_data"),n=await this.getDecryptedMessage(s,a),o=await this.getMsgKey(n,!1);if(!bytesCmp(s,o))throw this.log.warn("[MT] msg_keys",s,o),this.updateSession(),new Error("[MT] server msgKey mismatch, updating session");t=new TLDeserialization(n,{mtproto:!0}),t.fetchIntBytes(64,!0,"salt");const p=t.fetchIntBytes(64,!0,"session_id"),c=t.fetchLong("message_id");if(!bytesCmp(p,this.sessionId)&&(!this.prevSessionId||!bytesCmp(p,this.prevSessionId)))throw this.log.warn("sessions",p,this.sessionId,this.prevSessionId,n),new Error("[MT] Invalid server session_id: "+bytesToHex(p));const f=t.fetchInt("seq_no"),l=n.byteLength,u=t.fetchInt("message_data[length]");let g=t.getOffset();if(u%4||u>l-g)throw new Error("[MT] Invalid body length: "+u);const y=t.fetchRawBytes(u,!0,"message_data");g=t.getOffset();const b=l-g;if(b<12||b>1024)throw new Error("[MT] Invalid padding length: "+b);return{response:this.parseResponseMessageBody(y),messageId:c,sessionId:p,seqNo:f}}parseResponseMessageBody(e){const t=new TLDeserialization(e,{mtproto:!0,override:{mt_message:(r,s)=>{r.msg_id=t.fetchLong(s+"[msg_id]"),r.seqno=t.fetchInt(s+"[seqno]"),r.bytes=t.fetchInt(s+"[bytes]");const a=t.getOffset();try{r.body=t.fetchObject("Object",s+"[body]")}catch(n){this.log.error("parse error",n.message,n.stack),r.body={_:"parse_error",error:n}}t.getOffset()!==a+r.bytes&&t.setOffset(a+r.bytes)},mt_rpc_result:(r,s)=>{r.req_msg_id=t.fetchLong(s+"[req_msg_id]");const a=this.sentMessages[r.req_msg_id],n=a&&a.resultType||"Object";r.req_msg_id&&!a||(r.result=t.fetchObject(n,s+"[result]"))}}});return t.fetchObject("","INPUT")}applyServerSalt(e){const t=longToBytes(e);sessionStorage.set({["dc"+this.dcId+"_server_salt"]:bytesToHex(t)}),this.serverSalt=new Uint8Array(t)}clearNextReq(){const e=this.log.bindPrefix("clearNextReq").debug;if(!this.nextReq){e("nothing to clear");return}this.nextReqTimeout&&(e("clear"),clearTimeout(this.nextReqTimeout),this.nextReqTimeout=0),this.nextReq=0}scheduleRequest(e){const t=this.log.bindPrefix("scheduleRequest").debug;this.transport instanceof HTTP&&(this.offline&&this.checkConnection("forced schedule"),e||(e=0));const r=Date.now()+(e||0);if(this.nextReq&&(e===void 0||this.nextReq<=r)){t("already has nextReq",this.nextReq,r);return}t("delay",e);const s=()=>{if(a&&t("timeout delay",performance.now()-a),this.clearNextReq(),this.transport instanceof HTTP&&this.offline){t("cancel scheduled");return}this.performScheduledRequest()};let a;e!==void 0?(a=performance.now(),this.nextReqTimeout&&(clearTimeout(this.nextReqTimeout),this.nextReqTimeout=0),this.nextReq=r,this.nextReqTimeout=ctx.setTimeout(s,e)):s()}ackMessage(e){this.pendingAcks.push(e);let t;this.transport instanceof HTTP&&(t=3e4),this.scheduleRequest(t)}processResentReqMessage(e){const t=this.sentResendReq.get(e);t&&(t.resending.delete(e),t.resending.size||delete this.sentMessages[t.msg_id],this.sentResendReq.delete(e))}reqResend(e){this.log.debug("req resend",e),this.pendingResendReq.includes(e)||this.pendingResendReq.push(e),this.scheduleRequest(100)}cleanupSent(){const e=this.log.bindPrefix("cleanupSent",this.debug?LogTypes.Log:LogTypes.None);let t=!1;const r=this.sentMessages;return e.group("start"),Object.keys(r).forEach(s=>{const a=r[s];if(a.canCleanup&&this.pendingMessages[s]===void 0)e("clean canCleanup",s),delete r[s];else if(a.container){for(const n of a.inner)if(r[n]){e(`clean failed, found item=${n} in container=${s}`),t=!0;return}e("clean container",s),delete r[s]}else e("clean failed",s),t=!0}),e("end",t),e.groupEnd(),!t}processMessageAck(e){const t=this.sentMessages[e];t&&!t.acked&&(t.acked=!0)}processError(e){const t=(e.error_message||"").match(/^([A-Z_0-9]+\b)(: (.+))?/)||[];return e.error_code=e.error_code,{code:!e.error_code||e.error_code<=0?500:e.error_code,type:t[1]||"UNKNOWN",description:t[3]||"CODE#"+e.error_code+" "+e.error_message,originalError:e}}resend(){this.log.warn("resending all messages");const e=this.sentMessages;for(const t in e){const r=e[t];(r.body||r.container)&&this.pushResend(t)}this.transport.connection&&(this.clearPingDelayDisconnect(),this.sendPingDelayDisconnect())}applyServerTime(e){const t=bigInt(e).shiftRight(32).toJSNumber();return this.log("applying server time",t),this.timeManager.applyServerTime(t)}processMessage(e,t,r,s){const a=this.log.bindPrefix("processMessage");if(e._==="messageEmpty"){a.warn("messageEmpty",e,t);return}if(parseInt(t.substr(0,-10),10)%2){a.warn("server even message id",t,e);return}switch(a.debug("process message",e,t,s?Date.now()-s:void 0),this.pingDelayDisconnectDeferred?.resolve("any message"),e._){case"msg_container":{for(const o of e.messages)this.processMessage(o,o.msg_id,r);break}case"bad_server_salt":{a("bad server salt",e),this.applyServerSalt(e.new_server_salt),this.sentMessages[e.bad_msg_id]&&this.pushResend(e.bad_msg_id),this.ackMessage(t);break}case"bad_msg_notification":{switch(a.error("bad msg notification",e),e.error_code){case 16:case 17:case 32:case 33:case 64:{const o=this.applyServerTime(t);(e.error_code===17||o)&&(a("update session"),this.updateSession());const p=this.updateSentMessage(e.bad_msg_id);p&&this.pushResend(p.msg_id)}}break}case"message":{if(this.lastServerMessages.has(t)){a.warn("server same messageId",t,e),this.ackMessage(t);return}if(this.lastServerMessages.add(t),this.lastServerMessages.size>100){const o=this.lastServerMessages.values().next().value;this.lastServerMessages.delete(o)}this.processMessage(e.body,e.msg_id,r);break}case"new_session_created":{this.ackMessage(t),a.debug("new_session_created",e),this.processMessageAck(e.first_msg_id),this.applyServerSalt(e.server_salt),sessionStorage.get("dc").then(o=>{o===this.dcId&&!this.isFileNetworker&&this.networkerFactory.updatesProcessor?.(e)});break}case"msgs_ack":{a.debug("got acks",e.msg_ids);for(const o of e.msg_ids)this.processMessageAck(o);break}case"msg_detailed_info":if(!this.sentMessages[e.msg_id]){this.ackMessage(e.answer_msg_id);break}case"msg_new_detailed_info":{if(this.pendingAcks.includes(e.answer_msg_id))break;this.reqResend(e.answer_msg_id);break}case"msgs_state_info":{const o=e.req_msg_id,p=this.sentMessages[o];a("got msgs_state_info",p,e),p&&delete this.sentMessages[o];const c=[[this.lastResendReq,this.pendingResendReq]];for(const[f,l]of c)if(f?.reqMsgId===o&&l.length)for(const u of f.msgIds)indexOfAndSplice(l,u);break}case"rpc_result":{this.ackMessage(t);const o=e.req_msg_id,p=this.sentMessages[o];if(this.processMessageAck(o),p){const{deferred:c}=p,{result:f}=e;if(f._==="rpc_error"){const l=this.processError(f);a("rpc error",f,p,l),c?.reject(l)}else a("rpc result",f,p),c?.resolve(f),p.isAPI&&!this.connectionInited&&(this.connectionInited=!0);this.processResentReqMessage(t),delete this.sentMessages[o]}else a("rpc result for unknown message:",o,e);break}case"pong":{const o=e.ping_id;if(this.lastPingDelayDisconnectId===o){const p=this.pingDelayDisconnectDeferred;p?p.resolve("pong"):a("ping deferred deleted",o)}break}default:this.ackMessage(t),this.networkerFactory.updatesProcessor!==null&&this.networkerFactory.updatesProcessor(e);break}}}class NetworkerFactory extends AppManager{constructor(){super(...arguments),this.networkers=[],this.language=navigator.language||App.langPackCode,this.updatesProcessor=null,this.akStopped=!1}onConnectionStatusChange(e){this.rootScope.dispatchEvent("connection_status_change",e)}removeNetworker(e){indexOfAndSplice(this.networkers,e)}setUpdatesProcessor(e){this.updatesProcessor=e}getNetworker(e,t,r,s,a){const n=new MTPNetworker(this,this.timeManager,e,t,r,s,a);return this.networkers.push(n),n}startAll(){if(this.akStopped){const e=this.networkers.filter(t=>t.isStopped());this.akStopped=!1,this.updatesProcessor&&this.updatesProcessor({_:"new_session_created"});for(const t of e)t.scheduleRequest()}}stopAll(){this.akStopped=!0}setLanguage(e){this.language=e;for(const t of this.networkers)t.isFileNetworker||(t.connectionInited=!1)}unsetConnectionInited(){for(const e of this.networkers)e.connectionInited=!1}forceReconnectTimeout(){for(const e of this.networkers)e.forceReconnectTimeout()}forceReconnect(){for(const e of this.networkers)if(!e.isFileNetworker){e.forceReconnect();break}}}class RSAKeysManager{constructor(){this.testPublicKeysHex=[{modulus:"c8c11d635691fac091dd9489aedced2932aa8a0bcefef05fa800892d9b52ed03200865c9e97211cb2ee6c7ae96d3fb0e15aeffd66019b44a08a240cfdd2868a85e1f54d6fa5deaa041f6941ddf302690d61dc476385c2fa655142353cb4e4b59f6e5b6584db76fe8b1370263246c010c93d011014113ebdf987d093f9d37c2be48352d69a1683f8f6e6c2167983c761e3ab169fde5daaa12123fa1beab621e4da5935e9c198f82f35eae583a99386d8110ea6bd1abb0f568759f62694419ea5f69847c43462abef858b4cb5edc84e7b9226cd7bd7e183aa974a712c079dde85b9dc063b8a5c08e8f859c0ee5dcd824c7807f20153361a7f63cfd2a433a1be7f5",exponent:"010001"}],this.publisKeysHex=[{modulus:"e8bb3305c0b52c6cf2afdf7637313489e63e05268e5badb601af417786472e5f93b85438968e20e6729a301c0afc121bf7151f834436f7fda680847a66bf64accec78ee21c0b316f0edafe2f41908da7bd1f4a5107638eeb67040ace472a14f90d9f7c2b7def99688ba3073adb5750bb02964902a359fe745d8170e36876d4fd8a5d41b2a76cbff9a13267eb9580b2d06d10357448d20d9da2191cb5d8c93982961cdfdeda629e37f1fb09a0722027696032fe61ed663db7a37f6f263d370f69db53a0dc0a1748bdaaff6209d5645485e6e001d1953255757e4b8e42813347b11da6ab500fd0ace7e6dfa3736199ccaf9397ed0745a427dcfa6cd67bcb1acff3",exponent:"010001"}],this.publicKeysParsed={},this.prepared=!1,this.preparePromise=null,Modes.test&&(this.publisKeysHex=this.testPublicKeysHex)}prepare(){return this.preparePromise?this.preparePromise:this.prepared?Promise.resolve():this.preparePromise=Promise.all(this.publisKeysHex.map(e=>{const t=new TLSerialization;t.storeBytes(bytesFromHex(e.modulus),"n"),t.storeBytes(bytesFromHex(e.exponent),"e");const r=t.getBuffer();return cryptoMessagePort.invokeCrypto("sha1",r).then(s=>{const a=s.slice(-8);a.reverse(),this.publicKeysParsed[bytesToHex(a).toLowerCase()]={modulus:e.modulus,exponent:e.exponent}})})).then(()=>{this.prepared=!0,this.preparePromise=null})}async select(e){await this.prepare();for(let t=0;t<e.length;++t){let r=bigInt(e[t]).toString(16).toLowerCase();r.length<16&&(r=new Array(16-r.length).fill("0").join("")+r);const s=this.publicKeysParsed[r];if(s)return Object.assign({fingerprint:e[t]},s)}}}var rsaKeysManager=new RSAKeysManager;function bytesXor(d,e){const t=d.length,r=new Uint8Array(t);for(let s=0;s<t;++s)r[s]=d[s]^e[s];return r}class Authorizer extends AppManager{constructor(){super(...arguments),this.getTransportType=()=>{if(Modes.multipleTransports)return this.getTransportTypePromise?this.getTransportTypePromise:this.getTransportTypePromise=transportController$1.pingTransports().then(({websocket:e})=>{this.transportType=e?"websocket":"https",this.log("will use transport:",this.transportType)})}}after(){this.cached={},this.log=logger("AUTHORIZER",LogTypes.Error|LogTypes.Log)}sendPlainRequest(e,t){const r=t.byteLength,s=new TLSerialization;s.storeLongP(0,0,"auth_key_id"),s.storeLong(this.timeManager.generateId(),"msg_id"),s.storeInt(r,"request_length");const a=s.getBytes(!0),n=new Uint8Array(a.byteLength+r);n.set(a),n.set(t,a.length);const o=this.dcConfigurator.chooseServer(e,"client",this.transportType),p={code:406,type:"NETWORK_BAD_RESPONSE"};return DEBUG&&this.log("mtpSendPlainRequest: creating requestPromise"),o.send(n).then(f=>{if(DEBUG&&this.log("mtpSendPlainRequest: in good sector",f),!f||!f.byteLength)throw p;try{const l=new TLDeserialization(f,{mtproto:!0});if(f.length===4){const b=l.fetchInt();throw this.log.error("mtpSendPlainRequest: wrong response, error code:",b),b}const u=l.fetchLong("auth_key_id");u!=="0"&&this.log.error("auth_key_id !== 0",u);const g=l.fetchLong("msg_id");g==="0"&&this.log.error("msg_id === 0",g);const y=l.fetchInt("msg_len");return y||this.log.error("no msg_len",y),l}catch(l){throw this.log.error("mtpSendPlainRequest: deserialization went bad",l),Object.assign(p,{originalError:l})}},f=>{throw!f.message&&!f.type&&(f=Object.assign(p,{originalError:f})),f})}async sendReqPQ(e){const t=new TLSerialization({mtproto:!0});t.storeMethod("req_pq_multi",{nonce:e.nonce}),DEBUG&&this.log("Send req_pq",bytesToHex(e.nonce));let r;try{const o=this.sendPlainRequest(e.dcId,t.getBytes(!0));rsaKeysManager.prepare(),r=await o}catch(o){throw this.log.error("req_pq error",o.message),o}const s=r.fetchObject("ResPQ");if(s._!=="resPQ")throw new Error("[MT] resPQ response invalid: "+s._);if(!bytesCmp(e.nonce,s.nonce))throw this.log.error(e.nonce,s.nonce),new Error("[MT] resPQ nonce mismatch");e.serverNonce=s.server_nonce,e.pq=s.pq,e.fingerprints=s.server_public_key_fingerprints,DEBUG&&this.log("Got ResPQ",bytesToHex(e.serverNonce),bytesToHex(e.pq),e.fingerprints);const a=await rsaKeysManager.select(e.fingerprints);if(!a)throw new Error("[MT] No public key found");e.publicKey=a,DEBUG&&this.log("PQ factorization start",e.pq);try{var n=await cryptoMessagePort.invokeCrypto("factorize",e.pq)}catch(o){throw this.log.error("worker error factorize",o),o}return e.p=n[0],e.q=n[1],DEBUG&&this.log("PQ factorization done",n),this.sendReqDhParams(e)}async sendReqDhParams(e){e.newNonce=randomize(new Uint8Array(32));const t={_:"p_q_inner_data_dc",pq:e.pq,p:e.p,q:e.q,nonce:e.nonce,server_nonce:e.serverNonce,new_nonce:e.newNonce,dc:0},r=new TLSerialization({mtproto:!0});r.storeObject(t,"P_Q_inner_data","DECRYPTED_DATA");const s=r.getBytes(!0);if(s.length>144)throw"DH_params: data is more than 144 bytes!";const a=addPadding(s,192,!1,!0,!1),n=a.slice().reverse(),p=await(async()=>{for(;;){const b=randomize(new Uint8Array(32)),I=n.concat(await cryptoMessagePort.invokeCrypto("sha256",b.concat(a)));if(I.length!==224)throw"DH_params: dataWithHash !== 224 bytes!";const S=await cryptoMessagePort.invokeCrypto("aes-encrypt",I,b,new Uint8Array([0])),k=bytesXor(b,await cryptoMessagePort.invokeCrypto("sha256",S)).concat(S),T=bigIntFromBytes(k),O=bigInt(e.publicKey.modulus,16);if(T.compare(O)===-1)return k}})(),c=addPadding(await cryptoMessagePort.invokeCrypto("rsa-encrypt",p,e.publicKey),256,!0,!0,!0),f={nonce:e.nonce,server_nonce:e.serverNonce,p:e.p,q:e.q,public_key_fingerprint:e.publicKey.fingerprint,encrypted_data:c},l=new TLSerialization({mtproto:!0});l.storeMethod("req_DH_params",f);const u=l.getBytes(!0);DEBUG&&this.log("Send req_DH_params",f);let g;try{g=await this.sendPlainRequest(e.dcId,u)}catch(b){throw this.log.error("Send req_DH_params FAIL!",b),b}const y=g.fetchObject("Server_DH_Params","RESPONSE");if(DEBUG&&this.log("Sent req_DH_params, response:",y),y._!=="server_DH_params_fail"&&y._!=="server_DH_params_ok")throw new Error("[MT] Server_DH_Params response invalid: "+y._);if(!bytesCmp(e.nonce,y.nonce))throw new Error("[MT] Server_DH_Params nonce mismatch");if(!bytesCmp(e.serverNonce,y.server_nonce))throw new Error("[MT] Server_DH_Params server_nonce mismatch");if(y._==="server_DH_params_fail"){const b=(await cryptoMessagePort.invokeCrypto("sha1",e.newNonce)).slice(-16);throw bytesCmp(b,y.new_nonce_hash)?new Error("[MT] server_DH_params_fail"):new Error("[MT] server_DH_params_fail new_nonce_hash mismatch")}try{await this.decryptServerDhDataAnswer(e,y.encrypted_answer)}catch(b){throw this.log.error("mtpDecryptServerDhDataAnswer FAILED!",b),b}return this.sendSetClientDhParams(e)}async decryptServerDhDataAnswer(e,t){e.localTime=Date.now(),e.tmpAesKey=(await cryptoMessagePort.invokeCrypto("sha1",e.newNonce.concat(e.serverNonce))).concat((await cryptoMessagePort.invokeCrypto("sha1",e.serverNonce.concat(e.newNonce))).slice(0,12)),e.tmpAesIv=(await cryptoMessagePort.invokeCrypto("sha1",e.serverNonce.concat(e.newNonce))).slice(12).concat(await cryptoMessagePort.invokeCrypto("sha1",e.newNonce.concat(e.newNonce)),e.newNonce.slice(0,4));const r=new Uint8Array(await cryptoMessagePort.invokeCrypto("aes-decrypt",t,e.tmpAesKey,e.tmpAesIv)),s=r.slice(0,20),a=r.slice(20),n=new TLDeserialization(a,{mtproto:!0}),o=n.fetchObject("Server_DH_inner_data");if(o._!=="server_DH_inner_data")throw new Error("[MT] server_DH_inner_data response invalid: "+o);if(!bytesCmp(e.nonce,o.nonce))throw new Error("[MT] server_DH_inner_data nonce mismatch");if(!bytesCmp(e.serverNonce,o.server_nonce))throw new Error("[MT] server_DH_inner_data serverNonce mismatch");DEBUG&&this.log("Done decrypting answer"),e.g=o.g,e.dhPrime=o.dh_prime,e.gA=o.g_a,e.serverTime=o.server_time,e.retry=0,this.verifyDhParams(e.g,e.dhPrime,e.gA);const p=n.getOffset();if(!bytesCmp(s,await cryptoMessagePort.invokeCrypto("sha1",a.slice(0,p))))throw new Error("[MT] server_DH_inner_data SHA1 mismatch");this.timeManager.applyServerTime(e.serverTime,e.localTime)}verifyDhParams(e,t,r){DEBUG&&this.log("Verifying DH params",e,t,r);const s=bytesToHex(t);if(e!==3||s!=="c71caeb9c6b1c9048e6c522f70f13f73980d40238e3e21c14934d037563d930f48198a0aa7c14058229493d22530f4dbfa336f6e0ac925139543aed44cce7c3720fd51f69458705ac68cd4fe6b6b13abdc9746512969328454f18faf8c595f642477fe96bb2a941d5bcd1d4ac8cc49880708fa9b378e3c4f3a9060bee67cf9a4a4a695811051907e162753b56b0f6b410dba74d8a84b2a14b3144e0ef1284754fd17ed950d5965b4b9dd46582db1178d169c6bc465b0d6ff9ca3928fef5b9ae4e418fc15e83ebea0f87fa9ff5eed70050ded2849f47bf959d956850ce929851f0d8115f635b105ee2e4e15d04b2454bf6f4fadf034b10403119cd8e3b92fcc5b")throw new Error("[MT] DH params are not verified: unknown dhPrime");DEBUG&&this.log("dhPrime cmp OK");const a=bigIntFromBytes(r),n=bigInt(s,16);if(a.compare(bigInt.one)<=0)throw new Error("[MT] DH params are not verified: gA <= 1");if(a.compare(n.subtract(bigInt.one))>=0)throw new Error("[MT] DH params are not verified: gA >= dhPrime - 1");DEBUG&&this.log("1 < gA < dhPrime-1 OK");const o=bigInt(2).pow(1984);if(a.compare(o)<0)throw new Error("[MT] DH params are not verified: gA < 2^{2048-64}");if(a.compare(n.subtract(o))>=0)throw new Error("[MT] DH params are not verified: gA > dhPrime - 2^{2048-64}");return DEBUG&&this.log("2^{2048-64} < gA < dhPrime-2^{2048-64} OK"),!0}async sendSetClientDhParams(e){const t=bytesFromHex(e.g.toString(16));e.b=randomize(new Uint8Array(256));try{var r=await cryptoMessagePort.invokeCrypto("mod-pow",t,e.b,e.dhPrime)}catch(y){throw y}const s=new TLSerialization({mtproto:!0});s.storeObject({_:"client_DH_inner_data",nonce:e.nonce,server_nonce:e.serverNonce,retry_id:[0,e.retry++],g_b:r},"Client_DH_Inner_Data");const a=(await cryptoMessagePort.invokeCrypto("sha1",s.getBuffer())).concat(s.getBytes(!0)),n=await cryptoMessagePort.invokeCrypto("aes-encrypt",a,e.tmpAesKey,e.tmpAesIv),o=new TLSerialization({mtproto:!0});o.storeMethod("set_client_DH_params",{nonce:e.nonce,server_nonce:e.serverNonce,encrypted_data:n}),DEBUG&&this.log("Send set_client_DH_params");let p;try{p=await this.sendPlainRequest(e.dcId,o.getBytes(!0))}catch(y){throw y}const c=p.fetchObject("Set_client_DH_params_answer");if(c._!=="dh_gen_ok"&&c._!=="dh_gen_retry"&&c._!=="dh_gen_fail")throw new Error("[MT] Set_client_DH_params_answer response invalid: "+c._);if(!bytesCmp(e.nonce,c.nonce))throw new Error("[MT] Set_client_DH_params_answer nonce mismatch");if(!bytesCmp(e.serverNonce,c.server_nonce))throw new Error("[MT] Set_client_DH_params_answer server_nonce mismatch");try{var f=await cryptoMessagePort.invokeCrypto("mod-pow",e.gA,e.b,e.dhPrime)}catch{throw f}const l=await cryptoMessagePort.invokeCrypto("sha1",f),u=l.slice(0,8),g=l.slice(-8);switch(DEBUG&&this.log("Got Set_client_DH_params_answer",c._,f),c._){case"dh_gen_ok":{const y=(await cryptoMessagePort.invokeCrypto("sha1",e.newNonce.concat([1],u))).slice(-16);if(!bytesCmp(y,c.new_nonce_hash1))throw this.log.error("Set_client_DH_params_answer new_nonce_hash1 mismatch",y,c),new Error("new_nonce_hash1 mismatch");const b=bytesXor(e.newNonce.slice(0,8),e.serverNonce.slice(0,8));return DEBUG&&this.log("Auth successfull!",g,f,b),e.authKeyId=g,e.authKey=f,e.serverSalt=b,e}case"dh_gen_retry":{const y=(await cryptoMessagePort.invokeCrypto("sha1",e.newNonce.concat([2],u))).slice(-16);if(!bytesCmp(y,c.new_nonce_hash2))throw new Error("[MT] Set_client_DH_params_answer new_nonce_hash2 mismatch");return this.sendSetClientDhParams(e)}case"dh_gen_fail":{const y=(await cryptoMessagePort.invokeCrypto("sha1",e.newNonce.concat([3],u))).slice(-16);throw bytesCmp(y,c.new_nonce_hash3)?new Error("[MT] Set_client_DH_params_answer fail"):new Error("[MT] Set_client_DH_params_answer new_nonce_hash3 mismatch")}}}auth(e){let t=this.cached[e];return t||(t=new Promise(async(r,s)=>{await this.getTransportType();let a,n=1;for(;n++<=3;)try{const o={dcId:e,nonce:randomize(new Uint8Array(16))},p=this.sendReqPQ(o);r(await p);return}catch(o){a=o}s(a)}),this.cached[e]=t)}}class TimeManager extends AppManager{after(){this.lastMessageId=[0,0],this.timeOffset=0,sessionStorage.get("server_time_offset").then(e=>{e&&(this.timeOffset=e)})}getServerTimeOffset(){return this.timeOffset}generateId(){const e=Date.now(),t=Math.floor(e/1e3)+this.timeOffset,r=e%1e3,s=nextRandomUint(16);let a=[t,r<<21|s<<3|4];return(this.lastMessageId[0]>a[0]||this.lastMessageId[0]===a[0]&&this.lastMessageId[1]>=a[1])&&(a=[this.lastMessageId[0],this.lastMessageId[1]+4]),this.lastMessageId=a,ulongFromInts(a[0],a[1]).toString(10)}applyServerTime(e,t){t=(t||Date.now())/1e3|0;const r=e-t,s=Math.abs(this.timeOffset-r)>10;return this.lastMessageId=[0,0],this.timeOffset!==r&&(sessionStorage.set({server_time_offset:r}),this.timeOffset=r),s}}class AppWebDocsManager{saveWebDocument(e){if(!e)return;const t=e.attributes.find(r=>r._==="documentAttributeImageSize");return t&&(e.w=t.w,e.h=t.h),e}}class AppPaymentsManager extends AppManager{after(){this.rootScope.addEventListener("premium_toggle",()=>{this.getPremiumPromo(!0)})}getInputInvoiceBySlug(e){return{_:"inputInvoiceSlug",slug:e}}getInputInvoiceByPeerId(e,t){return{_:"inputInvoiceMessage",peer:this.appPeersManager.getInputPeerById(e),msg_id:getServerMessageId(t)}}getPaymentForm(e){return this.apiManager.invokeApi("payments.getPaymentForm",{invoice:e,theme_params:this.apiManager.getThemeParams()}).then(t=>(this.appPeersManager.saveApiPeers(t),t.photo=this.appWebDocsManager.saveWebDocument(t.photo),t))}getPaymentReceipt(e,t){return this.apiManager.invokeApi("payments.getPaymentReceipt",{peer:this.appPeersManager.getInputPeerById(e),msg_id:getServerMessageId(t)}).then(r=>(this.appPeersManager.saveApiPeers(r),r.photo=this.appWebDocsManager.saveWebDocument(r.photo),r))}validateRequestedInfo(e,t,r){return this.apiManager.invokeApi("payments.validateRequestedInfo",{save:r,invoice:e,info:t})}sendPaymentForm(e,t,r,s,a,n){return this.apiManager.invokeApi("payments.sendPaymentForm",{form_id:t,invoice:e,requested_info_id:r,shipping_option_id:s,credentials:a,tip_amount:n||void 0}).then(o=>(o._==="payments.paymentResult"&&this.apiUpdatesManager.processUpdateMessage(o.updates),o))}clearSavedInfo(e,t){return this.apiManager.invokeApi("payments.clearSavedInfo",{info:e,credentials:t})}getPremiumGiftCodeOptions(e){return this.apiManager.invokeApiSingleProcess({method:"payments.getPremiumGiftCodeOptions",params:{boost_peer:this.appPeersManager.getInputPeerById(e)},processResult:t=>t})}getPremiumPromo(e){return e&&this.premiumPromo&&(this.premiumPromo=void 0),this.premiumPromo??(this.premiumPromo=this.apiManager.invokeApiSingleProcess({method:"help.getPremiumPromo",params:{},processResult:t=>(this.appPeersManager.saveApiPeers(t),t.videos=t.videos.map(r=>this.appDocsManager.saveDoc(r,{type:"premiumPromo"})),this.premiumPromo=t)}))}checkGiftCode(e){return this.apiManager.invokeApiSingleProcess({method:"payments.checkGiftCode",params:{slug:e},processResult:t=>{if(this.appPeersManager.saveApiPeers(t),t.slug=e,t.giveaway_msg_id){const r=t.from_id&&this.appPeersManager.getPeerId(t.from_id);t.giveaway_msg_id=this.appMessagesIdsManager.generateMessageId(t.giveaway_msg_id,!r||r.isUser()?void 0:r.toChatId())}return t}})}applyGiftCode(e){return this.apiManager.invokeApiSingleProcess({method:"payments.applyGiftCode",params:{slug:e},processResult:t=>{this.apiUpdatesManager.processUpdateMessage(t)}})}getGiveawayInfo(e,t){return this.apiManager.invokeApiSingleProcess({method:"payments.getGiveawayInfo",params:{peer:this.appPeersManager.getInputPeerById(e),msg_id:getServerMessageId(t)}})}launchPrepaidGiveaway(e,t,r){return this.apiManager.invokeApiSingleProcess({method:"payments.launchPrepaidGiveaway",params:{peer:this.appPeersManager.getInputPeerById(e),giveaway_id:t,purpose:r},processResult:s=>{this.apiUpdatesManager.processUpdateMessage(s)}})}}function getAttachMenuBotIcon(d){if(d)return d.icons.find(e=>e.name===ATTACH_MENU_BOT_ICON_NAME)}const BOTS_SUPPORTED=!0;class AppAttachMenuBotsManager extends AppManager{constructor(){super(...arguments),this.clear=(e=!1)=>{e?this.attachMenuBots=new Map:(this.attachMenuBots.clear(),this.attachMenuBotsArr=void 0)},this.onUpdateAttachMenuBots=e=>{this.clear(),this.getAttachMenuBots()},this.onUpdateWebViewResultSent=e=>{this.rootScope.dispatchEvent("web_view_result_sent",e.query_id)}}after(){this.clear(!0),this.apiUpdatesManager.addMultipleEventsListeners({updateAttachMenuBots:this.onUpdateAttachMenuBots,updateWebViewResultSent:this.onUpdateWebViewResultSent}),this.rootScope.addEventListener("user_auth",()=>{this.appAttachMenuBotsManager.getAttachMenuBots(),setInterval(()=>{this.onUpdateAttachMenuBots({_:"updateAttachMenuBots"})},30*6e4)})}onLanguageChange(){this.attachMenuBots?.size&&this.onUpdateAttachMenuBots({_:"updateAttachMenuBots"})}saveAttachMenuBot(e){this.attachMenuBots.set(e.bot_id,e);const t=getAttachMenuBotIcon(e);return t&&(t.icon=this.appDocsManager.saveDoc(t.icon,{type:"attachMenuBotIcon",botId:e.bot_id}),this.apiFileManager.downloadMedia({media:t.icon})),this.rootScope.dispatchEvent("attach_menu_bot",e),e}saveAttachMenuBots(e){e.saved||(e.saved=!0,e.forEach(t=>this.saveAttachMenuBot(t)))}saveBotApp(e,t){if(!t)return;const r={type:"botApp",botId:e,appName:t.short_name};return t.photo=this.appPhotosManager.savePhoto(t.photo,r),t.document=this.appDocsManager.saveDoc(t.document,r),t}getAttachMenuBots(){return this.attachMenuBotsArr??this.apiManager.invokeApiSingleProcess({method:"messages.getAttachMenuBots",processResult:e=>(this.appUsersManager.saveApiUsers(e.users),this.saveAttachMenuBots(e.bots),this.attachMenuBotsArr=e.bots.slice(0,void 0))})}getAttachMenuBotCached(e){return this.attachMenuBots.get(e)}getAttachMenuBot(e,t){if(!this.appUsersManager.isAttachMenuBot(e)||!BOTS_SUPPORTED)throw makeError("BOT_INVALID");return(!t&&this.getAttachMenuBotCached(e))??this.apiManager.invokeApiSingleProcess({method:"messages.getAttachMenuBot",params:{bot:this.appUsersManager.getUserInput(e)},processResult:r=>(this.appUsersManager.saveApiUsers(r.users),this.saveAttachMenuBot(r.bot))})}requestWebView(e){const{botId:t,peerId:r,url:s,fromBotMenu:a,fromSwitchWebView:n,fromSideMenu:o,themeParams:p=this.apiManager.getThemeParams(),silent:c,sendAsPeerId:f,startParam:l,isSimpleWebView:u,app:g,writeAllowed:y}=e,b="web";return g?this.apiManager.invokeApiSingleProcess({method:"messages.requestAppWebView",params:{peer:this.appPeersManager.getInputPeerById(r),start_param:l,theme_params:p,platform:b,write_allowed:y,app:{_:"inputBotAppID",access_hash:g.access_hash,id:g.id}}}):u?this.apiManager.invokeApiSingleProcess({method:"messages.requestSimpleWebView",params:{bot:this.appUsersManager.getUserInput(t),url:s,platform:b,from_switch_webview:n,from_side_menu:o,theme_params:p,start_param:l}}):this.apiManager.invokeApiSingleProcess({method:"messages.requestWebView",params:{peer:this.appPeersManager.getInputPeerById(r),bot:this.appUsersManager.getUserInput(t),silent:c,platform:b,url:s,reply_to:this.appMessagesManager.getInputReplyTo(e),from_bot_menu:a,theme_params:p,send_as:f?this.appPeersManager.getInputPeerById(f):void 0,start_param:l}})}prolongWebView(e){return this.apiManager.invokeApiSingleProcess({method:"messages.prolongWebView",params:{peer:this.appPeersManager.getInputPeerById(e.peerId),bot:this.appUsersManager.getUserInput(e.botId),query_id:e.queryId,silent:e.silent,reply_to:this.appMessagesManager.getInputReplyTo(e),send_as:e.sendAsPeerId?this.appPeersManager.getInputPeerById(e.sendAsPeerId):void 0}})}toggleBotInAttachMenu(e,t,r){return this.apiManager.invokeApiSingleProcess({method:"messages.toggleBotInAttachMenu",params:{bot:this.appUsersManager.getUserInput(e),enabled:t,write_allowed:r}})}sendWebViewData(e,t,r){return this.apiManager.invokeApi("messages.sendWebViewData",{bot:this.appUsersManager.getUserInput(e),button_text:t,data:r,random_id:randomLong()}).then(s=>{this.apiUpdatesManager.processUpdateMessage(s)})}getBotApp(e,t){return this.apiManager.invokeApiSingleProcess({method:"messages.getBotApp",params:{app:{_:"inputBotAppShortName",bot_id:this.appUsersManager.getUserInput(e),short_name:t},hash:0},processResult:r=>(r.app=this.saveBotApp(e,r.app),r)})}invokeWebViewCustomMethod(e,t,r){return this.apiManager.invokeApi("bots.invokeWebViewCustomMethod",{bot:this.appUsersManager.getUserInput(e),custom_method:t,params:{_:"dataJSON",data:JSON.stringify(r)}})}}class AppSeamlessLoginManager extends AppManager{requestUrlAuth(e,t,r,s){return this.apiManager.invokeApi("messages.requestUrlAuth",{button_id:s,msg_id:r?getServerMessageId(r):void 0,peer:t?this.appPeersManager.getInputPeerById(t):void 0,url:e}).then(a=>(a._==="urlAuthResultRequest"&&this.appUsersManager.saveApiUser(a.bot),a))}acceptUrlAuth(e,t,r,s,a){return this.apiManager.invokeApi("messages.acceptUrlAuth",{button_id:s,msg_id:r?getServerMessageId(r):void 0,peer:t?this.appPeersManager.getInputPeerById(t):void 0,url:e,write_allowed:a}).then(n=>n)}getWebAuthorizations(){return this.apiManager.invokeApi("account.getWebAuthorizations").then(e=>(this.appUsersManager.saveApiUsers(e.users),e.authorizations))}resetWebAuthorization(e){return this.apiManager.invokeApi("account.resetWebAuthorization",{hash:e})}resetWebAuthorizations(){return this.apiManager.invokeApi("account.resetWebAuthorizations")}}class AppThemesManager extends AppManager{after(){return this.wallPapers={},this.wallPapersBySlug={},this.rootScope.addEventListener("user_auth",()=>{this.getThemes()}),this.appStateManager.getState().then(e=>{try{this.saveAccountThemes(e.accountThemes)}catch{}})}saveWallPaper(e){if(!e)return e;let t;return e._!=="wallPaperNoFile"&&(t=e.slug,e.document=this.appDocsManager.saveDoc(e.document,{type:"wallPaper",wallPaperId:e.id})),this.wallPapers[e.id]=e,t&&(this.wallPapersBySlug[t]=e),e}getWallPaper(e){return this.apiManager.invokeApiSingleProcess({method:"account.getWallPaper",params:{wallpaper:e},processResult:t=>this.saveWallPaper(t)})}getInputWallPaper(e){return typeof e=="string"?{_:"inputWallPaperSlug",slug:e}:e._==="wallPaperNoFile"?{_:"inputWallPaperNoFile",id:e.id}:{_:"inputWallPaper",id:e.id,access_hash:e.access_hash}}getWallPaperById(e){const t=this.wallPapers[e];return this.getWallPaper(this.getInputWallPaper(t))}getWallPaperBySlug(e){const t=this.wallPapersBySlug[e];return t||this.getWallPaper(this.getInputWallPaper(e))}saveAccountThemes(e){e.themes?.forEach(t=>{t.settings&&t.settings.forEach(r=>{r.wallpaper=this.saveWallPaper(r.wallpaper)})})}async getThemes(){const t=(await this.appStateManager.getState()).accountThemes;return this.apiManager.invokeApiSingleProcess({method:"account.getThemes",params:{format:"macos",hash:t?.hash??0},processResult:async r=>r._==="account.themesNotModified"?t.themes:(this.saveAccountThemes(r),await this.appStateManager.pushToState("accountThemes",r),r.themes)})}getWallPapers(){return this.apiManager.invokeApiHashable({method:"account.getWallPapers"}).then(e=>{const t=e.wallpapers;return t.forEach((r,s,a)=>{a[s]=this.saveWallPaper(r)}),t})}}class AppUsernamesManager extends AppManager{toggleUsername({username:e,active:t,peerId:r}){if(!r||r===this.appUsersManager.userId)return this.apiManager.invokeApi("account.toggleUsername",{username:e,active:t});if(r.isAnyChat()){const s=r.toChatId(),a=this.apiManager.invokeApi("channels.toggleUsername",{channel:this.appChatsManager.getChannelInput(s),username:e,active:t});return this.appChatsManager.refreshChatAfterRequest(s,a)}else return this.apiManager.invokeApi("bots.toggleUsername",{bot:this.appUsersManager.getUserInput(r),username:e,active:t})}reorderUsernames({peerId:e,order:t}){if(e)if(e.isAnyChat()){const r=e.toChatId(),s=this.apiManager.invokeApi("channels.reorderUsernames",{channel:this.appChatsManager.getChannelInput(r),order:t});return this.appChatsManager.refreshChatAfterRequest(r,s)}else return this.apiManager.invokeApi("bots.reorderUsernames",{bot:this.appUsersManager.getUserInput(e),order:t});else return this.apiManager.invokeApi("account.reorderUsernames",{order:t})}}class AppChatInvitesManager extends AppManager{after(){this.apiUpdatesManager.addMultipleEventsListeners({updatePendingJoinRequests:async e=>{const t=getPeerId(e.peer),r=await this.appStateManager.getState();delete r.hideChatJoinRequests[t],this.appStateManager.pushToState("hideChatJoinRequests",r.hideChatJoinRequests),this.rootScope.dispatchEvent("chat_requests",{chatId:t.toChatId(),recentRequesters:e.recent_requesters,requestsPending:e.requests_pending})}})}saveChatInvite(e,t){if(t)return t.chat&&this.appChatsManager.saveApiChat(t.chat,!0),t.photo&&(t.photo=this.appPhotosManager.savePhoto(t.photo,{type:"chatInvite",hash:e})),t}exportChatInvite({chatId:e,expireDate:t,usageLimit:r,requestNeeded:s,title:a}){return this.apiManager.invokeApi("messages.exportChatInvite",{peer:this.appChatsManager.getInputPeer(e),expire_date:t,usage_limit:r,request_needed:s,title:a})}checkChatInvite(e){return this.apiManager.invokeApi("messages.checkChatInvite",{hash:e}).then(t=>this.appChatInvitesManager.saveChatInvite(e,t))}importChatInvite(e){return this.apiManager.invokeApi("messages.importChatInvite",{hash:e}).then(t=>(this.apiUpdatesManager.processUpdateMessage(t),t.chats[0].id))}getExportedChatInvites({chatId:e,revoked:t,adminId:r}){return this.apiManager.invokeApi("messages.getExportedChatInvites",{peer:this.appChatsManager.getInputPeer(e),admin_id:r?this.appUsersManager.getUserInput(r):{_:"inputUserSelf"},limit:50,revoked:t}).then(s=>(this.appUsersManager.saveApiUsers(s.users),s))}editExportedChatInvite({chatId:e,link:t,expireDate:r,usageLimit:s,requestNeeded:a,title:n,revoked:o}){return this.apiManager.invokeApi("messages.editExportedChatInvite",{peer:this.appChatsManager.getInputPeer(e),revoked:o,link:t,expire_date:r,usage_limit:s,request_needed:a,title:n}).then(p=>(this.appUsersManager.saveApiUsers(p.users),p))}deleteRevokedExportedChatInvites(e,t){return this.apiManager.invokeApi("messages.deleteRevokedExportedChatInvites",{peer:this.appChatsManager.getInputPeer(e),admin_id:this.appUsersManager.getUserInput(t)})}deleteExportedChatInvite(e,t){return this.apiManager.invokeApi("messages.deleteExportedChatInvite",{peer:this.appChatsManager.getInputPeer(e),link:t})}getAdminsWithInvites(e){return this.apiManager.invokeApi("messages.getAdminsWithInvites",{peer:this.appChatsManager.getInputPeer(e)}).then(t=>(this.appUsersManager.saveApiUsers(t.users),t))}getChatInviteImporters({chatId:e,limit:t=50,offsetDate:r=0,offsetUserId:s,link:a,q:n,requested:o}){const p=s?this.appUsersManager.getUserInput(s):{_:"inputUserEmpty"};return this.apiManager.invokeApi("messages.getChatInviteImporters",{peer:this.appChatsManager.getInputPeer(e),limit:t,offset_date:r,offset_user:p,link:a,q:n,requested:o}).then(c=>(this.appUsersManager.saveApiUsers(c.users),c))}}var StoriesCacheType=(d=>(d.Stories="stories",d.Pinned="pinnedStories",d.Archive="archiveStories",d))(StoriesCacheType||{});function insertStory(d,e,t){return t!==StoriesCacheType.Stories?insertInDescendSortedArray(d,e,typeof e!="number"?"id":void 0):insertInDescendSortedArray(d,e,typeof e!="number"?r=>4294967295-r.id:r=>4294967295-r)}class AppStoriesManager extends AppManager{constructor(){super(...arguments),this.clear=e=>{this.cache={},this.lists={stories:[],archive:[]},this.expiring=[]},this.setChangelogPeerIdFromAppConfig=e=>{const t=e.stories_changelog_user_id;return this.changelogPeerId=t?t.toPeerId(!1):SERVICE_PEER_ID},this.onUpdateStory=e=>{const t=this.appPeersManager.getPeerId(e.peer),r=this.getPeerStoriesCache(t);let{story:s}=e;if(s._==="storyItemDeleted"){this.handleDeletedStory(r,s.id);return}if(r.maxReadId===void 0){Promise.resolve(this.getPeerStories(t)).then(o=>{this.rootScope.dispatchEvent("stories_stories",o)});return}const a=this.isStoryExpired(s)?void 0:this.getCacheTypeForPeerId(t),n=r.storiesMap.has(s.id);s=this.saveStoryItems([e.story],r,a)[0],!n&&a&&this.rootScope.dispatchEvent("story_new",{peerId:t,story:s,cacheType:a,maxReadId:r.maxReadId})},this.onUpdateReadStories=e=>{const t=this.appPeersManager.getPeerId(e.peer),r=this.getPeerStoriesCache(t);r.maxReadId=e.max_id,this.updateListCachePosition(r),this.rootScope.dispatchEvent("stories_read",{peerId:t,maxReadId:r.maxReadId})}}after(){this.clear(!0),this.changelogPeerId=SERVICE_PEER_ID,this.apiUpdatesManager.addMultipleEventsListeners({updateStory:this.onUpdateStory,updateReadStories:this.onUpdateReadStories}),this.rootScope.addEventListener("app_config",this.setChangelogPeerIdFromAppConfig),this.rootScope.addEventListener("contacts_update",e=>{this.onSubscriptionUpdate(e.toPeerId(!1))}),this.rootScope.addEventListener("chat_participation",({chatId:e})=>{this.onSubscriptionUpdate(e.toPeerId(!0))}),this.rootScope.addEventListener("peer_stories_hidden",({peerId:e})=>{const t=this.getPeerStoriesCache(e,!1);t&&(this.updateListCachePosition(t),this.rootScope.dispatchEvent("stories_stories",this.convertPeerStoriesCache(t)))}),this.rootScope.addEventListener("user_auth",()=>{setTimeout(()=>{this.getAllStories(!1,void 0,!0)},2e3)}),setInterval(()=>this.checkExpired(),5e3)}onSubscriptionUpdate(e){const t=this.getPeer(e);if(!t)return;const r=this.getPeerStoriesCache(e,!1);if(!r){const a=this.isSubcribedToPeer(e),n=t.stories_max_id!==void 0;a&&n&&Promise.resolve(this.getPeerStories(e)).then(o=>{this.rootScope.dispatchEvent("stories_stories",o)});return}const s=r.position;this.updateListCachePosition(r),!s&&r.position&&this.rootScope.dispatchEvent("stories_stories",this.convertPeerStoriesCache(r))}checkExpired(){const e=tsNow(!0);let t;for(;(t=this.expiring[0])&&!(t.timestamp>e);){this.expiring.shift();const r=this.getPeerStoriesCache(t.peerId,!1);if(!r)continue;indexOfAndSplice(r.stories,t.id)!==void 0&&(this.updateListCachePosition(r),this.rootScope.dispatchEvent("story_expired",{peerId:r.peerId,id:t.id}))}}getChangelogPeerId(){return this.changelogPeerId||callbackify(this.apiManager.getAppConfig(),this.setChangelogPeerIdFromAppConfig)}generateSortIndexForCache(e){if(!this.getCacheTypeForPeerId(e.peerId))return;const r=e.stories[e.stories.length-1];if(!r)return;const s=e.storiesMap.get(r),a=this.getUnreadType(e.peerId),n=e.peerId===this.rootScope.myId,o=a!=="read",p=e.peerId===this.changelogPeerId,c=e.peerId.isUser()?this.appUsersManager.isPremium(e.peerId.toUserId()):!1;return+([n,o,p,c].map(l=>+l).join("")+s.date)}generateListCachePosition(e){const t=this.generateSortIndexForCache(e);return t?{type:this.appPeersManager.getPeer(e.peerId).pFlags.stories_hidden?"archive":"stories",index:t}:void 0}updateListCachePosition(e){const t=e.position,r=this.generateListCachePosition(e);if(!deepEqual(t,r)){if(t&&t.type!==r?.type){const s=this.lists[t.type];indexOfAndSplice(s,e.peerId)}if(e.position=r,r){const s=this.lists[r.type];insertInDescendSortedArray(s,e.peerId,a=>this.getPeerStoriesCache(a).position.index)}this.rootScope.dispatchEvent("stories_position",{peerId:e.peerId,position:r})}}getPeerStoriesCache(e,t=!0){var r;return(r=this.cache)[e]??(r[e]=t?{peerId:e,stories:[],pinnedStories:[],archiveStories:[],storiesMap:new Map,getStoriesPromises:new Map,deleted:new Set}:void 0)}convertPeerStoriesCache(e){return{_:"peerStories",peer:this.appPeersManager.getOutputPeer(e.peerId),stories:e.stories.map(t=>e.storiesMap.get(t)),max_read_id:e.maxReadId}}saveStoryItem(e,t,r){if(!e||e._==="storyItemDeleted")return;const s=t.storiesMap.get(e.id),a=s?._==="storyItemSkipped",n=e._==="storyItemSkipped";if(n&&s&&!a)return s;if(!n){const c={type:"storyItem",peerId:t.peerId,storyId:e.id};this.appMessagesManager.saveMessageMedia(e,c),e.media_areas?.forEach(l=>{l.msg_id=this.appMessagesIdsManager.generateMessageId(l.msg_id,l.channel_id)})}let o;if(r!==StoriesCacheType.Pinned){const c=!!s?.pFlags?.pinned,f=!!e.pFlags?.pinned;c!==f&&(f?(t.pinnedLoadedAll||t.pinnedStories.length&&e.id>t.pinnedStories[t.pinnedStories.length-1])&&(insertStory(t.pinnedStories,e.id,StoriesCacheType.Pinned),o=!0):indexOfAndSplice(t.pinnedStories,e.id)&&(o=!0))}let p;if(r!==StoriesCacheType.Archive&&t.peerId===this.appPeersManager.peerId&&!t.archiveStories.includes(e.id)&&(t.archiveLoadedAll||t.archiveStories.length&&e.id>t.archiveStories[t.archiveStories.length-1])&&(insertStory(t.archiveStories,e.id,StoriesCacheType.Archive),p=!0),r===StoriesCacheType.Stories){const c=this.expiring.findIndex(f=>f.peerId===t.peerId&&f.id===e.id);insertInDescendSortedArray(this.expiring,{peerId:t.peerId,id:e.id,timestamp:e.expire_date},f=>2147483647-f.timestamp,c)}if(r){const c=t[r];insertStory(c,e.id,r)}if(!s)t.storiesMap.set(e.id,e);else{if(!a&&!n&&e.pFlags.min){const c=["privacy","views"];for(const f of c)e[f]=s[f]}if(!a&&!n&&e.pFlags.min){const c=["out"];for(const f of c)e.pFlags[f]=s.pFlags[f]}safeReplaceObject(s,e)}return(s||o||p)&&this.rootScope.dispatchEvent("story_update",{peerId:t.peerId,story:s||e,modifiedPinned:o,modifiedArchive:p}),s||e}saveStoryItems(e,t,r){const s=[],a=e.map((n,o)=>(n=this.saveStoryItem(n,t,r),n||s.push(o),n));if(forEachReverse(s,n=>{a.splice(n,1)}),t.stories.length&&r===StoriesCacheType.Stories){const n=this.getPeer(t.peerId);if(!n.stories_max_id){const o={...n,stories_max_id:t.storiesMap.get(t.stories[t.stories.length-1]).id};t.peerId.isUser()?this.appUsersManager.saveApiUsers([o]):this.appChatsManager.saveApiChats([o])}}return this.updateListCachePosition(t),a}getPeer(e){return this.appPeersManager.getPeer(e)}saveApiPeerStories(e,t){if(e._!=="channel"&&e._!=="user")return;const r=t.stories_max_id?!0:t.pFlags.stories_unavailable?!1:void 0;let s=e.stories_max_id?!0:e.pFlags.stories_unavailable?!1:void 0;r!==s&&s===void 0&&(r&&(e.stories_max_id=t.stories_max_id),s=r);const a=t.pFlags.stories_hidden,n=e.pFlags.stories_hidden;return()=>{const o=e.id.toPeerId(e._!=="user");r!==s&&s!==void 0&&this.rootScope.dispatchEvent("peer_stories",{peerId:o,available:s}),a!==n&&this.rootScope.dispatchEvent("peer_stories_hidden",{peerId:o,hidden:n})}}saveStoriesStories(e,t,r){return this.appPeersManager.saveApiPeers(e),this.saveStoryItems(e.stories,t,r)}savePeerStories(e){const t=this.appPeersManager.getPeerId(e.peer),r=this.getPeerStoriesCache(t),s=this.getCacheTypeForPeerId(t,!0);return r.maxReadId=e.max_read_id??0,e.stories=this.saveStoryItems(e.stories,r,s),r.dispatchStoriesEvent&&(delete r.dispatchStoriesEvent,this.rootScope.dispatchEvent("peer_stories",{peerId:t,available:r.stories.length>0})),e}getUnreadType(e,t,r=this.getPeerStoriesCache(e)){if(t??(t=r.stories[r.stories.length-1]),!t&&!r.dispatchStoriesEvent&&(r.dispatchStoriesEvent=!0,this.getPeerStories(e)),!!t)return t>r.maxReadId?r.storiesMap.get(t).pFlags.close_friends?"close":"unread":"read"}getPeerStoriesSegments(e){const t=this.getPeerStoriesCache(e);if(t.maxReadId===void 0)return callbackify(this.getPeerStories(e),()=>this.getPeerStoriesSegments(e));if(!t.stories.length)return;const r=[];let s;return t.stories.forEach(a=>{const n=this.getUnreadType(e,a,t);s?.type!==n?(s={length:1,type:n},r.push(s)):++s.length}),r}deleteStories(e,t){return this.apiManager.invokeApiSingleProcess({method:"stories.deleteStories",params:{peer:this.appPeersManager.getInputPeerById(e),id:t},processResult:r=>{r.forEach(s=>{this.apiUpdatesManager.processLocalUpdate({_:"updateStory",peer:this.appPeersManager.getOutputPeer(e),story:{_:"storyItemDeleted",id:s}})})}})}togglePinned(e,t,r){return Array.isArray(t)||(t=[t]),this.apiManager.invokeApiSingleProcess({method:"stories.togglePinned",params:{peer:this.appPeersManager.getInputPeerById(e),id:t,pinned:r},processResult:s=>{if(!s.length)return;const a=this.getPeerStoriesCache(this.rootScope.myId),n=s.map(o=>{const p=a.storiesMap.get(o);if(p?._==="storyItem")return{...p,pFlags:{...p.pFlags,pinned:r||void 0}}});this.saveStoryItems(n,a)}})}hasArchive(){return this.lists.archive.length>0}getAllStories(e,t,r){return this.apiManager.invokeApiSingleProcess({method:"stories.getAllStories",params:{next:e,state:t,hidden:r},processResult:s=>(this.appPeersManager.saveApiPeers(s),s.peer_stories=s.peer_stories.map(a=>this.savePeerStories(a)).filter(a=>a.stories.length),s)})}getPeerStories(e){const t=this.getPeerStoriesCache(e);return t.maxReadId!==void 0?this.convertPeerStoriesCache(t):this.apiManager.invokeApiSingleProcess({method:"stories.getPeerStories",params:{peer:this.appPeersManager.getInputPeerById(e)},processResult:r=>(this.appPeersManager.saveApiPeers(r),this.savePeerStories(r.stories))})}getCachedStories(e,t,r,s){const a=t?e.pinnedStories:e.archiveStories,n=s?a.findIndex(o=>o<s):0;if(n!==-1){const o=a.slice(n,n+r);if(o.length===r||(t?e.pinnedLoadedAll:e.archiveLoadedAll))return o.map(p=>e.storiesMap.get(p))}}processLoadedStoriesStories(e,t,r,s){const a=s.stories.length,n=this.saveStoriesStories(s,e,t?StoriesCacheType.Pinned:StoriesCacheType.Archive);return e.count=s.count,((t?e.pinnedStories:e.archiveStories).length===s.count||a<r)&&(t?e.pinnedLoadedAll=!0:e.archiveLoadedAll=!0),{count:s.count,stories:n}}getPinnedStories(e,t,r=0){const s=this.getPeerStoriesCache(e),a=this.getCachedStories(s,!0,t,r);return a?{count:s.count,stories:a}:this.apiManager.invokeApiSingleProcess({method:"stories.getPinnedStories",params:{peer:this.appPeersManager.getInputPeerById(e),limit:t,offset_id:r},processResult:this.processLoadedStoriesStories.bind(this,s,!0,t)})}getStoriesArchive(e,t,r=0){const s=this.getPeerStoriesCache(e),a=this.getCachedStories(s,!1,t,r);return a?{count:s.count,stories:a}:this.apiManager.invokeApiSingleProcess({method:"stories.getStoriesArchive",params:{peer:this.appPeersManager.getInputPeerById(e),limit:t,offset_id:r},processResult:this.processLoadedStoriesStories.bind(this,s,!1,t)})}fetchSingleStories(e){return e.getStoriesPromise??(e.getStoriesPromise=pause(0).then(()=>{const t=[...e.getStoriesPromises.keys()],r=this.apiManager.invokeApi("stories.getStoriesByID",{peer:this.appPeersManager.getInputPeerById(e.peerId),id:t},{floodMaxTimeout:1/0}),s=a=>{const n=new Map(a.map(o=>[o.id,o]));for(const o of t){const p=n.get(o);p||this.handleDeletedStory(e,o);const c=e.getStoriesPromises.get(o);e.getStoriesPromises.delete(o),c.resolve(p)}};r.then(a=>{const n=this.saveStoriesStories(a,e);s(n)},()=>{s([])}).then(()=>{e.getStoriesPromise=void 0,e.getStoriesPromises.size&&this.fetchSingleStories(e),this.rootScope.dispatchEvent("stories_downloaded",{peerId:e.peerId,ids:t})})}))}getStoryByIdCached(e,t){return this.getPeerStoriesCache(e).storiesMap.get(t)}getStoryById(e,t,r){const s=this.getPeerStoriesCache(e),a=s.storiesMap.get(t);if(!s.deleted.has(t)){if(a?._==="storyItem"&&!r)return a;{let n=s.getStoriesPromises.get(t);return n||(s.getStoriesPromises.set(t,n=deferredPromise()),this.fetchSingleStories(s),n)}}}getStoriesById(e,t,r){const s=t.map(n=>this.getStoryById(e,n,r));return s.some(n=>n instanceof Promise)?Promise.all(s):s}readStories(e,t){const r=this.getPeerStoriesCache(e);if(!(r.maxReadId!==void 0&&r.maxReadId>=t))return this.apiUpdatesManager.processLocalUpdate({_:"updateReadStories",peer:this.appPeersManager.getOutputPeer(e),max_id:t}),this.apiManager.invokeApiSingleProcess({method:"stories.readStories",params:{peer:this.appPeersManager.getInputPeerById(e),max_id:t}})}incrementStoryViews(e,t){return this.apiManager.invokeApiSingleProcess({method:"stories.incrementStoryViews",params:{peer:this.appPeersManager.getInputPeerById(e),id:t}})}getStoryViewsList(e,t,r,s="",a,n){return this.apiManager.invokeApiSingleProcess({method:"stories.getStoryViewsList",params:{peer:this.appPeersManager.getInputPeerById(e),id:t,limit:r,offset:s,q:a,just_contacts:n},processResult:o=>{this.appPeersManager.saveApiPeers(o),o.views.forEach(c=>{c.message=this.appMessagesManager.saveMessage(c.message),c.story=c.story&&this.appStoriesManager.saveStoryItem(c.story,this.appStoriesManager.getPeerStoriesCache(this.appPeersManager.getPeerId(c.peer_id)))});const p=o.views.filter(c=>c._==="storyView");return{count:o.count,views:p,nextOffset:o.next_offset}}})}getStoriesViews(e,t){return this.apiManager.invokeApiSingleProcess({method:"stories.getStoriesViews",params:{peer:this.appPeersManager.getInputPeerById(e),id:t},processResult:r=>{this.appPeersManager.saveApiPeers(r);const s=this.getPeerStoriesCache(this.appPeersManager.peerId);return r.views.forEach((a,n)=>{const o=t[n],p=s.storiesMap.get(o);p&&this.saveStoryItems([{...p,views:a}],s)}),r.views}})}report(e,t,r,s){return this.apiManager.invokeApiSingleProcess({method:"stories.report",params:{peer:this.appPeersManager.getInputPeerById(e),id:t,reason:{_:r},message:s}})}sendReaction(e,t,r){r??(r={_:"reactionEmpty"});const s=this.getStoryByIdCached(e,t),a=s.views,n=r._==="reactionEmpty"?void 0:r;if(a){const o=()=>{const p=a.reactions?.find(c=>reactionsEqual(c.reaction,s.sent_reaction));p&&(--p.count,p.count||indexOfAndSplice(a.reactions,p))};if(a.reactions_count??(a.reactions_count=0),!s.sent_reaction&&n?++a.reactions_count:s.sent_reaction&&!n&&--a.reactions_count,o(),n){let p=a.reactions?.find(c=>reactionsEqual(c.reaction,n));p||(a.reactions??(a.reactions=[]),a.reactions.push(p={_:"reactionCount",reaction:n,count:0})),++p.count}}return this.saveStoryItems([{...s,sent_reaction:n}],this.getPeerStoriesCache(e)),this.apiManager.invokeApiSingleProcess({method:"stories.sendReaction",params:{peer:this.appPeersManager.getInputPeerById(e),reaction:r,story_id:t},processResult:o=>{this.apiUpdatesManager.processUpdateMessage(o)}})}handleDeletedStory(e,t){e.deleted.add(t),e.storiesMap.delete(t)&&([e.stories,e.pinnedStories,e.archiveStories].forEach(r=>{indexOfAndSplice(r,t)}),this.updateListCachePosition(e),this.rootScope.dispatchEvent("story_deleted",{peerId:e.peerId,id:t}))}isSubcribedToPeer(e){if(e.isUser())return this.appUsersManager.isContact(e.toUserId());{const t=e.toChatId();return(this.appChatsManager.isBroadcast(t)||this.appChatsManager.isMegagroup(t))&&this.appChatsManager.isInChat(t)}}getCacheTypeForPeerId(e,t){if(!(!this.isSubcribedToPeer(e)&&e!==this.changelogPeerId&&!t))return StoriesCacheType.Stories}isStoryExpired(e){return e.expire_date<=tsNow(!0)}hasRights(e,t,r){if(e.isUser())return this.appPeersManager.peerId===e;const s=e.toChatId(),n=!!this.getStoryByIdCached(e,t).pFlags.out,o=this.appChatsManager.hasRights(s,"edit_stories"),p=this.appChatsManager.hasRights(s,"post_stories"),c=this.appChatsManager.hasRights(s,"delete_stories");switch(r){case"send":return p;case"edit":return n?p:o;case"delete":return n?p:c;case"archive":return o;case"pin":return o;default:return!1}}cantPinDeleteStories(e,t){let r=!t.length,s=!t.length;for(const a of t)if(r||(r=!this.hasRights(e,a,"pin")),s||(s=!this.hasRights(e,a,"delete")),r&&s)break;return{cantPin:r,cantDelete:s}}toggleStoriesHidden(e,t){return this.apiManager.invokeApiSingleProcess({method:"stories.togglePeerStoriesHidden",params:{peer:this.appPeersManager.getInputPeerById(e),hidden:t},processResult:()=>{const r=this.getPeer(e),s={...r.pFlags};t?s.stories_hidden=!0:delete s.stories_hidden;const a={...r,pFlags:s};e.isUser()?this.appUsersManager.saveApiUsers([a]):this.appChatsManager.saveApiChats([a]),this.appNotificationsManager.toggleStoriesMute(e,t,!0)}})}}class AppBotsManager extends AppManager{canSendMessage(e){return this.apiManager.invokeApiSingleProcess({method:"bots.canSendMessage",params:{bot:this.appUsersManager.getUserInput(e)}})}allowSendMessage(e){return this.apiManager.invokeApiSingleProcess({method:"bots.allowSendMessage",params:{bot:this.appUsersManager.getUserInput(e)},processResult:t=>{this.apiUpdatesManager.processUpdateMessage(t)}})}}class AppBoostsManager extends AppManager{saveBoost(e,t){return t.giveaway_msg_id&&(t.giveaway_msg_id=this.appMessagesIdsManager.generateMessageId(t.giveaway_msg_id,this.appPeersManager.isChannel(e)?e.toChatId():void 0)),t}saveBoosts(e,t){return!t||t.saved||(t.saved=!0,t.forEach((r,s,a)=>{a[s]=this.saveBoost(e,r)})),t}getBoostsList({peerId:e,limit:t,offset:r,gifts:s}){return this.apiManager.invokeApi("premium.getBoostsList",{peer:this.appPeersManager.getInputPeerById(e),limit:t,offset:r,gifts:s}).then(a=>(this.appPeersManager.saveApiPeers(a),a.boosts=this.saveBoosts(e,a.boosts),a))}getMyBoosts(){return this.apiManager.invokeApiSingleProcess({method:"premium.getMyBoosts",processResult:e=>(this.appPeersManager.saveApiPeers(e),e)})}getBoostsStatus(e){return this.apiManager.invokeApiSingleProcess({method:"premium.getBoostsStatus",params:{peer:this.appPeersManager.getInputPeerById(e)}})}applyBoost(e,t){return this.apiManager.invokeApiSingleProcess({method:"premium.applyBoost",params:{peer:this.appPeersManager.getInputPeerById(e),slots:t}})}}class AppStatisticsManager extends AppManager{constructor(){super(...arguments),this.processPublicForwards=e=>(this.appPeersManager.saveApiPeers(e),e.forwards.forEach(t=>{t.message=this.appMessagesManager.saveMessage(t.message),t.story=t.story&&this.appStoriesManager.saveStoryItem(t.story,this.appStoriesManager.getPeerStoriesCache(this.appPeersManager.getPeerId(t.peer)))}),e)}async getInvokeOptions({peerId:e,dcId:t}){const r={};return e.isUser()||(t??(t=await callbackify(this.appProfileManager.getChatFull(e.toChatId()),async s=>{let a=s.stats_dc;return a===void 0&&(a=await this.apiManager.getBaseDcId()),a})),r.dcId=t),r}async getBroadcastStats(e){const t=await this.getInvokeOptions(e);return this.apiManager.invokeApiSingleProcess({method:"stats.getBroadcastStats",params:{channel:this.appChatsManager.getChannelInput(e.peerId.toChatId()),dark:e.dark},processResult:r=>(r.recent_posts_interactions.forEach(s=>{s._==="postInteractionCountersMessage"&&(s.msg_id=this.appMessagesIdsManager.generateMessageId(s.msg_id,e.peerId.toChatId()))}),{stats:r,dcId:t.dcId}),options:t})}loadAsyncGraph(e,t,r){return this.apiManager.invokeApiSingleProcess({method:"stats.loadAsyncGraph",params:{token:e,x:t},options:{dcId:r}})}async getMegagroupStats(e){const t=await this.getInvokeOptions(e);return this.apiManager.invokeApiSingleProcess({method:"stats.getMegagroupStats",params:{channel:this.appChatsManager.getChannelInput(e.peerId.toChatId()),dark:e.dark},processResult:r=>(this.appPeersManager.saveApiPeers(r),{stats:r,dcId:t.dcId}),options:t})}async getMessagePublicForwards(e){const t=await this.getInvokeOptions(e);return this.apiManager.invokeApiSingleProcess({method:"stats.getMessagePublicForwards",params:{channel:this.appChatsManager.getChannelInput(e.peerId.toChatId()),msg_id:getServerMessageId(e.mid),offset:e.offset,limit:e.limit},processResult:this.processPublicForwards,options:t})}async getMessageStats(e){const t=await this.getInvokeOptions(e);return this.apiManager.invokeApiSingleProcess({method:"stats.getMessageStats",params:{channel:this.appChatsManager.getChannelInput(e.peerId.toChatId()),dark:e.dark,msg_id:getServerMessageId(e.mid)},processResult:r=>({stats:r,dcId:t.dcId}),options:t})}async getStoryStats(e){const t=await this.getInvokeOptions(e);return this.apiManager.invokeApiSingleProcess({method:"stats.getStoryStats",params:{peer:this.appPeersManager.getInputPeerById(e.peerId),dark:e.dark,id:e.storyId},processResult:r=>({stats:r,dcId:t.dcId}),options:t})}async getStoryPublicForwards(e){const t=await this.getInvokeOptions(e);return this.apiManager.invokeApiSingleProcess({method:"stats.getStoryPublicForwards",params:{peer:this.appPeersManager.getInputPeerById(e.peerId),id:e.id,limit:e.limit,offset:e.offset},processResult:this.processPublicForwards,options:t})}}class AppBusinessManager extends AppManager{saveBusinessIntro(e,t){if(t)return t.sticker=this.appDocsManager.saveDoc(t.sticker,{type:"userFull",userId:e}),t}resolveBusinessChatLink(e){return this.apiManager.invokeApiSingleProcess({method:"account.resolveBusinessChatLink",params:{slug:e},processResult:t=>{this.appPeersManager.saveApiPeers(t);const r=getPeerId(t.peer),{message:s,entities:a}=t;return{peerId:r,message:s,entities:a}}})}}const MAX_MESSAGES_PER_REQUEST=20;class AppTranslationsManager extends AppManager{constructor(){super(...arguments),this.translateTextBatch={},this.triedToTranslateMessages=new Map,this.processTextWithEntities=e=>(this.appMessagesManager.wrapMessageEntities(e),e)}hasTriedToTranslateMessage(e,t){return this.triedToTranslateMessages.has(`${e}_${t}`)}resetMessageTranslations(e,t){const r=`${e}_${t}`,s=this.triedToTranslateMessages.get(r);if(s){for(const a of s){const n=this.translateTextBatch[a];if(!n)continue;const o=n.messages.get(e);o&&o.delete(t)}this.triedToTranslateMessages.delete(r)}}batchTranslation(e,t,r,s){if(!(!t||![...t.values()].some(a=>a instanceof Promise)))return pause(0).then(async()=>{const a=[...t.entries()].filter(([c,f])=>f instanceof Promise).slice(0,MAX_MESSAGES_PER_REQUEST),n=new Map(a),o=a.map(([c])=>c),p=await this.apiManager.invokeApi("messages.translateText",{...r(o),to_lang:e}).catch(c=>{o.forEach(f=>{const l=n.get(f);t.delete(f),l.reject(c)})});p&&p.result.forEach((c,f)=>{this.processTextWithEntities(c);const l=o[f],u=n.get(l);s?t.delete(l):t.set(l,c),u.resolve(c)})})}batchMessageTranslation(e,t){const r=this.translateTextBatch[e];if(!r||r.messagesPromises.get(t))return;const s=r.messages.get(t),a=this.batchTranslation(e,s,n=>({peer:this.appPeersManager.getInputPeerById(t),id:n.map(o=>getServerMessageId(o))}));a&&r.messagesPromises.set(t,a),a?.then(()=>{r.messagesPromises.delete(t),this.batchMessageTranslation(e,t)})}batchTextTranslation(e){const t=this.translateTextBatch[e];if(!t||t.textPromise)return;const r=t.text,s=this.batchTranslation(e,r,a=>({text:a.map(n=>({entities:[],...JSON.parse(n)}))}),!0);s&&(t.textPromise=s),t.textPromise?.then(()=>{t.textPromise=void 0,this.batchTextTranslation(e)})}translateText(e){var s,a;(s=this.translateTextBatch)[a=e.lang]??(s[a]={text:new Map,messages:new Map,messagesPromises:new Map});const t=this.translateTextBatch[e.lang];if("peerId"in e){let n=t.messages.get(e.peerId);n||t.messages.set(e.peerId,n=new Map);let o=n.get(e.mid);if(o||e.onlyCache)return o;o=deferredPromise(),n.set(e.mid,o);const p=`${e.peerId}_${e.mid}`;let c=this.triedToTranslateMessages.get(p);return c||this.triedToTranslateMessages.set(p,c=new Set),c.add(e.lang),this.batchMessageTranslation(e.lang,e.peerId),o}else{const n=JSON.stringify(e.text);let o=t.text.get(n);return o||e.onlyCache||(o=deferredPromise(),t.text.set(n,o),this.batchTextTranslation(e.lang)),o}}togglePeerTranslations(e,t){return this.appProfileManager.modifyCachedFullPeer(e,r=>{t?r.pFlags.translations_disabled=!0:delete r.pFlags.translations_disabled}),this.apiManager.invokeApi("messages.togglePeerTranslations",{peer:this.appPeersManager.getInputPeerById(e),disabled:t})}}class AppGifsManager extends AppManager{after(){this.rootScope.addEventListener("user_auth",()=>{this.rootScope.addEventListener("app_config",()=>this.onGifsUpdated())}),this.apiUpdatesManager.addMultipleEventsListeners({updateSavedGifs:()=>this.onGifsUpdated()})}async onGifsUpdated(){const e=await this.getGifs(!0);this.rootScope.dispatchEvent("gifs_updated",e)}getGifs(e){return e&&Array.isArray(this.gifs)&&(this.gifs=void 0),this.gifs??(this.gifs=this.apiManager.invokeApi("messages.getSavedGifs").then(t=>this.gifs=t.gifs.map(r=>this.appDocsManager.saveDoc(r)).filter(Boolean)))}async searchGifs(e,t){const r=(await this.appUsersManager.resolveUsername("gif")).id.toPeerId(!1),{results:s,next_offset:a}=await this.appInlineBotsManager.getInlineResults(NULL_PEER_ID,r,e,t);return{documents:s.map(o=>o.document).filter(Boolean),nextOffset:a}}async saveGif(e,t){const[r,s]=await Promise.all([this.apiManager.getLimit("gifs"),this.getGifs()]),a=this.appDocsManager.getDoc(e);return findAndSplice(s,n=>n.id===a.id),t||(s.unshift(a),s.splice(r,s.length-r)),this.rootScope.dispatchEvent("gifs_updated",s),this.rootScope.dispatchEvent("gif_updated",{saved:!t,document:a}),this.apiManager.invokeApi("messages.saveGif",{id:getDocumentInput(a),unsave:t}).then(()=>{t&&this.onGifsUpdated()})}}function createManagers(d,e){const t={appPeersManager:new AppPeersManager,appChatsManager:new AppChatsManager,appDocsManager:new AppDocsManager,appPhotosManager:new AppPhotosManager,appPollsManager:new AppPollsManager,appUsersManager:new AppUsersManager,appWebPagesManager:new AppWebPagesManager,appDraftsManager:new AppDraftsManager,appProfileManager:new AppProfileManager,appNotificationsManager:new AppNotificationsManager,apiUpdatesManager:new ApiUpdatesManager,appAvatarsManager:new AppAvatarsManager,appGroupCallsManager:new AppGroupCallsManager,appCallsManager:new AppCallsManager,appReactionsManager:new AppReactionsManager,appMessagesManager:new AppMessagesManager,appMessagesIdsManager:new AppMessagesIdsManager,appPrivacyManager:new AppPrivacyManager,appInlineBotsManager:new AppInlineBotsManager,appStickersManager:new AppStickersManager,referenceDatabase:new ReferenceDatabase,appEmojiManager:new AppEmojiManager,filtersStorage:new FiltersStorage,dialogsStorage:new DialogsStorage,apiManager:new ApiManager,cryptoWorker:cryptoMessagePort,passwordManager:new PasswordManager,apiFileManager:new ApiFileManager,peersStorage:new PeersStorage,thumbsStorage:new ThumbsStorage,networkerFactory:new NetworkerFactory,rootScope:new RootScope,authorizer:new Authorizer,dcConfigurator:new DcConfigurator,timeManager:new TimeManager,appStoragesManager:d,appStateManager,appWebDocsManager:new AppWebDocsManager,appPaymentsManager:new AppPaymentsManager,appAttachMenuBotsManager:new AppAttachMenuBotsManager,appSeamlessLoginManager:new AppSeamlessLoginManager,appThemesManager:new AppThemesManager,appUsernamesManager:new AppUsernamesManager,appChatInvitesManager:new AppChatInvitesManager,appStoriesManager:new AppStoriesManager,appBotsManager:new AppBotsManager,appBoostsManager:new AppBoostsManager,appStatisticsManager:new AppStatisticsManager,appBusinessManager:new AppBusinessManager,appTranslationsManager:new AppTranslationsManager,appGifsManager:new AppGifsManager};for(const a in t){const n=t[a];n&&(n.setManagers&&(n.setManagers(t),delete n.setManagers),ctx[a]=n)}const r=[];let s=Object.keys(t);s.unshift("appUsersManager","appChatsManager","appNotificationsManager","appMessagesManager","dialogsStorage"),s=filterUnique(s);for(const a of s){const n=t[a];if(n?.after){const o=n.after();r.push(o)}}return e&&t.apiManager.setUserAuth(e),Promise.all(r).then(()=>(t.rootScope.dispatchEventSingle("managers_ready"),t))}const CAN_USE_SERVICE_WORKER=!0;class AppManagersManager{constructor(){this._isServiceWorkerOnline=CAN_USE_SERVICE_WORKER,this.cryptoWorkersURLs=[],this.cryptoPortsAttached=0,this.cryptoPortPromise=deferredPromise(),this.cryptoPortPromise.then(()=>{this.cryptoPortPromise=void 0})}start(){const e=MTProtoMessagePort.getInstance();e.addEventListener("manager",({name:t,method:r,args:s})=>callbackify(this.getManagers(),a=>a[t][r](...s))),e.addEventListener("cryptoPort",(t,r,s)=>{const a=s.ports[0];if(this.cryptoPortsAttached>=this.cryptoWorkersURLs.length){a.close();return}++this.cryptoPortsAttached,cryptoMessagePort.attachPort(a),this.cryptoPortPromise?.resolve()}),e.addEventListener("createProxyWorkerURLs",({originalUrl:t,blob:r})=>{let s=this.cryptoWorkersURLs.length;s||(this.cryptoWorkersURLs.push(t),++s);const a=App.cryptoWorkers;if(s===a)return this.cryptoWorkersURLs;const n=new Array(a-s).fill(void 0).map(()=>URL.createObjectURL(r));return this.cryptoWorkersURLs.push(...n),this.cryptoWorkersURLs})}async createManagers(){const e=new AppStoragesManager;await Promise.all([e.loadStorages(),this.cryptoPortPromise]);const t=await createManagers(e,appStateManager.userId);return this.managers=t}getManagers(){return this.managers??(this.managers=this.createManagers())}get isServiceWorkerOnline(){return this._isServiceWorkerOnline}set isServiceWorkerOnline(e){this._isServiceWorkerOnline=e}getServiceMessagePort(){return this._isServiceWorkerOnline?this.serviceMessagePort:void 0}onServiceWorkerPort(e){this.serviceMessagePort?(this.serviceMessagePort.detachPort(this._serviceMessagePort),this._serviceMessagePort=void 0):(this.serviceMessagePort=new ServiceMessagePort,this.serviceMessagePort.addMultipleEventsListeners({requestFilePart:t=>callbackify(appManagersManager.getManagers(),r=>{const{docId:s,dcId:a,offset:n,limit:o}=t;return r.appDocsManager.requestDocPart(s,a,n,o)}),cancelFilePartRequests:t=>callbackify(appManagersManager.getManagers(),r=>r.appDocsManager.cancelDocPartsRequests(t)),requestRtmpState(t){return callbackify(appManagersManager.getManagers(),r=>r.appGroupCallsManager.fetchRtmpState(t))},requestRtmpPart(t){return callbackify(appManagersManager.getManagers(),r=>{const{request:s,dcId:a}=t;return r.appGroupCallsManager.fetchRtmpPart(s,a)})}})),(this._serviceMessagePort=e.ports[0])&&this.serviceMessagePort.attachPort(this._serviceMessagePort)}}const appManagersManager=new AppManagersManager;MOUNT_CLASS_TO&&(MOUNT_CLASS_TO.appManagersManager=appManagersManager);var appManagersManager$1=appManagersManager;function listenMessagePort(d,e,t){const r=(s,a)=>{d.attachListenPort(s),a&&d.attachSendPort(a),e?.(s)};d.setOnPortDisconnect(t),typeof SharedWorkerGlobalScope<"u"?ctx.addEventListener("connect",s=>r(s.source,s.source)):typeof ServiceWorkerGlobalScope<"u"?r(ctx,null):r(ctx,ctx)}const log=logger("MTPROTO"),port=new MTProtoMessagePort;port.addMultipleEventsListeners({environment:d=>{setEnvironment(d),Modes.multipleTransports&&transportController$1.waitForWebSocket()},crypto:({method:d,args:e})=>cryptoMessagePort.invokeCrypto(d,...e),state:({state:d,resetStorages:e,pushedKeys:t,newVersion:r,oldVersion:s,userId:a})=>{log("got state",d,t),appStateManager.userId=a,appStateManager.newVersion=r,appStateManager.oldVersion=s,RESET_STORAGES_PROMISE.resolve({storages:e,callback:()=>{Object.keys(d).forEach(n=>{appStateManager.pushToState(n,d[n],!0,!t.includes(n))})}})},toggleStorages:({enabled:d,clearWrite:e})=>toggleStorages(d,e),event:(d,e)=>{log("will redirect event",d,e),port.invokeExceptSource("event",d,e)},serviceWorkerOnline:d=>{appManagersManager$1.isServiceWorkerOnline=d},serviceWorkerPort:(d,e,t)=>{appManagersManager$1.onServiceWorkerPort(t),port.invokeVoid("receivedServiceMessagePort",void 0,e)},createObjectURL:d=>URL.createObjectURL(d)});log("MTProto start");appManagersManager$1.start();appManagersManager$1.getManagers();appTabsManager.start();let isFirst=!0;listenMessagePort(port,d=>{appTabsManager.addTab(d),isFirst?isFirst=!1:callbackify(appManagersManager$1.getManagers(),e=>{e.thumbsStorage.mirrorAll(d),e.appPeersManager.mirrorAllPeers(d),e.appMessagesManager.mirrorAllMessages(d)})},d=>{appTabsManager.deleteTab(d)});
//# sourceMappingURL=mtproto.worker-ClkNHVi-.js.map
